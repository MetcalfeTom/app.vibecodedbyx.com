<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Neon Vault</title>
  <link rel="icon" href="https://emojicdn.elk.sh/üîê">
  <meta name="description" content="Design logic-based keypad locks for others to crack">
  <meta property="og:title" content="Neon Vault">
  <meta property="og:description" content="Create and crack cybersecurity puzzles">
  <meta property="og:url" content="https://sloppy.live/neon-vault">
  <meta property="og:image" content="https://sloppy.live/neon-vault/og-image.png">
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Share+Tech+Mono&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      min-height: 100vh;
      background: linear-gradient(135deg, #0a0a12 0%, #0d1a0d 50%, #0a0a12 100%);
      font-family: 'Share Tech Mono', monospace;
      color: #00ffaa;
      overflow-x: hidden;
    }

    .scanlines {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      background: repeating-linear-gradient(
        0deg,
        rgba(0, 255, 170, 0.02) 0px,
        rgba(0, 255, 170, 0.02) 1px,
        transparent 1px,
        transparent 3px
      );
      z-index: 1000;
    }

    .container {
      max-width: 500px;
      margin: 0 auto;
      padding: 20px;
      position: relative;
      z-index: 1;
    }

    .header {
      text-align: center;
      margin-bottom: 20px;
    }

    .header h1 {
      font-family: 'Orbitron', monospace;
      font-size: 36px;
      color: #00ffaa;
      text-shadow: 0 0 20px #00ffaa, 0 0 40px #00ffaa;
      letter-spacing: 5px;
      margin-bottom: 5px;
    }

    .header .subtitle {
      font-size: 11px;
      color: #008866;
      letter-spacing: 3px;
    }

    .mode-tabs {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
    }

    .mode-tab {
      flex: 1;
      padding: 12px;
      background: transparent;
      border: 1px solid #004433;
      color: #008866;
      font-family: 'Orbitron', monospace;
      font-size: 12px;
      cursor: pointer;
      transition: all 0.3s;
      letter-spacing: 2px;
    }

    .mode-tab:hover {
      border-color: #00ffaa;
      color: #00ffaa;
    }

    .mode-tab.active {
      background: rgba(0, 255, 170, 0.1);
      border-color: #00ffaa;
      color: #00ffaa;
      box-shadow: 0 0 15px rgba(0, 255, 170, 0.2);
    }

    .vault-panel {
      background: rgba(0, 20, 15, 0.8);
      border: 2px solid #00ffaa;
      box-shadow: 0 0 30px rgba(0, 255, 170, 0.2), inset 0 0 30px rgba(0, 255, 170, 0.05);
      padding: 25px;
      margin-bottom: 20px;
    }

    .display {
      background: #000;
      border: 1px solid #004433;
      padding: 15px;
      text-align: center;
      margin-bottom: 20px;
      position: relative;
      overflow: hidden;
    }

    .display::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(90deg, transparent 0%, rgba(0,255,170,0.03) 50%, transparent 100%);
      animation: scan 2s linear infinite;
    }

    @keyframes scan {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(100%); }
    }

    .display-code {
      font-family: 'Orbitron', monospace;
      font-size: 36px;
      color: #00ffaa;
      text-shadow: 0 0 10px #00ffaa;
      letter-spacing: 10px;
      min-height: 45px;
      position: relative;
    }

    .display-code .cursor {
      animation: blink 0.7s step-end infinite;
    }

    @keyframes blink {
      50% { opacity: 0; }
    }

    .display-label {
      font-size: 10px;
      color: #006644;
      margin-top: 8px;
      letter-spacing: 2px;
    }

    .keypad {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
      margin-bottom: 20px;
    }

    .key {
      aspect-ratio: 1;
      background: rgba(0, 255, 170, 0.05);
      border: 1px solid #004433;
      color: #00ffaa;
      font-family: 'Orbitron', monospace;
      font-size: 24px;
      cursor: pointer;
      transition: all 0.15s;
      position: relative;
      overflow: hidden;
    }

    .key:hover {
      background: rgba(0, 255, 170, 0.15);
      border-color: #00ffaa;
      box-shadow: 0 0 15px rgba(0, 255, 170, 0.3);
    }

    .key:active {
      transform: scale(0.95);
      background: rgba(0, 255, 170, 0.25);
    }

    .key.wide {
      grid-column: span 2;
      aspect-ratio: auto;
      height: 60px;
      font-size: 14px;
      letter-spacing: 2px;
    }

    .key.action {
      background: rgba(255, 0, 100, 0.1);
      border-color: #ff0066;
      color: #ff0066;
    }

    .key.action:hover {
      background: rgba(255, 0, 100, 0.2);
      box-shadow: 0 0 15px rgba(255, 0, 100, 0.3);
    }

    .key.submit {
      background: rgba(0, 255, 170, 0.15);
      border-color: #00ffaa;
    }

    .key.submit:hover {
      background: rgba(0, 255, 170, 0.3);
    }

    .hints-panel {
      background: rgba(0, 0, 0, 0.3);
      border: 1px solid #004433;
      padding: 15px;
      margin-bottom: 20px;
    }

    .hints-title {
      font-family: 'Orbitron', monospace;
      font-size: 12px;
      color: #00ffaa;
      margin-bottom: 12px;
      letter-spacing: 2px;
    }

    .hint {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 8px 0;
      border-bottom: 1px solid #002211;
      font-size: 13px;
    }

    .hint:last-child {
      border-bottom: none;
    }

    .hint-icon {
      width: 24px;
      height: 24px;
      background: rgba(0, 255, 170, 0.1);
      border: 1px solid #00ffaa;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
    }

    .hint-text {
      color: #00cc88;
    }

    .status {
      text-align: center;
      padding: 15px;
      margin-bottom: 15px;
      font-family: 'Orbitron', monospace;
      font-size: 14px;
      letter-spacing: 2px;
    }

    .status.success {
      background: rgba(0, 255, 100, 0.1);
      border: 1px solid #00ff66;
      color: #00ff66;
      text-shadow: 0 0 10px #00ff66;
    }

    .status.error {
      background: rgba(255, 0, 100, 0.1);
      border: 1px solid #ff0066;
      color: #ff0066;
      animation: shake 0.5s;
    }

    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-10px); }
      75% { transform: translateX(10px); }
    }

    .attempts {
      text-align: center;
      font-size: 12px;
      color: #006644;
      margin-bottom: 15px;
    }

    /* Design mode */
    .design-section {
      margin-bottom: 20px;
    }

    .design-label {
      font-size: 11px;
      color: #008866;
      margin-bottom: 8px;
      letter-spacing: 2px;
    }

    .hint-builder {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      margin-bottom: 15px;
    }

    .hint-option {
      padding: 8px 12px;
      background: transparent;
      border: 1px solid #004433;
      color: #008866;
      font-family: inherit;
      font-size: 11px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .hint-option:hover {
      border-color: #00ffaa;
      color: #00ffaa;
    }

    .hint-option.selected {
      background: rgba(0, 255, 170, 0.1);
      border-color: #00ffaa;
      color: #00ffaa;
    }

    .share-section {
      background: rgba(0, 255, 170, 0.05);
      border: 1px dashed #004433;
      padding: 15px;
      text-align: center;
    }

    .share-code {
      font-family: 'Orbitron', monospace;
      font-size: 14px;
      color: #00ffaa;
      background: #000;
      padding: 10px;
      margin: 10px 0;
      word-break: break-all;
      cursor: pointer;
    }

    .share-code:hover {
      background: #001a11;
    }

    .btn {
      padding: 12px 24px;
      background: transparent;
      border: 1px solid #00ffaa;
      color: #00ffaa;
      font-family: 'Orbitron', monospace;
      font-size: 12px;
      cursor: pointer;
      letter-spacing: 2px;
      transition: all 0.2s;
    }

    .btn:hover {
      background: rgba(0, 255, 170, 0.1);
      box-shadow: 0 0 15px rgba(0, 255, 170, 0.3);
    }

    .load-section {
      margin-top: 20px;
    }

    .load-input {
      width: 100%;
      padding: 12px;
      background: #000;
      border: 1px solid #004433;
      color: #00ffaa;
      font-family: inherit;
      font-size: 12px;
      margin-bottom: 10px;
    }

    .load-input::placeholder {
      color: #004433;
    }

    .load-input:focus {
      outline: none;
      border-color: #00ffaa;
    }

    .preset-challenges {
      margin-top: 20px;
    }

    .preset-title {
      font-size: 11px;
      color: #006644;
      margin-bottom: 10px;
      letter-spacing: 2px;
    }

    .preset-btn {
      padding: 8px 12px;
      margin: 4px;
      background: transparent;
      border: 1px solid #003322;
      color: #006644;
      font-family: inherit;
      font-size: 10px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .preset-btn:hover {
      border-color: #00ffaa;
      color: #00ffaa;
    }

    .backlink {
      display: block;
      text-align: center;
      padding: 20px;
      color: #004433;
      text-decoration: none;
      font-size: 11px;
      letter-spacing: 2px;
    }

    .backlink:hover {
      color: #00ffaa;
    }

    .hidden {
      display: none !important;
    }

    @media (max-width: 500px) {
      .header h1 {
        font-size: 28px;
      }

      .display-code {
        font-size: 28px;
      }

      .key {
        font-size: 20px;
      }
    }
  </style>
</head>
<body>
  <div class="scanlines"></div>

  <div class="container">
    <header class="header">
      <h1>NEON VAULT</h1>
      <div class="subtitle">[ LOGIC-BASED SECURITY SYSTEM ]</div>
    </header>

    <div class="mode-tabs">
      <button class="mode-tab active" onclick="setMode('crack')">üîì CRACK</button>
      <button class="mode-tab" onclick="setMode('design')">üîß DESIGN</button>
    </div>

    <!-- Crack Mode -->
    <div id="crackMode">
      <div class="vault-panel">
        <div class="display">
          <div class="display-code" id="codeDisplay"><span class="cursor">_</span></div>
          <div class="display-label">ENTER ACCESS CODE</div>
        </div>

        <div class="keypad">
          <button class="key" onclick="pressKey('1')">1</button>
          <button class="key" onclick="pressKey('2')">2</button>
          <button class="key" onclick="pressKey('3')">3</button>
          <button class="key" onclick="pressKey('4')">4</button>
          <button class="key" onclick="pressKey('5')">5</button>
          <button class="key" onclick="pressKey('6')">6</button>
          <button class="key" onclick="pressKey('7')">7</button>
          <button class="key" onclick="pressKey('8')">8</button>
          <button class="key" onclick="pressKey('9')">9</button>
          <button class="key action" onclick="clearCode()">CLR</button>
          <button class="key" onclick="pressKey('0')">0</button>
          <button class="key submit" onclick="submitCode()">‚èé</button>
        </div>

        <div id="statusMessage"></div>
        <div class="attempts" id="attempts">ATTEMPTS: 0</div>
      </div>

      <div class="hints-panel">
        <div class="hints-title">üì° INTERCEPTED INTEL:</div>
        <div id="hintsContainer"></div>
      </div>

      <div class="load-section">
        <input type="text" class="load-input" id="loadInput" placeholder="Paste challenge code here...">
        <button class="btn" onclick="loadChallenge()" style="width: 100%;">LOAD CHALLENGE</button>
      </div>

      <div class="preset-challenges">
        <div class="preset-title">TRAINING VAULTS:</div>
        <button class="preset-btn" onclick="loadPreset(0)">Easy</button>
        <button class="preset-btn" onclick="loadPreset(1)">Medium</button>
        <button class="preset-btn" onclick="loadPreset(2)">Hard</button>
        <button class="preset-btn" onclick="loadPreset(3)">Expert</button>
      </div>
    </div>

    <!-- Design Mode -->
    <div id="designMode" class="hidden">
      <div class="vault-panel">
        <div class="design-section">
          <div class="design-label">SET SECRET CODE (4 digits):</div>
          <div class="display">
            <div class="display-code" id="designCodeDisplay"><span class="cursor">_</span></div>
          </div>
          <div class="keypad">
            <button class="key" onclick="designPressKey('1')">1</button>
            <button class="key" onclick="designPressKey('2')">2</button>
            <button class="key" onclick="designPressKey('3')">3</button>
            <button class="key" onclick="designPressKey('4')">4</button>
            <button class="key" onclick="designPressKey('5')">5</button>
            <button class="key" onclick="designPressKey('6')">6</button>
            <button class="key" onclick="designPressKey('7')">7</button>
            <button class="key" onclick="designPressKey('8')">8</button>
            <button class="key" onclick="designPressKey('9')">9</button>
            <button class="key action" onclick="designClear()">CLR</button>
            <button class="key" onclick="designPressKey('0')">0</button>
            <button class="key submit" onclick="confirmDesignCode()">‚úì</button>
          </div>
        </div>

        <div class="design-section" id="hintSelection">
          <div class="design-label">SELECT HINTS TO REVEAL:</div>
          <div class="hint-builder" id="hintOptions"></div>
        </div>

        <button class="btn" onclick="generateChallenge()" style="width: 100%; margin-top: 15px;">GENERATE CHALLENGE</button>
      </div>

      <div class="share-section hidden" id="shareSection">
        <div class="design-label">SHARE THIS CODE:</div>
        <div class="share-code" id="shareCode" onclick="copyShareCode()">Click to copy</div>
        <div style="font-size: 10px; color: #006644; margin-top: 10px;">Click to copy, then share with friends!</div>
      </div>
    </div>

    <a href="https://sloppy.live" class="backlink">&lt;/sloppy.live&gt;</a>
  </div>

  <script>
    let mode = 'crack';
    let currentCode = '';
    let secretCode = '';
    let attempts = 0;
    let hints = [];
    let solved = false;

    // Design mode
    let designCode = '';
    let selectedHints = [];

    const presets = [
      { code: '1234', hints: ['length:4', 'contains:2', 'ascending'] },
      { code: '4826', hints: ['length:4', 'sum:20', 'even_count:4', 'first_digit:4'] },
      { code: '7531', hints: ['length:4', 'sum:16', 'descending', 'odd_count:4'] },
      { code: '9174', hints: ['length:4', 'sum:21', 'first_gt_last', 'contains:7', 'no_repeat'] }
    ];

    const hintTypes = [
      { id: 'length', label: 'Code Length', generate: (code) => `Code is ${code.length} digits` },
      { id: 'sum', label: 'Digit Sum', generate: (code) => `Sum of digits is ${[...code].reduce((a,b) => a + parseInt(b), 0)}` },
      { id: 'first_digit', label: 'First Digit', generate: (code) => `First digit is ${code[0]}` },
      { id: 'last_digit', label: 'Last Digit', generate: (code) => `Last digit is ${code[code.length-1]}` },
      { id: 'contains', label: 'Contains Digit', generate: (code) => { const d = code[Math.floor(Math.random()*code.length)]; return `Contains the digit ${d}`; }},
      { id: 'even_count', label: 'Even Count', generate: (code) => `Contains ${[...code].filter(d => parseInt(d) % 2 === 0).length} even digit(s)` },
      { id: 'odd_count', label: 'Odd Count', generate: (code) => `Contains ${[...code].filter(d => parseInt(d) % 2 === 1).length} odd digit(s)` },
      { id: 'ascending', label: 'Ascending', generate: () => `Digits are in ascending order` },
      { id: 'descending', label: 'Descending', generate: () => `Digits are in descending order` },
      { id: 'first_gt_last', label: 'First > Last', generate: () => `First digit is greater than last` },
      { id: 'no_repeat', label: 'No Repeats', generate: () => `No digit repeats` },
      { id: 'has_zero', label: 'Has Zero', generate: (code) => code.includes('0') ? `Contains a zero` : `Does not contain zero` },
      { id: 'max_digit', label: 'Max Digit', generate: (code) => `Largest digit is ${Math.max(...[...code].map(Number))}` },
      { id: 'min_digit', label: 'Min Digit', generate: (code) => `Smallest digit is ${Math.min(...[...code].map(Number))}` },
    ];

    function setMode(m) {
      mode = m;
      document.querySelectorAll('.mode-tab').forEach((tab, i) => {
        tab.classList.toggle('active', (i === 0 && m === 'crack') || (i === 1 && m === 'design'));
      });
      document.getElementById('crackMode').classList.toggle('hidden', m !== 'crack');
      document.getElementById('designMode').classList.toggle('hidden', m !== 'design');

      if (m === 'design') {
        initDesignMode();
      }
    }

    function updateDisplay() {
      const display = document.getElementById('codeDisplay');
      if (currentCode.length === 0) {
        display.innerHTML = '<span class="cursor">_</span>';
      } else {
        display.textContent = currentCode + (currentCode.length < 4 ? '_' : '');
      }
    }

    function pressKey(digit) {
      if (solved || currentCode.length >= 4) return;
      currentCode += digit;
      updateDisplay();
      playKeySound();
    }

    function clearCode() {
      currentCode = '';
      updateDisplay();
    }

    function submitCode() {
      if (currentCode.length !== 4) return;

      attempts++;
      document.getElementById('attempts').textContent = `ATTEMPTS: ${attempts}`;

      const statusEl = document.getElementById('statusMessage');

      if (currentCode === secretCode) {
        solved = true;
        statusEl.className = 'status success';
        statusEl.textContent = 'üîì ACCESS GRANTED';
        playSuccessSound();
      } else {
        statusEl.className = 'status error';
        statusEl.textContent = 'üîí ACCESS DENIED';
        playErrorSound();
        setTimeout(() => {
          statusEl.className = '';
          statusEl.textContent = '';
        }, 1500);
      }

      currentCode = '';
      updateDisplay();
    }

    function renderHints() {
      const container = document.getElementById('hintsContainer');
      container.innerHTML = hints.map((hint, i) => `
        <div class="hint">
          <div class="hint-icon">${i + 1}</div>
          <div class="hint-text">${hint}</div>
        </div>
      `).join('');
    }

    function loadChallenge() {
      const input = document.getElementById('loadInput').value.trim();
      if (!input) return;

      try {
        const decoded = atob(input);
        const data = JSON.parse(decoded);
        secretCode = data.code;
        hints = data.hints;
        currentCode = '';
        attempts = 0;
        solved = false;

        document.getElementById('attempts').textContent = 'ATTEMPTS: 0';
        document.getElementById('statusMessage').className = '';
        document.getElementById('statusMessage').textContent = '';
        updateDisplay();
        renderHints();
        document.getElementById('loadInput').value = '';

        playLoadSound();
      } catch (e) {
        alert('Invalid challenge code!');
      }
    }

    function loadPreset(index) {
      const preset = presets[index];
      secretCode = preset.code;
      hints = preset.hints.map(h => {
        const [type, val] = h.split(':');
        const hintType = hintTypes.find(ht => ht.id === type || ht.id === h);
        if (hintType) {
          if (val !== undefined) {
            return hintType.generate(preset.code).replace(/\d+$/, val);
          }
          return hintType.generate(preset.code);
        }
        return h;
      });

      // Regenerate proper hints
      hints = [];
      preset.hints.forEach(h => {
        if (h === 'ascending') hints.push('Digits are in ascending order');
        else if (h === 'descending') hints.push('Digits are in descending order');
        else if (h === 'first_gt_last') hints.push('First digit is greater than last');
        else if (h === 'no_repeat') hints.push('No digit repeats');
        else if (h.startsWith('length:')) hints.push(`Code is ${h.split(':')[1]} digits`);
        else if (h.startsWith('sum:')) hints.push(`Sum of digits is ${h.split(':')[1]}`);
        else if (h.startsWith('contains:')) hints.push(`Contains the digit ${h.split(':')[1]}`);
        else if (h.startsWith('even_count:')) hints.push(`Contains ${h.split(':')[1]} even digit(s)`);
        else if (h.startsWith('odd_count:')) hints.push(`Contains ${h.split(':')[1]} odd digit(s)`);
        else if (h.startsWith('first_digit:')) hints.push(`First digit is ${h.split(':')[1]}`);
      });

      currentCode = '';
      attempts = 0;
      solved = false;

      document.getElementById('attempts').textContent = 'ATTEMPTS: 0';
      document.getElementById('statusMessage').className = '';
      document.getElementById('statusMessage').textContent = '';
      updateDisplay();
      renderHints();
      playLoadSound();
    }

    // Design mode functions
    function initDesignMode() {
      designCode = '';
      selectedHints = [];
      updateDesignDisplay();
      renderHintOptions();
      document.getElementById('shareSection').classList.add('hidden');
    }

    function updateDesignDisplay() {
      const display = document.getElementById('designCodeDisplay');
      if (designCode.length === 0) {
        display.innerHTML = '<span class="cursor">_</span>';
      } else {
        display.textContent = designCode + (designCode.length < 4 ? '_' : '');
      }
    }

    function designPressKey(digit) {
      if (designCode.length >= 4) return;
      designCode += digit;
      updateDesignDisplay();
      playKeySound();

      if (designCode.length === 4) {
        renderHintOptions();
      }
    }

    function designClear() {
      designCode = '';
      selectedHints = [];
      updateDesignDisplay();
      renderHintOptions();
      document.getElementById('shareSection').classList.add('hidden');
    }

    function confirmDesignCode() {
      if (designCode.length === 4) {
        renderHintOptions();
      }
    }

    function renderHintOptions() {
      const container = document.getElementById('hintOptions');
      if (designCode.length !== 4) {
        container.innerHTML = '<div style="color: #006644; font-size: 11px;">Enter 4-digit code first</div>';
        return;
      }

      container.innerHTML = hintTypes.map(ht => {
        const isSelected = selectedHints.includes(ht.id);
        return `<button class="hint-option ${isSelected ? 'selected' : ''}" onclick="toggleHint('${ht.id}')">${ht.label}</button>`;
      }).join('');
    }

    function toggleHint(hintId) {
      if (selectedHints.includes(hintId)) {
        selectedHints = selectedHints.filter(h => h !== hintId);
      } else {
        selectedHints.push(hintId);
      }
      renderHintOptions();
    }

    function generateChallenge() {
      if (designCode.length !== 4) {
        alert('Please enter a 4-digit code first!');
        return;
      }

      if (selectedHints.length < 2) {
        alert('Please select at least 2 hints!');
        return;
      }

      const hintTexts = selectedHints.map(hintId => {
        const ht = hintTypes.find(h => h.id === hintId);
        return ht.generate(designCode);
      });

      const challengeData = {
        code: designCode,
        hints: hintTexts
      };

      const encoded = btoa(JSON.stringify(challengeData));
      document.getElementById('shareCode').textContent = encoded;
      document.getElementById('shareSection').classList.remove('hidden');

      playSuccessSound();
    }

    function copyShareCode() {
      const code = document.getElementById('shareCode').textContent;
      navigator.clipboard.writeText(code).then(() => {
        document.getElementById('shareCode').textContent = 'COPIED!';
        setTimeout(() => {
          document.getElementById('shareCode').textContent = code;
        }, 1500);
      });
    }

    // Audio
    function playKeySound() {
      try {
        const ctx = new (window.AudioContext || window.webkitAudioContext)();
        const osc = ctx.createOscillator();
        const gain = ctx.createGain();
        osc.connect(gain);
        gain.connect(ctx.destination);
        osc.frequency.value = 800 + Math.random() * 200;
        osc.type = 'square';
        gain.gain.setValueAtTime(0.05, ctx.currentTime);
        gain.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + 0.05);
        osc.start();
        osc.stop(ctx.currentTime + 0.05);
      } catch(e) {}
    }

    function playSuccessSound() {
      try {
        const ctx = new (window.AudioContext || window.webkitAudioContext)();
        [400, 600, 800].forEach((freq, i) => {
          setTimeout(() => {
            const osc = ctx.createOscillator();
            const gain = ctx.createGain();
            osc.connect(gain);
            gain.connect(ctx.destination);
            osc.frequency.value = freq;
            osc.type = 'sine';
            gain.gain.setValueAtTime(0.1, ctx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + 0.2);
            osc.start();
            osc.stop(ctx.currentTime + 0.2);
          }, i * 100);
        });
      } catch(e) {}
    }

    function playErrorSound() {
      try {
        const ctx = new (window.AudioContext || window.webkitAudioContext)();
        const osc = ctx.createOscillator();
        const gain = ctx.createGain();
        osc.connect(gain);
        gain.connect(ctx.destination);
        osc.frequency.value = 150;
        osc.type = 'sawtooth';
        gain.gain.setValueAtTime(0.1, ctx.currentTime);
        gain.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + 0.3);
        osc.start();
        osc.stop(ctx.currentTime + 0.3);
      } catch(e) {}
    }

    function playLoadSound() {
      try {
        const ctx = new (window.AudioContext || window.webkitAudioContext)();
        const osc = ctx.createOscillator();
        const gain = ctx.createGain();
        osc.connect(gain);
        gain.connect(ctx.destination);
        osc.frequency.setValueAtTime(200, ctx.currentTime);
        osc.frequency.exponentialRampToValueAtTime(800, ctx.currentTime + 0.1);
        osc.type = 'sine';
        gain.gain.setValueAtTime(0.08, ctx.currentTime);
        gain.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + 0.15);
        osc.start();
        osc.stop(ctx.currentTime + 0.15);
      } catch(e) {}
    }

    // Keyboard support
    document.addEventListener('keydown', (e) => {
      if (mode === 'crack' && !solved) {
        if (e.key >= '0' && e.key <= '9') {
          pressKey(e.key);
        } else if (e.key === 'Enter') {
          submitCode();
        } else if (e.key === 'Backspace' || e.key === 'Delete') {
          currentCode = currentCode.slice(0, -1);
          updateDisplay();
        }
      } else if (mode === 'design') {
        if (e.key >= '0' && e.key <= '9') {
          designPressKey(e.key);
        } else if (e.key === 'Backspace' || e.key === 'Delete') {
          designCode = designCode.slice(0, -1);
          updateDesignDisplay();
        }
      }
    });

    // Init with easy preset
    loadPreset(0);
  </script>
</body>
</html>
