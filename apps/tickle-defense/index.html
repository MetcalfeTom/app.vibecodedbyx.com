<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>Tickle Defense - Protect the Grumpy Robot</title>
  <link rel="icon" href="https://emojicdn.elk.sh/ü§ñ">
  <meta name="description" content="Frantically swat away tickling hands to protect the grumpy robot!">
  <meta property="og:title" content="Tickle Defense">
  <meta property="og:description" content="Frantically swat away tickling hands to protect the grumpy robot!">
  <meta property="og:url" content="https://sloppy.live/tickle-defense">
  <meta property="og:image" content="https://sloppy.live/tickle-defense/og-image.png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Bangers&family=Roboto+Mono:wght@700&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; user-select: none; -webkit-user-select: none; }
    :root {
      --robot-gray: #5a6a7a;
      --robot-dark: #3a4a5a;
      --robot-light: #8a9aaa;
      --danger-red: #ff3344;
      --safe-green: #44ff66;
      --warning-yellow: #ffcc00;
      --bg-dark: #1a1a2e;
    }
    body {
      font-family: 'Bangers', cursive;
      background: var(--bg-dark);
      min-height: 100vh;
      overflow: hidden;
      touch-action: manipulation;
    }
    .game-container {
      position: relative;
      width: 100vw;
      height: 100vh;
      background: radial-gradient(ellipse at center, #2a2a4e 0%, #1a1a2e 70%);
    }
    .game-header {
      position: absolute;
      top: 0; left: 0; right: 0;
      padding: 15px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      z-index: 100;
      background: linear-gradient(to bottom, rgba(0,0,0,0.5), transparent);
    }
    .score {
      font-size: 2rem;
      color: #fff;
      text-shadow: 2px 2px 0 #000, 0 0 10px var(--warning-yellow);
      letter-spacing: 2px;
    }
    .grump-meter { display: flex; align-items: center; gap: 10px; }
    .grump-label { font-size: 1rem; color: #fff; text-shadow: 1px 1px 0 #000; }
    .grump-bar {
      width: 150px; height: 25px;
      background: #222;
      border: 3px solid #444;
      border-radius: 5px;
      overflow: hidden;
    }
    .grump-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--danger-red), var(--warning-yellow), var(--safe-green));
      transition: width 0.3s;
      box-shadow: 0 0 10px currentColor;
    }
    .robot {
      position: absolute;
      left: 50%; top: 50%;
      transform: translate(-50%, -50%);
      width: 180px; height: 220px;
      z-index: 50;
    }
    .robot-head {
      width: 120px; height: 100px;
      background: linear-gradient(135deg, var(--robot-light), var(--robot-gray), var(--robot-dark));
      border-radius: 20px 20px 10px 10px;
      margin: 0 auto;
      position: relative;
      box-shadow: inset 0 -10px 20px rgba(0,0,0,0.3), 0 5px 15px rgba(0,0,0,0.5);
      border: 3px solid var(--robot-dark);
    }
    .robot-eyes { display: flex; justify-content: space-around; padding-top: 25px; }
    .robot-eye {
      width: 35px; height: 25px;
      background: #111;
      border-radius: 5px;
      position: relative;
      overflow: hidden;
      border: 2px solid #333;
    }
    .robot-eye::after {
      content: '';
      position: absolute;
      width: 15px; height: 15px;
      background: #ff0000;
      border-radius: 50%;
      top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      box-shadow: 0 0 10px #ff0000, 0 0 20px #ff0000;
      transition: all 0.1s;
    }
    .robot.tickled .robot-eye::after {
      background: #00ffff;
      animation: eyePanic 0.1s infinite;
    }
    @keyframes eyePanic {
      0%, 100% { transform: translate(-50%, -50%); }
      50% { transform: translate(-30%, -50%); }
    }
    .robot-mouth {
      width: 50px; height: 15px;
      background: #111;
      margin: 15px auto 0;
      border-radius: 3px;
      position: relative;
      border: 2px solid #333;
    }
    .robot.grumpy .robot-mouth { border-radius: 0 0 10px 10px; height: 8px; }
    .robot.tickled .robot-mouth {
      width: 40px; height: 30px;
      border-radius: 50%;
      animation: laughMouth 0.15s infinite;
    }
    @keyframes laughMouth {
      0%, 100% { transform: scaleY(1); }
      50% { transform: scaleY(0.7); }
    }
    .robot-antenna {
      width: 8px; height: 30px;
      background: var(--robot-gray);
      margin: 0 auto;
      position: relative;
      top: -3px;
    }
    .robot-antenna::after {
      content: '';
      position: absolute;
      top: -12px; left: 50%;
      transform: translateX(-50%);
      width: 16px; height: 16px;
      background: var(--danger-red);
      border-radius: 50%;
      box-shadow: 0 0 10px var(--danger-red);
      animation: antennaBlink 1s infinite;
    }
    @keyframes antennaBlink { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
    .robot-body {
      width: 100px; height: 80px;
      background: linear-gradient(135deg, var(--robot-light), var(--robot-gray), var(--robot-dark));
      margin: 5px auto 0;
      border-radius: 10px;
      position: relative;
      box-shadow: inset 0 -10px 20px rgba(0,0,0,0.3), 0 5px 15px rgba(0,0,0,0.5);
      border: 3px solid var(--robot-dark);
    }
    .robot-chest { display: flex; justify-content: center; gap: 8px; padding-top: 15px; }
    .robot-light {
      width: 12px; height: 12px;
      border-radius: 50%;
      background: var(--safe-green);
      box-shadow: 0 0 10px var(--safe-green);
    }
    .robot.tickled .robot-light { animation: panicLights 0.2s infinite; }
    @keyframes panicLights {
      0% { background: var(--danger-red); box-shadow: 0 0 10px var(--danger-red); }
      33% { background: var(--warning-yellow); box-shadow: 0 0 10px var(--warning-yellow); }
      66% { background: var(--safe-green); box-shadow: 0 0 10px var(--safe-green); }
    }
    .robot-arms {
      position: absolute;
      width: 140%; left: -20%; top: 20px;
      display: flex;
      justify-content: space-between;
    }
    .robot-arm {
      width: 20px; height: 50px;
      background: var(--robot-gray);
      border-radius: 10px;
      box-shadow: 0 3px 10px rgba(0,0,0,0.3);
    }
    .robot.tickled { animation: robotShake 0.1s infinite; }
    @keyframes robotShake {
      0%, 100% { transform: translate(-50%, -50%) rotate(-2deg); }
      50% { transform: translate(-50%, -50%) rotate(2deg); }
    }
    .tickle-text {
      position: absolute;
      font-size: 1.5rem;
      color: var(--warning-yellow);
      text-shadow: 2px 2px 0 #000;
      pointer-events: none;
      animation: tickleFloat 0.5s forwards;
      z-index: 200;
    }
    @keyframes tickleFloat {
      0% { opacity: 1; transform: translateY(0) scale(1); }
      100% { opacity: 0; transform: translateY(-50px) scale(1.5); }
    }
    .tickle-hand {
      position: absolute;
      width: 120px; height: 150px;
      cursor: pointer;
      z-index: 80;
      transition: transform 0.1s;
      filter: drop-shadow(0 5px 15px rgba(0,0,0,0.5));
    }
    .tickle-hand:hover { transform: scale(1.1); }
    .tickle-hand:active { transform: scale(0.9); }
    .hand-svg { width: 100%; height: 100%; }
    .tickle-hand.wiggle { animation: handWiggle 0.3s infinite; }
    @keyframes handWiggle {
      0%, 100% { transform: rotate(-5deg); }
      50% { transform: rotate(5deg); }
    }
    .swat-effect {
      position: absolute;
      width: 100px; height: 100px;
      pointer-events: none;
      z-index: 300;
    }
    .swat-effect::after {
      content: 'SWAT!';
      position: absolute;
      font-family: 'Bangers', cursive;
      font-size: 2rem;
      color: var(--danger-red);
      text-shadow: 2px 2px 0 #000, 0 0 10px var(--danger-red);
      animation: swatPop 0.4s forwards;
    }
    @keyframes swatPop {
      0% { opacity: 1; transform: scale(0.5) rotate(-10deg); }
      50% { transform: scale(1.3) rotate(10deg); }
      100% { opacity: 0; transform: scale(1) rotate(0deg) translateY(-30px); }
    }
    .start-screen {
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.85);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 500;
    }
    .start-screen h1 {
      font-size: 3rem;
      color: var(--warning-yellow);
      text-shadow: 3px 3px 0 var(--danger-red), 0 0 30px var(--warning-yellow);
      margin-bottom: 20px;
      animation: titlePulse 1s infinite;
    }
    @keyframes titlePulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
    .start-screen p {
      font-family: 'Roboto Mono', monospace;
      font-size: 1rem;
      color: #aaa;
      margin-bottom: 30px;
      text-align: center;
      padding: 0 20px;
    }
    .start-btn {
      font-family: 'Bangers', cursive;
      font-size: 2rem;
      padding: 15px 50px;
      background: var(--safe-green);
      color: #000;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      box-shadow: 0 5px 0 #22aa44, 0 10px 20px rgba(0,0,0,0.5);
      transition: all 0.1s;
      letter-spacing: 2px;
    }
    .start-btn:hover { transform: translateY(-3px); box-shadow: 0 8px 0 #22aa44, 0 15px 25px rgba(0,0,0,0.5); }
    .start-btn:active { transform: translateY(3px); box-shadow: 0 2px 0 #22aa44, 0 5px 10px rgba(0,0,0,0.5); }
    .game-over {
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.9);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 500;
    }
    .game-over h2 {
      font-size: 2.5rem;
      color: var(--danger-red);
      text-shadow: 3px 3px 0 #000, 0 0 20px var(--danger-red);
      margin-bottom: 10px;
    }
    .game-over .final-score { font-size: 1.5rem; color: var(--warning-yellow); margin-bottom: 10px; }
    .game-over p { font-family: 'Roboto Mono', monospace; font-size: 0.9rem; color: #888; margin-bottom: 30px; }
    .hidden { display: none !important; }
    footer {
      position: absolute;
      bottom: 10px; left: 0; right: 0;
      text-align: center;
      font-family: 'Roboto Mono', monospace;
      font-size: 0.7rem;
      color: #555;
      z-index: 10;
    }
    footer a { color: var(--warning-yellow); text-decoration: none; }
    .laugh-bubble {
      position: absolute;
      font-size: 1.2rem;
      pointer-events: none;
      animation: laughFloat 1s forwards;
      z-index: 150;
    }
    @keyframes laughFloat {
      0% { opacity: 1; transform: translateY(0) scale(1); }
      100% { opacity: 0; transform: translateY(-80px) scale(0.5); }
    }
    @media (max-width: 600px) {
      .start-screen h1 { font-size: 2rem; }
      .score { font-size: 1.5rem; }
      .grump-bar { width: 100px; }
      .robot { transform: translate(-50%, -50%) scale(0.8); }
      .tickle-hand { width: 90px; height: 110px; }
    }
  </style>
</head>
<body>
  <div class="game-container" id="gameContainer">
    <div class="game-header">
      <div class="score">SCORE: <span id="scoreValue">0</span></div>
      <div class="grump-meter">
        <span class="grump-label">GRUMP</span>
        <div class="grump-bar">
          <div class="grump-fill" id="grumpFill" style="width: 100%"></div>
        </div>
      </div>
    </div>
    <div class="robot grumpy" id="robot">
      <div class="robot-antenna"></div>
      <div class="robot-head">
        <div class="robot-eyes">
          <div class="robot-eye"></div>
          <div class="robot-eye"></div>
        </div>
        <div class="robot-mouth"></div>
      </div>
      <div class="robot-body">
        <div class="robot-chest">
          <div class="robot-light"></div>
          <div class="robot-light"></div>
          <div class="robot-light"></div>
        </div>
        <div class="robot-arms">
          <div class="robot-arm"></div>
          <div class="robot-arm"></div>
        </div>
      </div>
    </div>
    <div class="start-screen" id="startScreen">
      <h1>TICKLE DEFENSE</h1>
      <p>Protect the grumpy robot from tickling hands!<br>Click/tap the hands to swat them away!</p>
      <button class="start-btn" id="startBtn">START!</button>
    </div>
    <div class="game-over hidden" id="gameOver">
      <h2>ROBOT BROKE DOWN!</h2>
      <div class="final-score">SCORE: <span id="finalScore">0</span></div>
      <p>Too much tickling overloaded the circuits!</p>
      <button class="start-btn" id="restartBtn">TRY AGAIN</button>
    </div>
    <footer><a href="https://sloppy.live">‚Üê back to sloppy.live</a></footer>
  </div>
  <script>
    let score = 0, grumpLevel = 100, gameActive = false, hands = [];
    let spawnInterval = null, tickleInterval = null, difficultyInterval = null, difficulty = 1;
    const gameContainer = document.getElementById('gameContainer');
    const robot = document.getElementById('robot');
    const scoreValue = document.getElementById('scoreValue');
    const grumpFill = document.getElementById('grumpFill');
    const startScreen = document.getElementById('startScreen');
    const gameOver = document.getElementById('gameOver');
    const finalScore = document.getElementById('finalScore');
    let robotRect = null;
    function updateRobotRect() { robotRect = robot.getBoundingClientRect(); }
    function createHandSVG(flipped = false) {
      const skinTones = ['#ffdbac', '#f1c27d', '#e0ac69', '#c68642', '#8d5524'];
      const skinTone = skinTones[Math.floor(Math.random() * skinTones.length)];
      const darkerTone = shadeColor(skinTone, -20);
      return '<svg class="hand-svg" viewBox="0 0 100 130" style="transform: scaleX('+(flipped ? -1 : 1)+')">'+
        '<ellipse cx="50" cy="80" rx="35" ry="40" fill="'+skinTone+'" stroke="'+darkerTone+'" stroke-width="2"/>'+
        '<ellipse cx="20" cy="60" rx="12" ry="20" fill="'+skinTone+'" stroke="'+darkerTone+'" stroke-width="1.5" transform="rotate(-30 20 60)"/>'+
        '<rect x="25" y="5" width="14" height="55" rx="7" fill="'+skinTone+'" stroke="'+darkerTone+'" stroke-width="1.5"><animate attributeName="y" values="5;3;5" dur="0.3s" repeatCount="indefinite"/></rect>'+
        '<rect x="43" y="0" width="14" height="60" rx="7" fill="'+skinTone+'" stroke="'+darkerTone+'" stroke-width="1.5"><animate attributeName="y" values="0;-2;0" dur="0.25s" repeatCount="indefinite"/></rect>'+
        '<rect x="61" y="5" width="13" height="52" rx="6.5" fill="'+skinTone+'" stroke="'+darkerTone+'" stroke-width="1.5"><animate attributeName="y" values="5;3;5" dur="0.35s" repeatCount="indefinite"/></rect>'+
        '<rect x="77" y="15" width="11" height="42" rx="5.5" fill="'+skinTone+'" stroke="'+darkerTone+'" stroke-width="1.5"><animate attributeName="y" values="15;13;15" dur="0.28s" repeatCount="indefinite"/></rect>'+
        '<line x1="28" y1="35" x2="36" y2="35" stroke="'+darkerTone+'" stroke-width="1" opacity="0.5"/>'+
        '<line x1="46" y1="33" x2="54" y2="33" stroke="'+darkerTone+'" stroke-width="1" opacity="0.5"/>'+
        '<line x1="63" y1="35" x2="71" y2="35" stroke="'+darkerTone+'" stroke-width="1" opacity="0.5"/>'+
        '<line x1="79" y1="38" x2="86" y2="38" stroke="'+darkerTone+'" stroke-width="1" opacity="0.5"/>'+
        '<path d="M 30 70 Q 50 60 70 70" stroke="'+darkerTone+'" stroke-width="1" fill="none" opacity="0.4"/>'+
        '<path d="M 25 85 Q 50 75 75 85" stroke="'+darkerTone+'" stroke-width="1" fill="none" opacity="0.4"/>'+
        '<rect x="35" y="115" width="30" height="20" rx="5" fill="'+skinTone+'" stroke="'+darkerTone+'" stroke-width="2"/></svg>';
    }
    function shadeColor(color, percent) {
      const num = parseInt(color.replace('#', ''), 16);
      const amt = Math.round(2.55 * percent);
      const R = Math.min(255, Math.max(0, (num >> 16) + amt));
      const G = Math.min(255, Math.max(0, (num >> 8 & 0x00FF) + amt));
      const B = Math.min(255, Math.max(0, (num & 0x0000FF) + amt));
      return '#'+(0x1000000 + R * 0x10000 + G * 0x100 + B).toString(16).slice(1);
    }
    function spawnHand() {
      if (!gameActive) return;
      updateRobotRect();
      const hand = document.createElement('div');
      hand.className = 'tickle-hand wiggle';
      hand.innerHTML = createHandSVG(Math.random() > 0.5);
      const side = Math.floor(Math.random() * 4);
      const containerRect = gameContainer.getBoundingClientRect();
      let startX, startY;
      const robotCenterX = robotRect.left + robotRect.width / 2;
      const robotCenterY = robotRect.top + robotRect.height / 2;
      switch (side) {
        case 0: startX = Math.random() * containerRect.width; startY = -150; break;
        case 1: startX = containerRect.width + 50; startY = Math.random() * containerRect.height; break;
        case 2: startX = Math.random() * containerRect.width; startY = containerRect.height + 50; break;
        case 3: startX = -150; startY = Math.random() * containerRect.height; break;
      }
      hand.style.left = startX + 'px';
      hand.style.top = startY + 'px';
      const dx = robotCenterX - startX + (Math.random() - 0.5) * 100;
      const dy = robotCenterY - startY + (Math.random() - 0.5) * 100;
      const dist = Math.sqrt(dx * dx + dy * dy);
      const speed = 1.5 + difficulty * 0.3;
      const vx = (dx / dist) * speed;
      const vy = (dy / dist) * speed;
      const handData = { element: hand, x: startX, y: startY, vx: vx, vy: vy, tickling: false };
      hand.addEventListener('click', (e) => swatHand(handData, e));
      hand.addEventListener('touchstart', (e) => { e.preventDefault(); swatHand(handData, e); }, { passive: false });
      gameContainer.appendChild(hand);
      hands.push(handData);
    }
    function swatHand(handData, e) {
      if (!gameActive) return;
      const swat = document.createElement('div');
      swat.className = 'swat-effect';
      swat.style.left = handData.x + 'px';
      swat.style.top = handData.y + 'px';
      gameContainer.appendChild(swat);
      setTimeout(() => swat.remove(), 400);
      handData.element.remove();
      const index = hands.indexOf(handData);
      if (index > -1) hands.splice(index, 1);
      const points = handData.tickling ? 50 : 10;
      score += points;
      scoreValue.textContent = score;
      showFloatingText('+'+points, handData.x + 40, handData.y, '#44ff66');
      if (handData.tickling) checkTickleState();
    }
    function showFloatingText(text, x, y, color) {
      const el = document.createElement('div');
      el.className = 'tickle-text';
      el.textContent = text;
      el.style.left = x + 'px';
      el.style.top = y + 'px';
      el.style.color = color || '#ffcc00';
      gameContainer.appendChild(el);
      setTimeout(() => el.remove(), 500);
    }
    function showLaughBubble() {
      const laughs = ['AHAHA!', 'HEE HEE!', 'STOP!', 'NO!', '*bzzt*', 'ERROR!', 'HELP!', 'TEE HEE!', 'GAHAHA!', '*BEEP*'];
      const el = document.createElement('div');
      el.className = 'laugh-bubble';
      el.textContent = laughs[Math.floor(Math.random() * laughs.length)];
      el.style.left = (robotRect.left + Math.random() * robotRect.width) + 'px';
      el.style.top = (robotRect.top - 20) + 'px';
      el.style.color = ['#ff0', '#f0f', '#0ff', '#f00'][Math.floor(Math.random() * 4)];
      gameContainer.appendChild(el);
      setTimeout(() => el.remove(), 1000);
    }
    function updateGame() {
      if (!gameActive) return;
      updateRobotRect();
      const robotCenterX = robotRect.left + robotRect.width / 2;
      const robotCenterY = robotRect.top + robotRect.height / 2;
      const tickleRadius = 80;
      let anyTickling = false;
      hands.forEach(hand => {
        hand.x += hand.vx;
        hand.y += hand.vy;
        hand.element.style.left = hand.x + 'px';
        hand.element.style.top = hand.y + 'px';
        const hx = hand.x + 60;
        const hy = hand.y + 75;
        const dist = Math.sqrt((hx - robotCenterX) ** 2 + (hy - robotCenterY) ** 2);
        if (dist < tickleRadius) {
          hand.tickling = true;
          hand.vx *= 0.5;
          hand.vy *= 0.5;
          anyTickling = true;
        }
        if (hand.x < -200 || hand.x > window.innerWidth + 200 || hand.y < -200 || hand.y > window.innerHeight + 200) {
          hand.element.remove();
          const index = hands.indexOf(hand);
          if (index > -1) hands.splice(index, 1);
        }
      });
      if (anyTickling) { robot.classList.add('tickled'); robot.classList.remove('grumpy'); }
      else { robot.classList.remove('tickled'); robot.classList.add('grumpy'); }
    }
    function checkTickleState() {
      const anyTickling = hands.some(h => h.tickling);
      if (!anyTickling) { robot.classList.remove('tickled'); robot.classList.add('grumpy'); }
    }
    function tickleDamage() {
      if (!gameActive) return;
      const ticklingHands = hands.filter(h => h.tickling);
      if (ticklingHands.length > 0) {
        grumpLevel -= ticklingHands.length * 2;
        grumpFill.style.width = Math.max(0, grumpLevel) + '%';
        if (Math.random() > 0.5) showLaughBubble();
        if (grumpLevel <= 0) endGame();
      } else {
        grumpLevel = Math.min(100, grumpLevel + 0.5);
        grumpFill.style.width = grumpLevel + '%';
      }
    }
    function increaseDifficulty() {
      if (!gameActive) return;
      difficulty += 0.1;
      clearInterval(spawnInterval);
      const newRate = Math.max(500, 2000 - difficulty * 100);
      spawnInterval = setInterval(spawnHand, newRate);
    }
    function startGame() {
      score = 0; grumpLevel = 100; difficulty = 1;
      hands.forEach(h => h.element.remove());
      hands = [];
      gameActive = true;
      scoreValue.textContent = '0';
      grumpFill.style.width = '100%';
      startScreen.classList.add('hidden');
      gameOver.classList.add('hidden');
      robot.classList.remove('tickled');
      robot.classList.add('grumpy');
      clearInterval(spawnInterval);
      clearInterval(tickleInterval);
      clearInterval(difficultyInterval);
      spawnInterval = setInterval(spawnHand, 2000);
      tickleInterval = setInterval(tickleDamage, 100);
      difficultyInterval = setInterval(increaseDifficulty, 5000);
      function loop() { if (gameActive) { updateGame(); requestAnimationFrame(loop); } }
      loop();
      setTimeout(spawnHand, 500);
    }
    function endGame() {
      gameActive = false;
      clearInterval(spawnInterval);
      clearInterval(tickleInterval);
      clearInterval(difficultyInterval);
      finalScore.textContent = score;
      gameOver.classList.remove('hidden');
      robot.classList.add('tickled');
    }
    document.getElementById('startBtn').onclick = startGame;
    document.getElementById('restartBtn').onclick = startGame;
    let lastTouchEnd = 0;
    document.addEventListener('touchend', (e) => {
      const now = Date.now();
      if (now - lastTouchEnd <= 300) e.preventDefault();
      lastTouchEnd = now;
    }, { passive: false });
    setTimeout(updateRobotRect, 100);
    window.addEventListener('resize', updateRobotRect);
  </script>
</body>
</html>
