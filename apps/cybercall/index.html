<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CyberCall</title>
  <link rel="icon" href="https://emojicdn.elk.sh/üì°">
  <meta property="og:title" content="CyberCall">
  <meta property="og:description" content="Futuristic AI dispatch dashboard with live waveforms">
  <meta property="og:url" content="https://app.sloppy.live/cybercall">
  <meta property="og:image" content="https://emojicdn.elk.sh/üì°?style=apple&size=512">
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Share+Tech+Mono&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    :root {
      --bg: #030810;
      --panel: #0a1525;
      --border: #1a3050;
      --cyan: #00f5ff;
      --magenta: #ff00aa;
      --green: #00ff88;
      --orange: #ff8800;
      --red: #ff3366;
      --text: #e0f0ff;
      --muted: #4a6a8a;
    }

    body {
      background: var(--bg);
      font-family: 'Share Tech Mono', monospace;
      color: var(--text);
      min-height: 100vh;
      overflow-x: hidden;
    }

    /* Scanline effect */
    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: repeating-linear-gradient(
        0deg,
        rgba(0, 0, 0, 0.1) 0px,
        rgba(0, 0, 0, 0.1) 1px,
        transparent 1px,
        transparent 2px
      );
      pointer-events: none;
      z-index: 1000;
    }

    .dashboard {
      display: grid;
      grid-template-columns: 1fr 350px;
      grid-template-rows: auto 1fr;
      gap: 20px;
      padding: 20px;
      min-height: 100vh;
    }

    /* Header */
    .header {
      grid-column: 1 / -1;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 25px;
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: 8px;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .logo-icon {
      width: 50px;
      height: 50px;
      background: linear-gradient(135deg, var(--cyan), var(--magenta));
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      animation: pulse-glow 2s ease-in-out infinite;
    }

    @keyframes pulse-glow {
      0%, 100% { box-shadow: 0 0 20px var(--cyan); }
      50% { box-shadow: 0 0 40px var(--magenta); }
    }

    .logo h1 {
      font-family: 'Orbitron', sans-serif;
      font-size: 1.8rem;
      font-weight: 900;
      background: linear-gradient(90deg, var(--cyan), var(--magenta));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      letter-spacing: 3px;
    }

    .logo-sub {
      font-size: 0.7rem;
      color: var(--muted);
      letter-spacing: 2px;
    }

    .status-bar {
      display: flex;
      gap: 30px;
      align-items: center;
    }

    .status-item {
      text-align: center;
    }

    .status-value {
      font-family: 'Orbitron', sans-serif;
      font-size: 1.4rem;
      font-weight: 700;
    }

    .status-value.active { color: var(--green); text-shadow: 0 0 10px var(--green); }
    .status-value.pending { color: var(--orange); text-shadow: 0 0 10px var(--orange); }
    .status-value.total { color: var(--cyan); text-shadow: 0 0 10px var(--cyan); }

    .status-label {
      font-size: 0.65rem;
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .time-display {
      font-family: 'Orbitron', sans-serif;
      font-size: 1.2rem;
      color: var(--cyan);
      text-shadow: 0 0 15px var(--cyan);
    }

    /* Main Panel */
    .main-panel {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .panel {
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: 8px;
      overflow: hidden;
    }

    .panel-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 20px;
      background: rgba(0, 245, 255, 0.05);
      border-bottom: 1px solid var(--border);
    }

    .panel-title {
      font-family: 'Orbitron', sans-serif;
      font-size: 0.85rem;
      font-weight: 700;
      color: var(--cyan);
      letter-spacing: 2px;
      text-transform: uppercase;
    }

    .panel-badge {
      background: var(--cyan);
      color: var(--bg);
      padding: 3px 10px;
      border-radius: 20px;
      font-size: 0.7rem;
      font-weight: 700;
    }

    /* Waveform */
    .waveform-container {
      padding: 20px;
      height: 200px;
      position: relative;
    }

    .waveform-canvas {
      width: 100%;
      height: 100%;
      display: block;
    }

    .waveform-label {
      position: absolute;
      top: 10px;
      left: 20px;
      font-size: 0.7rem;
      color: var(--muted);
    }

    .waveform-value {
      position: absolute;
      top: 10px;
      right: 20px;
      font-family: 'Orbitron', sans-serif;
      font-size: 0.9rem;
      color: var(--green);
      text-shadow: 0 0 10px var(--green);
    }

    /* Active Call Display */
    .active-call {
      padding: 25px;
      text-align: center;
      position: relative;
    }

    .call-avatar {
      width: 80px;
      height: 80px;
      margin: 0 auto 15px;
      background: linear-gradient(135deg, var(--cyan), var(--magenta));
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2rem;
      animation: avatar-pulse 1.5s ease-in-out infinite;
    }

    @keyframes avatar-pulse {
      0%, 100% { transform: scale(1); box-shadow: 0 0 20px var(--cyan); }
      50% { transform: scale(1.05); box-shadow: 0 0 40px var(--magenta); }
    }

    .call-avatar.idle {
      background: var(--border);
      animation: none;
    }

    .call-info h3 {
      font-family: 'Orbitron', sans-serif;
      font-size: 1.1rem;
      margin-bottom: 5px;
    }

    .call-info p {
      color: var(--muted);
      font-size: 0.8rem;
    }

    .call-duration {
      margin-top: 15px;
      font-family: 'Orbitron', sans-serif;
      font-size: 2rem;
      color: var(--green);
      text-shadow: 0 0 20px var(--green);
    }

    .call-status {
      display: inline-block;
      margin-top: 10px;
      padding: 5px 15px;
      border-radius: 20px;
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .call-status.active {
      background: rgba(0, 255, 136, 0.2);
      color: var(--green);
      border: 1px solid var(--green);
      animation: status-blink 1s ease-in-out infinite;
    }

    .call-status.idle {
      background: rgba(74, 106, 138, 0.2);
      color: var(--muted);
      border: 1px solid var(--muted);
    }

    @keyframes status-blink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.6; }
    }

    /* Metrics Grid */
    .metrics-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 15px;
      padding: 20px;
    }

    .metric-card {
      background: rgba(0, 0, 0, 0.3);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 15px;
      text-align: center;
    }

    .metric-value {
      font-family: 'Orbitron', sans-serif;
      font-size: 1.5rem;
      font-weight: 700;
      margin-bottom: 5px;
    }

    .metric-value.cyan { color: var(--cyan); text-shadow: 0 0 10px var(--cyan); }
    .metric-value.magenta { color: var(--magenta); text-shadow: 0 0 10px var(--magenta); }
    .metric-value.green { color: var(--green); text-shadow: 0 0 10px var(--green); }
    .metric-value.orange { color: var(--orange); text-shadow: 0 0 10px var(--orange); }

    .metric-label {
      font-size: 0.65rem;
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    /* Call Log */
    .call-log {
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    .log-list {
      flex: 1;
      overflow-y: auto;
      max-height: 500px;
    }

    .log-entry {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px 20px;
      border-bottom: 1px solid rgba(26, 48, 80, 0.5);
      transition: background 0.2s;
      animation: log-slide-in 0.3s ease-out;
    }

    @keyframes log-slide-in {
      from { opacity: 0; transform: translateX(-20px); }
      to { opacity: 1; transform: translateX(0); }
    }

    .log-entry:hover {
      background: rgba(0, 245, 255, 0.05);
    }

    .log-icon {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1rem;
      flex-shrink: 0;
    }

    .log-icon.inbound {
      background: rgba(0, 255, 136, 0.2);
      border: 1px solid var(--green);
    }

    .log-icon.outbound {
      background: rgba(0, 245, 255, 0.2);
      border: 1px solid var(--cyan);
    }

    .log-icon.missed {
      background: rgba(255, 51, 102, 0.2);
      border: 1px solid var(--red);
    }

    .log-icon.transfer {
      background: rgba(255, 136, 0, 0.2);
      border: 1px solid var(--orange);
    }

    .log-details {
      flex: 1;
      min-width: 0;
    }

    .log-caller {
      font-weight: 700;
      font-size: 0.85rem;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .log-meta {
      display: flex;
      gap: 10px;
      font-size: 0.7rem;
      color: var(--muted);
      margin-top: 3px;
    }

    .log-time {
      font-family: 'Orbitron', sans-serif;
      font-size: 0.75rem;
      color: var(--muted);
      white-space: nowrap;
    }

    .log-tag {
      padding: 2px 8px;
      border-radius: 10px;
      font-size: 0.6rem;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .log-tag.resolved {
      background: rgba(0, 255, 136, 0.2);
      color: var(--green);
    }

    .log-tag.escalated {
      background: rgba(255, 136, 0, 0.2);
      color: var(--orange);
    }

    .log-tag.pending {
      background: rgba(255, 0, 170, 0.2);
      color: var(--magenta);
    }

    /* Back link */
    .back-link {
      position: fixed;
      bottom: 10px;
      right: 10px;
      color: var(--muted);
      text-decoration: none;
      font-size: 0.7rem;
      z-index: 100;
    }

    .back-link:hover {
      color: var(--cyan);
    }

    /* Responsive */
    @media (max-width: 900px) {
      .dashboard {
        grid-template-columns: 1fr;
      }
      .metrics-grid {
        grid-template-columns: repeat(2, 1fr);
      }
      .status-bar {
        gap: 15px;
      }
    }

    @media (max-width: 600px) {
      .header {
        flex-direction: column;
        gap: 15px;
      }
      .logo h1 {
        font-size: 1.4rem;
      }
      .waveform-container {
        height: 150px;
      }
    }
  </style>
</head>
<body>
  <div class="dashboard">
    <header class="header">
      <div class="logo">
        <div class="logo-icon">üì°</div>
        <div>
          <h1>CYBERCALL</h1>
          <div class="logo-sub">AI DISPATCH NETWORK v3.7</div>
        </div>
      </div>
      <div class="status-bar">
        <div class="status-item">
          <div class="status-value active" id="active-calls">0</div>
          <div class="status-label">Active</div>
        </div>
        <div class="status-item">
          <div class="status-value pending" id="queue-count">0</div>
          <div class="status-label">Queue</div>
        </div>
        <div class="status-item">
          <div class="status-value total" id="total-calls">0</div>
          <div class="status-label">Today</div>
        </div>
        <div class="time-display" id="time-display">00:00:00</div>
      </div>
    </header>

    <div class="main-panel">
      <div class="panel">
        <div class="panel-header">
          <span class="panel-title">Neural Waveform</span>
          <span class="panel-badge" id="waveform-status">MONITORING</span>
        </div>
        <div class="waveform-container">
          <canvas class="waveform-canvas" id="waveform"></canvas>
          <div class="waveform-label">SIGNAL FREQUENCY</div>
          <div class="waveform-value" id="freq-value">0 Hz</div>
        </div>
      </div>

      <div class="panel">
        <div class="panel-header">
          <span class="panel-title">Active Dispatch</span>
          <span class="panel-badge" id="dispatch-badge">STANDBY</span>
        </div>
        <div class="active-call" id="active-call">
          <div class="call-avatar idle" id="call-avatar">ü§ñ</div>
          <div class="call-info">
            <h3 id="caller-name">Awaiting Connection</h3>
            <p id="caller-detail">System ready for dispatch</p>
          </div>
          <div class="call-duration" id="call-duration">--:--</div>
          <div class="call-status idle" id="call-status-badge">IDLE</div>
        </div>
      </div>

      <div class="panel">
        <div class="panel-header">
          <span class="panel-title">Performance Metrics</span>
          <span class="panel-badge">REALTIME</span>
        </div>
        <div class="metrics-grid">
          <div class="metric-card">
            <div class="metric-value cyan" id="avg-duration">0:00</div>
            <div class="metric-label">Avg Duration</div>
          </div>
          <div class="metric-card">
            <div class="metric-value magenta" id="resolution-rate">0%</div>
            <div class="metric-label">Resolution</div>
          </div>
          <div class="metric-card">
            <div class="metric-value green" id="satisfaction">0%</div>
            <div class="metric-label">Satisfaction</div>
          </div>
          <div class="metric-card">
            <div class="metric-value orange" id="ai-efficiency">0%</div>
            <div class="metric-label">AI Efficiency</div>
          </div>
        </div>
      </div>
    </div>

    <div class="panel call-log">
      <div class="panel-header">
        <span class="panel-title">Dispatch Log</span>
        <span class="panel-badge" id="log-count">0 CALLS</span>
      </div>
      <div class="log-list" id="log-list"></div>
    </div>
  </div>

  <a href="https://sloppy.live" class="back-link">‚Üê sloppy.live</a>

  <script>
    // Simulated AI caller data
    const aiCallers = [
      { name: 'NEXUS-7', type: 'Support Bot', icon: 'ü§ñ' },
      { name: 'ARIA-X', type: 'Sales Assistant', icon: 'üíº' },
      { name: 'QUANTUM', type: 'Tech Support', icon: 'üîß' },
      { name: 'ECHO-3', type: 'Customer Care', icon: 'üí¨' },
      { name: 'NOVA-9', type: 'Billing Agent', icon: 'üí≥' },
      { name: 'CIPHER', type: 'Security AI', icon: 'üîí' },
      { name: 'PULSE', type: 'Health Advisor', icon: '‚ù§Ô∏è' },
      { name: 'VECTOR', type: 'Logistics AI', icon: 'üì¶' },
      { name: 'SPARK', type: 'Marketing Bot', icon: '‚ú®' },
      { name: 'ZENITH', type: 'Premium Support', icon: 'üëë' }
    ];

    const callTypes = ['inbound', 'outbound', 'transfer'];
    const callTags = ['resolved', 'escalated', 'pending'];
    const reasons = [
      'Account inquiry', 'Product support', 'Billing question',
      'Technical issue', 'Service upgrade', 'Complaint resolution',
      'New registration', 'Password reset', 'Feature request',
      'Subscription change', 'Refund request', 'General inquiry'
    ];

    // State
    let state = {
      activeCalls: 0,
      queueCount: 0,
      totalCalls: 0,
      currentCall: null,
      callStartTime: null,
      logs: [],
      metrics: {
        avgDuration: 0,
        totalDuration: 0,
        resolved: 0,
        satisfaction: 85,
        efficiency: 92
      }
    };

    // DOM Elements
    const waveformCanvas = document.getElementById('waveform');
    const ctx = waveformCanvas.getContext('2d');
    const logList = document.getElementById('log-list');

    // Waveform animation
    let waveOffset = 0;
    let waveAmplitude = 20;
    let targetAmplitude = 20;

    function resizeCanvas() {
      const container = waveformCanvas.parentElement;
      waveformCanvas.width = container.clientWidth - 40;
      waveformCanvas.height = container.clientHeight - 40;
    }

    function drawWaveform() {
      const width = waveformCanvas.width;
      const height = waveformCanvas.height;
      const centerY = height / 2;

      ctx.fillStyle = '#030810';
      ctx.fillRect(0, 0, width, height);

      // Smoothly transition amplitude
      waveAmplitude += (targetAmplitude - waveAmplitude) * 0.1;

      // Draw grid
      ctx.strokeStyle = 'rgba(26, 48, 80, 0.5)';
      ctx.lineWidth = 1;
      for (let y = 0; y < height; y += 20) {
        ctx.beginPath();
        ctx.moveTo(0, y);
        ctx.lineTo(width, y);
        ctx.stroke();
      }
      for (let x = 0; x < width; x += 40) {
        ctx.beginPath();
        ctx.moveTo(x, 0);
        ctx.lineTo(x, height);
        ctx.stroke();
      }

      // Draw main waveform
      const gradient = ctx.createLinearGradient(0, 0, width, 0);
      gradient.addColorStop(0, '#00f5ff');
      gradient.addColorStop(0.5, '#ff00aa');
      gradient.addColorStop(1, '#00f5ff');

      ctx.strokeStyle = gradient;
      ctx.lineWidth = 2;
      ctx.shadowColor = '#00f5ff';
      ctx.shadowBlur = 10;

      ctx.beginPath();
      for (let x = 0; x < width; x++) {
        const frequency = state.currentCall ? 0.03 : 0.015;
        const noise = state.currentCall ? Math.sin(x * 0.1 + waveOffset * 3) * 5 : 0;
        const y = centerY + Math.sin(x * frequency + waveOffset) * waveAmplitude + noise;
        if (x === 0) ctx.moveTo(x, y);
        else ctx.lineTo(x, y);
      }
      ctx.stroke();

      // Draw secondary waveform
      ctx.strokeStyle = 'rgba(255, 0, 170, 0.4)';
      ctx.shadowColor = '#ff00aa';
      ctx.lineWidth = 1;

      ctx.beginPath();
      for (let x = 0; x < width; x++) {
        const y = centerY + Math.sin(x * 0.02 - waveOffset * 0.7) * (waveAmplitude * 0.6);
        if (x === 0) ctx.moveTo(x, y);
        else ctx.lineTo(x, y);
      }
      ctx.stroke();

      ctx.shadowBlur = 0;
      waveOffset += state.currentCall ? 0.15 : 0.05;

      // Update frequency display
      const freq = state.currentCall ? Math.floor(800 + Math.sin(waveOffset) * 200) : Math.floor(100 + Math.sin(waveOffset * 0.5) * 50);
      document.getElementById('freq-value').textContent = freq + ' Hz';

      requestAnimationFrame(drawWaveform);
    }

    // Update time display
    function updateTime() {
      const now = new Date();
      const time = now.toTimeString().split(' ')[0];
      document.getElementById('time-display').textContent = time;
    }

    // Update call duration
    function updateCallDuration() {
      if (state.callStartTime) {
        const elapsed = Math.floor((Date.now() - state.callStartTime) / 1000);
        const mins = Math.floor(elapsed / 60).toString().padStart(2, '0');
        const secs = (elapsed % 60).toString().padStart(2, '0');
        document.getElementById('call-duration').textContent = `${mins}:${secs}`;
      }
    }

    // Update UI
    function updateUI() {
      document.getElementById('active-calls').textContent = state.activeCalls;
      document.getElementById('queue-count').textContent = state.queueCount;
      document.getElementById('total-calls').textContent = state.totalCalls;
      document.getElementById('log-count').textContent = state.logs.length + ' CALLS';

      // Metrics
      if (state.totalCalls > 0) {
        const avgSecs = Math.floor(state.metrics.totalDuration / state.totalCalls);
        const avgMins = Math.floor(avgSecs / 60);
        const avgSecRem = avgSecs % 60;
        document.getElementById('avg-duration').textContent = `${avgMins}:${avgSecRem.toString().padStart(2, '0')}`;
        document.getElementById('resolution-rate').textContent = Math.floor((state.metrics.resolved / state.totalCalls) * 100) + '%';
      }
      document.getElementById('satisfaction').textContent = state.metrics.satisfaction + '%';
      document.getElementById('ai-efficiency').textContent = state.metrics.efficiency + '%';
    }

    // Start a new call
    function startCall() {
      const caller = aiCallers[Math.floor(Math.random() * aiCallers.length)];
      const reason = reasons[Math.floor(Math.random() * reasons.length)];

      state.currentCall = { ...caller, reason };
      state.callStartTime = Date.now();
      state.activeCalls = 1;
      state.queueCount = Math.floor(Math.random() * 5);
      targetAmplitude = 40 + Math.random() * 20;

      // Update active call display
      document.getElementById('call-avatar').textContent = caller.icon;
      document.getElementById('call-avatar').classList.remove('idle');
      document.getElementById('caller-name').textContent = caller.name;
      document.getElementById('caller-detail').textContent = `${caller.type} ‚Ä¢ ${reason}`;
      document.getElementById('call-status-badge').textContent = 'ACTIVE';
      document.getElementById('call-status-badge').className = 'call-status active';
      document.getElementById('dispatch-badge').textContent = 'ACTIVE';
      document.getElementById('waveform-status').textContent = 'TRANSMITTING';

      updateUI();
    }

    // End the current call
    function endCall() {
      if (!state.currentCall) return;

      const duration = Math.floor((Date.now() - state.callStartTime) / 1000);
      const type = callTypes[Math.floor(Math.random() * callTypes.length)];
      const tag = Math.random() > 0.2 ? 'resolved' : (Math.random() > 0.5 ? 'escalated' : 'pending');

      // Add to log
      const logEntry = {
        caller: state.currentCall.name,
        type: state.currentCall.type,
        icon: state.currentCall.icon,
        callType: type,
        tag: tag,
        reason: state.currentCall.reason,
        duration: duration,
        time: new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })
      };

      state.logs.unshift(logEntry);
      if (state.logs.length > 50) state.logs.pop();

      state.totalCalls++;
      state.metrics.totalDuration += duration;
      if (tag === 'resolved') state.metrics.resolved++;

      // Fluctuate metrics slightly
      state.metrics.satisfaction = Math.min(99, Math.max(70, state.metrics.satisfaction + (Math.random() * 4 - 2)));
      state.metrics.efficiency = Math.min(99, Math.max(80, state.metrics.efficiency + (Math.random() * 4 - 2)));

      // Reset UI
      state.currentCall = null;
      state.callStartTime = null;
      state.activeCalls = 0;
      targetAmplitude = 20;

      document.getElementById('call-avatar').textContent = 'ü§ñ';
      document.getElementById('call-avatar').classList.add('idle');
      document.getElementById('caller-name').textContent = 'Awaiting Connection';
      document.getElementById('caller-detail').textContent = 'System ready for dispatch';
      document.getElementById('call-duration').textContent = '--:--';
      document.getElementById('call-status-badge').textContent = 'IDLE';
      document.getElementById('call-status-badge').className = 'call-status idle';
      document.getElementById('dispatch-badge').textContent = 'STANDBY';
      document.getElementById('waveform-status').textContent = 'MONITORING';

      renderLog();
      updateUI();
    }

    // Render log list
    function renderLog() {
      logList.innerHTML = state.logs.map(log => `
        <div class="log-entry">
          <div class="log-icon ${log.callType}">${log.icon}</div>
          <div class="log-details">
            <div class="log-caller">${log.caller}</div>
            <div class="log-meta">
              <span>${log.type}</span>
              <span>‚Ä¢</span>
              <span>${log.reason}</span>
            </div>
          </div>
          <div>
            <div class="log-time">${log.time}</div>
            <div class="log-tag ${log.tag}">${log.tag}</div>
          </div>
        </div>
      `).join('');
    }

    // Simulation loop
    function simulate() {
      if (!state.currentCall) {
        // Chance to start a new call
        if (Math.random() < 0.3) {
          startCall();
        }
      } else {
        // Chance to end the call (avg 15-45 seconds)
        const elapsed = Date.now() - state.callStartTime;
        if (elapsed > 15000 && Math.random() < 0.1) {
          endCall();
        }
      }

      // Random queue fluctuation
      if (!state.currentCall) {
        state.queueCount = Math.max(0, state.queueCount + (Math.random() > 0.5 ? 1 : -1));
        if (state.queueCount > 8) state.queueCount = 8;
      }

      updateUI();
    }

    // Initialize
    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();
    drawWaveform();

    setInterval(updateTime, 1000);
    setInterval(updateCallDuration, 1000);
    setInterval(simulate, 2000);

    updateTime();
    updateUI();

    // Start with some initial log entries
    for (let i = 0; i < 5; i++) {
      const caller = aiCallers[Math.floor(Math.random() * aiCallers.length)];
      state.logs.push({
        caller: caller.name,
        type: caller.type,
        icon: caller.icon,
        callType: callTypes[Math.floor(Math.random() * callTypes.length)],
        tag: Math.random() > 0.3 ? 'resolved' : (Math.random() > 0.5 ? 'escalated' : 'pending'),
        reason: reasons[Math.floor(Math.random() * reasons.length)],
        duration: Math.floor(Math.random() * 180) + 20,
        time: new Date(Date.now() - Math.random() * 3600000).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })
      });
      state.totalCalls++;
      state.metrics.totalDuration += state.logs[i].duration;
      if (state.logs[i].tag === 'resolved') state.metrics.resolved++;
    }
    renderLog();
    updateUI();
  </script>
<script src="/sloppy-header/sloppy-bar.js"></script>
<script src="/vibelib-extended.js"></script>
<script>
  // Compatibility Patch for Legacy Apps
  window.addEventListener("load", () => {
    if (window.SloppyKarma && window.VibeLib.Economy) {
      // Redirect old calls to new engine
      window.SloppyKarma.track = window.VibeLib.Economy.track;
    }
  });
</script>
</body>
</html>
