<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>Neon Simon</title>
  <link rel="icon" href="https://emojicdn.elk.sh/ðŸŽ®">
  <meta name="description" content="Classic Simon Says with neon glow and synth sounds">
  <meta property="og:title" content="Neon Simon">
  <meta property="og:description" content="Classic Simon Says with neon glow and synth sounds">
  <meta property="og:image" content="https://emojicdn.elk.sh/ðŸŽ®?style=google">
  <meta property="og:url" content="https://app.sloppy.live/simon-says">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap');

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      min-height: 100vh;
      background: radial-gradient(ellipse at center, #1a1a2e 0%, #0a0a15 100%);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      font-family: 'Orbitron', sans-serif;
      overflow: hidden;
    }

    .back-link {
      position: fixed;
      top: 10px;
      left: 10px;
      color: rgba(255,255,255,0.3);
      text-decoration: none;
      font-size: 0.8rem;
      z-index: 100;
    }

    h1 {
      font-size: 2.5rem;
      font-weight: 900;
      letter-spacing: 8px;
      margin-bottom: 10px;
      background: linear-gradient(90deg, #0ff, #f0f, #ff0, #0f0);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow: none;
      filter: drop-shadow(0 0 20px rgba(255,255,255,0.3));
    }

    .subtitle {
      color: #888;
      font-size: 0.8rem;
      letter-spacing: 4px;
      margin-bottom: 30px;
    }

    /* Game Board */
    .game-container {
      position: relative;
      width: 320px;
      height: 320px;
    }

    .simon-board {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      background: #111;
      display: grid;
      grid-template-columns: 1fr 1fr;
      grid-template-rows: 1fr 1fr;
      gap: 8px;
      padding: 8px;
      box-shadow:
        0 0 50px rgba(0,0,0,0.5),
        inset 0 0 30px rgba(0,0,0,0.8);
      overflow: hidden;
    }

    .panel {
      position: relative;
      cursor: pointer;
      transition: all 0.1s;
      overflow: hidden;
    }

    .panel::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      opacity: 0;
      transition: opacity 0.1s;
    }

    .panel:active {
      transform: scale(0.98);
    }

    /* Panel Colors */
    .panel-green {
      background: linear-gradient(135deg, #0a3a0a 0%, #052005 100%);
      border-radius: 100% 0 0 0;
      border: 3px solid #0f0;
      border-right: none;
      border-bottom: none;
    }

    .panel-green::before {
      background: radial-gradient(ellipse at 30% 30%, #0f0, #0a0);
      box-shadow: 0 0 60px #0f0, 0 0 100px #0f0, inset 0 0 60px rgba(0,255,0,0.5);
    }

    .panel-green.active,
    .panel-green:active {
      background: linear-gradient(135deg, #0f0 0%, #0a0 100%);
      box-shadow: 0 0 50px #0f0, 0 0 100px #0f0;
    }

    .panel-green.active::before,
    .panel-green:active::before {
      opacity: 1;
    }

    .panel-red {
      background: linear-gradient(135deg, #3a0a0a 0%, #200505 100%);
      border-radius: 0 100% 0 0;
      border: 3px solid #f00;
      border-left: none;
      border-bottom: none;
    }

    .panel-red::before {
      background: radial-gradient(ellipse at 70% 30%, #f00, #a00);
      box-shadow: 0 0 60px #f00, 0 0 100px #f00, inset 0 0 60px rgba(255,0,0,0.5);
    }

    .panel-red.active,
    .panel-red:active {
      background: linear-gradient(135deg, #f00 0%, #a00 100%);
      box-shadow: 0 0 50px #f00, 0 0 100px #f00;
    }

    .panel-red.active::before,
    .panel-red:active::before {
      opacity: 1;
    }

    .panel-yellow {
      background: linear-gradient(135deg, #3a3a0a 0%, #202005 100%);
      border-radius: 0 0 0 100%;
      border: 3px solid #ff0;
      border-right: none;
      border-top: none;
    }

    .panel-yellow::before {
      background: radial-gradient(ellipse at 30% 70%, #ff0, #aa0);
      box-shadow: 0 0 60px #ff0, 0 0 100px #ff0, inset 0 0 60px rgba(255,255,0,0.5);
    }

    .panel-yellow.active,
    .panel-yellow:active {
      background: linear-gradient(135deg, #ff0 0%, #aa0 100%);
      box-shadow: 0 0 50px #ff0, 0 0 100px #ff0;
    }

    .panel-yellow.active::before,
    .panel-yellow:active::before {
      opacity: 1;
    }

    .panel-blue {
      background: linear-gradient(135deg, #0a0a3a 0%, #050520 100%);
      border-radius: 0 0 100% 0;
      border: 3px solid #00f;
      border-left: none;
      border-top: none;
    }

    .panel-blue::before {
      background: radial-gradient(ellipse at 70% 70%, #00f, #00a);
      box-shadow: 0 0 60px #00f, 0 0 100px #00f, inset 0 0 60px rgba(0,0,255,0.5);
    }

    .panel-blue.active,
    .panel-blue:active {
      background: linear-gradient(135deg, #00f 0%, #00a 100%);
      box-shadow: 0 0 50px #00f, 0 0 100px #00f;
    }

    .panel-blue.active::before,
    .panel-blue:active::before {
      opacity: 1;
    }

    /* Center Button */
    .center-btn {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 100px;
      height: 100px;
      border-radius: 50%;
      background: linear-gradient(145deg, #1a1a2e, #0a0a15);
      border: 4px solid #333;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow:
        0 0 30px rgba(0,0,0,0.8),
        inset 0 0 20px rgba(0,0,0,0.5);
      transition: all 0.2s;
      z-index: 10;
    }

    .center-btn:hover {
      border-color: #0ff;
      box-shadow:
        0 0 30px rgba(0,255,255,0.3),
        inset 0 0 20px rgba(0,0,0,0.5);
    }

    .center-btn .score {
      font-size: 1.8rem;
      font-weight: 900;
      color: #0ff;
      text-shadow: 0 0 20px #0ff;
      line-height: 1;
    }

    .center-btn .label {
      font-size: 0.5rem;
      color: #888;
      letter-spacing: 2px;
      margin-top: 4px;
    }

    /* Game States */
    .game-over .center-btn {
      border-color: #f00;
      animation: pulse-red 1s ease infinite;
    }

    .game-over .center-btn .score {
      color: #f00;
      text-shadow: 0 0 20px #f00;
    }

    @keyframes pulse-red {
      0%, 100% { box-shadow: 0 0 30px rgba(255,0,0,0.3); }
      50% { box-shadow: 0 0 50px rgba(255,0,0,0.6); }
    }

    .watching .panel {
      cursor: default;
      pointer-events: none;
    }

    /* Status */
    .status {
      margin-top: 30px;
      font-size: 0.9rem;
      color: #0ff;
      text-shadow: 0 0 10px #0ff;
      letter-spacing: 3px;
      min-height: 25px;
    }

    .status.error {
      color: #f00;
      text-shadow: 0 0 10px #f00;
    }

    /* High Score */
    .high-score {
      margin-top: 15px;
      font-size: 0.7rem;
      color: #f0f;
      letter-spacing: 2px;
    }

    /* Instructions */
    .instructions {
      position: fixed;
      bottom: 20px;
      color: #444;
      font-size: 0.6rem;
      letter-spacing: 2px;
      text-align: center;
    }

    /* Disabled state */
    .panel.disabled {
      pointer-events: none;
      opacity: 0.5;
    }

    /* Sound toggle */
    .sound-toggle {
      position: fixed;
      top: 10px;
      right: 10px;
      background: transparent;
      border: 1px solid #444;
      color: #888;
      padding: 8px 12px;
      border-radius: 20px;
      font-family: 'Orbitron', sans-serif;
      font-size: 0.7rem;
      cursor: pointer;
      transition: all 0.2s;
    }

    .sound-toggle:hover {
      border-color: #0ff;
      color: #0ff;
    }

    .sound-toggle.muted {
      opacity: 0.5;
    }
  </style>
</head>
<body>
  <a href="https://sloppy.live" class="back-link">sloppy.live</a>
  <button class="sound-toggle" onclick="toggleSound()">ðŸ”Š SOUND</button>

  <h1>SIMON</h1>
  <div class="subtitle">NEON EDITION</div>

  <div class="game-container" id="gameContainer">
    <div class="simon-board">
      <div class="panel panel-green" data-color="green" onclick="playerPress('green')"></div>
      <div class="panel panel-red" data-color="red" onclick="playerPress('red')"></div>
      <div class="panel panel-yellow" data-color="yellow" onclick="playerPress('yellow')"></div>
      <div class="panel panel-blue" data-color="blue" onclick="playerPress('blue')"></div>
    </div>
    <div class="center-btn" onclick="startGame()">
      <div class="score" id="score">0</div>
      <div class="label">SCORE</div>
    </div>
  </div>

  <div class="status" id="status">CLICK CENTER TO START</div>
  <div class="high-score">HIGH SCORE: <span id="highScore">0</span></div>

  <div class="instructions">
    WATCH THE PATTERN â€¢ REPEAT IT BACK â€¢ DON'T MESS UP
  </div>

  <script>
    // Audio Context
    let audioCtx = null;
    let soundEnabled = true;

    const frequencies = {
      green: 392,   // G4
      red: 329.63,  // E4
      yellow: 261.63, // C4
      blue: 220     // A3
    };

    function initAudio() {
      if (!audioCtx) {
        audioCtx = new (window.AudioContext || window.webkitAudioContext)();
      }
      if (audioCtx.state === 'suspended') {
        audioCtx.resume();
      }
    }

    function playTone(color, duration = 300) {
      if (!soundEnabled || !audioCtx) return;

      const osc = audioCtx.createOscillator();
      const gain = audioCtx.createGain();

      osc.connect(gain);
      gain.connect(audioCtx.destination);

      osc.type = 'sine';
      osc.frequency.setValueAtTime(frequencies[color], audioCtx.currentTime);

      gain.gain.setValueAtTime(0.3, audioCtx.currentTime);
      gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + duration / 1000);

      osc.start(audioCtx.currentTime);
      osc.stop(audioCtx.currentTime + duration / 1000);
    }

    function playErrorSound() {
      if (!soundEnabled || !audioCtx) return;

      const osc = audioCtx.createOscillator();
      const gain = audioCtx.createGain();

      osc.connect(gain);
      gain.connect(audioCtx.destination);

      osc.type = 'sawtooth';
      osc.frequency.setValueAtTime(100, audioCtx.currentTime);

      gain.gain.setValueAtTime(0.3, audioCtx.currentTime);
      gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.5);

      osc.start(audioCtx.currentTime);
      osc.stop(audioCtx.currentTime + 0.5);
    }

    function toggleSound() {
      soundEnabled = !soundEnabled;
      const btn = document.querySelector('.sound-toggle');
      btn.textContent = soundEnabled ? 'ðŸ”Š SOUND' : 'ðŸ”‡ MUTED';
      btn.classList.toggle('muted', !soundEnabled);
    }

    // Game State
    let sequence = [];
    let playerSequence = [];
    let isPlaying = false;
    let isWatching = false;
    let score = 0;
    let highScore = parseInt(localStorage.getItem('simonHighScore') || '0');

    document.getElementById('highScore').textContent = highScore;

    const colors = ['green', 'red', 'yellow', 'blue'];
    const panels = {};
    colors.forEach(color => {
      panels[color] = document.querySelector(`.panel-${color}`);
    });

    function startGame() {
      if (isPlaying && !document.getElementById('gameContainer').classList.contains('game-over')) {
        return;
      }

      initAudio();

      sequence = [];
      playerSequence = [];
      score = 0;
      isPlaying = true;

      document.getElementById('score').textContent = '0';
      document.getElementById('gameContainer').classList.remove('game-over');
      document.getElementById('status').classList.remove('error');

      nextRound();
    }

    function nextRound() {
      playerSequence = [];

      // Add random color to sequence
      const randomColor = colors[Math.floor(Math.random() * colors.length)];
      sequence.push(randomColor);

      updateStatus('WATCH CLOSELY');
      document.getElementById('gameContainer').classList.add('watching');

      // Play the sequence
      playSequence();
    }

    function playSequence() {
      isWatching = true;
      let i = 0;

      const interval = setInterval(() => {
        if (i > 0) {
          // Deactivate previous panel
          panels[sequence[i - 1]].classList.remove('active');
        }

        if (i < sequence.length) {
          // Activate current panel
          activatePanel(sequence[i]);
          i++;
        } else {
          clearInterval(interval);
          isWatching = false;
          document.getElementById('gameContainer').classList.remove('watching');
          updateStatus('YOUR TURN');
        }
      }, 600);
    }

    function activatePanel(color, duration = 400) {
      const panel = panels[color];
      panel.classList.add('active');
      playTone(color, duration);

      setTimeout(() => {
        panel.classList.remove('active');
      }, duration);
    }

    function playerPress(color) {
      if (!isPlaying || isWatching) return;

      initAudio();

      // Visual and audio feedback
      activatePanel(color, 200);

      playerSequence.push(color);

      // Check if correct
      const currentIndex = playerSequence.length - 1;

      if (playerSequence[currentIndex] !== sequence[currentIndex]) {
        gameOver();
        return;
      }

      // Check if sequence complete
      if (playerSequence.length === sequence.length) {
        score++;
        document.getElementById('score').textContent = score;

        updateStatus('CORRECT!');

        // Update high score
        if (score > highScore) {
          highScore = score;
          localStorage.setItem('simonHighScore', highScore.toString());
          document.getElementById('highScore').textContent = highScore;
        }

        // Next round after delay
        setTimeout(() => {
          nextRound();
        }, 1000);
      }
    }

    function gameOver() {
      isPlaying = false;
      playErrorSound();

      document.getElementById('gameContainer').classList.add('game-over');
      updateStatus('GAME OVER', true);

      // Flash all panels
      colors.forEach((color, i) => {
        setTimeout(() => {
          panels[color].classList.add('active');
          setTimeout(() => {
            panels[color].classList.remove('active');
          }, 200);
        }, i * 100);
      });
    }

    function updateStatus(text, isError = false) {
      const status = document.getElementById('status');
      status.textContent = text;
      status.classList.toggle('error', isError);
    }

    // Keyboard support
    document.addEventListener('keydown', (e) => {
      if (isWatching) return;

      switch(e.key.toLowerCase()) {
        case 'q':
        case '1':
          playerPress('green');
          break;
        case 'w':
        case '2':
          playerPress('red');
          break;
        case 'a':
        case '3':
          playerPress('yellow');
          break;
        case 's':
        case '4':
          playerPress('blue');
          break;
        case ' ':
        case 'enter':
          startGame();
          break;
      }
    });

    // Prevent double-tap zoom on mobile
    document.addEventListener('touchend', (e) => {
      e.preventDefault();
    }, { passive: false });
  </script>
<script src="/apps/sloppy-header/sloppy-bar.js"></script>
<script src="/vibelib-extended.js"></script>
<script>
  // Compatibility Patch for Legacy Apps
  window.addEventListener("load", () => {
    if (window.SloppyKarma && window.VibeLib.Economy) {
      // Redirect old calls to new engine
      window.SloppyKarma.track = window.VibeLib.Economy.track;
    }
  });
</script>
</body>
</html>
