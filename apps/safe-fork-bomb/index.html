<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Safe Fork Bomb</title>
  <link rel="icon" href="https://emojicdn.elk.sh/ðŸ’¥">
  <meta name="description" content="Watch neon circles endlessly split and bounce in colorful chaos">
  <meta property="og:title" content="Safe Fork Bomb">
  <meta property="og:description" content="Mesmerizing neon circles that split and multiply into beautiful chaos">
  <meta property="og:url" content="https://app.sloppy.live/safe-fork-bomb">
  <meta property="og:image" content="https://app.sloppy.live/safe-fork-bomb/og-image.png">
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: #0a0a0f;
      overflow: hidden;
      font-family: 'Orbitron', monospace;
    }

    canvas {
      display: block;
    }

    .ui {
      position: fixed;
      top: 20px;
      left: 20px;
      z-index: 10;
      color: #0ff;
      text-shadow: 0 0 10px #0ff, 0 0 20px #0ff;
    }

    .counter {
      font-size: 14px;
      opacity: 0.8;
    }

    .title {
      font-size: 24px;
      font-weight: 700;
      margin-bottom: 5px;
    }

    .hint {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      color: rgba(255, 255, 255, 0.4);
      font-size: 12px;
      letter-spacing: 2px;
    }

    .backlink {
      position: fixed;
      bottom: 20px;
      right: 20px;
      color: rgba(0, 255, 255, 0.3);
      text-decoration: none;
      font-size: 12px;
      transition: color 0.3s;
    }

    .backlink:hover {
      color: #0ff;
    }

    .controls {
      position: fixed;
      top: 20px;
      right: 20px;
      display: flex;
      gap: 10px;
    }

    .btn {
      background: rgba(0, 255, 255, 0.1);
      border: 1px solid rgba(0, 255, 255, 0.3);
      color: #0ff;
      padding: 8px 16px;
      font-family: 'Orbitron', monospace;
      font-size: 12px;
      cursor: pointer;
      transition: all 0.3s;
    }

    .btn:hover {
      background: rgba(0, 255, 255, 0.2);
      box-shadow: 0 0 15px rgba(0, 255, 255, 0.3);
    }
  </style>
</head>
<body>
  <canvas id="canvas"></canvas>

  <div class="ui">
    <div class="title">SAFE FORK BOMB</div>
    <div class="counter">PROCESSES: <span id="count">1</span></div>
  </div>

  <div class="controls">
    <button class="btn" id="resetBtn">RESET</button>
    <button class="btn" id="pauseBtn">PAUSE</button>
  </div>

  <div class="hint">CLICK TO ADD MORE CHAOS</div>

  <a href="https://sloppy.live" class="backlink">sloppy.live</a>

  <script>
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    const countEl = document.getElementById('count');
    const resetBtn = document.getElementById('resetBtn');
    const pauseBtn = document.getElementById('pauseBtn');

    let width, height;
    let circles = [];
    let paused = false;
    const MAX_CIRCLES = 500;
    const MIN_RADIUS = 4;

    const NEON_COLORS = [
      '#ff00ff', // Magenta
      '#00ffff', // Cyan
      '#ff0080', // Hot pink
      '#80ff00', // Lime
      '#ff8000', // Orange
      '#00ff80', // Mint
      '#8000ff', // Purple
      '#ffff00', // Yellow
      '#ff0040', // Red-pink
      '#00ff00', // Green
      '#0080ff', // Blue
      '#ff00bf', // Fuchsia
    ];

    function resize() {
      width = canvas.width = window.innerWidth;
      height = canvas.height = window.innerHeight;
    }

    function randomColor() {
      return NEON_COLORS[Math.floor(Math.random() * NEON_COLORS.length)];
    }

    function createCircle(x, y, radius, vx, vy, color) {
      return {
        x: x ?? Math.random() * width,
        y: y ?? Math.random() * height,
        radius: radius ?? 30 + Math.random() * 20,
        vx: vx ?? (Math.random() - 0.5) * 6,
        vy: vy ?? (Math.random() - 0.5) * 6,
        color: color ?? randomColor(),
        age: 0,
        splitTime: 60 + Math.random() * 120, // frames until split
        pulse: Math.random() * Math.PI * 2,
      };
    }

    function init() {
      circles = [createCircle(width / 2, height / 2, 40)];
    }

    function splitCircle(circle) {
      if (circles.length >= MAX_CIRCLES) return;
      if (circle.radius < MIN_RADIUS * 2) return;

      const newRadius = circle.radius * 0.7;
      const angle = Math.random() * Math.PI * 2;
      const speed = 3 + Math.random() * 2;

      // Create two children going in opposite directions
      const child1 = createCircle(
        circle.x,
        circle.y,
        newRadius,
        Math.cos(angle) * speed,
        Math.sin(angle) * speed,
        randomColor()
      );

      const child2 = createCircle(
        circle.x,
        circle.y,
        newRadius,
        -Math.cos(angle) * speed,
        -Math.sin(angle) * speed,
        randomColor()
      );

      circles.push(child1, child2);
    }

    function update() {
      if (paused) return;

      const toSplit = [];

      circles.forEach((c, i) => {
        // Move
        c.x += c.vx;
        c.y += c.vy;

        // Bounce off walls with energy
        if (c.x - c.radius < 0) {
          c.x = c.radius;
          c.vx *= -0.95;
        }
        if (c.x + c.radius > width) {
          c.x = width - c.radius;
          c.vx *= -0.95;
        }
        if (c.y - c.radius < 0) {
          c.y = c.radius;
          c.vy *= -0.95;
        }
        if (c.y + c.radius > height) {
          c.y = height - c.radius;
          c.vy *= -0.95;
        }

        // Add slight gravity and friction
        c.vy += 0.02;
        c.vx *= 0.999;
        c.vy *= 0.999;

        // Age and check for split
        c.age++;
        c.pulse += 0.1;

        if (c.age >= c.splitTime && circles.length < MAX_CIRCLES) {
          toSplit.push(i);
        }
      });

      // Split circles (process in reverse to maintain indices)
      toSplit.reverse().forEach(i => {
        const circle = circles[i];
        splitCircle(circle);
        circles.splice(i, 1);
      });

      countEl.textContent = circles.length;
    }

    function draw() {
      // Fade trail effect
      ctx.fillStyle = 'rgba(10, 10, 15, 0.15)';
      ctx.fillRect(0, 0, width, height);

      circles.forEach(c => {
        const pulseScale = 1 + Math.sin(c.pulse) * 0.1;
        const r = c.radius * pulseScale;

        // Outer glow
        ctx.beginPath();
        ctx.arc(c.x, c.y, r, 0, Math.PI * 2);
        ctx.shadowColor = c.color;
        ctx.shadowBlur = 30;
        ctx.fillStyle = c.color;
        ctx.globalAlpha = 0.3;
        ctx.fill();

        // Inner bright core
        ctx.beginPath();
        ctx.arc(c.x, c.y, r * 0.6, 0, Math.PI * 2);
        ctx.shadowBlur = 15;
        ctx.globalAlpha = 0.8;
        ctx.fill();

        // Center highlight
        ctx.beginPath();
        ctx.arc(c.x, c.y, r * 0.3, 0, Math.PI * 2);
        ctx.fillStyle = '#fff';
        ctx.shadowColor = '#fff';
        ctx.shadowBlur = 10;
        ctx.globalAlpha = 0.6;
        ctx.fill();

        ctx.globalAlpha = 1;
        ctx.shadowBlur = 0;
      });
    }

    function animate() {
      update();
      draw();
      requestAnimationFrame(animate);
    }

    // Event listeners
    window.addEventListener('resize', resize);

    canvas.addEventListener('click', (e) => {
      if (circles.length < MAX_CIRCLES) {
        const newCircle = createCircle(e.clientX, e.clientY, 25 + Math.random() * 15);
        circles.push(newCircle);
      }
    });

    resetBtn.addEventListener('click', () => {
      init();
    });

    pauseBtn.addEventListener('click', () => {
      paused = !paused;
      pauseBtn.textContent = paused ? 'PLAY' : 'PAUSE';
    });

    // Keyboard controls
    document.addEventListener('keydown', (e) => {
      if (e.code === 'Space') {
        e.preventDefault();
        paused = !paused;
        pauseBtn.textContent = paused ? 'PLAY' : 'PAUSE';
      }
      if (e.code === 'KeyR') {
        init();
      }
    });

    // Initialize
    resize();
    init();
    animate();
  </script>
<script src="/sloppy-header/sloppy-bar.js"></script>
</body>
</html>
