<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>VHS-077 // EVIDENCE</title>
  <link rel="icon" href="https://emojicdn.elk.sh/üìº">
  <meta property="og:title" content="VHS-077 // EVIDENCE">
  <meta property="og:description" content="[CLASSIFIED] Missing persons case file recovered from storage">
  <meta property="og:url" content="https://app.sloppy.live/vhs-deck">
  <meta property="og:image" content="https://app.sloppy.live/vhs-deck/og-image.png">
  <link href="https://fonts.googleapis.com/css2?family=VT323&family=Special+Elite&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      background: #0a0a0a;
      min-height: 100vh;
      font-family: 'VT323', monospace;
      color: #c0c0c0;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    .tv-frame {
      background: linear-gradient(145deg, #2a2a2a, #1a1a1a);
      border-radius: 20px;
      padding: 30px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.8), inset 0 2px 0 rgba(255,255,255,0.1);
      position: relative;
    }

    .screen-container {
      position: relative;
      width: 640px;
      height: 480px;
      max-width: 90vw;
      max-height: 60vh;
      background: #000;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: inset 0 0 100px rgba(0,0,0,0.9);
    }

    canvas {
      width: 100%;
      height: 100%;
      image-rendering: pixelated;
    }

    /* CRT Effects */
    .crt-overlay {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      pointer-events: none;
      background:
        repeating-linear-gradient(
          0deg,
          rgba(0,0,0,0.15) 0px,
          rgba(0,0,0,0.15) 1px,
          transparent 1px,
          transparent 2px
        );
    }

    .vignette {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      pointer-events: none;
      background: radial-gradient(ellipse at center, transparent 50%, rgba(0,0,0,0.8) 100%);
    }

    .flicker {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      pointer-events: none;
      animation: flicker 0.15s infinite;
      opacity: 0.03;
      background: #fff;
    }

    @keyframes flicker {
      0%, 100% { opacity: 0.03; }
      50% { opacity: 0.05; }
    }

    .controls {
      display: flex;
      gap: 10px;
      margin-top: 20px;
      justify-content: center;
    }

    .btn {
      background: linear-gradient(180deg, #3a3a3a, #2a2a2a);
      border: 2px solid #444;
      color: #888;
      padding: 10px 20px;
      font-family: 'VT323', monospace;
      font-size: 1.2rem;
      cursor: pointer;
      border-radius: 5px;
      min-width: 60px;
      transition: all 0.1s;
    }

    .btn:hover {
      background: linear-gradient(180deg, #4a4a4a, #3a3a3a);
      color: #aaa;
    }

    .btn:active, .btn.active {
      background: linear-gradient(180deg, #2a2a2a, #1a1a1a);
      box-shadow: inset 0 2px 5px rgba(0,0,0,0.5);
    }

    .btn.play { color: #4a4; }
    .btn.play.active { color: #0f0; text-shadow: 0 0 10px #0f0; }
    .btn.stop { color: #a44; }

    .deck-label {
      font-family: 'Special Elite', serif;
      font-size: 0.9rem;
      color: #555;
      text-align: center;
      margin-top: 15px;
      letter-spacing: 3px;
    }

    .tape-label {
      position: absolute;
      bottom: 10px;
      right: 10px;
      background: rgba(0,0,0,0.7);
      padding: 5px 10px;
      font-size: 0.8rem;
      color: #ff0;
      font-family: 'VT323', monospace;
    }

    .rec-indicator {
      position: absolute;
      top: 10px;
      left: 10px;
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 1.2rem;
      color: #f00;
      text-shadow: 0 0 10px #f00;
      animation: rec-blink 1s infinite;
    }

    .rec-dot {
      width: 12px;
      height: 12px;
      background: #f00;
      border-radius: 50%;
      box-shadow: 0 0 10px #f00;
    }

    @keyframes rec-blink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.3; }
    }

    .timestamp {
      position: absolute;
      top: 10px;
      right: 10px;
      font-size: 1.1rem;
      color: #fff;
      text-shadow: 2px 2px 0 #000;
      font-family: 'VT323', monospace;
    }

    .tracking {
      position: absolute;
      bottom: 40px;
      left: 10px;
      font-size: 0.9rem;
      color: #0ff;
      text-shadow: 1px 1px 0 #000;
    }

    .static-heavy {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      pointer-events: none;
      opacity: 0;
      mix-blend-mode: overlay;
    }

    .back-link {
      position: fixed;
      bottom: 5px;
      right: 10px;
      color: #333;
      text-decoration: none;
      font-size: 0.6rem;
      z-index: 100;
    }
    .back-link:hover { color: #666; }

    @media (max-width: 700px) {
      .tv-frame { padding: 15px; }
      .screen-container { width: 100%; height: 300px; }
    }
  </style>
</head>
<body>
  <div class="tv-frame">
    <div class="screen-container">
      <canvas id="screen"></canvas>
      <div class="crt-overlay"></div>
      <div class="vignette"></div>
      <div class="flicker"></div>
      <canvas id="static" class="static-heavy"></canvas>
      <div class="rec-indicator" id="rec"><div class="rec-dot"></div>PLAY</div>
      <div class="timestamp" id="timestamp">00:00:00</div>
      <div class="tracking" id="tracking">TRACKING ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë</div>
      <div class="tape-label">VHS-077 // EVIDENCE LOCKER</div>
    </div>
    <div class="controls">
      <button class="btn" id="rewindBtn">‚è™</button>
      <button class="btn play" id="playBtn">‚ñ∂</button>
      <button class="btn stop" id="stopBtn">‚èπ</button>
      <button class="btn" id="ffBtn">‚è©</button>
      <button class="btn" id="staticBtn">üì∫</button>
    </div>
    <div class="deck-label">PANASONIC NV-FS200 // PROPERTY OF [REDACTED] POLICE DEPT.</div>
  </div>

  <a href="https://sloppy.live" class="back-link">sloppy.live</a>

  <script>
    const canvas = document.getElementById('screen');
    const ctx = canvas.getContext('2d');
    const staticCanvas = document.getElementById('static');
    const staticCtx = staticCanvas.getContext('2d');

    canvas.width = 640;
    canvas.height = 480;
    staticCanvas.width = 640;
    staticCanvas.height = 480;

    const playBtn = document.getElementById('playBtn');
    const stopBtn = document.getElementById('stopBtn');
    const rewindBtn = document.getElementById('rewindBtn');
    const ffBtn = document.getElementById('ffBtn');
    const staticBtn = document.getElementById('staticBtn');
    const recIndicator = document.getElementById('rec');
    const timestampEl = document.getElementById('timestamp');
    const trackingEl = document.getElementById('tracking');

    let isPlaying = false;
    let time = 0;
    let staticLevel = 0.15;
    let trackingOffset = 0;
    let glitchTimer = 0;
    let currentScene = 0;

    // Missing person data
    const missingPerson = {
      name: 'SOPHIE WALTEN',
      age: 9,
      lastSeen: 'JUNE 11, 1974',
      location: "BON'S BURGERS, K-9 FACILITY",
      height: "4'2\"",
      weight: '65 LBS',
      hair: 'BROWN',
      eyes: 'BROWN',
      wearing: 'YELLOW DRESS, WHITE SHOES',
      caseNo: '74-0611-MP'
    };

    const creepyMessages = [
      "SHE'S STILL HERE",
      "THE RABBIT IS WATCHING",
      "DON'T TRUST HIM",
      "FIND THEM",
      "HELP ME",
      "BEHIND YOU",
      "I CAN SEE YOU",
      "IT'S NOT OVER",
      "THEY NEVER LEFT"
    ];

    function drawStatic() {
      const imageData = staticCtx.createImageData(640, 480);
      const data = imageData.data;

      for (let i = 0; i < data.length; i += 4) {
        const v = Math.random() * 255;
        data[i] = v;
        data[i + 1] = v;
        data[i + 2] = v;
        data[i + 3] = 255;
      }

      staticCtx.putImageData(imageData, 0, 0);
      staticCanvas.style.opacity = staticLevel;
    }

    function drawVHSEffects() {
      // Tracking lines
      if (Math.random() < 0.02) {
        trackingOffset = Math.random() * 20 - 10;
      }
      trackingOffset *= 0.95;

      // Horizontal distortion bands
      for (let i = 0; i < 3; i++) {
        if (Math.random() < 0.01) {
          const y = Math.random() * 480;
          const h = 2 + Math.random() * 8;
          ctx.save();
          ctx.globalCompositeOperation = 'source-over';
          ctx.fillStyle = `rgba(255,255,255,${Math.random() * 0.3})`;
          ctx.fillRect(0, y, 640, h);
          ctx.restore();
        }
      }

      // Color bleeding
      ctx.save();
      ctx.globalCompositeOperation = 'screen';
      ctx.globalAlpha = 0.03;
      ctx.drawImage(canvas, 2, 0);
      ctx.globalCompositeOperation = 'multiply';
      ctx.fillStyle = `rgb(${255},${230 + Math.random()*25},${200 + Math.random()*55})`;
      ctx.fillRect(0, 0, 640, 480);
      ctx.restore();
    }

    function drawMissingPersonReport() {
      // Blue police background
      ctx.fillStyle = '#000033';
      ctx.fillRect(0, 0, 640, 480);

      // Header
      ctx.fillStyle = '#fff';
      ctx.font = 'bold 36px VT323';
      ctx.textAlign = 'center';
      ctx.fillText('M I S S I N G', 320, 50);

      ctx.font = '24px VT323';
      ctx.fillText('HAVE YOU SEEN THIS CHILD?', 320, 80);

      // Photo placeholder (creepy silhouette)
      ctx.fillStyle = '#111';
      ctx.fillRect(220, 100, 200, 250);
      ctx.strokeStyle = '#fff';
      ctx.lineWidth = 3;
      ctx.strokeRect(220, 100, 200, 250);

      // Creepy face silhouette
      ctx.fillStyle = '#1a1a1a';
      ctx.beginPath();
      ctx.ellipse(320, 200, 60, 80, 0, 0, Math.PI * 2);
      ctx.fill();

      // Glitchy eyes
      if (Math.random() < 0.1) {
        ctx.fillStyle = '#fff';
        ctx.fillRect(290, 180, 15, 8);
        ctx.fillRect(335, 180, 15, 8);
      }

      // Static over photo sometimes
      if (Math.random() < 0.05) {
        for (let y = 100; y < 350; y += 2) {
          for (let x = 220; x < 420; x += 2) {
            if (Math.random() < 0.3) {
              ctx.fillStyle = `rgba(255,255,255,${Math.random() * 0.5})`;
              ctx.fillRect(x, y, 2, 2);
            }
          }
        }
      }

      // Info
      ctx.textAlign = 'left';
      ctx.font = '22px VT323';
      ctx.fillStyle = '#ff0';

      const info = [
        `NAME: ${missingPerson.name}`,
        `AGE: ${missingPerson.age} YEARS OLD`,
        `LAST SEEN: ${missingPerson.lastSeen}`,
        `LOCATION: ${missingPerson.location}`,
        `HEIGHT: ${missingPerson.height}  WEIGHT: ${missingPerson.weight}`,
        `HAIR: ${missingPerson.hair}  EYES: ${missingPerson.eyes}`,
        `LAST WEARING: ${missingPerson.wearing}`
      ];

      info.forEach((line, i) => {
        // Glitch text occasionally
        let text = line;
        if (Math.random() < 0.02) {
          text = text.split('').map(c => Math.random() < 0.3 ? String.fromCharCode(Math.random() * 26 + 65) : c).join('');
        }
        ctx.fillText(text, 50, 380 + i * 25);
      });

      // Case number
      ctx.fillStyle = '#f00';
      ctx.font = '18px VT323';
      ctx.fillText(`CASE NO: ${missingPerson.caseNo}`, 50, 360);

      // Footer
      ctx.fillStyle = '#fff';
      ctx.textAlign = 'center';
      ctx.font = '20px VT323';
      ctx.fillText('IF YOU HAVE ANY INFORMATION CONTACT LOCAL AUTHORITIES', 320, 470);

      // Random creepy message flash
      if (Math.random() < 0.005) {
        ctx.fillStyle = '#f00';
        ctx.font = 'bold 48px VT323';
        ctx.fillText(creepyMessages[Math.floor(Math.random() * creepyMessages.length)], 320, 240);
      }
    }

    function drawStaticScreen() {
      ctx.fillStyle = '#000';
      ctx.fillRect(0, 0, 640, 480);

      // Heavy static
      for (let y = 0; y < 480; y += 2) {
        for (let x = 0; x < 640; x += 2) {
          const v = Math.random() * 100;
          ctx.fillStyle = `rgb(${v},${v},${v})`;
          ctx.fillRect(x, y, 2, 2);
        }
      }

      // Occasional text through static
      if (Math.random() < 0.03) {
        ctx.fillStyle = '#fff';
        ctx.font = '24px VT323';
        ctx.textAlign = 'center';
        ctx.fillText('NO SIGNAL', 320, 240);
      }
    }

    function drawBlueScreen() {
      ctx.fillStyle = '#000066';
      ctx.fillRect(0, 0, 640, 480);

      ctx.fillStyle = '#fff';
      ctx.font = '32px VT323';
      ctx.textAlign = 'center';
      ctx.fillText('[TAPE PAUSED]', 320, 220);
      ctx.font = '20px VT323';
      ctx.fillText('PRESS PLAY TO CONTINUE', 320, 260);
    }

    function drawRewindEffect() {
      ctx.fillStyle = '#000';
      ctx.fillRect(0, 0, 640, 480);

      // Rewind lines
      for (let i = 0; i < 20; i++) {
        const y = (time * 50 + i * 30) % 480;
        ctx.strokeStyle = `rgba(255,255,255,${0.1 + Math.random() * 0.2})`;
        ctx.lineWidth = 1 + Math.random() * 3;
        ctx.beginPath();
        ctx.moveTo(0, y);
        ctx.lineTo(640, y + Math.random() * 20 - 10);
        ctx.stroke();
      }

      ctx.fillStyle = '#fff';
      ctx.font = '48px VT323';
      ctx.textAlign = 'center';
      ctx.fillText('‚óÄ‚óÄ REWIND', 320, 250);
    }

    function drawFastForward() {
      drawMissingPersonReport();

      // Speed lines
      for (let i = 0; i < 30; i++) {
        const y = Math.random() * 480;
        ctx.fillStyle = `rgba(255,255,255,${Math.random() * 0.5})`;
        ctx.fillRect(0, y, 640, 1);
      }

      ctx.fillStyle = 'rgba(0,0,0,0.5)';
      ctx.fillRect(250, 200, 140, 60);
      ctx.fillStyle = '#fff';
      ctx.font = '48px VT323';
      ctx.textAlign = 'center';
      ctx.fillText('‚ñ∂‚ñ∂ FF', 320, 245);
    }

    function formatTime(t) {
      const hrs = Math.floor(t / 3600);
      const mins = Math.floor((t % 3600) / 60);
      const secs = Math.floor(t % 60);
      return `${hrs.toString().padStart(2,'0')}:${mins.toString().padStart(2,'0')}:${secs.toString().padStart(2,'0')}`;
    }

    let mode = 'stopped'; // stopped, playing, rewinding, ff

    function render() {
      // Update time
      if (mode === 'playing') {
        time += 0.016;
      } else if (mode === 'rewinding') {
        time = Math.max(0, time - 0.1);
      } else if (mode === 'ff') {
        time += 0.1;
      }

      // Draw based on mode
      if (mode === 'stopped') {
        drawBlueScreen();
      } else if (mode === 'rewinding') {
        drawRewindEffect();
        staticLevel = 0.4;
      } else if (mode === 'ff') {
        drawFastForward();
        staticLevel = 0.3;
      } else if (mode === 'static') {
        drawStaticScreen();
        staticLevel = 0.8;
      } else {
        drawMissingPersonReport();
        staticLevel = 0.12 + Math.random() * 0.08;

        // Occasional heavy glitch
        if (Math.random() < 0.005) {
          glitchTimer = 30;
        }
        if (glitchTimer > 0) {
          staticLevel = 0.6;
          glitchTimer--;
        }
      }

      drawStatic();
      if (mode !== 'static') {
        drawVHSEffects();
      }

      // Update UI
      timestampEl.textContent = formatTime(time);

      const trackBars = Math.floor(8 + Math.sin(time) * 2);
      trackingEl.textContent = `TRACKING ${'‚ñà'.repeat(trackBars)}${'‚ñë'.repeat(10-trackBars)}`;

      requestAnimationFrame(render);
    }

    // Controls
    playBtn.addEventListener('click', () => {
      mode = 'playing';
      isPlaying = true;
      playBtn.classList.add('active');
      recIndicator.innerHTML = '<div class="rec-dot"></div>PLAY';
    });

    stopBtn.addEventListener('click', () => {
      mode = 'stopped';
      isPlaying = false;
      playBtn.classList.remove('active');
      recIndicator.innerHTML = '<div class="rec-dot" style="background:#666;box-shadow:none"></div>STOP';
    });

    rewindBtn.addEventListener('click', () => {
      mode = 'rewinding';
      playBtn.classList.remove('active');
      recIndicator.innerHTML = '<div class="rec-dot" style="background:#ff0;box-shadow:0 0 10px #ff0"></div>REW';
    });

    rewindBtn.addEventListener('mouseup', () => {
      if (mode === 'rewinding') mode = 'stopped';
    });
    rewindBtn.addEventListener('mouseleave', () => {
      if (mode === 'rewinding') mode = 'stopped';
    });

    ffBtn.addEventListener('click', () => {
      mode = 'ff';
      playBtn.classList.remove('active');
      recIndicator.innerHTML = '<div class="rec-dot" style="background:#ff0;box-shadow:0 0 10px #ff0"></div>FF';
    });

    ffBtn.addEventListener('mouseup', () => {
      if (mode === 'ff') mode = 'stopped';
    });
    ffBtn.addEventListener('mouseleave', () => {
      if (mode === 'ff') mode = 'stopped';
    });

    staticBtn.addEventListener('click', () => {
      if (mode === 'static') {
        mode = 'stopped';
        recIndicator.innerHTML = '<div class="rec-dot" style="background:#666;box-shadow:none"></div>STOP';
      } else {
        mode = 'static';
        recIndicator.innerHTML = '<div class="rec-dot" style="background:#f00;box-shadow:0 0 10px #f00"></div>NO SIGNAL';
      }
    });

    // Easter egg - clicking on photo area
    canvas.addEventListener('click', (e) => {
      const rect = canvas.getBoundingClientRect();
      const x = (e.clientX - rect.left) * (640 / rect.width);
      const y = (e.clientY - rect.top) * (480 / rect.height);

      if (x > 220 && x < 420 && y > 100 && y < 350 && mode === 'playing') {
        glitchTimer = 60;
        // Flash a creepy message
        setTimeout(() => {
          ctx.fillStyle = '#f00';
          ctx.font = 'bold 72px VT323';
          ctx.textAlign = 'center';
          ctx.fillText(creepyMessages[Math.floor(Math.random() * creepyMessages.length)], 320, 250);
        }, 100);
      }
    });

    render();
  </script>
<script src="/apps/sloppy-header/sloppy-bar.js"></script>
<script src="/vibelib-extended.js"></script>
<script>
  // Compatibility Patch for Legacy Apps
  window.addEventListener("load", () => {
    if (window.SloppyKarma && window.VibeLib.Economy) {
      // Redirect old calls to new engine
      window.SloppyKarma.track = window.VibeLib.Economy.track;
    }
  });
</script>
</body>
</html>
