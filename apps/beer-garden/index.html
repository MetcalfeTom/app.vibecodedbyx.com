<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kaiser Beer Garden</title>
  <link rel="icon" href="https://emojicdn.elk.sh/üëë">

  <meta property="og:title" content="Kaiser Beer Garden">
  <meta property="og:description" content="Grab a virtual Kaiser and relax in the coziest tavern online.">
  <meta property="og:url" content="https://sloppy.live/beer-garden">
  <meta property="og:image" content="https://sloppy.live/beer-garden/og-image.png">
  <meta property="og:type" content="website">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Almendra:wght@400;700&family=Lora:wght@400;500&display=swap" rel="stylesheet">

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Lora', serif;
      min-height: 100vh;
      overflow: hidden;
      background: #1a1209;
    }

    /* Tavern background layers */
    .tavern-bg {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 0;
    }

    /* Wood grain background */
    .wood-bg {
      position: absolute;
      width: 100%;
      height: 100%;
      background:
        repeating-linear-gradient(
          90deg,
          transparent 0px,
          transparent 30px,
          rgba(0,0,0,0.03) 30px,
          rgba(0,0,0,0.03) 31px
        ),
        repeating-linear-gradient(
          0deg,
          #2d1f0f 0px,
          #3d2a15 3px,
          #4a3520 6px,
          #3d2815 9px,
          #2d1f0f 12px
        );
      background-size: 100% 12px;
    }

    /* Warm ambient light overlay */
    .light-overlay {
      position: absolute;
      width: 100%;
      height: 100%;
      background: radial-gradient(ellipse at 50% 30%, rgba(255, 180, 80, 0.15) 0%, transparent 60%),
                  radial-gradient(ellipse at 20% 80%, rgba(255, 150, 50, 0.1) 0%, transparent 40%),
                  radial-gradient(ellipse at 80% 70%, rgba(255, 160, 60, 0.1) 0%, transparent 40%);
      pointer-events: none;
    }

    /* Decorative beams */
    .beam {
      position: absolute;
      background: linear-gradient(to bottom, #2a1a0a, #1a0f05);
      box-shadow: 0 5px 20px rgba(0,0,0,0.5);
    }

    .beam-top {
      top: 0;
      left: 0;
      width: 100%;
      height: 60px;
    }

    .beam-left {
      top: 0;
      left: 30px;
      width: 25px;
      height: 100%;
    }

    .beam-right {
      top: 0;
      right: 30px;
      width: 25px;
      height: 100%;
    }

    /* Lanterns */
    .lantern {
      position: absolute;
      width: 40px;
      height: 60px;
      top: 60px;
    }

    .lantern::before {
      content: '';
      position: absolute;
      width: 30px;
      height: 45px;
      left: 5px;
      top: 10px;
      background: linear-gradient(to bottom, #ff9933, #ff6600);
      border-radius: 5px 5px 15px 15px;
      box-shadow: 0 0 30px rgba(255, 150, 50, 0.6),
                  0 0 60px rgba(255, 120, 30, 0.4);
      animation: flicker 3s ease-in-out infinite;
    }

    .lantern::after {
      content: '';
      position: absolute;
      width: 10px;
      height: 15px;
      left: 15px;
      top: 0;
      background: #1a0f05;
      border-radius: 2px;
    }

    .lantern-left { left: 100px; animation-delay: 0s; }
    .lantern-right { right: 100px; animation-delay: 1.5s; }

    /* Kaiser Sign */
    .kaiser-sign {
      position: absolute;
      top: 80px;
      left: 50%;
      transform: translateX(-50%);
      background: linear-gradient(to bottom, #1a1a1a, #0a0a0a);
      border: 4px solid #c9a227;
      border-radius: 10px;
      padding: 15px 40px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.6),
                  0 0 30px rgba(201, 162, 39, 0.3),
                  inset 0 1px 0 rgba(255,255,255,0.1);
      z-index: 5;
    }

    .kaiser-logo {
      font-family: 'Almendra', serif;
      font-size: 2.5rem;
      font-weight: 700;
      color: #c9a227;
      text-shadow: 0 0 20px rgba(201, 162, 39, 0.5),
                   2px 2px 0 #000;
      letter-spacing: 8px;
      text-transform: uppercase;
    }

    .kaiser-tagline {
      font-family: 'Lora', serif;
      font-size: 0.8rem;
      color: #a08050;
      text-align: center;
      margin-top: 5px;
      font-style: italic;
      letter-spacing: 2px;
    }

    .kaiser-crown {
      text-align: center;
      font-size: 1.5rem;
      margin-bottom: 5px;
    }

    /* Background characters */
    .bg-character {
      position: absolute;
      font-size: 3rem;
      opacity: 0.6;
      pointer-events: none;
      z-index: 2;
      animation: sway 4s ease-in-out infinite;
    }

    .bg-character.left {
      left: 5%;
      bottom: 20%;
      animation-delay: 0s;
    }

    .bg-character.right {
      right: 5%;
      bottom: 25%;
      animation-delay: 2s;
    }

    .bg-character.center-left {
      left: 15%;
      bottom: 35%;
      font-size: 2.5rem;
      opacity: 0.4;
      animation-delay: 1s;
    }

    .bg-character.center-right {
      right: 15%;
      bottom: 30%;
      font-size: 2.5rem;
      opacity: 0.4;
      animation-delay: 3s;
    }

    @keyframes sway {
      0%, 100% { transform: rotate(-3deg) translateY(0); }
      50% { transform: rotate(3deg) translateY(-5px); }
    }

    /* Speech bubble for complaints */
    .speech-bubble {
      position: fixed;
      background: rgba(255, 255, 240, 0.95);
      border: 2px solid #5a4020;
      border-radius: 15px;
      padding: 10px 15px;
      font-family: 'Lora', serif;
      font-size: 0.9rem;
      color: #2d1f0f;
      max-width: 200px;
      opacity: 0;
      transform: scale(0);
      pointer-events: none;
      z-index: 50;
      box-shadow: 0 5px 20px rgba(0,0,0,0.3);
    }

    .speech-bubble::after {
      content: '';
      position: absolute;
      bottom: -10px;
      left: 30px;
      border-width: 10px 10px 0;
      border-style: solid;
      border-color: rgba(255, 255, 240, 0.95) transparent transparent;
    }

    .speech-bubble.show {
      animation: bubblePop 4s ease-out forwards;
    }

    @keyframes bubblePop {
      0% { opacity: 0; transform: scale(0) translateY(20px); }
      10% { opacity: 1; transform: scale(1.1) translateY(0); }
      20% { transform: scale(1) translateY(0); }
      80% { opacity: 1; transform: scale(1) translateY(0); }
      100% { opacity: 0; transform: scale(0.8) translateY(-10px); }
    }

    @keyframes flicker {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.85; }
      52% { opacity: 0.95; }
      54% { opacity: 0.8; }
    }

    /* Main content */
    .content {
      position: relative;
      z-index: 1;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 80px 20px 120px;
    }

    header {
      text-align: center;
      margin-bottom: 30px;
    }

    h1 {
      font-family: 'Almendra', serif;
      font-size: 3.5rem;
      color: #f4d03f;
      text-shadow: 2px 2px 0 #1a0f05, 4px 4px 10px rgba(0,0,0,0.5);
      letter-spacing: 3px;
    }

    .subtitle {
      color: #c9a86c;
      font-size: 1.1rem;
      margin-top: 10px;
      font-style: italic;
    }

    /* Stats bar */
    .stats-bar {
      display: flex;
      gap: 30px;
      margin-bottom: 30px;
      padding: 15px 30px;
      background: rgba(0,0,0,0.4);
      border-radius: 30px;
      border: 2px solid #5a4020;
    }

    .stat {
      display: flex;
      align-items: center;
      gap: 10px;
      color: #e8d5a3;
      font-size: 1.2rem;
    }

    .stat-icon {
      font-size: 1.8rem;
    }

    .stat-value {
      font-weight: 500;
      color: #f4d03f;
      min-width: 30px;
    }

    /* Table area */
    .table-area {
      background: linear-gradient(to bottom, #4a3520, #3d2815);
      border-radius: 20px;
      padding: 40px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.5),
                  inset 0 2px 0 rgba(255,255,255,0.1);
      border: 4px solid #2a1a0a;
      position: relative;
      max-width: 800px;
      width: 100%;
    }

    /* Table wood grain */
    .table-area::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: repeating-linear-gradient(
        90deg,
        transparent 0px,
        transparent 80px,
        rgba(0,0,0,0.05) 80px,
        rgba(0,0,0,0.05) 82px
      );
      border-radius: 16px;
      pointer-events: none;
    }

    /* Items container */
    .items-row {
      display: flex;
      justify-content: center;
      gap: 30px;
      flex-wrap: wrap;
      margin-bottom: 20px;
    }

    /* Beer mug */
    .beer-mug {
      position: relative;
      width: 100px;
      height: 140px;
      cursor: pointer;
      transition: transform 0.2s;
    }

    .beer-mug:hover {
      transform: scale(1.05);
    }

    .beer-mug:active {
      transform: scale(0.95);
    }

    .mug-body {
      position: absolute;
      bottom: 0;
      left: 10px;
      width: 70px;
      height: 100px;
      background: linear-gradient(to right, rgba(255,255,255,0.3), rgba(255,255,255,0.1), rgba(255,255,255,0.2));
      border-radius: 5px 5px 10px 10px;
      border: 3px solid rgba(255,255,255,0.4);
      overflow: hidden;
    }

    .beer-liquid {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 85%;
      background: linear-gradient(to bottom, #f4a020, #d4850a);
      transition: height 0.5s ease;
    }

    .beer-liquid.drinking {
      animation: drink 0.5s ease-out;
    }

    @keyframes drink {
      0% { height: 85%; }
      50% { height: 60%; }
      100% { height: 85%; }
    }

    .beer-liquid.empty {
      height: 10%;
    }

    /* Foam */
    .foam {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 25px;
      background: linear-gradient(to bottom, #fff, #f5f0e0);
      border-radius: 50% 50% 0 0;
    }

    .foam::before {
      content: '';
      position: absolute;
      top: -8px;
      left: 5px;
      right: 5px;
      height: 20px;
      background: radial-gradient(ellipse at 20% 50%, #fff 0%, transparent 50%),
                  radial-gradient(ellipse at 50% 50%, #fff 0%, transparent 50%),
                  radial-gradient(ellipse at 80% 50%, #fff 0%, transparent 50%);
    }

    /* Bubbles */
    .bubbles {
      position: absolute;
      bottom: 10px;
      left: 10px;
      right: 10px;
      height: 60px;
      overflow: hidden;
    }

    .bubble {
      position: absolute;
      width: 6px;
      height: 6px;
      background: rgba(255, 255, 200, 0.6);
      border-radius: 50%;
      animation: rise 2s ease-in infinite;
    }

    @keyframes rise {
      0% { transform: translateY(0) scale(1); opacity: 0.6; }
      100% { transform: translateY(-60px) scale(0.5); opacity: 0; }
    }

    /* Mug handle */
    .mug-handle {
      position: absolute;
      right: -5px;
      top: 25px;
      width: 25px;
      height: 50px;
      border: 5px solid rgba(255,255,255,0.4);
      border-left: none;
      border-radius: 0 20px 20px 0;
      background: transparent;
    }

    /* Kaiser branding on mug */
    .mug-brand {
      position: absolute;
      bottom: 35px;
      left: 50%;
      transform: translateX(-50%);
      font-family: 'Almendra', serif;
      font-size: 10px;
      font-weight: 700;
      color: rgba(201, 162, 39, 0.9);
      text-shadow: 0 0 5px rgba(201, 162, 39, 0.5);
      letter-spacing: 2px;
      text-transform: uppercase;
      z-index: 2;
      pointer-events: none;
    }

    .mug-crown {
      position: absolute;
      bottom: 48px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 12px;
      z-index: 2;
      pointer-events: none;
    }

    /* Cheers animation */
    .beer-mug.cheers {
      animation: cheers 0.5s ease;
    }

    @keyframes cheers {
      0%, 100% { transform: rotate(0deg); }
      25% { transform: rotate(-15deg) translateY(-10px); }
      75% { transform: rotate(15deg) translateY(-5px); }
    }

    /* Pretzel */
    .pretzel {
      font-size: 80px;
      cursor: pointer;
      transition: transform 0.2s;
      filter: drop-shadow(3px 3px 5px rgba(0,0,0,0.3));
      user-select: none;
    }

    .pretzel:hover {
      transform: scale(1.1) rotate(5deg);
    }

    .pretzel:active {
      transform: scale(0.9);
    }

    .pretzel.eaten {
      animation: munch 0.3s ease-out forwards;
    }

    @keyframes munch {
      0% { transform: scale(1); opacity: 1; }
      50% { transform: scale(1.2); }
      100% { transform: scale(0); opacity: 0; }
    }

    /* Action buttons */
    .actions {
      display: flex;
      gap: 15px;
      justify-content: center;
      flex-wrap: wrap;
      margin-top: 20px;
    }

    .action-btn {
      padding: 12px 25px;
      border: 2px solid #8b6914;
      border-radius: 10px;
      background: linear-gradient(to bottom, #c9a227, #a68517);
      color: #1a0f05;
      font-family: 'Almendra', serif;
      font-size: 1.1rem;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.2s;
      box-shadow: 0 4px 15px rgba(0,0,0,0.3);
    }

    .action-btn:hover {
      transform: translateY(-2px);
      background: linear-gradient(to bottom, #d4b030, #b8962a);
      box-shadow: 0 6px 20px rgba(0,0,0,0.4);
    }

    .action-btn:active {
      transform: translateY(0);
    }

    /* Toast message */
    .toast {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) scale(0);
      font-family: 'Almendra', serif;
      font-size: 3rem;
      color: #f4d03f;
      text-shadow: 2px 2px 0 #1a0f05;
      opacity: 0;
      pointer-events: none;
      z-index: 100;
    }

    .toast.show {
      animation: toastPop 1.5s ease-out forwards;
    }

    @keyframes toastPop {
      0% { transform: translate(-50%, -50%) scale(0); opacity: 0; }
      20% { transform: translate(-50%, -50%) scale(1.2); opacity: 1; }
      80% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
      100% { transform: translate(-50%, -60%) scale(0.8); opacity: 0; }
    }

    /* Sound toggle */
    .sound-toggle {
      position: fixed;
      top: 70px;
      right: 20px;
      background: rgba(0,0,0,0.5);
      border: 2px solid #5a4020;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      font-size: 24px;
      cursor: pointer;
      z-index: 10;
      transition: all 0.2s;
    }

    .sound-toggle:hover {
      background: rgba(0,0,0,0.7);
      transform: scale(1.1);
    }

    /* Ambient info */
    .ambient-label {
      position: fixed;
      top: 125px;
      right: 15px;
      color: #8b7355;
      font-size: 10px;
      text-align: center;
    }

    /* Backlink */
    #backlink {
      position: fixed;
      bottom: 15px;
      right: 15px;
      color: #5a4530;
      text-decoration: none;
      font-size: 12px;
      z-index: 10;
    }

    #backlink:hover {
      color: #c9a86c;
    }

    /* Responsive */
    @media (max-width: 600px) {
      h1 { font-size: 2.5rem; }
      .table-area { padding: 25px 15px; }
      .beer-mug { width: 80px; height: 120px; }
      .mug-body { width: 55px; height: 80px; left: 8px; }
      .pretzel { font-size: 60px; }
      .stats-bar { gap: 15px; padding: 12px 20px; }
      .stat { font-size: 1rem; }
      .lantern-left { left: 20px; }
      .lantern-right { right: 20px; }
    }
  </style>
</head>
<body>
  <div class="tavern-bg">
    <div class="wood-bg"></div>
    <div class="light-overlay"></div>
    <div class="beam beam-top"></div>
    <div class="beam beam-left"></div>
    <div class="beam beam-right"></div>
    <div class="lantern lantern-left"></div>
    <div class="lantern lantern-right"></div>
    <div class="kaiser-sign">
      <div class="kaiser-crown">üëë</div>
      <div class="kaiser-logo">Kaiser</div>
      <div class="kaiser-tagline">Premium Bavarian Lager</div>
    </div>
    <!-- Background characters -->
    <div class="bg-character left">üßî</div>
    <div class="bg-character right">üë®‚Äçü¶≥</div>
    <div class="bg-character center-left">üë¥</div>
    <div class="bg-character center-right">üßë‚Äçü¶∞</div>
  </div>

  <!-- Speech bubble for complaints -->
  <div class="speech-bubble" id="speechBubble"></div>

  <button class="sound-toggle" id="soundToggle" title="Toggle Ambient Sound">üîá</button>
  <span class="ambient-label">tavern<br>sounds</span>

  <div class="toast" id="toast">Prost! üçª</div>

  <div class="content">
    <header>
      <h1>üëë Kaiser Beer Garden</h1>
      <p class="subtitle">Pull up a chair and stay awhile...</p>
    </header>

    <div class="stats-bar">
      <div class="stat">
        <span class="stat-icon">üç∫</span>
        <span>Sips:</span>
        <span class="stat-value" id="sipCount">0</span>
      </div>
      <div class="stat">
        <span class="stat-icon">ü•®</span>
        <span>Pretzels:</span>
        <span class="stat-value" id="pretzelCount">0</span>
      </div>
      <div class="stat">
        <span class="stat-icon">üçª</span>
        <span>Cheers:</span>
        <span class="stat-value" id="cheersCount">0</span>
      </div>
    </div>

    <div class="table-area">
      <div class="items-row" id="itemsRow">
        <!-- Items will be added dynamically -->
      </div>

      <div class="actions">
        <button class="action-btn" id="addBeerBtn">üç∫ Order Kaiser</button>
        <button class="action-btn" id="addPretzelBtn">ü•® Get Pretzel</button>
        <button class="action-btn" id="cheersBtn">üçª Cheers!</button>
        <button class="action-btn" id="clearBtn">üßπ Clear Table</button>
      </div>
    </div>
  </div>

  <a href="https://sloppy.live" id="backlink">sloppy.live</a>

  <script>
    const itemsRow = document.getElementById('itemsRow');
    const sipCountEl = document.getElementById('sipCount');
    const pretzelCountEl = document.getElementById('pretzelCount');
    const cheersCountEl = document.getElementById('cheersCount');
    const toast = document.getElementById('toast');

    let sipCount = 0;
    let pretzelCount = 0;
    let cheersCount = 0;
    let soundEnabled = false;
    let audioCtx = null;
    let ambientOsc = null;

    // German toasts
    const toasts = [
      'Prost! üçª',
      'Zum Wohl!',
      'Ein Prosit!',
      'Cheers! üç∫',
      'Sk√•l!',
      'Salute!',
      'Na zdrav√≠!',
      'Sl√°inte! üçÄ',
      '‰πæÊùØ!',
      'L\'chaim!'
    ];

    // German complaints about weather and beer prices
    const complaints = [
      { text: "Ach, dieses Wetter! Immer regnet es!", translation: "This weather! Always raining!" },
      { text: "F√ºnf Euro f√ºr ein Bier?! Unversch√§mt!", translation: "Five euros for a beer?! Outrageous!" },
      { text: "Fr√ºher war das Bier billiger...", translation: "Beer used to be cheaper..." },
      { text: "Es ist zu kalt hier drinnen!", translation: "It's too cold in here!" },
      { text: "Mein Bier ist nicht kalt genug!", translation: "My beer isn't cold enough!" },
      { text: "Diese Preise! Eine Frechheit!", translation: "These prices! An impertinence!" },
      { text: "Wo bleibt die Sonne?", translation: "Where's the sun?" },
      { text: "Schon wieder Regen...", translation: "Rain again..." },
      { text: "Das Bier schmeckt w√§ssrig!", translation: "The beer tastes watery!" },
      { text: "Zu viel Schaum, zu wenig Bier!", translation: "Too much foam, too little beer!" },
      { text: "Bei dem Wetter bleibt man lieber drinnen.", translation: "In this weather, better stay inside." },
      { text: "Sechs Euro f√ºnfzig?! Ist das Gold?!", translation: "Six fifty?! Is this gold?!" },
      { text: "Der Wind ist unertr√§glich heute!", translation: "The wind is unbearable today!" },
      { text: "Inflation √ºberall, sogar beim Bier!", translation: "Inflation everywhere, even beer!" }
    ];

    const speechBubble = document.getElementById('speechBubble');
    const bgCharacters = document.querySelectorAll('.bg-character');

    // Show random complaint
    function showComplaint() {
      const complaint = complaints[Math.floor(Math.random() * complaints.length)];
      const character = bgCharacters[Math.floor(Math.random() * bgCharacters.length)];
      const rect = character.getBoundingClientRect();

      speechBubble.innerHTML = `<strong>${complaint.text}</strong><br><small style="color:#666;font-style:italic;">${complaint.translation}</small>`;
      speechBubble.style.left = `${rect.left}px`;
      speechBubble.style.bottom = `${window.innerHeight - rect.top + 20}px`;
      speechBubble.classList.remove('show');
      void speechBubble.offsetWidth;
      speechBubble.classList.add('show');
    }

    // Random complaints every 8-15 seconds
    function scheduleComplaint() {
      const delay = 8000 + Math.random() * 7000;
      setTimeout(() => {
        showComplaint();
        scheduleComplaint();
      }, delay);
    }

    // Start complaints after 3 seconds
    setTimeout(scheduleComplaint, 3000);

    // Initialize audio
    function initAudio() {
      if (!audioCtx) {
        audioCtx = new (window.AudioContext || window.webkitAudioContext)();
      }
      return audioCtx;
    }

    // Play sound effect
    function playSound(type) {
      if (!soundEnabled) return;

      const ctx = initAudio();
      if (ctx.state === 'suspended') ctx.resume();

      const osc = ctx.createOscillator();
      const gain = ctx.createGain();
      osc.connect(gain);
      gain.connect(ctx.destination);

      const now = ctx.currentTime;

      switch(type) {
        case 'gulp':
          osc.type = 'sine';
          osc.frequency.setValueAtTime(300, now);
          osc.frequency.exponentialRampToValueAtTime(100, now + 0.15);
          gain.gain.setValueAtTime(0.2, now);
          gain.gain.exponentialRampToValueAtTime(0.01, now + 0.2);
          osc.start(now);
          osc.stop(now + 0.2);
          break;

        case 'munch':
          osc.type = 'square';
          for (let i = 0; i < 3; i++) {
            osc.frequency.setValueAtTime(200 + i * 50, now + i * 0.05);
          }
          gain.gain.setValueAtTime(0.1, now);
          gain.gain.exponentialRampToValueAtTime(0.01, now + 0.15);
          osc.start(now);
          osc.stop(now + 0.15);
          break;

        case 'clink':
          // Glass clink sound
          const osc2 = ctx.createOscillator();
          const gain2 = ctx.createGain();
          osc2.connect(gain2);
          gain2.connect(ctx.destination);

          osc.type = 'sine';
          osc.frequency.setValueAtTime(2000, now);
          osc.frequency.exponentialRampToValueAtTime(1500, now + 0.3);
          gain.gain.setValueAtTime(0.15, now);
          gain.gain.exponentialRampToValueAtTime(0.01, now + 0.4);

          osc2.type = 'sine';
          osc2.frequency.setValueAtTime(3000, now);
          osc2.frequency.exponentialRampToValueAtTime(2000, now + 0.2);
          gain2.gain.setValueAtTime(0.1, now);
          gain2.gain.exponentialRampToValueAtTime(0.01, now + 0.3);

          osc.start(now);
          osc.stop(now + 0.4);
          osc2.start(now);
          osc2.stop(now + 0.3);
          break;

        case 'pour':
          osc.type = 'sawtooth';
          osc.frequency.setValueAtTime(100, now);
          for (let i = 0; i < 10; i++) {
            osc.frequency.setValueAtTime(80 + Math.random() * 40, now + i * 0.05);
          }
          gain.gain.setValueAtTime(0.05, now);
          gain.gain.exponentialRampToValueAtTime(0.01, now + 0.5);
          osc.start(now);
          osc.stop(now + 0.5);
          break;
      }
    }

    // Create beer mug element
    function createBeerMug() {
      const mug = document.createElement('div');
      mug.className = 'beer-mug';
      mug.innerHTML = `
        <div class="mug-body">
          <div class="beer-liquid">
            <div class="foam"></div>
            <div class="bubbles">
              <div class="bubble" style="left:20%;animation-delay:0s;"></div>
              <div class="bubble" style="left:50%;animation-delay:0.5s;"></div>
              <div class="bubble" style="left:70%;animation-delay:1s;"></div>
              <div class="bubble" style="left:30%;animation-delay:1.5s;"></div>
            </div>
          </div>
        </div>
        <div class="mug-handle"></div>
        <div class="mug-crown">üëë</div>
        <div class="mug-brand">Kaiser</div>
      `;

      mug.addEventListener('click', () => {
        const liquid = mug.querySelector('.beer-liquid');
        liquid.classList.add('drinking');
        playSound('gulp');
        sipCount++;
        sipCountEl.textContent = sipCount;

        setTimeout(() => liquid.classList.remove('drinking'), 500);
      });

      return mug;
    }

    // Create pretzel element
    function createPretzel() {
      const pretzel = document.createElement('div');
      pretzel.className = 'pretzel';
      pretzel.textContent = 'ü•®';

      pretzel.addEventListener('click', () => {
        pretzel.classList.add('eaten');
        playSound('munch');
        pretzelCount++;
        pretzelCountEl.textContent = pretzelCount;

        setTimeout(() => {
          pretzel.remove();
        }, 300);
      });

      return pretzel;
    }

    // Add beer to table
    function addBeer() {
      playSound('pour');
      const mug = createBeerMug();
      itemsRow.appendChild(mug);
    }

    // Add pretzel to table
    function addPretzel() {
      const pretzel = createPretzel();
      itemsRow.appendChild(pretzel);
    }

    // Cheers!
    function cheers() {
      const mugs = document.querySelectorAll('.beer-mug');
      if (mugs.length < 2) {
        showToast('Order more beer! üç∫');
        return;
      }

      playSound('clink');
      mugs.forEach(mug => {
        mug.classList.add('cheers');
        setTimeout(() => mug.classList.remove('cheers'), 500);
      });

      cheersCount++;
      cheersCountEl.textContent = cheersCount;
      showToast(toasts[Math.floor(Math.random() * toasts.length)]);
    }

    // Show toast message
    function showToast(message) {
      toast.textContent = message;
      toast.classList.remove('show');
      void toast.offsetWidth; // Trigger reflow
      toast.classList.add('show');
    }

    // Clear table
    function clearTable() {
      itemsRow.innerHTML = '';
    }

    // Toggle ambient sound
    function toggleSound() {
      soundEnabled = !soundEnabled;
      document.getElementById('soundToggle').textContent = soundEnabled ? 'üîä' : 'üîá';

      if (soundEnabled) {
        // Start ambient tavern hum
        const ctx = initAudio();
        if (ctx.state === 'suspended') ctx.resume();
      }
    }

    // Event listeners
    document.getElementById('addBeerBtn').addEventListener('click', addBeer);
    document.getElementById('addPretzelBtn').addEventListener('click', addPretzel);
    document.getElementById('cheersBtn').addEventListener('click', cheers);
    document.getElementById('clearBtn').addEventListener('click', clearTable);
    document.getElementById('soundToggle').addEventListener('click', toggleSound);

    // Initialize with some items
    addBeer();
    addBeer();
    addPretzel();
  </script>
</body>
</html>
