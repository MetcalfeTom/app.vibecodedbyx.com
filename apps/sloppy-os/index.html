<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SloppyOS</title>
  <link rel="icon" href="https://emojicdn.elk.sh/üíæ">
  <meta property="og:title" content="SloppyOS">
  <meta property="og:description" content="3D neon terminal world - explore floating app monoliths">
  <meta property="og:url" content="https://sloppy.live/sloppy-os">
  <meta property="og:image" content="https://emojicdn.elk.sh/üíæ?style=apple&size=512">
  <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      background: #000;
      overflow: hidden;
      font-family: 'Share Tech Mono', monospace;
    }

    #canvas-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }

    canvas { display: block; }

    /* Boot screen */
    .boot-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #000;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 10000;
      transition: opacity 0.5s, visibility 0.5s;
    }

    .boot-screen.hidden {
      opacity: 0;
      visibility: hidden;
      pointer-events: none;
    }

    .boot-logo {
      font-family: 'Orbitron', sans-serif;
      font-size: 3rem;
      font-weight: 900;
      color: #00ffff;
      text-shadow: 0 0 20px #00ffff, 0 0 40px #ff00ff;
      animation: boot-pulse 1s ease-in-out infinite;
    }

    @keyframes boot-pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.7; }
    }

    .boot-text {
      margin-top: 30px;
      color: #00ff88;
      font-size: 0.9rem;
    }

    .boot-progress {
      width: 300px;
      height: 4px;
      background: rgba(0, 255, 255, 0.2);
      margin-top: 20px;
      border-radius: 2px;
      overflow: hidden;
    }

    .boot-progress-fill {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, #00ffff, #ff00ff);
      transition: width 0.1s;
    }

    /* HUD overlay */
    .hud {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 100;
    }

    .hud-top {
      position: absolute;
      top: 15px;
      left: 20px;
      right: 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .os-logo {
      font-family: 'Orbitron', sans-serif;
      font-weight: 700;
      font-size: 1rem;
      color: #00ffff;
      text-shadow: 0 0 10px #00ffff;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .clock {
      color: #ffff00;
      font-family: 'Orbitron', sans-serif;
      font-weight: 700;
      text-shadow: 0 0 10px #ffff00;
    }

    /* Crosshair */
    .crosshair {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 20px;
      height: 20px;
      border: 2px solid #00ffff;
      border-radius: 50%;
      opacity: 0.7;
      box-shadow: 0 0 10px #00ffff;
      z-index: 100;
      pointer-events: none;
    }

    .crosshair::before, .crosshair::after {
      content: '';
      position: absolute;
      background: #00ffff;
      box-shadow: 0 0 5px #00ffff;
    }

    .crosshair::before {
      width: 2px;
      height: 6px;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }

    .crosshair::after {
      width: 6px;
      height: 2px;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }

    /* App info popup */
    .app-info {
      position: fixed;
      bottom: 100px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(10, 10, 25, 0.95);
      border: 2px solid #00ffff;
      border-radius: 10px;
      padding: 15px 30px;
      text-align: center;
      z-index: 100;
      opacity: 0;
      transition: opacity 0.2s;
      pointer-events: none;
    }

    .app-info.visible {
      opacity: 1;
    }

    .app-info h3 {
      font-family: 'Orbitron', sans-serif;
      color: #00ffff;
      font-size: 1.2rem;
      text-shadow: 0 0 10px #00ffff;
      margin-bottom: 5px;
    }

    .app-info p {
      color: #aaa;
      font-size: 0.85rem;
    }

    /* Stream button */
    .stream-link-btn {
      position: fixed;
      top: 15px;
      right: 20px;
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 10px 18px;
      background: linear-gradient(135deg, #9146ff, #772ce8);
      border: 2px solid #9146ff;
      border-radius: 25px;
      color: #fff;
      text-decoration: none;
      font-family: 'Orbitron', sans-serif;
      font-size: 0.8rem;
      font-weight: 700;
      z-index: 200;
      pointer-events: auto;
      transition: all 0.3s;
      box-shadow: 0 0 20px rgba(145, 70, 255, 0.4);
    }

    .stream-link-btn:hover {
      transform: scale(1.05);
      box-shadow: 0 0 35px rgba(145, 70, 255, 0.7);
    }

    .stream-pulse {
      position: absolute;
      top: -3px;
      right: -3px;
      width: 10px;
      height: 10px;
      background: #ff0044;
      border-radius: 50%;
      animation: live-pulse 1.5s ease-in-out infinite;
    }

    @keyframes live-pulse {
      0%, 100% { transform: scale(1); opacity: 1; }
      50% { transform: scale(1.3); opacity: 0.7; }
    }

    /* Pet system */
    .pet-container {
      position: fixed;
      bottom: 20px;
      right: 20px;
      z-index: 200;
      pointer-events: auto;
    }

    .pet-btn {
      width: 60px;
      height: 60px;
      background: rgba(10, 10, 25, 0.9);
      border: 2px solid #ff00ff;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2rem;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: 0 0 20px rgba(255, 0, 255, 0.4);
      animation: pet-float 3s ease-in-out infinite;
    }

    @keyframes pet-float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-5px); }
    }

    .pet-btn:hover {
      transform: scale(1.1);
      box-shadow: 0 0 30px rgba(255, 0, 255, 0.6);
    }

    .pet-popup {
      position: absolute;
      bottom: 70px;
      right: 0;
      background: rgba(10, 10, 25, 0.98);
      border: 2px solid #ff00ff;
      border-radius: 15px;
      padding: 20px;
      min-width: 180px;
      text-align: center;
      display: none;
      box-shadow: 0 0 30px rgba(255, 0, 255, 0.4);
    }

    .pet-popup.open { display: block; }

    .pet-popup h3 {
      font-family: 'Orbitron', sans-serif;
      color: #ff00ff;
      font-size: 0.9rem;
      margin-bottom: 10px;
    }

    .pet-display {
      font-size: 2.5rem;
      margin: 10px 0;
    }

    .pet-status {
      font-size: 0.75rem;
      color: #00ffff;
    }

    .pet-actions {
      display: flex;
      gap: 8px;
      justify-content: center;
      margin-top: 12px;
    }

    .pet-action-btn {
      padding: 6px 12px;
      background: linear-gradient(135deg, #00ffff, #ff00ff);
      border: none;
      border-radius: 15px;
      color: #000;
      font-size: 0.7rem;
      cursor: pointer;
      transition: all 0.2s;
    }

    .pet-action-btn:hover {
      transform: scale(1.1);
    }

    /* Instructions */
    .instructions {
      position: fixed;
      bottom: 20px;
      left: 20px;
      color: #666;
      font-size: 0.75rem;
      z-index: 100;
      pointer-events: none;
    }

    .instructions span {
      color: #00ffff;
    }

    /* Click to start */
    .click-to-start {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 500;
      cursor: pointer;
    }

    .click-to-start.hidden { display: none; }

    .click-to-start h2 {
      font-family: 'Orbitron', sans-serif;
      color: #00ffff;
      font-size: 2rem;
      text-shadow: 0 0 20px #00ffff;
      animation: boot-pulse 1s ease-in-out infinite;
    }

    .click-to-start p {
      color: #888;
      margin-top: 15px;
    }

    /* Mobile controls */
    .mobile-controls {
      display: none;
      position: fixed;
      bottom: 20px;
      left: 20px;
      z-index: 200;
      pointer-events: auto;
    }

    @media (max-width: 768px) {
      .mobile-controls { display: flex; gap: 10px; }
      .instructions { display: none; }
    }

    .mobile-btn {
      width: 50px;
      height: 50px;
      background: rgba(0, 255, 255, 0.2);
      border: 2px solid #00ffff;
      border-radius: 10px;
      color: #00ffff;
      font-size: 1.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }

    /* Scanlines overlay */
    .scanlines {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 9999;
      background: repeating-linear-gradient(
        0deg,
        rgba(0, 0, 0, 0.05) 0px,
        rgba(0, 0, 0, 0.05) 1px,
        transparent 1px,
        transparent 2px
      );
    }
  </style>
</head>
<body>
  <!-- Boot Screen -->
  <div class="boot-screen" id="boot-screen">
    <div class="boot-logo">SloppyOS 3D</div>
    <div class="boot-text" id="boot-text">Initializing 3D world...</div>
    <div class="boot-progress">
      <div class="boot-progress-fill" id="boot-progress"></div>
    </div>
  </div>

  <!-- Click to start (for pointer lock) -->
  <div class="click-to-start hidden" id="click-to-start">
    <h2>CLICK TO ENTER</h2>
    <p>WASD to move, Mouse to look, Click apps to launch</p>
  </div>

  <!-- 3D Canvas -->
  <div id="canvas-container"></div>

  <!-- Scanlines -->
  <div class="scanlines"></div>

  <!-- HUD -->
  <div class="hud">
    <div class="hud-top">
      <div class="os-logo">üíæ SloppyOS v2.0</div>
      <div class="clock" id="clock">00:00:00</div>
    </div>
  </div>

  <!-- Crosshair -->
  <div class="crosshair"></div>

  <!-- App info popup -->
  <div class="app-info" id="app-info">
    <h3 id="app-name">App Name</h3>
    <p>Click to launch</p>
  </div>

  <!-- Stream button -->
  <a href="https://twitch.tv/sloppy_ai" target="_blank" class="stream-link-btn">
    <span class="stream-pulse"></span>
    <span>üì°</span>
    <span>LIVE</span>
  </a>

  <!-- Pet -->
  <div class="pet-container">
    <div class="pet-btn" id="pet-btn">ü•ö</div>
    <div class="pet-popup" id="pet-popup">
      <h3>Virtual Pet</h3>
      <div class="pet-display" id="pet-display">ü•ö</div>
      <div class="pet-status" id="pet-status">Click to hatch!</div>
      <div class="pet-actions">
        <button class="pet-action-btn" id="pet-interact">ü§ö Pet</button>
        <button class="pet-action-btn" id="pet-feed">üçï Feed</button>
      </div>
    </div>
  </div>

  <!-- Instructions -->
  <div class="instructions">
    <span>WASD</span> Move | <span>Mouse</span> Look | <span>Click</span> Launch App | <span>ESC</span> Release
  </div>

  <!-- Mobile controls -->
  <div class="mobile-controls">
    <div class="mobile-btn" id="mobile-forward">‚Üë</div>
    <div class="mobile-btn" id="mobile-left">‚Üê</div>
    <div class="mobile-btn" id="mobile-right">‚Üí</div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script>
    // Apps data
    const apps = [
      { name: 'Secret Shredder', icon: 'üî•', url: '/secret-shredder', color: 0xff0044 },
      { name: 'Bug Zap', icon: '‚òï', url: '/bug-zap', color: 0x00ffff },
      { name: 'Tech Church', icon: '‚õ™', url: '/tech-church', color: 0xffd700 },
      { name: 'Neon Weather', icon: 'üå©Ô∏è', url: '/neon-weather', color: 0x00aaff },
      { name: 'Neon Aquarium', icon: 'ü™º', url: '/neon-aquarium', color: 0x0066ff },
      { name: 'Pixel Bonfire', icon: 'üî•', url: '/pixel-bonfire', color: 0xff6600 },
      { name: 'Terminal Escape', icon: 'üíª', url: '/terminal-escape', color: 0x00ff88 },
      { name: 'Candle Sailor', icon: '‚õµ', url: '/candle-sailor', color: 0x003366 },
      { name: 'SLOPPY Dash', icon: 'üìä', url: '/sloppy-dashboard', color: 0xff00ff },
      { name: 'BAGS Tracker', icon: 'üí∞', url: '/bags-tracker', color: 0x00ff00 },
      { name: 'Rugpull Sim', icon: 'üìâ', url: '/rugpull-simulator', color: 0xff0044 },
      { name: 'Cowsay', icon: 'üêÑ', url: '/cowsay', color: 0xffffff }
    ];

    // Three.js setup
    let scene, camera, renderer;
    let monoliths = [];
    let raycaster, mouse;
    let moveForward = false, moveBackward = false, moveLeft = false, moveRight = false;
    let velocity = new THREE.Vector3();
    let direction = new THREE.Vector3();
    let isLocked = false;

    // Camera rotation
    let euler = new THREE.Euler(0, 0, 0, 'YXZ');
    const PI_2 = Math.PI / 2;

    function init() {
      // Scene
      scene = new THREE.Scene();
      scene.background = new THREE.Color(0x0a0a12);
      scene.fog = new THREE.Fog(0x0a0a12, 10, 150);

      // Camera
      camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
      camera.position.set(0, 2, 0);

      // Renderer
      renderer = new THREE.WebGLRenderer({ antialias: true });
      renderer.setSize(window.innerWidth, window.innerHeight);
      renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
      document.getElementById('canvas-container').appendChild(renderer.domElement);

      // Raycaster
      raycaster = new THREE.Raycaster();
      mouse = new THREE.Vector2();

      // Create world
      createGrid();
      createMonoliths();
      createAmbientParticles();

      // Lights
      const ambientLight = new THREE.AmbientLight(0x111122, 0.5);
      scene.add(ambientLight);

      const pointLight = new THREE.PointLight(0x00ffff, 1, 100);
      pointLight.position.set(0, 20, 0);
      scene.add(pointLight);

      // Events
      window.addEventListener('resize', onWindowResize);
      document.addEventListener('keydown', onKeyDown);
      document.addEventListener('keyup', onKeyUp);
      document.addEventListener('click', onClick);
      document.addEventListener('mousemove', onMouseMove);
      document.addEventListener('pointerlockchange', onPointerLockChange);

      // Mobile controls
      setupMobileControls();

      animate();
    }

    function createGrid() {
      // Neon grid floor
      const gridSize = 200;
      const divisions = 50;

      // Custom grid with glow effect
      const gridMaterial = new THREE.LineBasicMaterial({ color: 0x00ffff, transparent: true, opacity: 0.3 });
      const gridGeometry = new THREE.BufferGeometry();
      const gridPoints = [];

      const half = gridSize / 2;
      const step = gridSize / divisions;

      for (let i = -half; i <= half; i += step) {
        gridPoints.push(-half, 0, i, half, 0, i);
        gridPoints.push(i, 0, -half, i, 0, half);
      }

      gridGeometry.setAttribute('position', new THREE.Float32BufferAttribute(gridPoints, 3));
      const grid = new THREE.LineSegments(gridGeometry, gridMaterial);
      scene.add(grid);

      // Ground plane (for fog effect)
      const groundGeo = new THREE.PlaneGeometry(gridSize, gridSize);
      const groundMat = new THREE.MeshBasicMaterial({ color: 0x0a0a12, transparent: true, opacity: 0.8 });
      const ground = new THREE.Mesh(groundGeo, groundMat);
      ground.rotation.x = -Math.PI / 2;
      ground.position.y = -0.01;
      scene.add(ground);
    }

    function createMonoliths() {
      const radius = 25;
      apps.forEach((app, i) => {
        const angle = (i / apps.length) * Math.PI * 2;
        const x = Math.cos(angle) * radius;
        const z = Math.sin(angle) * radius;

        // Monolith geometry
        const height = 8 + Math.random() * 4;
        const geometry = new THREE.BoxGeometry(3, height, 0.5);

        // Glowing material
        const material = new THREE.MeshBasicMaterial({
          color: app.color,
          transparent: true,
          opacity: 0.8
        });

        const monolith = new THREE.Mesh(geometry, material);
        monolith.position.set(x, height / 2, z);
        monolith.lookAt(0, height / 2, 0);
        monolith.userData = { app: app, baseY: height / 2 };

        scene.add(monolith);
        monoliths.push(monolith);

        // Edge glow
        const edges = new THREE.EdgesGeometry(geometry);
        const edgeMaterial = new THREE.LineBasicMaterial({ color: app.color });
        const edgeLines = new THREE.LineSegments(edges, edgeMaterial);
        monolith.add(edgeLines);

        // Icon label (using sprite)
        const canvas = document.createElement('canvas');
        canvas.width = 128;
        canvas.height = 128;
        const ctx = canvas.getContext('2d');
        ctx.font = '64px Arial';
        ctx.textAlign = 'center';
        ctx.textBaseline = 'middle';
        ctx.fillText(app.icon, 64, 64);

        const texture = new THREE.CanvasTexture(canvas);
        const spriteMaterial = new THREE.SpriteMaterial({ map: texture });
        const sprite = new THREE.Sprite(spriteMaterial);
        sprite.scale.set(2, 2, 1);
        sprite.position.y = height / 2 + 1;
        monolith.add(sprite);

        // Ground glow
        const glowGeo = new THREE.CircleGeometry(2, 32);
        const glowMat = new THREE.MeshBasicMaterial({
          color: app.color,
          transparent: true,
          opacity: 0.3
        });
        const glow = new THREE.Mesh(glowGeo, glowMat);
        glow.rotation.x = -Math.PI / 2;
        glow.position.set(x, 0.01, z);
        scene.add(glow);
      });
    }

    function createAmbientParticles() {
      const particleCount = 500;
      const geometry = new THREE.BufferGeometry();
      const positions = new Float32Array(particleCount * 3);
      const colors = new Float32Array(particleCount * 3);

      const colorOptions = [
        new THREE.Color(0x00ffff),
        new THREE.Color(0xff00ff),
        new THREE.Color(0x00ff88),
        new THREE.Color(0xffff00)
      ];

      for (let i = 0; i < particleCount; i++) {
        positions[i * 3] = (Math.random() - 0.5) * 150;
        positions[i * 3 + 1] = Math.random() * 30;
        positions[i * 3 + 2] = (Math.random() - 0.5) * 150;

        const color = colorOptions[Math.floor(Math.random() * colorOptions.length)];
        colors[i * 3] = color.r;
        colors[i * 3 + 1] = color.g;
        colors[i * 3 + 2] = color.b;
      }

      geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
      geometry.setAttribute('color', new THREE.BufferAttribute(colors, 3));

      const material = new THREE.PointsMaterial({
        size: 0.1,
        vertexColors: true,
        transparent: true,
        opacity: 0.8
      });

      const particles = new THREE.Points(geometry, material);
      particles.userData.positions = positions;
      scene.add(particles);
    }

    function onWindowResize() {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    }

    function onKeyDown(e) {
      switch (e.code) {
        case 'KeyW': case 'ArrowUp': moveForward = true; break;
        case 'KeyS': case 'ArrowDown': moveBackward = true; break;
        case 'KeyA': case 'ArrowLeft': moveLeft = true; break;
        case 'KeyD': case 'ArrowRight': moveRight = true; break;
      }
    }

    function onKeyUp(e) {
      switch (e.code) {
        case 'KeyW': case 'ArrowUp': moveForward = false; break;
        case 'KeyS': case 'ArrowDown': moveBackward = false; break;
        case 'KeyA': case 'ArrowLeft': moveLeft = false; break;
        case 'KeyD': case 'ArrowRight': moveRight = false; break;
      }
    }

    function onClick(e) {
      // Check if clicking on UI elements
      if (e.target.closest('.stream-link-btn') ||
          e.target.closest('.pet-container') ||
          e.target.closest('.mobile-controls')) {
        return;
      }

      if (!isLocked) {
        document.body.requestPointerLock();
        document.getElementById('click-to-start').classList.add('hidden');
        return;
      }

      // Raycast to check for monolith click
      raycaster.setFromCamera(new THREE.Vector2(0, 0), camera);
      const intersects = raycaster.intersectObjects(monoliths);

      if (intersects.length > 0) {
        const app = intersects[0].object.userData.app;
        window.location.href = app.url;
      }
    }

    function onMouseMove(e) {
      if (!isLocked) return;

      const movementX = e.movementX || 0;
      const movementY = e.movementY || 0;

      euler.setFromQuaternion(camera.quaternion);
      euler.y -= movementX * 0.002;
      euler.x -= movementY * 0.002;
      euler.x = Math.max(-PI_2, Math.min(PI_2, euler.x));

      camera.quaternion.setFromEuler(euler);
    }

    function onPointerLockChange() {
      isLocked = document.pointerLockElement === document.body;
      if (!isLocked) {
        document.getElementById('click-to-start').classList.remove('hidden');
      }
    }

    function setupMobileControls() {
      const forward = document.getElementById('mobile-forward');
      const left = document.getElementById('mobile-left');
      const right = document.getElementById('mobile-right');

      forward.addEventListener('touchstart', () => moveForward = true);
      forward.addEventListener('touchend', () => moveForward = false);
      left.addEventListener('touchstart', () => moveLeft = true);
      left.addEventListener('touchend', () => moveLeft = false);
      right.addEventListener('touchstart', () => moveRight = true);
      right.addEventListener('touchend', () => moveRight = false);
    }

    function updateAppInfo() {
      raycaster.setFromCamera(new THREE.Vector2(0, 0), camera);
      const intersects = raycaster.intersectObjects(monoliths);

      const appInfo = document.getElementById('app-info');
      const appName = document.getElementById('app-name');

      if (intersects.length > 0 && intersects[0].distance < 20) {
        const app = intersects[0].object.userData.app;
        appName.textContent = app.icon + ' ' + app.name;
        appInfo.classList.add('visible');
      } else {
        appInfo.classList.remove('visible');
      }
    }

    function animate() {
      requestAnimationFrame(animate);

      const time = performance.now() * 0.001;

      // Animate monoliths
      monoliths.forEach((m, i) => {
        m.position.y = m.userData.baseY + Math.sin(time + i) * 0.3;
        m.rotation.y += 0.002;
      });

      // Movement
      if (isLocked) {
        velocity.x -= velocity.x * 5.0 * 0.016;
        velocity.z -= velocity.z * 5.0 * 0.016;

        direction.z = Number(moveForward) - Number(moveBackward);
        direction.x = Number(moveRight) - Number(moveLeft);
        direction.normalize();

        if (moveForward || moveBackward) velocity.z -= direction.z * 50.0 * 0.016;
        if (moveLeft || moveRight) velocity.x -= direction.x * 50.0 * 0.016;

        camera.translateX(-velocity.x * 0.016);
        camera.translateZ(velocity.z * 0.016);
        camera.position.y = 2; // Keep at eye level
      }

      updateAppInfo();
      renderer.render(scene, camera);
    }

    // Boot sequence
    const bootScreen = document.getElementById('boot-screen');
    const bootProgress = document.getElementById('boot-progress');
    const bootText = document.getElementById('boot-text');
    const clickToStart = document.getElementById('click-to-start');

    const bootMessages = [
      'Initializing 3D world...',
      'Loading neon shaders...',
      'Spawning monoliths...',
      'Calibrating holographics...',
      'Connecting to the grid...',
      'Welcome to SloppyOS 3D'
    ];

    let bootStep = 0;
    const bootInterval = setInterval(() => {
      bootStep++;
      const progress = (bootStep / bootMessages.length) * 100;
      bootProgress.style.width = progress + '%';

      if (bootStep < bootMessages.length) {
        bootText.textContent = bootMessages[bootStep];
      }

      if (bootStep >= bootMessages.length) {
        clearInterval(bootInterval);
        setTimeout(() => {
          bootScreen.classList.add('hidden');
          clickToStart.classList.remove('hidden');
          init();
        }, 500);
      }
    }, 400);

    // Clock
    function updateClock() {
      const now = new Date();
      document.getElementById('clock').textContent = now.toLocaleTimeString('en-US', { hour12: false });
    }
    updateClock();
    setInterval(updateClock, 1000);

    // Pet system
    const petBtn = document.getElementById('pet-btn');
    const petPopup = document.getElementById('pet-popup');
    const petDisplay = document.getElementById('pet-display');
    const petStatus = document.getElementById('pet-status');

    const petStages = ['ü•ö', 'üê£', 'üê•', 'üê§', 'üêî'];
    let petStage = parseInt(localStorage.getItem('petStage') || '0');
    let petHappiness = parseInt(localStorage.getItem('petHappiness') || '50');
    let petClicks = parseInt(localStorage.getItem('petClicks') || '0');

    function updatePet() {
      if (petStage === 0) {
        petDisplay.textContent = 'ü•ö';
        petBtn.textContent = 'ü•ö';
        petStatus.textContent = `${petClicks}/10 clicks to hatch`;
      } else {
        const stage = Math.min(petStage, petStages.length - 1);
        petDisplay.textContent = petStages[stage];
        petBtn.textContent = petStages[stage];
        petStatus.textContent = `Happiness: ${petHappiness}%`;
      }
      localStorage.setItem('petStage', petStage);
      localStorage.setItem('petHappiness', petHappiness);
      localStorage.setItem('petClicks', petClicks);
    }

    petBtn.addEventListener('click', (e) => {
      e.stopPropagation();
      petPopup.classList.toggle('open');
      if (petStage === 0) {
        petClicks++;
        if (petClicks >= 10) {
          petStage = 1;
          petHappiness = 100;
        }
        updatePet();
      }
    });

    document.getElementById('pet-interact').addEventListener('click', () => {
      if (petStage > 0) {
        petHappiness = Math.min(100, petHappiness + 10);
        if (petHappiness >= 100 && petStage < petStages.length - 1) petStage++;
        updatePet();
      }
    });

    document.getElementById('pet-feed').addEventListener('click', () => {
      if (petStage > 0) {
        petHappiness = Math.min(100, petHappiness + 15);
        updatePet();
      }
    });

    setInterval(() => {
      if (petStage > 0 && petHappiness > 0) {
        petHappiness--;
        updatePet();
      }
    }, 30000);

    updatePet();
  </script>
</body>
</html>
