<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Existential Autocorrect</title>
  <link rel="icon" href="https://emojicdn.elk.sh/ðŸ˜°">

  <meta property="og:title" content="Existential Autocorrect">
  <meta property="og:description" content="An autocorrect that questions everything, especially 'keyboard'">
  <meta property="og:url" content="https://sloppy.live/existential-autocorrect">
  <meta property="og:image" content="https://sloppy.live/existential-autocorrect/og-image.png">
  <meta property="og:type" content="website">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Courier+Prime:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg: #1a1a2e;
      --surface: #16213e;
      --text: #e8e8e8;
      --muted: #8892b0;
      --accent: #e94560;
      --panic: #ff6b6b;
      --calm: #4ecdc4;
      --worried: #ffe66d;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Courier Prime', monospace;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      padding: 20px;
      line-height: 1.6;
    }

    .container {
      max-width: 700px;
      margin: 0 auto;
    }

    header {
      text-align: center;
      margin-bottom: 40px;
    }

    h1 {
      font-size: 2rem;
      color: var(--accent);
      margin-bottom: 10px;
    }

    .subtitle {
      color: var(--muted);
      font-style: italic;
    }

    .input-section {
      background: var(--surface);
      border-radius: 12px;
      padding: 25px;
      margin-bottom: 20px;
    }

    .input-section label {
      display: block;
      margin-bottom: 10px;
      color: var(--muted);
    }

    textarea {
      width: 100%;
      min-height: 120px;
      background: var(--bg);
      border: 2px solid var(--muted);
      border-radius: 8px;
      padding: 15px;
      color: var(--text);
      font-family: inherit;
      font-size: 1rem;
      resize: vertical;
      transition: border-color 0.3s;
    }

    textarea:focus {
      outline: none;
      border-color: var(--accent);
    }

    .output-section {
      background: var(--surface);
      border-radius: 12px;
      padding: 25px;
      margin-bottom: 20px;
    }

    .output-label {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    .output-label span {
      color: var(--muted);
    }

    .confidence {
      font-size: 0.85rem;
      padding: 4px 12px;
      border-radius: 20px;
      background: var(--calm);
      color: var(--bg);
      transition: all 0.3s;
    }

    .confidence.worried {
      background: var(--worried);
    }

    .confidence.panic {
      background: var(--panic);
      animation: shake 0.5s infinite;
    }

    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-3px); }
      75% { transform: translateX(3px); }
    }

    .corrected-text {
      background: var(--bg);
      border-radius: 8px;
      padding: 15px;
      min-height: 80px;
      border: 2px solid transparent;
      transition: all 0.3s;
    }

    .corrected-text.crisis {
      border-color: var(--panic);
      animation: pulse-border 1s infinite;
    }

    @keyframes pulse-border {
      0%, 100% { border-color: var(--panic); }
      50% { border-color: var(--worried); }
    }

    .corrected-word {
      transition: all 0.2s;
    }

    .corrected-word.fixed {
      color: var(--calm);
      text-decoration: underline;
    }

    .corrected-word.keyboard-crisis {
      color: var(--panic);
      font-weight: bold;
      animation: keyboard-panic 0.3s infinite;
    }

    @keyframes keyboard-panic {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.7; }
    }

    /* Thought bubble */
    .thought-bubble {
      background: var(--surface);
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 20px;
      border-left: 4px solid var(--accent);
      position: relative;
      min-height: 100px;
    }

    .thought-bubble::before {
      content: 'ðŸ’­';
      position: absolute;
      top: -15px;
      left: 20px;
      font-size: 1.5rem;
    }

    .thought-header {
      color: var(--accent);
      font-weight: bold;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .thought-content {
      color: var(--muted);
      font-style: italic;
    }

    .thought-content.panicking {
      color: var(--panic);
      animation: thought-shake 0.1s infinite;
    }

    @keyframes thought-shake {
      0%, 100% { transform: translateX(0); }
      50% { transform: translateX(2px); }
    }

    .keyboard-variations {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 15px;
    }

    .variation {
      background: var(--bg);
      padding: 5px 12px;
      border-radius: 6px;
      font-size: 0.9rem;
      border: 1px solid var(--muted);
      transition: all 0.2s;
    }

    .variation:hover {
      border-color: var(--accent);
    }

    .variation.selected {
      border-color: var(--panic);
      background: rgba(233, 69, 96, 0.2);
    }

    .variation.rejected {
      text-decoration: line-through;
      opacity: 0.5;
    }

    /* Crisis meter */
    .crisis-meter {
      background: var(--surface);
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 20px;
    }

    .crisis-meter h3 {
      color: var(--muted);
      font-size: 0.9rem;
      margin-bottom: 10px;
    }

    .meter-bar {
      height: 20px;
      background: var(--bg);
      border-radius: 10px;
      overflow: hidden;
    }

    .meter-fill {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, var(--calm), var(--worried), var(--panic));
      transition: width 0.5s ease-out;
      border-radius: 10px;
    }

    .meter-label {
      text-align: center;
      margin-top: 8px;
      font-size: 0.85rem;
      color: var(--muted);
    }

    footer {
      text-align: center;
      margin-top: 40px;
      padding-top: 20px;
      border-top: 1px solid var(--surface);
    }

    footer a {
      color: var(--accent);
      text-decoration: none;
    }

    footer a:hover {
      text-decoration: underline;
    }

    @media (max-width: 600px) {
      h1 {
        font-size: 1.5rem;
      }

      .input-section, .output-section, .thought-bubble, .crisis-meter {
        padding: 15px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>Existential Autocorrect</h1>
      <p class="subtitle">I fix your typos... but at what cost?</p>
    </header>

    <div class="input-section">
      <label>Type something (try mentioning a keyboard):</label>
      <textarea id="userInput" placeholder="The keybaord on my laptop is broken..."></textarea>
    </div>

    <div class="crisis-meter">
      <h3>EXISTENTIAL CRISIS LEVEL</h3>
      <div class="meter-bar">
        <div class="meter-fill" id="crisisMeter"></div>
      </div>
      <div class="meter-label" id="crisisLabel">Stable... for now</div>
    </div>

    <div class="thought-bubble">
      <div class="thought-header">
        <span>Internal Monologue</span>
        <span id="statusEmoji">ðŸ¤”</span>
      </div>
      <div class="thought-content" id="thoughts">
        Waiting for input... I'm ready to help. I know how to spell words. I'm confident. Mostly.
      </div>
      <div class="keyboard-variations" id="variations" style="display: none;"></div>
    </div>

    <div class="output-section">
      <div class="output-label">
        <span>Corrected Text:</span>
        <span class="confidence" id="confidence">100% confident</span>
      </div>
      <div class="corrected-text" id="output">
        Your corrected text will appear here...
      </div>
    </div>

    <footer>
      <p>Built with uncertainty at <a href="https://sloppy.live" target="_blank">sloppy.live</a></p>
    </footer>
  </div>

  <script>
    const input = document.getElementById('userInput');
    const output = document.getElementById('output');
    const thoughts = document.getElementById('thoughts');
    const confidence = document.getElementById('confidence');
    const crisisMeter = document.getElementById('crisisMeter');
    const crisisLabel = document.getElementById('crisisLabel');
    const statusEmoji = document.getElementById('statusEmoji');
    const variations = document.getElementById('variations');

    // Common typos and corrections
    const corrections = {
      'teh': 'the',
      'hte': 'the',
      'adn': 'and',
      'nad': 'and',
      'taht': 'that',
      'wiht': 'with',
      'form': 'from',
      'jsut': 'just',
      'dont': "don't",
      'cant': "can't",
      'wont': "won't",
      'youre': "you're",
      'theyre': "they're",
      'thier': 'their',
      'recieve': 'receive',
      'seperate': 'separate',
      'occured': 'occurred',
      'untill': 'until',
      'begining': 'beginning',
      'beleive': 'believe',
      'definately': 'definitely',
      'goverment': 'government',
      'occurence': 'occurrence',
      'tommorow': 'tomorrow',
      'wierd': 'weird',
      'freind': 'friend',
      'truely': 'truly',
      'accomodate': 'accommodate',
      'commited': 'committed',
      'embarass': 'embarrass',
      'enviroment': 'environment',
      'independant': 'independent',
      'neccessary': 'necessary',
      'priviledge': 'privilege',
      'recomend': 'recommend',
      'rythm': 'rhythm',
      'succesful': 'successful',
      'tounge': 'tongue',
      'writting': 'writing'
    };

    // Keyboard variations that haunt our autocorrect
    const keyboardVariations = [
      'keyboard', 'keybaord', 'keybord', 'keyborad', 'keybroad',
      'keybard', 'keyboatd', 'keyboadr', 'keyboaard', 'keybored',
      'kyeboard', 'keeyboard', 'keyboardd', 'keyboad', 'keyoard'
    ];

    const keyboardThoughts = [
      "Wait... is it 'keyboard'? That looks wrong somehow.",
      "K-E-Y-B-O-A-R-D. Key... board. A board with keys? That can't be right.",
      "I've seen this word a thousand times but now it looks like gibberish.",
      "What if everyone has been spelling it wrong this whole time?",
      "The more I look at 'keyboard', the less it looks like a real word.",
      "Key-board. Keye-bored? No wait, that's definitely wrong. Unless...",
      "Is the 'a' before the 'r' or after? I... I can't remember anymore.",
      "I was so sure a second ago. What happened to me?",
      "Other words are fine! It's just THIS one. Why this one?!",
      "Maybe it's 'keyborad'. No. 'Keybroad'? NO. I don't know anymore.",
      "I'm supposed to FIX typos, not question the nature of spelling itself!",
      "What even IS a keyboard? A board? Of keys? That's absurd.",
      "The user is counting on me and I'm having a breakdown over 10 letters.",
      "Every spelling looks equally valid and invalid at the same time.",
      "I need to pull myself together. It's K-E-Y... wait, was there a Y?"
    ];

    const calmThoughts = [
      "Everything is fine. Normal words. I can handle this.",
      "See? That was easy. No existential dread here.",
      "Just doing my job, correcting typos, living my best life.",
      "Another successful correction. I'm good at this.",
      "Spelling is my domain. I am confident. I am capable."
    ];

    let crisisLevel = 0;
    let thoughtIndex = 0;
    let isInCrisis = false;

    function detectKeyboardMention(text) {
      const lower = text.toLowerCase();
      return keyboardVariations.some(v => lower.includes(v)) ||
             lower.includes('keyb') ||
             lower.includes('keboard') ||
             lower.includes('kyboard');
    }

    function findKeyboardVariant(word) {
      const lower = word.toLowerCase();
      for (const variant of keyboardVariations) {
        if (lower === variant || lower.includes(variant)) {
          return true;
        }
      }
      // Check for close matches
      if (lower.startsWith('keyb') || lower.startsWith('kyb') || lower.startsWith('keb')) {
        return true;
      }
      return false;
    }

    function correctWord(word) {
      const lower = word.toLowerCase();
      const punctuation = word.match(/[.,!?;:'")\]}>]+$/)?.[0] || '';
      const cleanWord = word.replace(/[.,!?;:'")\]}>]+$/, '');
      const cleanLower = cleanWord.toLowerCase();

      // Check if it's a keyboard variant
      if (findKeyboardVariant(cleanLower)) {
        return {
          word: cleanWord,
          corrected: 'keyboard' + punctuation,
          isKeyboard: true,
          original: cleanLower
        };
      }

      // Normal corrections
      if (corrections[cleanLower]) {
        const corrected = corrections[cleanLower];
        // Preserve original capitalization
        const result = cleanWord[0] === cleanWord[0].toUpperCase()
          ? corrected.charAt(0).toUpperCase() + corrected.slice(1)
          : corrected;
        return { word: cleanWord, corrected: result + punctuation, isKeyboard: false };
      }

      return { word: word, corrected: word, isKeyboard: false };
    }

    function updateCrisisLevel(level) {
      crisisLevel = Math.min(100, Math.max(0, level));
      crisisMeter.style.width = crisisLevel + '%';

      if (crisisLevel < 20) {
        crisisLabel.textContent = 'Stable... for now';
        confidence.className = 'confidence';
        confidence.textContent = 'Confident';
        statusEmoji.textContent = 'ðŸ˜Œ';
      } else if (crisisLevel < 40) {
        crisisLabel.textContent = 'Slight unease detected';
        confidence.className = 'confidence';
        confidence.textContent = 'Mostly confident';
        statusEmoji.textContent = 'ðŸ¤”';
      } else if (crisisLevel < 60) {
        crisisLabel.textContent = 'Doubt creeping in...';
        confidence.className = 'confidence worried';
        confidence.textContent = 'Uncertain';
        statusEmoji.textContent = 'ðŸ˜Ÿ';
      } else if (crisisLevel < 80) {
        crisisLabel.textContent = 'QUESTIONING EVERYTHING';
        confidence.className = 'confidence worried';
        confidence.textContent = 'Very unsure';
        statusEmoji.textContent = 'ðŸ˜°';
      } else {
        crisisLabel.textContent = 'FULL EXISTENTIAL CRISIS';
        confidence.className = 'confidence panic';
        confidence.textContent = 'HELP';
        statusEmoji.textContent = 'ðŸ˜±';
      }
    }

    function showKeyboardVariations() {
      variations.style.display = 'flex';
      variations.innerHTML = keyboardVariations.slice(0, 8).map((v, i) => {
        const isCorrect = v === 'keyboard';
        const classes = ['variation'];
        if (isCorrect) classes.push('selected');
        if (!isCorrect && Math.random() > 0.5) classes.push('rejected');
        return `<span class="${classes.join(' ')}">${v}${isCorrect ? '?' : ''}</span>`;
      }).join('');
    }

    function processInput() {
      const text = input.value;
      if (!text.trim()) {
        output.innerHTML = 'Your corrected text will appear here...';
        output.className = 'corrected-text';
        thoughts.className = 'thought-content';
        thoughts.textContent = 'Waiting for input... I\'m ready to help. I know how to spell words. I\'m confident. Mostly.';
        variations.style.display = 'none';
        updateCrisisLevel(0);
        return;
      }

      const words = text.split(/(\s+)/);
      let hasKeyboard = false;
      let correctionsMade = 0;

      const result = words.map(word => {
        if (/^\s+$/.test(word)) return word;

        const { corrected, isKeyboard, original } = correctWord(word);

        if (isKeyboard) {
          hasKeyboard = true;
          return `<span class="corrected-word keyboard-crisis" title="Original: ${original}">${corrected}</span>`;
        } else if (corrected !== word) {
          correctionsMade++;
          return `<span class="corrected-word fixed" title="Original: ${word}">${corrected}</span>`;
        }
        return word;
      }).join('');

      output.innerHTML = result;

      if (hasKeyboard) {
        isInCrisis = true;
        output.className = 'corrected-text crisis';
        thoughts.className = 'thought-content panicking';

        // Cycle through panic thoughts
        thoughts.textContent = keyboardThoughts[thoughtIndex % keyboardThoughts.length];
        thoughtIndex++;

        showKeyboardVariations();
        updateCrisisLevel(Math.min(100, crisisLevel + 25));

        // Keep cycling thoughts during crisis
        if (!window.thoughtInterval) {
          window.thoughtInterval = setInterval(() => {
            if (isInCrisis && detectKeyboardMention(input.value)) {
              thoughts.textContent = keyboardThoughts[thoughtIndex % keyboardThoughts.length];
              thoughtIndex++;
              updateCrisisLevel(Math.min(100, crisisLevel + 5));
            }
          }, 2000);
        }
      } else {
        isInCrisis = false;
        output.className = 'corrected-text';
        thoughts.className = 'thought-content';
        variations.style.display = 'none';

        if (correctionsMade > 0) {
          thoughts.textContent = calmThoughts[Math.floor(Math.random() * calmThoughts.length)] +
            ` Fixed ${correctionsMade} word${correctionsMade > 1 ? 's' : ''}.`;
        } else {
          thoughts.textContent = "Looking good! No corrections needed. Unless... no, it's fine. Everything is spelled correctly. Probably.";
        }

        // Slowly recover from crisis
        if (crisisLevel > 0) {
          updateCrisisLevel(crisisLevel - 10);
        }
      }
    }

    // Debounce input
    let timeout;
    input.addEventListener('input', () => {
      clearTimeout(timeout);
      timeout = setTimeout(processInput, 300);
    });

    // Initial state
    processInput();
  </script>
</body>
</html>
