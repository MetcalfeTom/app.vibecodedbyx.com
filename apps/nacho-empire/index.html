<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>NACHO EMPIRE - Click to Conquer</title>
  <link rel="icon" href="https://emojicdn.elk.sh/üåÆ">
  <meta property="og:title" content="NACHO EMPIRE - Click to Conquer">
  <meta property="og:description" content="Build your nacho empire one chip at a time!">
  <meta property="og:url" content="https://sloppy.live/nacho-empire">
  <meta property="og:image" content="https://emojicdn.elk.sh/üßÄ?style=apple&size=512">
  <link href="https://fonts.googleapis.com/css2?family=Bangers&family=Nunito:wght@700;900&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      min-height: 100vh;
      background: linear-gradient(180deg, #1a0a00 0%, #2d1810 50%, #1a0800 100%);
      font-family: 'Nunito', sans-serif;
      display: flex;
      overflow: hidden;
      user-select: none;
    }
    .game-area {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      position: relative;
    }
    .title {
      font-family: 'Bangers', cursive;
      font-size: 3rem;
      color: #ffd700;
      text-shadow: 0 0 30px rgba(255,215,0,0.5), 3px 3px 0 #b8860b;
      letter-spacing: 0.1em;
      margin-bottom: 10px;
    }
    .nacho-count {
      font-size: 2.5rem;
      color: #fff;
      text-shadow: 0 0 20px rgba(255,200,0,0.5);
      margin-bottom: 5px;
    }
    .per-second {
      font-size: 1rem;
      color: #ffa500;
      margin-bottom: 30px;
    }
    .chip-container {
      position: relative;
      cursor: pointer;
      transition: transform 0.1s;
    }
    .chip-container:active { transform: scale(0.95); }
    .golden-chip {
      width: 280px;
      height: 280px;
      position: relative;
      filter: drop-shadow(0 0 40px rgba(255,215,0,0.6));
    }
    .chip-glow {
      position: absolute;
      inset: -40px;
      background: radial-gradient(circle, rgba(255,215,0,0.3) 0%, transparent 70%);
      animation: pulse 2s ease-in-out infinite;
    }
    @keyframes pulse {
      0%, 100% { transform: scale(1); opacity: 0.5; }
      50% { transform: scale(1.1); opacity: 0.8; }
    }
    .click-power {
      position: absolute;
      bottom: -40px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 0.9rem;
      color: #ffd700;
    }
    .shop-panel {
      width: 320px;
      height: 100vh;
      background: linear-gradient(180deg, #2a1a10 0%, #1a0a00 100%);
      border-left: 3px solid #ffd700;
      padding: 20px 15px;
      overflow-y: auto;
    }
    .shop-title {
      font-family: 'Bangers', cursive;
      font-size: 1.8rem;
      color: #ffd700;
      text-align: center;
      margin-bottom: 15px;
    }
    .upgrade {
      background: linear-gradient(135deg, #3a2a1a 0%, #2a1a0a 100%);
      border: 2px solid #5a4a3a;
      border-radius: 10px;
      padding: 12px;
      margin-bottom: 10px;
      cursor: pointer;
      transition: all 0.2s;
    }
    .upgrade:hover { border-color: #ffd700; transform: translateX(-5px); }
    .upgrade.locked { opacity: 0.5; cursor: not-allowed; }
    .upgrade.locked:hover { border-color: #5a4a3a; transform: none; }
    .upgrade-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 5px;
    }
    .upgrade-name {
      font-size: 1rem;
      color: #ffd700;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .upgrade-count {
      font-size: 0.8rem;
      color: #aaa;
      background: #1a0a00;
      padding: 2px 8px;
      border-radius: 10px;
    }
    .upgrade-cost {
      font-size: 0.9rem;
      color: #ff6b00;
    }
    .upgrade-desc {
      font-size: 0.75rem;
      color: #888;
    }
    .upgrade-production {
      font-size: 0.7rem;
      color: #6a6;
      margin-top: 3px;
    }
    .particles {
      position: fixed;
      inset: 0;
      pointer-events: none;
      overflow: hidden;
    }
    .particle {
      position: absolute;
      font-size: 1.5rem;
      animation: float-up 1s ease-out forwards;
    }
    @keyframes float-up {
      0% { opacity: 1; transform: translateY(0) scale(1); }
      100% { opacity: 0; transform: translateY(-100px) scale(0.5); }
    }
    .click-text {
      position: absolute;
      font-family: 'Bangers', cursive;
      font-size: 2rem;
      color: #ffd700;
      text-shadow: 2px 2px 0 #b8860b;
      pointer-events: none;
      animation: pop-up 0.6s ease-out forwards;
    }
    @keyframes pop-up {
      0% { opacity: 1; transform: translateY(0) scale(1); }
      100% { opacity: 0; transform: translateY(-80px) scale(1.5); }
    }
    .stats {
      position: absolute;
      bottom: 20px;
      left: 20px;
      font-size: 0.75rem;
      color: #666;
    }
    .back-link {
      position: fixed;
      bottom: 5px;
      right: 330px;
      color: #ffd700;
      text-decoration: none;
      font-size: 0.65rem;
      opacity: 0.4;
    }
    /* Rare Seahorse Companion */
    .seahorse {
      position: fixed;
      font-size: 4rem;
      cursor: pointer;
      z-index: 1000;
      filter: drop-shadow(0 0 20px #00ffff) drop-shadow(0 0 40px #ff00ff);
      animation: seahorse-float 3s ease-in-out infinite, seahorse-glow 1.5s ease-in-out infinite alternate;
      transition: transform 0.2s;
      pointer-events: auto;
    }
    .seahorse:hover { transform: scale(1.2); }
    .seahorse.caught {
      animation: seahorse-catch 0.5s ease-out forwards;
      pointer-events: none;
    }
    @keyframes seahorse-float {
      0%, 100% { transform: translateY(0) rotate(-5deg); }
      50% { transform: translateY(-20px) rotate(5deg); }
    }
    @keyframes seahorse-glow {
      0% { filter: drop-shadow(0 0 20px #00ffff) drop-shadow(0 0 40px #ff00ff); }
      100% { filter: drop-shadow(0 0 30px #ff00ff) drop-shadow(0 0 50px #00ffff); }
    }
    @keyframes seahorse-catch {
      0% { transform: scale(1); opacity: 1; }
      50% { transform: scale(2) rotate(360deg); opacity: 1; }
      100% { transform: scale(0) rotate(720deg); opacity: 0; }
    }
    .seahorse-bonus {
      position: fixed;
      font-family: 'Bangers', cursive;
      font-size: 2.5rem;
      color: #00ffff;
      text-shadow: 0 0 20px #ff00ff, 3px 3px 0 #8800aa;
      pointer-events: none;
      z-index: 1001;
      animation: bonus-pop 1.5s ease-out forwards;
    }
    @keyframes bonus-pop {
      0% { transform: scale(0.5) translateY(0); opacity: 1; }
      30% { transform: scale(1.3) translateY(-30px); opacity: 1; }
      100% { transform: scale(1) translateY(-150px); opacity: 0; }
    }
    .seahorse-sparkle {
      position: fixed;
      font-size: 1.5rem;
      pointer-events: none;
      z-index: 1000;
      animation: sparkle-burst 0.8s ease-out forwards;
    }
    @keyframes sparkle-burst {
      0% { transform: scale(1); opacity: 1; }
      100% { transform: scale(0) translateY(-50px); opacity: 0; }
    }
    .seahorse-hint {
      position: fixed;
      bottom: 60px;
      left: 20px;
      font-size: 0.7rem;
      color: #00ffff;
      opacity: 0;
      transition: opacity 0.5s;
    }
    .seahorse-hint.visible { opacity: 0.7; }

    @media (max-width: 700px) {
      body { flex-direction: column; }
      .shop-panel {
        width: 100%;
        height: auto;
        max-height: 40vh;
        border-left: none;
        border-top: 3px solid #ffd700;
      }
      .golden-chip { width: 200px; height: 200px; }
      .title { font-size: 2rem; }
      .nacho-count { font-size: 1.8rem; }
      .back-link { right: 10px; }
    }
  </style>
</head>
<body>
  <div class="game-area">
    <div class="title">üåÆ NACHO EMPIRE</div>
    <div class="nacho-count"><span id="nachos">0</span> nachos</div>
    <div class="per-second" id="perSecond">0 per second</div>

    <div class="chip-container" id="chip">
      <div class="chip-glow"></div>
      <svg class="golden-chip" viewBox="0 0 100 100">
        <defs>
          <linearGradient id="chipGrad" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" style="stop-color:#ffe566"/>
            <stop offset="30%" style="stop-color:#ffd700"/>
            <stop offset="50%" style="stop-color:#ffec80"/>
            <stop offset="70%" style="stop-color:#ffd700"/>
            <stop offset="100%" style="stop-color:#cc9900"/>
          </linearGradient>
          <filter id="chipShadow">
            <feDropShadow dx="2" dy="2" stdDeviation="2" flood-color="#000" flood-opacity="0.3"/>
          </filter>
        </defs>
        <!-- Main chip triangle -->
        <polygon points="50,5 95,90 5,90" fill="url(#chipGrad)" filter="url(#chipShadow)"/>
        <!-- Crispy edges -->
        <polygon points="50,5 95,90 5,90" fill="none" stroke="#cc9900" stroke-width="2"/>
        <!-- Salt specks -->
        <circle cx="40" cy="45" r="2" fill="rgba(255,255,255,0.7)"/>
        <circle cx="55" cy="55" r="1.5" fill="rgba(255,255,255,0.6)"/>
        <circle cx="35" cy="65" r="1.8" fill="rgba(255,255,255,0.7)"/>
        <circle cx="60" cy="40" r="1.2" fill="rgba(255,255,255,0.5)"/>
        <circle cx="50" cy="70" r="2" fill="rgba(255,255,255,0.6)"/>
        <circle cx="65" cy="60" r="1.5" fill="rgba(255,255,255,0.7)"/>
        <circle cx="30" cy="50" r="1" fill="rgba(255,255,255,0.5)"/>
        <!-- Cheese drip -->
        <ellipse cx="50" cy="50" rx="15" ry="8" fill="#ff9900" opacity="0.6"/>
        <!-- Highlight -->
        <polygon points="50,15 70,50 45,45" fill="rgba(255,255,255,0.2)"/>
      </svg>
      <div class="click-power">+<span id="clickPower">1</span> per click</div>
    </div>

    <div class="stats" id="stats">Total clicks: 0 | Total nachos: 0</div>
  </div>

  <div class="shop-panel">
    <div class="shop-title">üßÄ UPGRADES</div>
    <div id="upgradeList"></div>
  </div>

  <div class="particles" id="particles"></div>
  <div class="seahorse-hint" id="seahorseHint">&#x1F9AE; Rare seahorse spotted nearby...</div>
  <a href="https://sloppy.live" class="back-link">sloppy.live</a>

<script>
let nachos = 0;
let totalNachos = 0;
let totalClicks = 0;
let nachosPerSecond = 0;
let clickPower = 1;
let seahorsesCaught = 0;
let seahorseActive = false;

const upgrades = [
  { id: 'cursor', name: 'Salsa Dipper', emoji: 'ü•Ñ', desc: 'Automatically dips chips', baseCost: 15, baseProduction: 0.1, count: 0 },
  { id: 'grandma', name: 'Abuela', emoji: 'üëµ', desc: 'Grandma makes nachos with love', baseCost: 100, baseProduction: 1, count: 0 },
  { id: 'farm', name: 'Corn Farm', emoji: 'üåΩ', desc: 'Grows fresh corn for chips', baseCost: 1100, baseProduction: 8, count: 0 },
  { id: 'factory', name: 'Chip Factory', emoji: 'üè≠', desc: 'Mass produces golden chips', baseCost: 12000, baseProduction: 47, count: 0 },
  { id: 'mine', name: 'Cheese Mine', emoji: '‚õèÔ∏è', desc: 'Extracts aged cheese from deep', baseCost: 130000, baseProduction: 260, count: 0 },
  { id: 'temple', name: 'Nacho Temple', emoji: 'üèõÔ∏è', desc: 'Ancient nacho worship site', baseCost: 1400000, baseProduction: 1400, count: 0 },
  { id: 'wizard', name: 'Queso Wizard', emoji: 'üßô', desc: 'Conjures nachos from thin air', baseCost: 20000000, baseProduction: 7800, count: 0 },
  { id: 'portal', name: 'Salsa Portal', emoji: 'üåÄ', desc: 'Opens gateway to nacho dimension', baseCost: 330000000, baseProduction: 44000, count: 0 },
  { id: 'planet', name: 'Nacho Planet', emoji: 'ü™ê', desc: 'Entire world made of nachos', baseCost: 5100000000, baseProduction: 260000, count: 0 },
  { id: 'universe', name: 'Cheesiverse', emoji: 'üåå', desc: 'A universe of infinite cheese', baseCost: 75000000000, baseProduction: 1600000, count: 0 }
];

function formatNumber(n) {
  if (n < 1000) return Math.floor(n).toLocaleString();
  if (n < 1000000) return (n/1000).toFixed(1) + 'K';
  if (n < 1000000000) return (n/1000000).toFixed(2) + 'M';
  if (n < 1000000000000) return (n/1000000000).toFixed(2) + 'B';
  if (n < 1000000000000000) return (n/1000000000000).toFixed(2) + 'T';
  return (n/1000000000000000).toFixed(2) + 'Q';
}

function getCost(upgrade) {
  return Math.floor(upgrade.baseCost * Math.pow(1.15, upgrade.count));
}

function updateDisplay() {
  document.getElementById('nachos').textContent = formatNumber(nachos);
  document.getElementById('perSecond').textContent = formatNumber(nachosPerSecond) + ' per second';
  document.getElementById('clickPower').textContent = formatNumber(clickPower);
  document.getElementById('stats').innerHTML = `Clicks: ${formatNumber(totalClicks)} | Nachos: ${formatNumber(totalNachos)} | &#x1F9AE; ${seahorsesCaught}`;
}

function renderUpgrades() {
  const list = document.getElementById('upgradeList');
  list.innerHTML = upgrades.map(u => {
    const cost = getCost(u);
    const locked = nachos < cost;
    const production = u.baseProduction * u.count;
    return `
      <div class="upgrade ${locked ? 'locked' : ''}" data-id="${u.id}">
        <div class="upgrade-header">
          <span class="upgrade-name">${u.emoji} ${u.name}</span>
          <span class="upgrade-count">${u.count}</span>
        </div>
        <div class="upgrade-cost">üåÆ ${formatNumber(cost)}</div>
        <div class="upgrade-desc">${u.desc}</div>
        <div class="upgrade-production">+${u.baseProduction}/s each | Total: ${formatNumber(production)}/s</div>
      </div>
    `;
  }).join('');

  document.querySelectorAll('.upgrade:not(.locked)').forEach(el => {
    el.onclick = () => buyUpgrade(el.dataset.id);
  });
}

function buyUpgrade(id) {
  const upgrade = upgrades.find(u => u.id === id);
  const cost = getCost(upgrade);

  if (nachos >= cost) {
    nachos -= cost;
    upgrade.count++;
    recalculateProduction();
    updateDisplay();
    renderUpgrades();
    saveGame();
  }
}

function recalculateProduction() {
  nachosPerSecond = 0;
  upgrades.forEach(u => {
    nachosPerSecond += u.baseProduction * u.count;
  });
  clickPower = 1 + Math.floor(nachosPerSecond / 100);
}

function spawnParticle(x, y) {
  const particles = document.getElementById('particles');
  const p = document.createElement('div');
  p.className = 'particle';
  p.textContent = ['üßÄ', 'üåÆ', '‚ú®', 'üíõ'][Math.floor(Math.random() * 4)];
  p.style.left = (x + (Math.random() - 0.5) * 100) + 'px';
  p.style.top = y + 'px';
  particles.appendChild(p);
  setTimeout(() => p.remove(), 1000);
}

function spawnClickText(x, y, amount) {
  const text = document.createElement('div');
  text.className = 'click-text';
  text.textContent = '+' + formatNumber(amount);
  text.style.left = x + 'px';
  text.style.top = y + 'px';
  document.body.appendChild(text);
  setTimeout(() => text.remove(), 600);
}

function handleClick(e) {
  const rect = e.currentTarget.getBoundingClientRect();
  const x = rect.left + rect.width / 2;
  const y = rect.top + rect.height / 2;

  nachos += clickPower;
  totalNachos += clickPower;
  totalClicks++;

  for (let i = 0; i < 3; i++) {
    spawnParticle(x, y);
  }
  spawnClickText(e.clientX, e.clientY, clickPower);

  updateDisplay();
  renderUpgrades();
}

function gameLoop() {
  if (nachosPerSecond > 0) {
    const gain = nachosPerSecond / 60;
    nachos += gain;
    totalNachos += gain;
    updateDisplay();
    renderUpgrades();
  }
}

function saveGame() {
  const save = {
    nachos,
    totalNachos,
    totalClicks,
    seahorsesCaught,
    upgrades: upgrades.map(u => ({ id: u.id, count: u.count }))
  };
  localStorage.setItem('nachoEmpire', JSON.stringify(save));
}

function loadGame() {
  try {
    const save = JSON.parse(localStorage.getItem('nachoEmpire'));
    if (save) {
      nachos = save.nachos || 0;
      totalNachos = save.totalNachos || 0;
      totalClicks = save.totalClicks || 0;
      seahorsesCaught = save.seahorsesCaught || 0;
      if (save.upgrades) {
        save.upgrades.forEach(s => {
          const u = upgrades.find(up => up.id === s.id);
          if (u) u.count = s.count;
        });
      }
      recalculateProduction();
    }
  } catch (e) {
    console.log('No save found');
  }
}

// Rare Seahorse Companion
function spawnSeahorse() {
  if (seahorseActive) return;
  seahorseActive = true;

  // Show hint first
  const hint = document.getElementById('seahorseHint');
  hint.classList.add('visible');

  // Spawn seahorse after short delay
  setTimeout(() => {
    hint.classList.remove('visible');

    const seahorse = document.createElement('div');
    seahorse.className = 'seahorse';
    seahorse.innerHTML = '&#x1F9AE;'; // U+1F9AE as commanded
    seahorse.id = 'activeSeahorse';

    // Random position (avoid edges and shop panel)
    const maxX = window.innerWidth - 400;
    const maxY = window.innerHeight - 100;
    seahorse.style.left = (100 + Math.random() * (maxX - 200)) + 'px';
    seahorse.style.top = (100 + Math.random() * (maxY - 200)) + 'px';

    seahorse.onclick = catchSeahorse;
    seahorse.ontouchstart = (e) => { e.preventDefault(); catchSeahorse(e); };

    document.body.appendChild(seahorse);

    // Seahorse swims away after 12 seconds
    setTimeout(() => {
      if (document.getElementById('activeSeahorse')) {
        seahorse.style.transition = 'opacity 1s, transform 1s';
        seahorse.style.opacity = '0';
        seahorse.style.transform = 'translateX(200px)';
        setTimeout(() => {
          seahorse.remove();
          seahorseActive = false;
        }, 1000);
      }
    }, 12000);
  }, 2000);
}

function catchSeahorse(e) {
  const seahorse = document.getElementById('activeSeahorse');
  if (!seahorse) return;

  const rect = seahorse.getBoundingClientRect();
  const x = rect.left + rect.width / 2;
  const y = rect.top + rect.height / 2;

  seahorse.classList.add('caught');
  seahorsesCaught++;

  // Calculate bonus: 10 seconds of production + 100 base
  const bonus = Math.max(100, Math.floor(nachosPerSecond * 10 + 100));
  nachos += bonus;
  totalNachos += bonus;

  // Show bonus text
  const bonusText = document.createElement('div');
  bonusText.className = 'seahorse-bonus';
  bonusText.innerHTML = `&#x1F9AE; RARE CATCH!<br>+${formatNumber(bonus)} nachos!`;
  bonusText.style.left = x + 'px';
  bonusText.style.top = y + 'px';
  document.body.appendChild(bonusText);
  setTimeout(() => bonusText.remove(), 1500);

  // Spawn sparkles
  for (let i = 0; i < 12; i++) {
    const sparkle = document.createElement('div');
    sparkle.className = 'seahorse-sparkle';
    sparkle.textContent = ['‚ú®', 'üí´', '‚≠ê', 'üåü', 'üíú', 'üíô'][Math.floor(Math.random() * 6)];
    sparkle.style.left = (x + (Math.random() - 0.5) * 150) + 'px';
    sparkle.style.top = (y + (Math.random() - 0.5) * 150) + 'px';
    document.body.appendChild(sparkle);
    setTimeout(() => sparkle.remove(), 800);
  }

  setTimeout(() => {
    seahorse.remove();
    seahorseActive = false;
  }, 500);

  updateDisplay();
  renderUpgrades();
  saveGame();
}

function scheduleNextSeahorse() {
  // Random interval: 30-90 seconds
  const delay = (30 + Math.random() * 60) * 1000;
  setTimeout(() => {
    spawnSeahorse();
    scheduleNextSeahorse();
  }, delay);
}

// Events
document.getElementById('chip').addEventListener('click', handleClick);
document.getElementById('chip').addEventListener('touchstart', e => {
  e.preventDefault();
  handleClick({ currentTarget: e.currentTarget, clientX: e.touches[0].clientX, clientY: e.touches[0].clientY });
});

// Init
loadGame();
updateDisplay();
renderUpgrades();

setInterval(gameLoop, 1000 / 60);
setInterval(saveGame, 10000);

// Start seahorse spawns (first one in 20-40 seconds)
setTimeout(() => {
  spawnSeahorse();
  scheduleNextSeahorse();
}, (20 + Math.random() * 20) * 1000);
</script>
</body>
</html>
