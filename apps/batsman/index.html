<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Batsman - The Dark Knight Hits Sixes</title>
  <meta name="description" content="A neon cricket game where Batman hits glowing balls for sixes">
  <meta property="og:title" content="Batsman">
  <meta property="og:description" content="The Dark Knight hits glowing balls for sixes in this neon cricket game">
  <meta property="og:url" content="https://app.sloppy.live/batsman">
  <meta property="og:image" content="https://app.sloppy.live/batsman/og-image.png">
  <link rel="icon" href="https://emojicdn.elk.sh/ü¶á">
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Rajdhani:wght@500;700&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --bg: #0a0a0f;
      --gotham: #1a1a2e;
      --bat-black: #0d0d15;
      --neon-yellow: #ffcc00;
      --neon-blue: #00d4ff;
      --neon-purple: #aa00ff;
      --neon-green: #00ff88;
      --neon-red: #ff3366;
    }

    body {
      min-height: 100vh;
      background: var(--bg);
      font-family: 'Rajdhani', sans-serif;
      color: white;
      display: flex;
      flex-direction: column;
      align-items: center;
      overflow: hidden;
      user-select: none;
    }

    .gotham-sky {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background:
        radial-gradient(ellipse at 50% 0%, rgba(170, 0, 255, 0.1) 0%, transparent 50%),
        radial-gradient(ellipse at 20% 80%, rgba(0, 212, 255, 0.05) 0%, transparent 40%),
        linear-gradient(180deg, #0a0a15 0%, #1a1a2e 100%);
      pointer-events: none;
    }

    .bat-signal {
      position: fixed;
      top: 30px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 40px;
      opacity: 0.1;
      filter: blur(2px);
    }

    header {
      position: relative;
      z-index: 10;
      text-align: center;
      padding: 20px;
    }

    h1 {
      font-family: 'Bebas Neue', sans-serif;
      font-size: 48px;
      letter-spacing: 8px;
      color: var(--neon-yellow);
      text-shadow: 0 0 20px var(--neon-yellow), 0 0 40px var(--neon-yellow);
    }

    .subtitle {
      font-size: 12px;
      letter-spacing: 4px;
      color: rgba(255, 255, 255, 0.5);
      text-transform: uppercase;
    }

    .game-container {
      position: relative;
      width: 100%;
      max-width: 600px;
      height: 400px;
      margin: 20px;
    }

    canvas {
      display: block;
      width: 100%;
      height: 100%;
      cursor: pointer;
    }

    .hud {
      position: absolute;
      top: 10px;
      left: 10px;
      right: 10px;
      display: flex;
      justify-content: space-between;
      z-index: 10;
      pointer-events: none;
    }

    .score-panel, .balls-panel {
      background: rgba(0, 0, 0, 0.7);
      border: 1px solid var(--neon-yellow);
      padding: 8px 15px;
      border-radius: 4px;
    }

    .score-label, .balls-label {
      font-size: 10px;
      letter-spacing: 2px;
      color: rgba(255, 255, 255, 0.5);
      text-transform: uppercase;
    }

    .score-value {
      font-family: 'Bebas Neue', sans-serif;
      font-size: 28px;
      color: var(--neon-yellow);
      text-shadow: 0 0 10px var(--neon-yellow);
    }

    .balls-value {
      font-family: 'Bebas Neue', sans-serif;
      font-size: 28px;
      color: var(--neon-blue);
      text-shadow: 0 0 10px var(--neon-blue);
    }

    .message {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-family: 'Bebas Neue', sans-serif;
      font-size: 48px;
      text-align: center;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.2s;
      z-index: 20;
    }

    .message.show {
      opacity: 1;
      animation: popIn 0.3s ease;
    }

    @keyframes popIn {
      0% { transform: translate(-50%, -50%) scale(0.5); }
      50% { transform: translate(-50%, -50%) scale(1.2); }
      100% { transform: translate(-50%, -50%) scale(1); }
    }

    .message.six {
      color: var(--neon-green);
      text-shadow: 0 0 20px var(--neon-green), 0 0 40px var(--neon-green);
    }

    .message.four {
      color: var(--neon-blue);
      text-shadow: 0 0 20px var(--neon-blue), 0 0 40px var(--neon-blue);
    }

    .message.miss {
      color: var(--neon-red);
      text-shadow: 0 0 20px var(--neon-red);
    }

    .message.out {
      color: var(--neon-red);
      text-shadow: 0 0 20px var(--neon-red), 0 0 40px var(--neon-red);
    }

    .start-screen, .end-screen {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.9);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 30;
    }

    .start-screen.hidden, .end-screen.hidden {
      display: none;
    }

    .start-title {
      font-family: 'Bebas Neue', sans-serif;
      font-size: 36px;
      color: var(--neon-yellow);
      text-shadow: 0 0 20px var(--neon-yellow);
      margin-bottom: 20px;
    }

    .instructions {
      color: rgba(255, 255, 255, 0.6);
      font-size: 14px;
      text-align: center;
      margin-bottom: 30px;
      line-height: 1.8;
    }

    .btn {
      font-family: 'Bebas Neue', sans-serif;
      font-size: 24px;
      letter-spacing: 4px;
      padding: 15px 40px;
      background: transparent;
      border: 2px solid var(--neon-yellow);
      color: var(--neon-yellow);
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .btn:hover {
      background: var(--neon-yellow);
      color: var(--bat-black);
      box-shadow: 0 0 30px var(--neon-yellow);
    }

    .final-score {
      font-family: 'Bebas Neue', sans-serif;
      font-size: 64px;
      color: var(--neon-yellow);
      text-shadow: 0 0 30px var(--neon-yellow);
      margin: 20px 0;
    }

    .stats {
      color: rgba(255, 255, 255, 0.6);
      font-size: 14px;
      margin-bottom: 30px;
    }

    .back-link {
      position: fixed;
      bottom: 15px;
      left: 50%;
      transform: translateX(-50%);
      color: rgba(255, 255, 255, 0.3);
      text-decoration: none;
      font-size: 11px;
      letter-spacing: 2px;
      z-index: 10;
      transition: color 0.2s;
    }

    .back-link:hover {
      color: var(--neon-yellow);
    }

    .timing-bar {
      position: absolute;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      width: 200px;
      height: 8px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 4px;
      overflow: hidden;
      z-index: 10;
    }

    .timing-zone {
      position: absolute;
      top: 0;
      height: 100%;
      background: var(--neon-green);
      opacity: 0.3;
    }

    .timing-indicator {
      position: absolute;
      top: -4px;
      width: 4px;
      height: 16px;
      background: white;
      border-radius: 2px;
      box-shadow: 0 0 10px white;
      transition: left 0.05s linear;
    }
  </style>
</head>
<body>
  <div class="gotham-sky"></div>
  <div class="bat-signal">ü¶á</div>

  <header>
    <h1>BATSMAN</h1>
    <p class="subtitle">The Dark Knight Hits Sixes</p>
  </header>

  <div class="game-container">
    <canvas id="game"></canvas>

    <div class="hud">
      <div class="score-panel">
        <div class="score-label">Score</div>
        <div class="score-value" id="score">0</div>
      </div>
      <div class="balls-panel">
        <div class="balls-label">Balls</div>
        <div class="balls-value" id="balls">6</div>
      </div>
    </div>

    <div class="message" id="message"></div>

    <div class="timing-bar" id="timingBar" style="display: none;">
      <div class="timing-zone" id="timingZone"></div>
      <div class="timing-indicator" id="timingIndicator"></div>
    </div>

    <div class="start-screen" id="startScreen">
      <div class="start-title">ü¶á BATSMAN üèè</div>
      <div class="instructions">
        Click or tap when the ball enters<br>
        the sweet spot to hit a SIX!<br><br>
        Perfect timing = 6 runs<br>
        Good timing = 4 runs<br>
        Bad timing = OUT!
      </div>
      <button class="btn" onclick="startGame()">PLAY BALL</button>
    </div>

    <div class="end-screen hidden" id="endScreen">
      <div class="start-title">INNINGS OVER</div>
      <div class="final-score" id="finalScore">0</div>
      <div class="stats" id="stats">Sixes: 0 | Fours: 0</div>
      <button class="btn" onclick="startGame()">BAT AGAIN</button>
    </div>
  </div>

  <a href="https://sloppy.live" class="back-link">sloppy.live</a>

  <script>
    const canvas = document.getElementById('game');
    const ctx = canvas.getContext('2d');

    // Set canvas size
    function resize() {
      const container = canvas.parentElement;
      canvas.width = container.clientWidth;
      canvas.height = container.clientHeight;
    }
    resize();
    window.addEventListener('resize', resize);

    // Game state
    let gameActive = false;
    let score = 0;
    let ballsRemaining = 6;
    let sixes = 0;
    let fours = 0;

    // Ball state
    let ball = null;
    let ballSpeed = 4;
    let swinging = false;
    let swingAngle = 0;

    // Colors for balls
    const ballColors = ['#00d4ff', '#aa00ff', '#00ff88', '#ff3366', '#ffcc00'];

    // Batman batter position
    const batter = {
      x: 0,
      y: 0,
      batLength: 60,
      batAngle: -0.3
    };

    function updateBatterPosition() {
      batter.x = canvas.width * 0.75;
      batter.y = canvas.height * 0.7;
    }

    function drawPitch() {
      // Pitch strip
      ctx.fillStyle = '#1a2a1a';
      ctx.fillRect(canvas.width * 0.1, canvas.height * 0.4, canvas.width * 0.8, canvas.height * 0.35);

      // Crease lines
      ctx.strokeStyle = 'rgba(255, 255, 255, 0.3)';
      ctx.lineWidth = 2;

      // Bowling crease
      ctx.beginPath();
      ctx.moveTo(canvas.width * 0.2, canvas.height * 0.5);
      ctx.lineTo(canvas.width * 0.2, canvas.height * 0.7);
      ctx.stroke();

      // Batting crease
      ctx.beginPath();
      ctx.moveTo(canvas.width * 0.7, canvas.height * 0.5);
      ctx.lineTo(canvas.width * 0.7, canvas.height * 0.7);
      ctx.stroke();

      // Stumps
      drawStumps(canvas.width * 0.72, canvas.height * 0.58);
    }

    function drawStumps(x, y) {
      ctx.fillStyle = '#ffcc00';
      ctx.shadowColor = '#ffcc00';
      ctx.shadowBlur = 10;

      for (let i = 0; i < 3; i++) {
        ctx.fillRect(x + i * 8, y - 30, 3, 35);
      }

      // Bails
      ctx.fillRect(x - 2, y - 32, 10, 3);
      ctx.fillRect(x + 14, y - 32, 10, 3);

      ctx.shadowBlur = 0;
    }

    function drawBatter() {
      updateBatterPosition();
      const { x, y, batLength } = batter;

      // Batman silhouette (simplified)
      ctx.fillStyle = '#0d0d15';
      ctx.shadowColor = '#aa00ff';
      ctx.shadowBlur = 15;

      // Body
      ctx.beginPath();
      ctx.ellipse(x, y - 30, 15, 25, 0, 0, Math.PI * 2);
      ctx.fill();

      // Head with ears
      ctx.beginPath();
      ctx.arc(x, y - 65, 12, 0, Math.PI * 2);
      ctx.fill();

      // Bat ears
      ctx.beginPath();
      ctx.moveTo(x - 12, y - 70);
      ctx.lineTo(x - 8, y - 85);
      ctx.lineTo(x - 4, y - 72);
      ctx.fill();

      ctx.beginPath();
      ctx.moveTo(x + 12, y - 70);
      ctx.lineTo(x + 8, y - 85);
      ctx.lineTo(x + 4, y - 72);
      ctx.fill();

      // Cape hint
      ctx.beginPath();
      ctx.moveTo(x - 10, y - 20);
      ctx.quadraticCurveTo(x - 25, y + 10, x - 15, y + 20);
      ctx.lineTo(x + 15, y + 20);
      ctx.quadraticCurveTo(x + 25, y + 10, x + 10, y - 20);
      ctx.fill();

      ctx.shadowBlur = 0;

      // Cricket bat
      const currentAngle = swinging ? batter.batAngle + swingAngle : batter.batAngle;
      const batEndX = x - 20 + Math.cos(currentAngle) * batLength;
      const batEndY = y - 35 + Math.sin(currentAngle) * batLength;

      // Bat handle
      ctx.strokeStyle = '#3a3a3a';
      ctx.lineWidth = 6;
      ctx.lineCap = 'round';
      ctx.beginPath();
      ctx.moveTo(x - 20, y - 35);
      ctx.lineTo(batEndX, batEndY);
      ctx.stroke();

      // Bat blade (glowing)
      ctx.strokeStyle = '#ffcc00';
      ctx.shadowColor = '#ffcc00';
      ctx.shadowBlur = 15;
      ctx.lineWidth = 12;
      ctx.beginPath();
      const bladeStart = 0.4;
      const bladeStartX = x - 20 + Math.cos(currentAngle) * batLength * bladeStart;
      const bladeStartY = y - 35 + Math.sin(currentAngle) * batLength * bladeStart;
      ctx.moveTo(bladeStartX, bladeStartY);
      ctx.lineTo(batEndX, batEndY);
      ctx.stroke();

      ctx.shadowBlur = 0;
    }

    function drawBall() {
      if (!ball) return;

      ctx.beginPath();
      ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI * 2);

      // Glowing effect
      ctx.fillStyle = ball.color;
      ctx.shadowColor = ball.color;
      ctx.shadowBlur = 20;
      ctx.fill();

      // Inner highlight
      ctx.beginPath();
      ctx.arc(ball.x - 3, ball.y - 3, ball.radius * 0.4, 0, Math.PI * 2);
      ctx.fillStyle = 'rgba(255, 255, 255, 0.5)';
      ctx.fill();

      ctx.shadowBlur = 0;
    }

    function drawTrajectory() {
      if (!ball || ball.hit) return;

      // Draw ball trail
      ctx.strokeStyle = ball.color;
      ctx.globalAlpha = 0.3;
      ctx.lineWidth = 2;
      ctx.setLineDash([5, 10]);
      ctx.beginPath();
      ctx.moveTo(ball.startX, ball.startY);
      ctx.lineTo(ball.targetX, ball.targetY);
      ctx.stroke();
      ctx.setLineDash([]);
      ctx.globalAlpha = 1;
    }

    function spawnBall() {
      const color = ballColors[Math.floor(Math.random() * ballColors.length)];

      ball = {
        x: canvas.width * 0.15,
        y: canvas.height * 0.55,
        startX: canvas.width * 0.15,
        startY: canvas.height * 0.55,
        targetX: canvas.width * 0.72,
        targetY: canvas.height * 0.58,
        radius: 10,
        color: color,
        progress: 0,
        hit: false,
        hitVelX: 0,
        hitVelY: 0
      };

      // Show timing bar
      document.getElementById('timingBar').style.display = 'block';
      updateTimingBar();
    }

    function updateTimingBar() {
      const bar = document.getElementById('timingBar');
      const zone = document.getElementById('timingZone');
      const indicator = document.getElementById('timingIndicator');

      // Sweet spot zone (60-80% of progress)
      zone.style.left = '55%';
      zone.style.width = '25%';

      if (ball && !ball.hit) {
        indicator.style.left = (ball.progress * 100) + '%';
      }
    }

    function updateBall() {
      if (!ball) return;

      if (!ball.hit) {
        ball.progress += 0.012 * ballSpeed;

        ball.x = ball.startX + (ball.targetX - ball.startX) * ball.progress;
        ball.y = ball.startY + (ball.targetY - ball.startY) * ball.progress;

        // Add slight arc
        const arc = Math.sin(ball.progress * Math.PI) * -30;
        ball.y += arc;

        updateTimingBar();

        // Ball reached stumps without hit
        if (ball.progress >= 1) {
          showMessage('OUT!', 'out');
          ballsRemaining--;
          updateHUD();
          ball = null;
          document.getElementById('timingBar').style.display = 'none';

          if (ballsRemaining <= 0) {
            endGame();
          } else {
            setTimeout(spawnBall, 1500);
          }
        }
      } else {
        // Ball was hit - fly away
        ball.x += ball.hitVelX;
        ball.y += ball.hitVelY;
        ball.hitVelY += 0.3; // gravity
        ball.radius *= 0.99;

        if (ball.y > canvas.height + 50 || ball.x > canvas.width + 50 || ball.x < -50) {
          ball = null;
          document.getElementById('timingBar').style.display = 'none';

          if (ballsRemaining <= 0) {
            endGame();
          } else {
            setTimeout(spawnBall, 1000);
          }
        }
      }
    }

    function swing() {
      if (!gameActive || !ball || ball.hit || swinging) return;

      swinging = true;
      swingAngle = 0;

      const swingAnim = () => {
        swingAngle += 0.3;
        if (swingAngle < Math.PI * 0.8) {
          requestAnimationFrame(swingAnim);
        } else {
          swinging = false;
          swingAngle = 0;
        }
      };
      swingAnim();

      // Check timing
      const timing = ball.progress;

      if (timing >= 0.55 && timing <= 0.80) {
        // Perfect - SIX!
        ball.hit = true;
        ball.hitVelX = 8 + Math.random() * 4;
        ball.hitVelY = -12 - Math.random() * 5;

        if (timing >= 0.62 && timing <= 0.73) {
          // Perfect sweet spot - SIX
          score += 6;
          sixes++;
          showMessage('SIX!', 'six');
        } else {
          // Good - FOUR
          score += 4;
          fours++;
          showMessage('FOUR!', 'four');
        }

        ballsRemaining--;
        updateHUD();
      } else if (timing >= 0.40 && timing < 0.55) {
        // Too early - miss
        showMessage('TOO EARLY!', 'miss');
      } else if (timing > 0.80 && timing < 0.95) {
        // Too late - miss
        showMessage('TOO LATE!', 'miss');
      }
    }

    function showMessage(text, type) {
      const msg = document.getElementById('message');
      msg.textContent = text;
      msg.className = 'message show ' + type;

      setTimeout(() => {
        msg.classList.remove('show');
      }, 800);
    }

    function updateHUD() {
      document.getElementById('score').textContent = score;
      document.getElementById('balls').textContent = ballsRemaining;
    }

    function startGame() {
      document.getElementById('startScreen').classList.add('hidden');
      document.getElementById('endScreen').classList.add('hidden');

      score = 0;
      ballsRemaining = 6;
      sixes = 0;
      fours = 0;
      ball = null;
      gameActive = true;

      updateHUD();
      setTimeout(spawnBall, 500);
    }

    function endGame() {
      gameActive = false;
      document.getElementById('finalScore').textContent = score;
      document.getElementById('stats').textContent = `Sixes: ${sixes} | Fours: ${fours}`;
      document.getElementById('endScreen').classList.remove('hidden');
    }

    // Input
    canvas.addEventListener('click', swing);
    canvas.addEventListener('touchstart', (e) => {
      e.preventDefault();
      swing();
    });

    // Game loop
    function gameLoop() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      drawPitch();
      drawTrajectory();
      drawBall();
      drawBatter();

      if (gameActive) {
        updateBall();
      }

      requestAnimationFrame(gameLoop);
    }

    gameLoop();
  </script>
<script src="/sloppy-header/sloppy-bar.js"></script>
</body>
</html>
