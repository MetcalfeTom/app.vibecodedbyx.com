<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>Treasure Hunt - Catch the Loot</title>
  <link rel="icon" href="https://emojicdn.elk.sh/üè¥‚Äç‚ò†Ô∏è">
  <meta property="og:title" content="Treasure Hunt - Catch the Loot">
  <meta property="og:description" content="Hunt down floating treasure with yer spyglass!">
  <meta property="og:url" content="https://sloppy.live/sloppy-hunt">
  <meta property="og:image" content="https://emojicdn.elk.sh/üí∞?style=apple&size=512">
  <link href="https://fonts.googleapis.com/css2?family=Pirata+One&family=IM+Fell+English+SC&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      min-height: 100vh;
      background: #0d1a2a;
      font-family: 'IM Fell English SC', serif;
      overflow: hidden;
      cursor: none;
    }
    .game-container {
      position: relative;
      width: 100vw;
      height: 100vh;
    }
    canvas { display: block; width: 100%; height: 100%; }
    .hud {
      position: absolute;
      top: 15px;
      left: 20px;
      right: 20px;
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      pointer-events: none;
      z-index: 10;
    }
    .title {
      font-family: 'Pirata One', cursive;
      font-size: 1.3rem;
      color: #d4a84b;
      text-shadow: 0 0 20px #d4a84b, 2px 2px 4px #1a0f0a;
      letter-spacing: 0.05em;
    }
    .stats {
      text-align: right;
    }
    .score {
      font-family: 'Pirata One', cursive;
      font-size: 1.1rem;
      color: #ffd700;
      text-shadow: 0 0 15px #ffd700;
    }
    .combo {
      font-family: 'Pirata One', cursive;
      font-size: 0.9rem;
      color: #c0c0c0;
      text-shadow: 0 0 10px #c0c0c0;
      margin-top: 5px;
    }
    .mode-toggle {
      position: absolute;
      bottom: 20px;
      left: 20px;
      z-index: 20;
    }
    .mode-btn {
      font-family: 'Pirata One', cursive;
      font-size: 0.8rem;
      padding: 10px 15px;
      background: transparent;
      border: 2px solid #2a9d8f;
      color: #2a9d8f;
      cursor: pointer;
      transition: all 0.2s;
    }
    .mode-btn:hover {
      background: #2a9d8f;
      color: #0d1a2a;
      box-shadow: 0 0 20px #2a9d8f;
    }
    .mode-btn.active {
      background: #1a5a50;
      border-color: #2a9d8f;
      color: #fff;
      box-shadow: 0 0 30px #2a9d8f;
    }
    .curse-indicator {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-family: 'Pirata One', cursive;
      font-size: 2rem;
      color: #2a9d8f;
      text-shadow: 0 0 30px #2a9d8f;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.3s;
      z-index: 15;
    }
    .curse-indicator.show {
      opacity: 1;
      animation: curse-bounce 0.5s ease-in-out;
    }
    @keyframes curse-bounce {
      0%, 100% { transform: translate(-50%, -50%) scale(1); }
      50% { transform: translate(-50%, -50%) scale(1.3); }
    }
    .hit-text {
      position: absolute;
      font-family: 'Pirata One', cursive;
      font-size: 1.5rem;
      pointer-events: none;
      animation: hit-pop 0.8s ease-out forwards;
      z-index: 20;
    }
    @keyframes hit-pop {
      0% { transform: scale(0.5); opacity: 1; }
      50% { transform: scale(1.2); }
      100% { transform: scale(1) translateY(-50px); opacity: 0; }
    }
    .back-link {
      position: fixed;
      bottom: 5px;
      right: 10px;
      color: #d4a84b;
      text-decoration: none;
      font-size: 0.5rem;
      opacity: 0.4;
      cursor: pointer;
    }
    .instructions {
      position: absolute;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 0.6rem;
      color: #3a4a5a;
      pointer-events: none;
    }
  </style>
</head>
<body>
  <div class="game-container">
    <canvas id="canvas"></canvas>
    <div class="hud">
      <div class="title">‚ò†Ô∏è Treasure Hunt</div>
      <div class="stats">
        <div class="score">DOUBLOONS: <span id="score">0</span></div>
        <div class="combo">STREAK: <span id="combo">0</span>x</div>
      </div>
    </div>
    <div class="mode-toggle">
      <button class="mode-btn" id="curseBtn">üêô KRAKEN'S CURSE</button>
    </div>
    <div class="curse-indicator" id="curseIndicator">CURSED!</div>
    <div class="instructions">Click on the treasure!</div>
  </div>
  <a href="https://sloppy.live" class="back-link">sloppy.live</a>

<script>
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');

let mouseX = 0, mouseY = 0;
let score = 0;
let combo = 0;
let curseMode = false;
let frameCount = 0;

const treasure = {
  x: 0, y: 0,
  targetX: 0, targetY: 0,
  radius: 35,
  speed: 3,
  wobble: 0,
  hit: false,
  hitTimer: 0
};

const particles = [];
const coins = [];
const hitTexts = [];

function resize() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
  treasure.x = canvas.width / 2;
  treasure.y = canvas.height / 2;
  pickNewTarget();
}

function pickNewTarget() {
  treasure.targetX = 100 + Math.random() * (canvas.width - 200);
  treasure.targetY = 100 + Math.random() * (canvas.height - 200);
}

function spawnParticle(x, y, color, count = 8) {
  for (let i = 0; i < count; i++) {
    const angle = (i / count) * Math.PI * 2 + Math.random() * 0.5;
    particles.push({
      x, y,
      vx: Math.cos(angle) * (4 + Math.random() * 4),
      vy: Math.sin(angle) * (4 + Math.random() * 4),
      radius: 3 + Math.random() * 4,
      color,
      alpha: 1
    });
  }
}

function spawnCoins(x, y) {
  for (let i = 0; i < 6; i++) {
    coins.push({
      x, y,
      vx: (Math.random() - 0.5) * 8,
      vy: -4 - Math.random() * 5,
      rotation: Math.random() * Math.PI * 2,
      rotSpeed: (Math.random() - 0.5) * 0.3,
      alpha: 1,
      size: 12 + Math.random() * 8
    });
  }
}

function spawnHitText(x, y, text, color) {
  const el = document.createElement('div');
  el.className = 'hit-text';
  el.textContent = text;
  el.style.left = x + 'px';
  el.style.top = y + 'px';
  el.style.color = color;
  el.style.textShadow = `0 0 20px ${color}`;
  document.body.appendChild(el);
  setTimeout(() => el.remove(), 800);
}

function handleClick(x, y) {
  const dx = x - treasure.x;
  const dy = y - treasure.y;
  const dist = Math.sqrt(dx * dx + dy * dy);

  if (dist < treasure.radius + 15) {
    // Hit!
    treasure.hit = true;
    treasure.hitTimer = 15;
    combo++;

    const points = 10 * combo;
    score += points;

    document.getElementById('score').textContent = score;
    document.getElementById('combo').textContent = combo;

    if (curseMode) {
      // Kraken curse effects
      spawnCoins(treasure.x, treasure.y);
      spawnParticle(treasure.x, treasure.y, '#2a9d8f', 12);
      spawnHitText(treasure.x, treasure.y - 30, 'CURSED! +' + points, '#2a9d8f');

      const indicator = document.getElementById('curseIndicator');
      indicator.textContent = ['CURSED!', 'DAVY JONES!', 'KRAKEN STIRS!', 'YE BE DOOMED!'][Math.floor(Math.random() * 4)];
      indicator.classList.add('show');
      setTimeout(() => indicator.classList.remove('show'), 500);
    } else {
      spawnCoins(treasure.x, treasure.y);
      spawnParticle(treasure.x, treasure.y, '#ffd700', 10);
      spawnHitText(treasure.x, treasure.y - 30, '+' + points, '#ffd700');
    }

    // Move treasure away
    pickNewTarget();
    treasure.speed = Math.min(8, 3 + score / 100);
  } else {
    // Miss
    combo = 0;
    document.getElementById('combo').textContent = combo;
    spawnParticle(x, y, '#8b0000', 4);
  }
}

function update() {
  frameCount++;
  treasure.wobble += 0.08;

  // Move treasure toward target
  const dx = treasure.targetX - treasure.x;
  const dy = treasure.targetY - treasure.y;
  const dist = Math.sqrt(dx * dx + dy * dy);

  if (dist > 5) {
    treasure.x += (dx / dist) * treasure.speed;
    treasure.y += (dy / dist) * treasure.speed;
  } else {
    pickNewTarget();
  }

  // Random direction changes
  if (frameCount % 60 === 0 && Math.random() < 0.3) {
    pickNewTarget();
  }

  // Hit animation
  if (treasure.hitTimer > 0) {
    treasure.hitTimer--;
    treasure.hit = treasure.hitTimer > 0;
  }

  // Update particles
  for (let i = particles.length - 1; i >= 0; i--) {
    const p = particles[i];
    p.x += p.vx;
    p.y += p.vy;
    p.vy += 0.2;
    p.vx *= 0.98;
    p.alpha -= 0.03;
    if (p.alpha <= 0) particles.splice(i, 1);
  }

  // Update coins
  for (let i = coins.length - 1; i >= 0; i--) {
    const c = coins[i];
    c.x += c.vx;
    c.y += c.vy;
    c.vy += 0.15;
    c.vx *= 0.99;
    c.rotation += c.rotSpeed;
    c.alpha -= 0.018;
    if (c.alpha <= 0) coins.splice(i, 1);
  }
}

function drawSpyglass() {
  const size = 30;
  const innerSize = 10;
  const color = curseMode ? '#2a9d8f' : '#d4a84b';

  ctx.strokeStyle = color;
  ctx.shadowColor = color;
  ctx.shadowBlur = 12;
  ctx.lineWidth = 3;

  // Outer ring (brass spyglass)
  ctx.beginPath();
  ctx.arc(mouseX, mouseY, size, 0, Math.PI * 2);
  ctx.stroke();

  // Inner decorative ring
  ctx.lineWidth = 1;
  ctx.beginPath();
  ctx.arc(mouseX, mouseY, size - 5, 0, Math.PI * 2);
  ctx.stroke();

  // Cross lines
  ctx.lineWidth = 2;
  ctx.beginPath();
  ctx.moveTo(mouseX - size - 12, mouseY);
  ctx.lineTo(mouseX - innerSize, mouseY);
  ctx.moveTo(mouseX + innerSize, mouseY);
  ctx.lineTo(mouseX + size + 12, mouseY);
  ctx.moveTo(mouseX, mouseY - size - 12);
  ctx.lineTo(mouseX, mouseY - innerSize);
  ctx.moveTo(mouseX, mouseY + innerSize);
  ctx.lineTo(mouseX, mouseY + size + 12);
  ctx.stroke();

  // Compass points
  ctx.fillStyle = color;
  ctx.font = '10px serif';
  ctx.textAlign = 'center';
  ctx.textBaseline = 'middle';
  ctx.fillText('N', mouseX, mouseY - size - 18);
  ctx.fillText('S', mouseX, mouseY + size + 18);
  ctx.fillText('E', mouseX + size + 18, mouseY);
  ctx.fillText('W', mouseX - size - 18, mouseY);

  // Center dot
  ctx.beginPath();
  ctx.arc(mouseX, mouseY, 3, 0, Math.PI * 2);
  ctx.fill();

  ctx.shadowBlur = 0;
}

function drawTreasureChest() {
  const wobbleX = Math.sin(treasure.wobble) * 4;
  const wobbleY = Math.cos(treasure.wobble * 1.3) * 4;
  const x = treasure.x + wobbleX;
  const y = treasure.y + wobbleY;
  const scale = treasure.hit ? 1.3 : 1;
  const r = treasure.radius * scale;

  // Glow
  const glow = ctx.createRadialGradient(x, y, 0, x, y, r * 2);
  glow.addColorStop(0, curseMode ? 'rgba(42, 157, 143, 0.4)' : 'rgba(255, 215, 0, 0.4)');
  glow.addColorStop(1, 'transparent');
  ctx.fillStyle = glow;
  ctx.beginPath();
  ctx.arc(x, y, r * 2, 0, Math.PI * 2);
  ctx.fill();

  ctx.save();
  ctx.translate(x, y);
  ctx.scale(scale, scale);

  const chestColor = curseMode ? '#1a5a50' : '#5c3a1e';
  const trimColor = curseMode ? '#2a9d8f' : '#d4a84b';
  const highlightColor = curseMode ? '#3ab5a5' : '#ffd700';

  ctx.shadowColor = trimColor;
  ctx.shadowBlur = 20;

  // Chest body
  ctx.fillStyle = chestColor;
  ctx.fillRect(-25, -5, 50, 30);

  // Chest lid (curved top)
  ctx.beginPath();
  ctx.moveTo(-25, -5);
  ctx.quadraticCurveTo(-25, -25, 0, -28);
  ctx.quadraticCurveTo(25, -25, 25, -5);
  ctx.closePath();
  ctx.fill();

  // Chest bands (horizontal)
  ctx.strokeStyle = trimColor;
  ctx.lineWidth = 3;
  ctx.beginPath();
  ctx.moveTo(-25, 5);
  ctx.lineTo(25, 5);
  ctx.moveTo(-25, 18);
  ctx.lineTo(25, 18);
  ctx.stroke();

  // Lid band
  ctx.beginPath();
  ctx.moveTo(-23, -15);
  ctx.quadraticCurveTo(0, -22, 23, -15);
  ctx.stroke();

  // Lock/clasp
  ctx.fillStyle = trimColor;
  ctx.beginPath();
  ctx.arc(0, 5, 8, 0, Math.PI * 2);
  ctx.fill();

  // Keyhole
  ctx.fillStyle = '#1a0f0a';
  ctx.beginPath();
  ctx.arc(0, 3, 3, 0, Math.PI * 2);
  ctx.fill();
  ctx.fillRect(-1.5, 3, 3, 5);

  // Skull emblem on lid
  ctx.fillStyle = trimColor;
  ctx.font = '16px serif';
  ctx.textAlign = 'center';
  ctx.textBaseline = 'middle';
  ctx.fillText('‚ò†', 0, -15);

  // Shine on lid
  ctx.fillStyle = 'rgba(255,255,255,0.2)';
  ctx.beginPath();
  ctx.ellipse(-8, -20, 10, 5, -0.3, 0, Math.PI * 2);
  ctx.fill();

  // Corner rivets
  ctx.fillStyle = trimColor;
  const rivets = [[-22, -2], [22, -2], [-22, 22], [22, 22]];
  for (const [rx, ry] of rivets) {
    ctx.beginPath();
    ctx.arc(rx, ry, 3, 0, Math.PI * 2);
    ctx.fill();
  }

  ctx.restore();
  ctx.shadowBlur = 0;
}

function drawCoin(c) {
  ctx.save();
  ctx.translate(c.x, c.y);
  ctx.rotate(c.rotation);
  ctx.globalAlpha = c.alpha;

  const color = curseMode ? '#2a9d8f' : '#ffd700';
  const darkColor = curseMode ? '#1a5a50' : '#b8860b';

  ctx.shadowColor = color;
  ctx.shadowBlur = 8;

  // Coin body
  const grad = ctx.createRadialGradient(-2, -2, 0, 0, 0, c.size);
  grad.addColorStop(0, '#fff8dc');
  grad.addColorStop(0.4, color);
  grad.addColorStop(1, darkColor);
  ctx.fillStyle = grad;
  ctx.beginPath();
  ctx.arc(0, 0, c.size, 0, Math.PI * 2);
  ctx.fill();

  // Skull
  ctx.fillStyle = darkColor;
  ctx.font = `${c.size}px serif`;
  ctx.textAlign = 'center';
  ctx.textBaseline = 'middle';
  ctx.fillText('‚ò†', 0, 1);

  ctx.restore();
}

function drawParticles() {
  for (const p of particles) {
    ctx.globalAlpha = p.alpha;
    ctx.fillStyle = p.color;
    ctx.shadowColor = p.color;
    ctx.shadowBlur = 10;
    ctx.beginPath();
    ctx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
    ctx.fill();
  }
  ctx.globalAlpha = 1;
  ctx.shadowBlur = 0;
}

function drawCoins() {
  for (const c of coins) {
    drawCoin(c);
  }
  ctx.globalAlpha = 1;
}

function render() {
  // Ocean background
  const bg = ctx.createLinearGradient(0, 0, 0, canvas.height);
  bg.addColorStop(0, curseMode ? '#051510' : '#0d1a2a');
  bg.addColorStop(0.5, curseMode ? '#0a2a25' : '#1a2d4a');
  bg.addColorStop(1, curseMode ? '#051510' : '#0d1a2a');
  ctx.fillStyle = bg;
  ctx.fillRect(0, 0, canvas.width, canvas.height);

  // Map grid
  ctx.strokeStyle = curseMode ? 'rgba(42, 157, 143, 0.1)' : 'rgba(212, 168, 75, 0.1)';
  ctx.lineWidth = 1;
  const gridSize = 60;
  for (let x = 0; x < canvas.width; x += gridSize) {
    ctx.beginPath();
    ctx.moveTo(x, 0);
    ctx.lineTo(x, canvas.height);
    ctx.stroke();
  }
  for (let y = 0; y < canvas.height; y += gridSize) {
    ctx.beginPath();
    ctx.moveTo(0, y);
    ctx.lineTo(canvas.width, y);
    ctx.stroke();
  }

  // Compass rose in corner
  drawCompassRose();

  drawTreasureChest();
  drawParticles();
  drawCoins();
  drawSpyglass();

  // Vignette
  const vignette = ctx.createRadialGradient(
    canvas.width / 2, canvas.height / 2, canvas.height * 0.4,
    canvas.width / 2, canvas.height / 2, canvas.height
  );
  vignette.addColorStop(0, 'transparent');
  vignette.addColorStop(1, 'rgba(0, 0, 0, 0.6)');
  ctx.fillStyle = vignette;
  ctx.fillRect(0, 0, canvas.width, canvas.height);
}

function drawCompassRose() {
  const cx = canvas.width - 80;
  const cy = canvas.height - 80;
  const size = 40;
  const color = curseMode ? '#2a9d8f' : '#d4a84b';

  ctx.save();
  ctx.translate(cx, cy);
  ctx.globalAlpha = 0.3;

  // Outer circle
  ctx.strokeStyle = color;
  ctx.lineWidth = 2;
  ctx.beginPath();
  ctx.arc(0, 0, size, 0, Math.PI * 2);
  ctx.stroke();

  // Cardinal points
  ctx.fillStyle = color;
  for (let i = 0; i < 4; i++) {
    ctx.save();
    ctx.rotate(i * Math.PI / 2);
    ctx.beginPath();
    ctx.moveTo(0, -size + 5);
    ctx.lineTo(-8, 0);
    ctx.lineTo(0, size - 15);
    ctx.lineTo(8, 0);
    ctx.closePath();
    ctx.fill();
    ctx.restore();
  }

  // Ordinal points (smaller)
  ctx.globalAlpha = 0.2;
  for (let i = 0; i < 4; i++) {
    ctx.save();
    ctx.rotate(i * Math.PI / 2 + Math.PI / 4);
    ctx.beginPath();
    ctx.moveTo(0, -size + 15);
    ctx.lineTo(-5, 0);
    ctx.lineTo(0, size - 25);
    ctx.lineTo(5, 0);
    ctx.closePath();
    ctx.fill();
    ctx.restore();
  }

  ctx.restore();
}

function gameLoop() {
  update();
  render();
  requestAnimationFrame(gameLoop);
}

// Events
canvas.addEventListener('mousemove', e => {
  mouseX = e.clientX;
  mouseY = e.clientY;
});

canvas.addEventListener('click', e => {
  handleClick(e.clientX, e.clientY);
});

canvas.addEventListener('touchstart', e => {
  e.preventDefault();
  const touch = e.touches[0];
  mouseX = touch.clientX;
  mouseY = touch.clientY;
  handleClick(touch.clientX, touch.clientY);
});

canvas.addEventListener('touchmove', e => {
  e.preventDefault();
  mouseX = e.touches[0].clientX;
  mouseY = e.touches[0].clientY;
});

document.getElementById('curseBtn').addEventListener('click', () => {
  curseMode = !curseMode;
  document.getElementById('curseBtn').classList.toggle('active', curseMode);
});

window.addEventListener('resize', resize);

resize();
gameLoop();
</script>
<script src="/sloppy-header/sloppy-bar.js"></script>
</body>
</html>
