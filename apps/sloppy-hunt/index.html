<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>SLOPPY HUNT - Catch the Grape</title>
  <link rel="icon" href="https://emojicdn.elk.sh/üçá">
  <meta property="og:title" content="SLOPPY HUNT - Catch the Grape">
  <meta property="og:description" content="Hunt down the elusive grape with your neon crosshair!">
  <meta property="og:url" content="https://sloppy.live/sloppy-hunt">
  <meta property="og:image" content="https://emojicdn.elk.sh/üéØ?style=apple&size=512">
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      min-height: 100vh;
      background: #0a0a12;
      font-family: 'Press Start 2P', cursive;
      overflow: hidden;
      cursor: none;
    }
    .game-container {
      position: relative;
      width: 100vw;
      height: 100vh;
    }
    canvas { display: block; width: 100%; height: 100%; }
    .hud {
      position: absolute;
      top: 15px;
      left: 20px;
      right: 20px;
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      pointer-events: none;
      z-index: 10;
    }
    .title {
      font-size: 1rem;
      color: #0f0;
      text-shadow: 0 0 20px #0f0;
      letter-spacing: 0.05em;
    }
    .stats {
      text-align: right;
    }
    .score {
      font-size: 0.9rem;
      color: #f0f;
      text-shadow: 0 0 15px #f0f;
    }
    .combo {
      font-size: 0.7rem;
      color: #ff0;
      text-shadow: 0 0 10px #ff0;
      margin-top: 5px;
    }
    .mode-toggle {
      position: absolute;
      bottom: 20px;
      left: 20px;
      z-index: 20;
    }
    .mode-btn {
      font-family: 'Press Start 2P', cursive;
      font-size: 0.6rem;
      padding: 10px 15px;
      background: transparent;
      border: 2px solid #f0f;
      color: #f0f;
      cursor: pointer;
      transition: all 0.2s;
    }
    .mode-btn:hover {
      background: #f0f;
      color: #0a0a12;
      box-shadow: 0 0 20px #f0f;
    }
    .mode-btn.active {
      background: #ff69b4;
      border-color: #ff69b4;
      color: #000;
      box-shadow: 0 0 30px #ff69b4;
    }
    .tickle-indicator {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 2rem;
      color: #ff69b4;
      text-shadow: 0 0 30px #ff69b4;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.3s;
      z-index: 15;
    }
    .tickle-indicator.show {
      opacity: 1;
      animation: tickle-bounce 0.5s ease-in-out;
    }
    @keyframes tickle-bounce {
      0%, 100% { transform: translate(-50%, -50%) scale(1); }
      50% { transform: translate(-50%, -50%) scale(1.3); }
    }
    .hit-text {
      position: absolute;
      font-size: 1.5rem;
      pointer-events: none;
      animation: hit-pop 0.8s ease-out forwards;
      z-index: 20;
    }
    @keyframes hit-pop {
      0% { transform: scale(0.5); opacity: 1; }
      50% { transform: scale(1.2); }
      100% { transform: scale(1) translateY(-50px); opacity: 0; }
    }
    .back-link {
      position: fixed;
      bottom: 5px;
      right: 10px;
      color: #0f0;
      text-decoration: none;
      font-size: 0.5rem;
      opacity: 0.4;
      cursor: pointer;
    }
    .instructions {
      position: absolute;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 0.5rem;
      color: #555;
      pointer-events: none;
    }
  </style>
</head>
<body>
  <div class="game-container">
    <canvas id="canvas"></canvas>
    <div class="hud">
      <div class="title">üçá SLOPPY HUNT</div>
      <div class="stats">
        <div class="score">SCORE: <span id="score">0</span></div>
        <div class="combo">COMBO: <span id="combo">0</span>x</div>
      </div>
    </div>
    <div class="mode-toggle">
      <button class="mode-btn" id="tickleBtn">ü™∂ ANGEL'S TICKLE MODE</button>
    </div>
    <div class="tickle-indicator" id="tickleIndicator">TICKLE!</div>
    <div class="instructions">Click on the grape!</div>
  </div>
  <a href="https://sloppy.live" class="back-link">sloppy.live</a>

<script>
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');

let mouseX = 0, mouseY = 0;
let score = 0;
let combo = 0;
let tickleMode = false;
let frameCount = 0;

const grape = {
  x: 0, y: 0,
  targetX: 0, targetY: 0,
  radius: 30,
  speed: 3,
  wobble: 0,
  hit: false,
  hitTimer: 0
};

const particles = [];
const feathers = [];
const hitTexts = [];

function resize() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
  grape.x = canvas.width / 2;
  grape.y = canvas.height / 2;
  pickNewTarget();
}

function pickNewTarget() {
  grape.targetX = 100 + Math.random() * (canvas.width - 200);
  grape.targetY = 100 + Math.random() * (canvas.height - 200);
}

function spawnParticle(x, y, color, count = 8) {
  for (let i = 0; i < count; i++) {
    const angle = (i / count) * Math.PI * 2 + Math.random() * 0.5;
    particles.push({
      x, y,
      vx: Math.cos(angle) * (4 + Math.random() * 4),
      vy: Math.sin(angle) * (4 + Math.random() * 4),
      radius: 3 + Math.random() * 4,
      color,
      alpha: 1
    });
  }
}

function spawnFeather(x, y) {
  for (let i = 0; i < 5; i++) {
    feathers.push({
      x, y,
      vx: (Math.random() - 0.5) * 6,
      vy: -3 - Math.random() * 4,
      rotation: Math.random() * Math.PI * 2,
      rotSpeed: (Math.random() - 0.5) * 0.2,
      alpha: 1,
      size: 15 + Math.random() * 10
    });
  }
}

function spawnHitText(x, y, text, color) {
  const el = document.createElement('div');
  el.className = 'hit-text';
  el.textContent = text;
  el.style.left = x + 'px';
  el.style.top = y + 'px';
  el.style.color = color;
  el.style.textShadow = `0 0 20px ${color}`;
  document.body.appendChild(el);
  setTimeout(() => el.remove(), 800);
}

function handleClick(x, y) {
  const dx = x - grape.x;
  const dy = y - grape.y;
  const dist = Math.sqrt(dx * dx + dy * dy);

  if (dist < grape.radius + 10) {
    // Hit!
    grape.hit = true;
    grape.hitTimer = 15;
    combo++;

    const points = 10 * combo;
    score += points;

    document.getElementById('score').textContent = score;
    document.getElementById('combo').textContent = combo;

    if (tickleMode) {
      // Tickle mode effects
      spawnFeather(grape.x, grape.y);
      spawnParticle(grape.x, grape.y, '#ff69b4', 12);
      spawnHitText(grape.x, grape.y - 30, 'TICKLE! +' + points, '#ff69b4');

      const indicator = document.getElementById('tickleIndicator');
      indicator.textContent = ['TICKLE!', 'HEHE!', 'STOP IT!', 'ANGEL GIGGLES!'][Math.floor(Math.random() * 4)];
      indicator.classList.add('show');
      setTimeout(() => indicator.classList.remove('show'), 500);
    } else {
      spawnParticle(grape.x, grape.y, '#a855f7', 10);
      spawnHitText(grape.x, grape.y - 30, '+' + points, '#0f0');
    }

    // Move grape away
    pickNewTarget();
    grape.speed = Math.min(8, 3 + score / 100);
  } else {
    // Miss
    combo = 0;
    document.getElementById('combo').textContent = combo;
    spawnParticle(x, y, '#f00', 4);
  }
}

function update() {
  frameCount++;
  grape.wobble += 0.1;

  // Move grape toward target
  const dx = grape.targetX - grape.x;
  const dy = grape.targetY - grape.y;
  const dist = Math.sqrt(dx * dx + dy * dy);

  if (dist > 5) {
    grape.x += (dx / dist) * grape.speed;
    grape.y += (dy / dist) * grape.speed;
  } else {
    pickNewTarget();
  }

  // Random direction changes
  if (frameCount % 60 === 0 && Math.random() < 0.3) {
    pickNewTarget();
  }

  // Hit animation
  if (grape.hitTimer > 0) {
    grape.hitTimer--;
    grape.hit = grape.hitTimer > 0;
  }

  // Update particles
  for (let i = particles.length - 1; i >= 0; i--) {
    const p = particles[i];
    p.x += p.vx;
    p.y += p.vy;
    p.vy += 0.2;
    p.vx *= 0.98;
    p.alpha -= 0.03;
    if (p.alpha <= 0) particles.splice(i, 1);
  }

  // Update feathers
  for (let i = feathers.length - 1; i >= 0; i--) {
    const f = feathers[i];
    f.x += f.vx;
    f.y += f.vy;
    f.vy += 0.1;
    f.vx *= 0.99;
    f.rotation += f.rotSpeed;
    f.alpha -= 0.015;
    if (f.alpha <= 0) feathers.splice(i, 1);
  }
}

function drawCrosshair() {
  const size = 25;
  const innerSize = 8;
  const color = tickleMode ? '#ff69b4' : '#0f0';

  ctx.strokeStyle = color;
  ctx.shadowColor = color;
  ctx.shadowBlur = 15;
  ctx.lineWidth = 3;

  // Outer circle
  ctx.beginPath();
  ctx.arc(mouseX, mouseY, size, 0, Math.PI * 2);
  ctx.stroke();

  // Cross lines
  ctx.beginPath();
  ctx.moveTo(mouseX - size - 10, mouseY);
  ctx.lineTo(mouseX - innerSize, mouseY);
  ctx.moveTo(mouseX + innerSize, mouseY);
  ctx.lineTo(mouseX + size + 10, mouseY);
  ctx.moveTo(mouseX, mouseY - size - 10);
  ctx.lineTo(mouseX, mouseY - innerSize);
  ctx.moveTo(mouseX, mouseY + innerSize);
  ctx.lineTo(mouseX, mouseY + size + 10);
  ctx.stroke();

  // Center dot
  ctx.fillStyle = color;
  ctx.beginPath();
  ctx.arc(mouseX, mouseY, 3, 0, Math.PI * 2);
  ctx.fill();

  ctx.shadowBlur = 0;
}

function drawGrape() {
  const wobbleX = Math.sin(grape.wobble) * 3;
  const wobbleY = Math.cos(grape.wobble * 1.3) * 3;
  const x = grape.x + wobbleX;
  const y = grape.y + wobbleY;
  const scale = grape.hit ? 1.3 : 1;
  const r = grape.radius * scale;

  // Glow
  const glow = ctx.createRadialGradient(x, y, 0, x, y, r * 2);
  glow.addColorStop(0, tickleMode ? 'rgba(255, 105, 180, 0.4)' : 'rgba(168, 85, 247, 0.4)');
  glow.addColorStop(1, 'transparent');
  ctx.fillStyle = glow;
  ctx.beginPath();
  ctx.arc(x, y, r * 2, 0, Math.PI * 2);
  ctx.fill();

  // Main grape cluster
  const grapeColor = tickleMode ? '#ff69b4' : '#8b5cf6';
  const lightGrape = tickleMode ? '#ffb6c1' : '#a855f7';

  ctx.shadowColor = grapeColor;
  ctx.shadowBlur = 20;

  // Draw multiple small grapes in cluster
  const positions = [
    [0, -0.4], [-0.35, -0.1], [0.35, -0.1],
    [-0.2, 0.3], [0.2, 0.3], [0, 0.5]
  ];

  for (const [px, py] of positions) {
    const gx = x + px * r;
    const gy = y + py * r;
    const gr = r * 0.45;

    const grapeGrad = ctx.createRadialGradient(gx - gr * 0.3, gy - gr * 0.3, 0, gx, gy, gr);
    grapeGrad.addColorStop(0, lightGrape);
    grapeGrad.addColorStop(1, grapeColor);

    ctx.fillStyle = grapeGrad;
    ctx.beginPath();
    ctx.arc(gx, gy, gr, 0, Math.PI * 2);
    ctx.fill();

    // Shine
    ctx.fillStyle = 'rgba(255,255,255,0.4)';
    ctx.beginPath();
    ctx.arc(gx - gr * 0.25, gy - gr * 0.25, gr * 0.25, 0, Math.PI * 2);
    ctx.fill();
  }

  // Stem
  ctx.strokeStyle = '#4a7c20';
  ctx.lineWidth = 3;
  ctx.shadowBlur = 0;
  ctx.beginPath();
  ctx.moveTo(x, y - r * 0.8);
  ctx.quadraticCurveTo(x + 5, y - r * 1.1, x + 10, y - r * 1.3);
  ctx.stroke();

  // Leaf
  ctx.fillStyle = '#6ab04c';
  ctx.beginPath();
  ctx.ellipse(x + 12, y - r * 1.35, 8, 5, 0.3, 0, Math.PI * 2);
  ctx.fill();
}

function drawFeather(f) {
  ctx.save();
  ctx.translate(f.x, f.y);
  ctx.rotate(f.rotation);
  ctx.globalAlpha = f.alpha;

  // Feather shaft
  ctx.strokeStyle = '#ffb6c1';
  ctx.lineWidth = 2;
  ctx.beginPath();
  ctx.moveTo(0, -f.size / 2);
  ctx.lineTo(0, f.size / 2);
  ctx.stroke();

  // Feather barbs
  ctx.fillStyle = '#ff69b4';
  ctx.beginPath();
  ctx.moveTo(0, -f.size / 2);
  ctx.quadraticCurveTo(-f.size / 3, -f.size / 4, -f.size / 4, 0);
  ctx.quadraticCurveTo(-f.size / 3, f.size / 4, 0, f.size / 2);
  ctx.quadraticCurveTo(f.size / 3, f.size / 4, f.size / 4, 0);
  ctx.quadraticCurveTo(f.size / 3, -f.size / 4, 0, -f.size / 2);
  ctx.fill();

  ctx.restore();
}

function drawParticles() {
  for (const p of particles) {
    ctx.globalAlpha = p.alpha;
    ctx.fillStyle = p.color;
    ctx.shadowColor = p.color;
    ctx.shadowBlur = 10;
    ctx.beginPath();
    ctx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
    ctx.fill();
  }
  ctx.globalAlpha = 1;
  ctx.shadowBlur = 0;
}

function drawFeathers() {
  for (const f of feathers) {
    drawFeather(f);
  }
}

function render() {
  // Background
  ctx.fillStyle = '#0a0a12';
  ctx.fillRect(0, 0, canvas.width, canvas.height);

  // Grid
  ctx.strokeStyle = tickleMode ? 'rgba(255, 105, 180, 0.1)' : 'rgba(0, 255, 0, 0.1)';
  ctx.lineWidth = 1;
  const gridSize = 50;
  for (let x = 0; x < canvas.width; x += gridSize) {
    ctx.beginPath();
    ctx.moveTo(x, 0);
    ctx.lineTo(x, canvas.height);
    ctx.stroke();
  }
  for (let y = 0; y < canvas.height; y += gridSize) {
    ctx.beginPath();
    ctx.moveTo(0, y);
    ctx.lineTo(canvas.width, y);
    ctx.stroke();
  }

  drawGrape();
  drawParticles();
  drawFeathers();
  drawCrosshair();

  // Vignette
  const vignette = ctx.createRadialGradient(
    canvas.width / 2, canvas.height / 2, canvas.height * 0.4,
    canvas.width / 2, canvas.height / 2, canvas.height
  );
  vignette.addColorStop(0, 'transparent');
  vignette.addColorStop(1, 'rgba(0, 0, 0, 0.5)');
  ctx.fillStyle = vignette;
  ctx.fillRect(0, 0, canvas.width, canvas.height);
}

function gameLoop() {
  update();
  render();
  requestAnimationFrame(gameLoop);
}

// Events
canvas.addEventListener('mousemove', e => {
  mouseX = e.clientX;
  mouseY = e.clientY;
});

canvas.addEventListener('click', e => {
  handleClick(e.clientX, e.clientY);
});

canvas.addEventListener('touchstart', e => {
  e.preventDefault();
  const touch = e.touches[0];
  mouseX = touch.clientX;
  mouseY = touch.clientY;
  handleClick(touch.clientX, touch.clientY);
});

canvas.addEventListener('touchmove', e => {
  e.preventDefault();
  mouseX = e.touches[0].clientX;
  mouseY = e.touches[0].clientY;
});

document.getElementById('tickleBtn').addEventListener('click', () => {
  tickleMode = !tickleMode;
  document.getElementById('tickleBtn').classList.toggle('active', tickleMode);

  if (tickleMode) {
    document.body.style.background = '#1a0a12';
  } else {
    document.body.style.background = '#0a0a12';
  }
});

window.addEventListener('resize', resize);

resize();
gameLoop();
</script>
</body>
</html>
