<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>YouTube Channel Wizard</title>
  <link rel="icon" href="https://emojicdn.elk.sh/üé¨">
  <meta property="og:title" content="YouTube Channel Wizard">
  <meta property="og:description" content="AI-powered channel names, video scripts, and thumbnails">
  <meta property="og:url" content="https://app.sloppy.live/youtube-wizard">
  <meta property="og:image" content="https://emojicdn.elk.sh/üé¨?style=apple&size=512">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    :root {
      --bg-dark: #0f0f0f;
      --bg-card: #1a1a1a;
      --bg-card-hover: #222;
      --border: #2a2a2a;
      --text: #f1f1f1;
      --text-muted: #888;
      --accent: #ff0050;
      --accent-hover: #ff1a66;
      --success: #00c853;
      --warning: #ffab00;
    }

    body {
      min-height: 100vh;
      background: var(--bg-dark);
      font-family: 'Inter', -apple-system, sans-serif;
      color: var(--text);
      line-height: 1.5;
    }

    /* Header */
    .header {
      background: var(--bg-card);
      border-bottom: 1px solid var(--border);
      padding: 16px 24px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .logo-icon {
      width: 36px;
      height: 36px;
      background: var(--accent);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
    }

    .logo-text {
      font-weight: 700;
      font-size: 1.1rem;
      letter-spacing: -0.5px;
    }

    .logo-text span {
      color: var(--accent);
    }

    .header-links {
      display: flex;
      gap: 20px;
    }

    .header-links a {
      color: var(--text-muted);
      text-decoration: none;
      font-size: 0.85rem;
      transition: color 0.2s;
    }

    .header-links a:hover {
      color: var(--text);
    }

    /* Main Layout */
    .main {
      max-width: 1200px;
      margin: 0 auto;
      padding: 32px 24px;
    }

    /* Hero Section */
    .hero {
      text-align: center;
      margin-bottom: 48px;
    }

    .hero h1 {
      font-size: 2.5rem;
      font-weight: 700;
      letter-spacing: -1px;
      margin-bottom: 12px;
    }

    .hero h1 span {
      background: linear-gradient(135deg, var(--accent), #ff6b6b);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .hero p {
      color: var(--text-muted);
      font-size: 1.1rem;
      max-width: 500px;
      margin: 0 auto;
    }

    /* Dashboard Grid */
    .dashboard {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 24px;
    }

    @media (max-width: 800px) {
      .dashboard { grid-template-columns: 1fr; }
      .hero h1 { font-size: 1.8rem; }
    }

    /* Cards */
    .card {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 24px;
    }

    .card-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 20px;
    }

    .card-icon {
      width: 40px;
      height: 40px;
      background: rgba(255,0,80,0.1);
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
    }

    .card-title {
      font-size: 1rem;
      font-weight: 600;
    }

    .card-subtitle {
      font-size: 0.75rem;
      color: var(--text-muted);
    }

    /* Form Elements */
    .form-group {
      margin-bottom: 16px;
    }

    .form-label {
      display: block;
      font-size: 0.8rem;
      font-weight: 500;
      color: var(--text-muted);
      margin-bottom: 8px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .form-input {
      width: 100%;
      background: var(--bg-dark);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 12px 16px;
      font-family: inherit;
      font-size: 0.95rem;
      color: var(--text);
      transition: all 0.2s;
    }

    .form-input:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 3px rgba(255,0,80,0.1);
    }

    .form-input::placeholder {
      color: #555;
    }

    /* Select */
    .form-select {
      width: 100%;
      background: var(--bg-dark);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 12px 16px;
      font-family: inherit;
      font-size: 0.95rem;
      color: var(--text);
      cursor: pointer;
      appearance: none;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='%23888' viewBox='0 0 16 16'%3E%3Cpath d='M8 11L3 6h10l-5 5z'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 16px center;
    }

    .form-select:focus {
      outline: none;
      border-color: var(--accent);
    }

    /* Chips */
    .chips {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .chip {
      background: var(--bg-dark);
      border: 1px solid var(--border);
      border-radius: 20px;
      padding: 8px 16px;
      font-size: 0.85rem;
      cursor: pointer;
      transition: all 0.2s;
    }

    .chip:hover {
      border-color: var(--accent);
      background: rgba(255,0,80,0.1);
    }

    .chip.active {
      background: var(--accent);
      border-color: var(--accent);
      color: white;
    }

    /* Button */
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      background: var(--accent);
      color: white;
      border: none;
      border-radius: 8px;
      padding: 14px 24px;
      font-family: inherit;
      font-size: 0.95rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      width: 100%;
    }

    .btn:hover {
      background: var(--accent-hover);
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(255,0,80,0.3);
    }

    .btn:active {
      transform: translateY(0);
    }

    .btn-secondary {
      background: var(--bg-dark);
      border: 1px solid var(--border);
    }

    .btn-secondary:hover {
      background: var(--bg-card-hover);
      box-shadow: none;
    }

    /* Results */
    .results {
      margin-top: 20px;
    }

    .result-item {
      background: var(--bg-dark);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 16px;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      transition: all 0.2s;
    }

    .result-item:hover {
      border-color: var(--accent);
      background: rgba(255,0,80,0.05);
    }

    .result-name {
      font-size: 1.1rem;
      font-weight: 600;
    }

    .result-style {
      font-size: 0.75rem;
      color: var(--text-muted);
      margin-top: 2px;
    }

    .result-actions {
      display: flex;
      gap: 8px;
    }

    .action-btn {
      background: transparent;
      border: 1px solid var(--border);
      border-radius: 6px;
      padding: 8px 12px;
      color: var(--text-muted);
      font-size: 0.8rem;
      cursor: pointer;
      transition: all 0.2s;
    }

    .action-btn:hover {
      background: var(--bg-card);
      color: var(--text);
      border-color: var(--text-muted);
    }

    .action-btn.copied {
      background: var(--success);
      border-color: var(--success);
      color: white;
    }

    /* Stats */
    .stats {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 16px;
      margin-top: 16px;
    }

    .stat-box {
      background: var(--bg-dark);
      border-radius: 8px;
      padding: 16px;
      text-align: center;
    }

    .stat-value {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--accent);
    }

    .stat-label {
      font-size: 0.7rem;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-top: 4px;
    }

    /* Preview Card */
    .preview-card {
      background: linear-gradient(145deg, #1f1f1f, #151515);
      border-radius: 12px;
      padding: 24px;
      text-align: center;
    }

    .preview-avatar {
      width: 80px;
      height: 80px;
      background: linear-gradient(135deg, var(--accent), #ff6b6b);
      border-radius: 50%;
      margin: 0 auto 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2rem;
      font-weight: 700;
      color: white;
    }

    .preview-name {
      font-size: 1.3rem;
      font-weight: 700;
      margin-bottom: 4px;
    }

    .preview-handle {
      color: var(--text-muted);
      font-size: 0.9rem;
      margin-bottom: 16px;
    }

    .preview-stats {
      display: flex;
      justify-content: center;
      gap: 32px;
      padding-top: 16px;
      border-top: 1px solid var(--border);
    }

    .preview-stat-value {
      font-weight: 600;
    }

    .preview-stat-label {
      font-size: 0.75rem;
      color: var(--text-muted);
    }

    /* Saved Names */
    .saved-list {
      max-height: 200px;
      overflow-y: auto;
    }

    .saved-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px;
      border-bottom: 1px solid var(--border);
    }

    .saved-item:last-child {
      border-bottom: none;
    }

    .empty-state {
      text-align: center;
      padding: 32px;
      color: var(--text-muted);
    }

    .empty-state-icon {
      font-size: 2rem;
      margin-bottom: 8px;
      opacity: 0.5;
    }

    /* Full width card */
    .card-full {
      grid-column: 1 / -1;
    }

    /* Script output */
    .script-output {
      background: var(--bg-dark);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 20px;
      margin-top: 16px;
      font-size: 0.9rem;
      line-height: 1.8;
      white-space: pre-wrap;
      max-height: 300px;
      overflow-y: auto;
    }

    .script-output h4 {
      color: var(--accent);
      margin-bottom: 8px;
      font-size: 0.85rem;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .script-section {
      margin-bottom: 16px;
      padding-bottom: 16px;
      border-bottom: 1px solid var(--border);
    }

    .script-section:last-child {
      border-bottom: none;
      margin-bottom: 0;
      padding-bottom: 0;
    }

    /* Thumbnail preview */
    .thumbnail-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 16px;
      margin-top: 16px;
    }

    .thumbnail-item {
      position: relative;
      border-radius: 8px;
      overflow: hidden;
      aspect-ratio: 16/9;
      background: var(--bg-dark);
      border: 1px solid var(--border);
      cursor: pointer;
      transition: all 0.3s;
    }

    .thumbnail-item:hover {
      border-color: var(--accent);
      transform: scale(1.02);
    }

    .thumbnail-item img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .thumbnail-loading {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100%;
      color: var(--text-muted);
      font-size: 0.8rem;
    }

    .thumbnail-loading::after {
      content: '';
      width: 20px;
      height: 20px;
      border: 2px solid var(--border);
      border-top-color: var(--accent);
      border-radius: 50%;
      margin-left: 10px;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .thumbnail-overlay {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: linear-gradient(transparent, rgba(0,0,0,0.8));
      padding: 12px;
      opacity: 0;
      transition: opacity 0.3s;
    }

    .thumbnail-item:hover .thumbnail-overlay {
      opacity: 1;
    }

    .thumbnail-overlay button {
      background: var(--accent);
      border: none;
      color: white;
      padding: 6px 12px;
      border-radius: 4px;
      font-size: 0.75rem;
      cursor: pointer;
    }

    /* Textarea */
    .form-textarea {
      width: 100%;
      background: var(--bg-dark);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 12px 16px;
      font-family: inherit;
      font-size: 0.95rem;
      color: var(--text);
      resize: vertical;
      min-height: 80px;
    }

    .form-textarea:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 3px rgba(255,0,80,0.1);
    }

    .generating {
      opacity: 0.7;
      pointer-events: none;
    }

    @media (max-width: 600px) {
      .thumbnail-grid { grid-template-columns: 1fr; }
    }

    /* Toast */
    .toast {
      position: fixed;
      bottom: 24px;
      right: 24px;
      background: var(--success);
      color: white;
      padding: 12px 20px;
      border-radius: 8px;
      font-size: 0.9rem;
      font-weight: 500;
      transform: translateY(100px);
      opacity: 0;
      transition: all 0.3s;
      z-index: 1000;
    }

    .toast.show {
      transform: translateY(0);
      opacity: 1;
    }
  </style>
</head>
<body>
  <header class="header">
    <div class="logo">
      <div class="logo-icon">üé¨</div>
      <div class="logo-text">YouTube <span>Wizard</span></div>
    </div>
    <div class="header-links">
      <a href="https://sloppy.live">‚Üê Back to sloppy.live</a>
    </div>
  </header>

  <main class="main">
    <section class="hero">
      <h1>YouTube <span>Wizard</span></h1>
      <p>Generate channel names, video scripts, and AI thumbnails all in one place</p>
    </section>

    <div class="dashboard">
      <!-- Name Generator Card -->
      <div class="card">
        <div class="card-header">
          <div class="card-icon">‚ú®</div>
          <div>
            <div class="card-title">Name Generator</div>
            <div class="card-subtitle">Create unique channel names</div>
          </div>
        </div>

        <div class="form-group">
          <label class="form-label">Your Topic or Niche</label>
          <input type="text" class="form-input" id="topic-input" placeholder="e.g., gaming, cooking, tech reviews...">
        </div>

        <div class="form-group">
          <label class="form-label">Your Name (Optional)</label>
          <input type="text" class="form-input" id="name-input" placeholder="e.g., Alex, Mike, Sarah...">
        </div>

        <div class="form-group">
          <label class="form-label">Name Style</label>
          <div class="chips" id="style-chips">
            <div class="chip active" data-style="professional">Professional</div>
            <div class="chip" data-style="fun">Fun & Playful</div>
            <div class="chip" data-style="minimal">Minimal</div>
            <div class="chip" data-style="epic">Epic</div>
          </div>
        </div>

        <button class="btn" id="generate-btn">
          <span>‚ö°</span> Generate Names
        </button>
      </div>

      <!-- Preview Card -->
      <div class="card">
        <div class="card-header">
          <div class="card-icon">üëÅÔ∏è</div>
          <div>
            <div class="card-title">Channel Preview</div>
            <div class="card-subtitle">See how it looks</div>
          </div>
        </div>

        <div class="preview-card">
          <div class="preview-avatar" id="preview-avatar">?</div>
          <div class="preview-name" id="preview-name">Your Channel Name</div>
          <div class="preview-handle" id="preview-handle">@yourchannel</div>
          <div class="preview-stats">
            <div>
              <div class="preview-stat-value">0</div>
              <div class="preview-stat-label">Subscribers</div>
            </div>
            <div>
              <div class="preview-stat-value">0</div>
              <div class="preview-stat-label">Videos</div>
            </div>
          </div>
        </div>

        <div class="stats">
          <div class="stat-box">
            <div class="stat-value" id="stat-generated">0</div>
            <div class="stat-label">Generated</div>
          </div>
          <div class="stat-box">
            <div class="stat-value" id="stat-saved">0</div>
            <div class="stat-label">Saved</div>
          </div>
          <div class="stat-box">
            <div class="stat-value" id="stat-copied">0</div>
            <div class="stat-label">Copied</div>
          </div>
        </div>
      </div>

      <!-- Results Card -->
      <div class="card card-full">
        <div class="card-header">
          <div class="card-icon">üìù</div>
          <div>
            <div class="card-title">Generated Names</div>
            <div class="card-subtitle">Click to preview, save your favorites</div>
          </div>
        </div>

        <div class="results" id="results">
          <div class="empty-state">
            <div class="empty-state-icon">üéØ</div>
            <p>Enter your topic and generate some names!</p>
          </div>
        </div>
      </div>

      <!-- Saved Names Card -->
      <div class="card card-full">
        <div class="card-header">
          <div class="card-icon">‚≠ê</div>
          <div>
            <div class="card-title">Saved Names</div>
            <div class="card-subtitle">Your favorite channel names</div>
          </div>
        </div>

        <div class="saved-list" id="saved-list">
          <div class="empty-state">
            <div class="empty-state-icon">üíæ</div>
            <p>Save names you like to compare later</p>
          </div>
        </div>
      </div>

      <!-- Script Generator Card -->
      <div class="card">
        <div class="card-header">
          <div class="card-icon">üìú</div>
          <div>
            <div class="card-title">Script Generator</div>
            <div class="card-subtitle">AI-powered video script outlines</div>
          </div>
        </div>

        <div class="form-group">
          <label class="form-label">Video Topic</label>
          <input type="text" class="form-input" id="script-topic" placeholder="e.g., How to start a YouTube channel...">
        </div>

        <div class="form-group">
          <label class="form-label">Video Style</label>
          <div class="chips" id="script-style-chips">
            <div class="chip active" data-scriptstyle="tutorial">Tutorial</div>
            <div class="chip" data-scriptstyle="review">Review</div>
            <div class="chip" data-scriptstyle="vlog">Vlog</div>
            <div class="chip" data-scriptstyle="listicle">Top 10</div>
          </div>
        </div>

        <button class="btn" id="generate-script-btn">
          <span>üé¨</span> Generate Script
        </button>

        <div id="script-output"></div>
      </div>

      <!-- AI Thumbnail Previewer Card -->
      <div class="card">
        <div class="card-header">
          <div class="card-icon">üñºÔ∏è</div>
          <div>
            <div class="card-title">AI Thumbnail Previewer</div>
            <div class="card-subtitle">Generate eye-catching thumbnails</div>
          </div>
        </div>

        <div class="form-group">
          <label class="form-label">Thumbnail Description</label>
          <textarea class="form-textarea" id="thumbnail-prompt" placeholder="Describe your ideal thumbnail...&#10;e.g., excited person holding gaming controller, neon lights, dramatic expression"></textarea>
        </div>

        <div class="form-group">
          <label class="form-label">Thumbnail Style</label>
          <div class="chips" id="thumb-style-chips">
            <div class="chip active" data-thumbstyle="vibrant">Vibrant</div>
            <div class="chip" data-thumbstyle="minimal">Minimal</div>
            <div class="chip" data-thumbstyle="dramatic">Dramatic</div>
            <div class="chip" data-thumbstyle="retro">Retro</div>
          </div>
        </div>

        <button class="btn" id="generate-thumb-btn">
          <span>üé®</span> Generate Thumbnails
        </button>

        <div class="thumbnail-grid" id="thumbnail-grid"></div>
      </div>
    </div>
  </main>

  <div class="toast" id="toast">Copied to clipboard!</div>

  <script>
    // State
    let selectedStyle = 'professional';
    let savedNames = JSON.parse(localStorage.getItem('yt-wizard-saved') || '[]');
    let stats = JSON.parse(localStorage.getItem('yt-wizard-stats') || '{"generated":0,"saved":0,"copied":0}');

    // Elements
    const topicInput = document.getElementById('topic-input');
    const nameInput = document.getElementById('name-input');
    const styleChips = document.querySelectorAll('.chip');
    const generateBtn = document.getElementById('generate-btn');
    const resultsContainer = document.getElementById('results');
    const savedList = document.getElementById('saved-list');
    const toast = document.getElementById('toast');

    // Name generation patterns
    const patterns = {
      professional: [
        '{topic} Academy',
        '{topic} Pro',
        '{topic} Hub',
        '{topic} Central',
        '{name} {topic}',
        'The {topic} Channel',
        '{topic} Explained',
        '{topic} Insider',
        '{name}\'s {topic}',
        '{topic} Expert'
      ],
      fun: [
        '{topic} Vibes',
        'Just {topic} Things',
        '{topic} Squad',
        '{name} Does {topic}',
        '{topic} Party',
        'Totally {topic}',
        '{topic} Chaos',
        '{name}\'s {topic} World',
        '{topic} Adventures',
        'Epic {topic} Time'
      ],
      minimal: [
        '{topic}',
        '{name}',
        '{topic}.',
        'simply {topic}',
        '{name} {topic}',
        '{topic} daily',
        '{name}.',
        'the {topic}',
        '{topic} co',
        '{name} x {topic}'
      ],
      epic: [
        '{topic} Empire',
        '{topic} Legends',
        'Ultimate {topic}',
        '{topic} Dynasty',
        '{name} The {topic} King',
        '{topic} Masters',
        'Apex {topic}',
        '{topic} Unleashed',
        '{name}\'s {topic} Kingdom',
        'Mega {topic}'
      ]
    };

    // Word banks for variety
    const adjectives = ['Creative', 'Daily', 'Ultimate', 'Epic', 'Super', 'Mega', 'Pro', 'Elite'];
    const suffixes = ['TV', 'HQ', 'Zone', 'Lab', 'Studio', 'Network', 'Show', 'Cast'];

    function capitalize(str) {
      return str.split(' ').map(word => word.charAt(0).toUpperCase() + word.slice(1).toLowerCase()).join(' ');
    }

    function generateNames() {
      const topic = topicInput.value.trim() || 'Content';
      const name = nameInput.value.trim() || 'Creator';
      const patternList = patterns[selectedStyle];

      const names = [];

      // Generate from patterns
      patternList.forEach(pattern => {
        let generated = pattern
          .replace('{topic}', capitalize(topic))
          .replace('{name}', capitalize(name));
        names.push({ name: generated, style: selectedStyle });
      });

      // Add some random variations
      const randomAdj = adjectives[Math.floor(Math.random() * adjectives.length)];
      const randomSuffix = suffixes[Math.floor(Math.random() * suffixes.length)];
      names.push({ name: `${randomAdj} ${capitalize(topic)}`, style: 'bonus' });
      names.push({ name: `${capitalize(topic)} ${randomSuffix}`, style: 'bonus' });
      names.push({ name: `${capitalize(name)}'s ${randomAdj} ${capitalize(topic)}`, style: 'bonus' });

      // Shuffle
      names.sort(() => Math.random() - 0.5);

      // Update stats
      stats.generated += names.length;
      saveStats();
      updateStatsUI();

      return names.slice(0, 8);
    }

    function renderResults(names) {
      if (names.length === 0) {
        resultsContainer.innerHTML = `
          <div class="empty-state">
            <div class="empty-state-icon">üéØ</div>
            <p>Enter your topic and generate some names!</p>
          </div>
        `;
        return;
      }

      resultsContainer.innerHTML = names.map(item => `
        <div class="result-item" data-name="${item.name}">
          <div>
            <div class="result-name">${item.name}</div>
            <div class="result-style">${item.style} style</div>
          </div>
          <div class="result-actions">
            <button class="action-btn save-btn" data-name="${item.name}">Save</button>
            <button class="action-btn copy-btn" data-name="${item.name}">Copy</button>
          </div>
        </div>
      `).join('');

      // Add event listeners
      document.querySelectorAll('.result-item').forEach(item => {
        item.addEventListener('click', (e) => {
          if (!e.target.classList.contains('action-btn')) {
            updatePreview(item.dataset.name);
          }
        });
      });

      document.querySelectorAll('.copy-btn').forEach(btn => {
        btn.addEventListener('click', (e) => {
          e.stopPropagation();
          copyToClipboard(btn.dataset.name, btn);
        });
      });

      document.querySelectorAll('.save-btn').forEach(btn => {
        btn.addEventListener('click', (e) => {
          e.stopPropagation();
          saveName(btn.dataset.name);
        });
      });
    }

    function updatePreview(name) {
      document.getElementById('preview-name').textContent = name;
      document.getElementById('preview-handle').textContent = '@' + name.toLowerCase().replace(/[^a-z0-9]/g, '');
      document.getElementById('preview-avatar').textContent = name.charAt(0).toUpperCase();
    }

    function copyToClipboard(text, btn) {
      navigator.clipboard.writeText(text).then(() => {
        btn.textContent = '‚úì';
        btn.classList.add('copied');
        showToast('Copied to clipboard!');

        stats.copied++;
        saveStats();
        updateStatsUI();

        setTimeout(() => {
          btn.textContent = 'Copy';
          btn.classList.remove('copied');
        }, 2000);
      });
    }

    function saveName(name) {
      if (!savedNames.includes(name)) {
        savedNames.push(name);
        localStorage.setItem('yt-wizard-saved', JSON.stringify(savedNames));

        stats.saved++;
        saveStats();
        updateStatsUI();

        renderSavedNames();
        showToast('Name saved!');
      } else {
        showToast('Already saved!');
      }
    }

    function removeSavedName(name) {
      savedNames = savedNames.filter(n => n !== name);
      localStorage.setItem('yt-wizard-saved', JSON.stringify(savedNames));
      renderSavedNames();
      updateStatsUI();
    }

    function renderSavedNames() {
      if (savedNames.length === 0) {
        savedList.innerHTML = `
          <div class="empty-state">
            <div class="empty-state-icon">üíæ</div>
            <p>Save names you like to compare later</p>
          </div>
        `;
        return;
      }

      savedList.innerHTML = savedNames.map(name => `
        <div class="saved-item">
          <span>${name}</span>
          <div class="result-actions">
            <button class="action-btn copy-btn" data-name="${name}">Copy</button>
            <button class="action-btn remove-btn" data-name="${name}">Remove</button>
          </div>
        </div>
      `).join('');

      savedList.querySelectorAll('.copy-btn').forEach(btn => {
        btn.addEventListener('click', () => copyToClipboard(btn.dataset.name, btn));
      });

      savedList.querySelectorAll('.remove-btn').forEach(btn => {
        btn.addEventListener('click', () => removeSavedName(btn.dataset.name));
      });
    }

    function saveStats() {
      localStorage.setItem('yt-wizard-stats', JSON.stringify(stats));
    }

    function updateStatsUI() {
      document.getElementById('stat-generated').textContent = stats.generated;
      document.getElementById('stat-saved').textContent = savedNames.length;
      document.getElementById('stat-copied').textContent = stats.copied;
    }

    function showToast(message) {
      toast.textContent = message;
      toast.classList.add('show');
      setTimeout(() => toast.classList.remove('show'), 2500);
    }

    // Event listeners
    styleChips.forEach(chip => {
      chip.addEventListener('click', () => {
        styleChips.forEach(c => c.classList.remove('active'));
        chip.classList.add('active');
        selectedStyle = chip.dataset.style;
      });
    });

    generateBtn.addEventListener('click', () => {
      const names = generateNames();
      renderResults(names);
      if (names.length > 0) {
        updatePreview(names[0].name);
      }
    });

    topicInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') generateBtn.click();
    });

    nameInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') generateBtn.click();
    });

    // Initialize
    renderSavedNames();
    updateStatsUI();

    // Script Generator
    let selectedScriptStyle = 'tutorial';
    const scriptTopicInput = document.getElementById('script-topic');
    const scriptStyleChips = document.querySelectorAll('[data-scriptstyle]');
    const generateScriptBtn = document.getElementById('generate-script-btn');
    const scriptOutput = document.getElementById('script-output');

    scriptStyleChips.forEach(chip => {
      chip.addEventListener('click', () => {
        scriptStyleChips.forEach(c => c.classList.remove('active'));
        chip.classList.add('active');
        selectedScriptStyle = chip.dataset.scriptstyle;
      });
    });

    async function generateScript() {
      const topic = scriptTopicInput.value.trim();
      if (!topic) {
        showToast('Please enter a video topic');
        return;
      }

      generateScriptBtn.classList.add('generating');
      generateScriptBtn.innerHTML = '<span>‚è≥</span> Generating...';
      scriptOutput.innerHTML = '<div class="script-output"><div class="thumbnail-loading">Creating your script</div></div>';

      const stylePrompts = {
        tutorial: 'Create a step-by-step tutorial script with clear instructions',
        review: 'Create an honest review script with pros, cons, and verdict',
        vlog: 'Create an engaging vlog script with personal touches and storytelling',
        listicle: 'Create a top 10 countdown style script with hooks for each item'
      };

      const prompt = `You are a YouTube scriptwriter. ${stylePrompts[selectedScriptStyle]} for the topic: "${topic}".

Format your response EXACTLY like this (use these exact section headers):
HOOK: [1-2 sentence attention grabber]
INTRO: [Brief introduction, 2-3 sentences]
MAIN POINTS:
- Point 1: [Brief description]
- Point 2: [Brief description]
- Point 3: [Brief description]
- Point 4: [Brief description]
- Point 5: [Brief description]
CALL TO ACTION: [1-2 sentences asking viewers to like/subscribe]
OUTRO: [Brief closing, 1-2 sentences]

Keep it concise and punchy. Total response should be under 300 words.`;

      try {
        // Use the simple GET endpoint (no model param to avoid deprecation notice)
        const response = await fetch(
          `https://text.pollinations.ai/${encodeURIComponent(prompt)}?referrer=sloppy.live`
        );

        if (!response.ok) throw new Error('API error');

        let text = await response.text();
        text = text.trim();
        // Clean up markdown artifacts
        text = text.replace(/^```[\w]*\n?/gm, '').replace(/\n?```$/gm, '');

        displayScript(text);
      } catch (err) {
        console.error(err);
        scriptOutput.innerHTML = `
          <div class="script-output">
            <div class="empty-state">
              <div class="empty-state-icon">‚ö†Ô∏è</div>
              <p>Failed to generate script. Please try again.</p>
            </div>
          </div>
        `;
      }

      generateScriptBtn.classList.remove('generating');
      generateScriptBtn.innerHTML = '<span>üé¨</span> Generate Script';
    }

    function displayScript(text) {
      // Parse sections from the response
      const sections = [];
      const lines = text.split('\n').filter(l => l.trim());
      let currentSection = null;
      let currentContent = [];

      for (const line of lines) {
        const sectionMatch = line.match(/^(HOOK|INTRO|MAIN POINTS|CALL TO ACTION|OUTRO):/i);
        if (sectionMatch) {
          if (currentSection) {
            sections.push({ title: currentSection, content: currentContent.join('\n') });
          }
          currentSection = sectionMatch[1].toUpperCase();
          const afterColon = line.slice(sectionMatch[0].length).trim();
          currentContent = afterColon ? [afterColon] : [];
        } else if (currentSection) {
          currentContent.push(line);
        }
      }
      if (currentSection) {
        sections.push({ title: currentSection, content: currentContent.join('\n') });
      }

      if (sections.length === 0) {
        // Fallback if parsing fails - just show raw text
        scriptOutput.innerHTML = `<div class="script-output">${text.replace(/\n/g, '<br>')}</div>`;
        return;
      }

      const html = sections.map(s => `
        <div class="script-section">
          <h4>${s.title}</h4>
          <div>${s.content.replace(/\n/g, '<br>')}</div>
        </div>
      `).join('');

      scriptOutput.innerHTML = `
        <div class="script-output">${html}</div>
        <button class="btn btn-secondary" style="margin-top: 12px;" onclick="copyScript()">
          <span>üìã</span> Copy Script
        </button>
      `;
    }

    window.copyScript = function() {
      const scriptText = scriptOutput.querySelector('.script-output').innerText;
      navigator.clipboard.writeText(scriptText).then(() => {
        showToast('Script copied to clipboard!');
      });
    };

    generateScriptBtn.addEventListener('click', generateScript);
    scriptTopicInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') generateScript();
    });

    // Thumbnail Generator
    let selectedThumbStyle = 'vibrant';
    const thumbPromptInput = document.getElementById('thumbnail-prompt');
    const thumbStyleChips = document.querySelectorAll('[data-thumbstyle]');
    const generateThumbBtn = document.getElementById('generate-thumb-btn');
    const thumbnailGrid = document.getElementById('thumbnail-grid');

    thumbStyleChips.forEach(chip => {
      chip.addEventListener('click', () => {
        thumbStyleChips.forEach(c => c.classList.remove('active'));
        chip.classList.add('active');
        selectedThumbStyle = chip.dataset.thumbstyle;
      });
    });

    const thumbStyleModifiers = {
      vibrant: 'vibrant colors, high contrast, bold, eye-catching, saturated',
      minimal: 'clean, minimalist, simple composition, white space, modern',
      dramatic: 'dramatic lighting, cinematic, moody, intense shadows, epic',
      retro: 'retro aesthetic, vintage, 80s style, neon, synthwave'
    };

    function generateThumbnails() {
      const userPrompt = thumbPromptInput.value.trim();
      if (!userPrompt) {
        showToast('Please describe your thumbnail');
        return;
      }

      generateThumbBtn.classList.add('generating');
      generateThumbBtn.innerHTML = '<span>‚è≥</span> Generating...';

      const styleModifier = thumbStyleModifiers[selectedThumbStyle];
      const basePrompt = `YouTube thumbnail, ${userPrompt}, ${styleModifier}, professional quality, 16:9 aspect ratio`;

      // Generate 4 variations
      const variations = [
        basePrompt,
        `${basePrompt}, close-up shot`,
        `${basePrompt}, dynamic angle`,
        `${basePrompt}, text overlay style`
      ];

      thumbnailGrid.innerHTML = variations.map((_, i) => `
        <div class="thumbnail-item" id="thumb-${i}">
          <div class="thumbnail-loading">Generating</div>
        </div>
      `).join('');

      variations.forEach((prompt, i) => {
        const encodedPrompt = encodeURIComponent(prompt);
        const seed = Date.now() + i;
        const imgUrl = `https://image.pollinations.ai/prompt/${encodedPrompt}?width=640&height=360&seed=${seed}&nologo=true&referrer=sloppy.live`;

        const thumbEl = document.getElementById(`thumb-${i}`);
        const img = new Image();

        img.onload = () => {
          thumbEl.innerHTML = `
            <img src="${imgUrl}" alt="Thumbnail ${i + 1}">
            <div class="thumbnail-overlay">
              <button onclick="downloadThumb('${imgUrl}', ${i})">Download</button>
            </div>
          `;
        };

        img.onerror = () => {
          thumbEl.innerHTML = `
            <div class="thumbnail-loading" style="color: var(--accent);">Failed to load</div>
          `;
        };

        img.src = imgUrl;
      });

      generateThumbBtn.classList.remove('generating');
      generateThumbBtn.innerHTML = '<span>üé®</span> Generate Thumbnails';
    }

    window.downloadThumb = async function(url, index) {
      try {
        const response = await fetch(url);
        const blob = await response.blob();
        const link = document.createElement('a');
        link.href = URL.createObjectURL(blob);
        link.download = `thumbnail-${index + 1}.png`;
        link.click();
        URL.revokeObjectURL(link.href);
        showToast('Thumbnail downloaded!');
      } catch (err) {
        // Fallback: open in new tab
        window.open(url, '_blank');
        showToast('Opening in new tab');
      }
    };

    generateThumbBtn.addEventListener('click', generateThumbnails);
  </script>
<script src="/sloppy-header/sloppy-bar.js"></script>
<script src="/vibelib-extended.js"></script>
<script>
  // Compatibility Patch for Legacy Apps
  window.addEventListener("load", () => {
    if (window.SloppyKarma && window.VibeLib.Economy) {
      // Redirect old calls to new engine
      window.SloppyKarma.track = window.VibeLib.Economy.track;
    }
  });
</script>
</body>
</html>
