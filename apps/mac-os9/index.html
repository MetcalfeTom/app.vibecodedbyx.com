<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mac OS 9 Simulator</title>
    <link rel="icon" href="https://emojicdn.elk.sh/üíª">

    <meta property="og:title" content="Mac OS 9 Simulator">
    <meta property="og:description" content="Experience the nostalgia of classic Mac OS 9 in your browser">
    <meta property="og:url" content="https://app.vibecodedbyx.com/mac-os9">
    <meta property="og:image" content="https://image.pollinations.ai/prompt/classic%20mac%20os%209%20desktop%20interface%20retro%20computer%20nostalgic?width=1200&height=630&referrer=vibecodedbyx.com">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Chicago', 'Geneva', 'Charcoal', sans-serif;
            background: #5B9BD5;
            overflow: hidden;
            height: 100vh;
            cursor: default;
            user-select: none;
        }

        /* Menu Bar */
        .menu-bar {
            background: linear-gradient(to bottom, #f0f0f0 0%, #d0d0d0 100%);
            height: 20px;
            display: flex;
            align-items: center;
            padding: 0 8px;
            font-size: 12px;
            border-bottom: 1px solid #000;
            position: relative;
            z-index: 1000;
        }

        .menu-item {
            padding: 2px 12px;
            cursor: pointer;
            position: relative;
        }

        .menu-item:hover {
            background: #000;
            color: #fff;
        }

        .apple-logo {
            font-size: 14px;
            padding: 0 8px;
        }

        .menu-right {
            margin-left: auto;
            display: flex;
            gap: 12px;
        }

        /* Desktop */
        .desktop {
            height: calc(100vh - 20px);
            padding: 20px;
            position: relative;
        }

        /* Desktop Icons */
        .desktop-icon {
            width: 70px;
            text-align: center;
            margin-bottom: 20px;
            cursor: pointer;
            padding: 8px;
        }

        .desktop-icon:hover .icon-label {
            background: #000;
            color: #fff;
        }

        .icon-image {
            font-size: 48px;
            margin-bottom: 4px;
        }

        .icon-label {
            font-size: 11px;
            color: #000;
            background: rgba(255,255,255,0.8);
            padding: 2px 4px;
            border-radius: 2px;
        }

        /* Window */
        .window {
            position: absolute;
            background: #fff;
            border: 1px solid #000;
            box-shadow: 2px 2px 0 rgba(0,0,0,0.5);
            min-width: 400px;
            min-height: 300px;
            display: none;
        }

        .window.active {
            display: block;
        }

        .window-title-bar {
            background: linear-gradient(to bottom, #f0f0f0 0%, #d0d0d0 50%, #b0b0b0 100%);
            height: 19px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 4px;
            border-bottom: 1px solid #000;
            cursor: move;
        }

        .window-title {
            font-size: 12px;
            font-weight: bold;
            flex: 1;
            text-align: center;
        }

        .window-controls {
            display: flex;
            gap: 4px;
        }

        .window-button {
            width: 12px;
            height: 12px;
            border: 1px solid #000;
            background: #fff;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 8px;
        }

        .window-button:hover {
            background: #ddd;
        }

        .window-content {
            padding: 16px;
            height: calc(100% - 19px);
            overflow: auto;
        }

        /* About Window */
        .about-content {
            text-align: center;
            padding: 32px;
        }

        .about-content h1 {
            font-size: 24px;
            margin-bottom: 16px;
        }

        .about-content p {
            margin-bottom: 12px;
            line-height: 1.6;
        }

        /* SimpleText */
        .text-editor {
            width: 100%;
            height: 100%;
            border: none;
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 12px;
            padding: 8px;
            resize: none;
            outline: none;
        }

        /* Calculator */
        .calculator {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 4px;
            padding: 8px;
        }

        .calc-display {
            grid-column: 1 / -1;
            background: #e8f5e8;
            border: 1px inset #999;
            padding: 8px;
            text-align: right;
            font-size: 18px;
            font-family: monospace;
            margin-bottom: 8px;
            min-height: 40px;
        }

        .calc-button {
            padding: 12px;
            border: 1px outset #999;
            background: #ddd;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
        }

        .calc-button:active {
            border-style: inset;
        }

        .calc-button:hover {
            background: #ccc;
        }

        /* Puzzle Game */
        .puzzle-grid {
            display: grid;
            grid-template-columns: repeat(4, 80px);
            gap: 4px;
            padding: 16px;
        }

        .puzzle-tile {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #8B7355 0%, #D2B48C 100%);
            border: 2px outset #999;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            font-weight: bold;
            cursor: pointer;
            color: #fff;
            text-shadow: 1px 1px 2px #000;
        }

        .puzzle-tile.empty {
            background: #333;
            border-style: inset;
        }

        .puzzle-tile:hover:not(.empty) {
            background: linear-gradient(135deg, #A0826A 0%, #E6C79C 100%);
        }

        /* Trash */
        .trash {
            position: absolute;
            bottom: 20px;
            right: 20px;
        }

        /* Button */
        .button {
            padding: 6px 16px;
            border: 1px outset #999;
            background: #ddd;
            cursor: pointer;
            font-size: 12px;
            display: inline-block;
            margin: 4px;
        }

        .button:active {
            border-style: inset;
        }

        .button:hover {
            background: #ccc;
        }

        /* Shutdown Dialog */
        .dialog {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #fff;
            border: 2px solid #000;
            box-shadow: 4px 4px 0 rgba(0,0,0,0.5);
            padding: 24px;
            display: none;
            z-index: 2000;
            text-align: center;
        }

        .dialog.active {
            display: block;
        }

        .dialog-buttons {
            margin-top: 20px;
            display: flex;
            gap: 12px;
            justify-content: center;
        }

        @media (max-width: 768px) {
            .window {
                min-width: 90vw;
                left: 5vw !important;
                top: 40px !important;
            }
        }
    </style>
</head>
<body>
    <!-- Menu Bar -->
    <div class="menu-bar">
        <div class="menu-item apple-logo">üçé</div>
        <div class="menu-item" onclick="showAbout()">File</div>
        <div class="menu-item">Edit</div>
        <div class="menu-item">View</div>
        <div class="menu-item" onclick="showShutdownDialog()">Special</div>
        <div class="menu-right">
            <div id="clock"></div>
        </div>
    </div>

    <!-- Desktop -->
    <div class="desktop" id="desktop">
        <!-- Desktop Icons -->
        <div class="desktop-icon" onclick="openWindow('about')" style="position: absolute; top: 20px; left: 20px;">
            <div class="icon-image">üíª</div>
            <div class="icon-label">About This Mac</div>
        </div>

        <div class="desktop-icon" onclick="openWindow('simpletext')" style="position: absolute; top: 120px; left: 20px;">
            <div class="icon-image">üìù</div>
            <div class="icon-label">SimpleText</div>
        </div>

        <div class="desktop-icon" onclick="openWindow('calculator')" style="position: absolute; top: 220px; left: 20px;">
            <div class="icon-image">üî¢</div>
            <div class="icon-label">Calculator</div>
        </div>

        <div class="desktop-icon" onclick="openWindow('puzzle')" style="position: absolute; top: 320px; left: 20px;">
            <div class="icon-image">üß©</div>
            <div class="icon-label">Puzzle Game</div>
        </div>

        <div class="desktop-icon trash">
            <div class="icon-image">üóëÔ∏è</div>
            <div class="icon-label">Trash</div>
        </div>
    </div>

    <!-- About Window -->
    <div class="window" id="about-window" style="left: 150px; top: 100px; width: 500px;">
        <div class="window-title-bar" onmousedown="startDrag(event, 'about-window')">
            <div class="window-controls">
                <div class="window-button" onclick="closeWindow('about-window')">√ó</div>
            </div>
            <div class="window-title">About This Mac</div>
            <div style="width: 12px;"></div>
        </div>
        <div class="window-content about-content">
            <h1>üçé Mac OS 9.2.2</h1>
            <p><strong>Mac OS 9 Simulator</strong></p>
            <p>Built with ‚ù§Ô∏è for nostalgia</p>
            <p>Memory: Unlimited</p>
            <p>Processor: Your Browser</p>
            <p>¬© 2025 <a href="https://www.vibecodedbyx.com" target="_blank">VibeCodedByX.com</a></p>
            <div class="button" onclick="closeWindow('about-window')">OK</div>
        </div>
    </div>

    <!-- SimpleText Window -->
    <div class="window" id="simpletext-window" style="left: 200px; top: 150px; width: 600px; height: 400px;">
        <div class="window-title-bar" onmousedown="startDrag(event, 'simpletext-window')">
            <div class="window-controls">
                <div class="window-button" onclick="closeWindow('simpletext-window')">√ó</div>
            </div>
            <div class="window-title">SimpleText - Untitled</div>
            <div style="width: 12px;"></div>
        </div>
        <div class="window-content" style="padding: 0;">
            <textarea class="text-editor" placeholder="Type here...">Welcome to Mac OS 9!

This is SimpleText, a basic text editor included with classic Mac OS.

Remember the good old days of computing? When everything was simpler, and you had to actually think about RAM?

Feel free to type anything here. Your work won't be saved (just like real OS 9 when you forgot to save before a crash! üòÖ)

Enjoy the nostalgia!</textarea>
        </div>
    </div>

    <!-- Calculator Window -->
    <div class="window" id="calculator-window" style="left: 250px; top: 200px; width: 280px;">
        <div class="window-title-bar" onmousedown="startDrag(event, 'calculator-window')">
            <div class="window-controls">
                <div class="window-button" onclick="closeWindow('calculator-window')">√ó</div>
            </div>
            <div class="window-title">Calculator</div>
            <div style="width: 12px;"></div>
        </div>
        <div class="window-content" style="padding: 8px;">
            <div class="calculator">
                <div class="calc-display" id="calc-display">0</div>
                <div class="calc-button" onclick="calcClear()">C</div>
                <div class="calc-button" onclick="calcInput('/')">/</div>
                <div class="calc-button" onclick="calcInput('*')">√ó</div>
                <div class="calc-button" onclick="calcBackspace()">‚Üê</div>

                <div class="calc-button" onclick="calcInput('7')">7</div>
                <div class="calc-button" onclick="calcInput('8')">8</div>
                <div class="calc-button" onclick="calcInput('9')">9</div>
                <div class="calc-button" onclick="calcInput('-')">-</div>

                <div class="calc-button" onclick="calcInput('4')">4</div>
                <div class="calc-button" onclick="calcInput('5')">5</div>
                <div class="calc-button" onclick="calcInput('6')">6</div>
                <div class="calc-button" onclick="calcInput('+')">+</div>

                <div class="calc-button" onclick="calcInput('1')">1</div>
                <div class="calc-button" onclick="calcInput('2')">2</div>
                <div class="calc-button" onclick="calcInput('3')">3</div>
                <div class="calc-button" onclick="calcEquals()" style="grid-row: span 2;">=</div>

                <div class="calc-button" onclick="calcInput('0')" style="grid-column: span 2;">0</div>
                <div class="calc-button" onclick="calcInput('.')">.</div>
            </div>
        </div>
    </div>

    <!-- Puzzle Game Window -->
    <div class="window" id="puzzle-window" style="left: 300px; top: 120px; width: 400px;">
        <div class="window-title-bar" onmousedown="startDrag(event, 'puzzle-window')">
            <div class="window-controls">
                <div class="window-button" onclick="closeWindow('puzzle-window')">√ó</div>
            </div>
            <div class="window-title">15 Puzzle</div>
            <div style="width: 12px;"></div>
        </div>
        <div class="window-content" style="text-align: center;">
            <p style="margin-bottom: 12px; font-size: 12px;">Arrange the tiles in order!</p>
            <div class="puzzle-grid" id="puzzle-grid"></div>
            <div class="button" onclick="initPuzzle()">Shuffle</div>
        </div>
    </div>

    <!-- Shutdown Dialog -->
    <div class="dialog" id="shutdown-dialog">
        <h2 style="margin-bottom: 16px;">Shut Down</h2>
        <p>Are you sure you want to shut down<br>your computer now?</p>
        <div class="dialog-buttons">
            <div class="button" onclick="hideShutdownDialog()">Cancel</div>
            <div class="button" onclick="shutdown()">Shut Down</div>
        </div>
    </div>

    <script>
        // Clock
        function updateClock() {
            const now = new Date();
            const timeStr = now.toLocaleTimeString('en-US', {
                hour: 'numeric',
                minute: '2-digit',
                hour12: true
            });
            document.getElementById('clock').textContent = timeStr;
        }
        updateClock();
        setInterval(updateClock, 1000);

        // Window Management
        let activeWindow = null;
        let dragElement = null;
        let offsetX = 0;
        let offsetY = 0;

        function openWindow(windowId) {
            const window = document.getElementById(windowId + '-window');
            if (window) {
                window.classList.add('active');
                bringToFront(window);
            }
        }

        function closeWindow(windowId) {
            const window = document.getElementById(windowId);
            if (window) {
                window.classList.remove('active');
            }
        }

        function bringToFront(element) {
            const windows = document.querySelectorAll('.window');
            windows.forEach(w => w.style.zIndex = 100);
            element.style.zIndex = 200;
        }

        function startDrag(e, windowId) {
            dragElement = document.getElementById(windowId);
            bringToFront(dragElement);
            const rect = dragElement.getBoundingClientRect();
            offsetX = e.clientX - rect.left;
            offsetY = e.clientY - rect.top;

            document.addEventListener('mousemove', drag);
            document.addEventListener('mouseup', stopDrag);
        }

        function drag(e) {
            if (dragElement) {
                dragElement.style.left = (e.clientX - offsetX) + 'px';
                dragElement.style.top = (e.clientY - offsetY) + 'px';
            }
        }

        function stopDrag() {
            dragElement = null;
            document.removeEventListener('mousemove', drag);
            document.removeEventListener('mouseup', stopDrag);
        }

        // Calculator
        let calcValue = '0';
        let calcOperator = null;
        let calcPrevious = null;
        let calcNewNumber = true;

        function calcInput(val) {
            const display = document.getElementById('calc-display');

            if (['+', '-', '*', '/'].includes(val)) {
                if (calcOperator && !calcNewNumber) {
                    calcEquals();
                }
                calcOperator = val;
                calcPrevious = parseFloat(calcValue);
                calcNewNumber = true;
            } else {
                if (calcNewNumber) {
                    calcValue = val;
                    calcNewNumber = false;
                } else {
                    calcValue = calcValue === '0' ? val : calcValue + val;
                }
                display.textContent = calcValue;
            }
        }

        function calcEquals() {
            const display = document.getElementById('calc-display');
            const current = parseFloat(calcValue);

            if (calcOperator && calcPrevious !== null) {
                let result = 0;
                switch (calcOperator) {
                    case '+': result = calcPrevious + current; break;
                    case '-': result = calcPrevious - current; break;
                    case '*': result = calcPrevious * current; break;
                    case '/': result = calcPrevious / current; break;
                }
                calcValue = result.toString();
                display.textContent = calcValue;
                calcOperator = null;
                calcPrevious = null;
                calcNewNumber = true;
            }
        }

        function calcClear() {
            calcValue = '0';
            calcOperator = null;
            calcPrevious = null;
            calcNewNumber = true;
            document.getElementById('calc-display').textContent = '0';
        }

        function calcBackspace() {
            calcValue = calcValue.slice(0, -1) || '0';
            document.getElementById('calc-display').textContent = calcValue;
        }

        // 15 Puzzle
        let puzzleState = [];

        function initPuzzle() {
            puzzleState = Array.from({length: 15}, (_, i) => i + 1);
            puzzleState.push(null); // empty space

            // Shuffle
            for (let i = 0; i < 200; i++) {
                const emptyIndex = puzzleState.indexOf(null);
                const moves = getValidMoves(emptyIndex);
                const randomMove = moves[Math.floor(Math.random() * moves.length)];
                [puzzleState[emptyIndex], puzzleState[randomMove]] = [puzzleState[randomMove], puzzleState[emptyIndex]];
            }

            renderPuzzle();
        }

        function getValidMoves(emptyIndex) {
            const moves = [];
            const row = Math.floor(emptyIndex / 4);
            const col = emptyIndex % 4;

            if (row > 0) moves.push(emptyIndex - 4); // up
            if (row < 3) moves.push(emptyIndex + 4); // down
            if (col > 0) moves.push(emptyIndex - 1); // left
            if (col < 3) moves.push(emptyIndex + 1); // right

            return moves;
        }

        function renderPuzzle() {
            const grid = document.getElementById('puzzle-grid');
            grid.innerHTML = '';

            puzzleState.forEach((num, index) => {
                const tile = document.createElement('div');
                tile.className = 'puzzle-tile';
                if (num === null) {
                    tile.classList.add('empty');
                } else {
                    tile.textContent = num;
                    tile.onclick = () => moveTile(index);
                }
                grid.appendChild(tile);
            });

            checkWin();
        }

        function moveTile(index) {
            const emptyIndex = puzzleState.indexOf(null);
            const validMoves = getValidMoves(emptyIndex);

            if (validMoves.includes(index)) {
                [puzzleState[emptyIndex], puzzleState[index]] = [puzzleState[index], puzzleState[emptyIndex]];
                renderPuzzle();
            }
        }

        function checkWin() {
            const isSolved = puzzleState.every((num, i) =>
                i === 15 ? num === null : num === i + 1
            );

            if (isSolved) {
                setTimeout(() => alert('You solved it! üéâ'), 100);
            }
        }

        initPuzzle();

        // Dialogs
        function showAbout() {
            openWindow('about');
        }

        function showShutdownDialog() {
            document.getElementById('shutdown-dialog').classList.add('active');
        }

        function hideShutdownDialog() {
            document.getElementById('shutdown-dialog').classList.remove('active');
        }

        function shutdown() {
            document.body.innerHTML = '<div style="display: flex; align-items: center; justify-content: center; height: 100vh; background: #000; color: #fff; font-size: 24px; text-align: center;"><div><div style="font-size: 72px; margin-bottom: 20px;">üí§</div>It is now safe to turn off your computer.<br><br><a href="https://www.vibecodedbyx.com" style="color: #5B9BD5; font-size: 16px;">‚Üê Back to VibeCodedByX.com</a></div></div>';
        }
    </script>
</body>
</html>
