<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Brain Rot 67 OS</title>
  <link rel="icon" href="https://emojicdn.elk.sh/üß†">
  <meta property="og:title" content="Brain Rot 67 OS">
  <meta property="og:description" content="The most skibidi operating system ever created">
  <meta property="og:url" content="https://sloppy.live/brainrot-os">
  <meta property="og:image" content="https://emojicdn.elk.sh/üß†?style=apple&size=512">
  <link href="https://fonts.googleapis.com/css2?family=Bangers&family=Comic+Neue:wght@700&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    :root {
      --skibidi: #ff00ff;
      --ohio: #00ff00;
      --sigma: #ff6600;
      --rizz: #00ffff;
      --gyatt: #ff0066;
    }

    body {
      font-family: 'Comic Neue', cursive;
      overflow: hidden;
      height: 100vh;
      background: linear-gradient(45deg, #1a0a2e, #0a1a2e, #2e0a1a);
      cursor: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32"><text y="24" font-size="24">üóø</text></svg>'), auto;
    }

    /* Desktop */
    .desktop {
      height: calc(100vh - 60px);
      position: relative;
      overflow: hidden;
    }

    /* Floating background memes */
    .bg-meme {
      position: absolute;
      font-size: 3rem;
      opacity: 0.1;
      animation: float-meme 20s linear infinite;
      pointer-events: none;
    }

    @keyframes float-meme {
      0% { transform: translateY(100vh) rotate(0deg); }
      100% { transform: translateY(-100px) rotate(360deg); }
    }

    /* Desktop Icons */
    .desktop-icons {
      position: absolute;
      top: 20px;
      left: 20px;
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .desktop-icon {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 5px;
      cursor: pointer;
      padding: 10px;
      border-radius: 8px;
      transition: all 0.2s;
      width: 80px;
    }

    .desktop-icon:hover {
      background: rgba(255, 0, 255, 0.3);
      transform: scale(1.1) rotate(5deg);
    }

    .desktop-icon span:first-child {
      font-size: 2.5rem;
      filter: drop-shadow(0 0 10px var(--skibidi));
    }

    .desktop-icon span:last-child {
      color: white;
      font-size: 0.75rem;
      text-shadow: 2px 2px 0 #000;
      text-align: center;
    }

    /* Windows */
    .window {
      position: absolute;
      background: linear-gradient(180deg, #2a1a4a 0%, #1a0a3a 100%);
      border: 3px solid;
      border-radius: 12px;
      min-width: 280px;
      min-height: 200px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.5), 0 0 20px rgba(255,0,255,0.3);
      animation: window-spawn 0.3s ease-out;
      z-index: 10;
    }

    @keyframes window-spawn {
      0% { transform: scale(0) rotate(180deg); opacity: 0; }
      100% { transform: scale(1) rotate(0deg); opacity: 1; }
    }

    .window.closing {
      animation: window-close 0.3s ease-in forwards;
    }

    @keyframes window-close {
      0% { transform: scale(1); opacity: 1; }
      100% { transform: scale(0) rotate(-180deg); opacity: 0; }
    }

    .window-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px 12px;
      background: linear-gradient(90deg, var(--skibidi), var(--rizz));
      border-radius: 8px 8px 0 0;
      cursor: move;
    }

    .window-title {
      font-family: 'Bangers', cursive;
      font-size: 1rem;
      color: white;
      text-shadow: 2px 2px 0 #000;
      letter-spacing: 1px;
    }

    .window-controls {
      display: flex;
      gap: 8px;
    }

    .window-btn {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      border: none;
      cursor: pointer;
      font-size: 0.7rem;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .window-btn.close { background: #ff5555; }
    .window-btn.minimize { background: #ffaa00; }
    .window-btn.maximize { background: #55ff55; }

    .window-content {
      padding: 15px;
      color: white;
      max-height: 300px;
      overflow-y: auto;
    }

    /* Taskbar */
    .taskbar {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      height: 60px;
      background: linear-gradient(90deg, #1a0033, #330066, #660033, #003366, #1a0033);
      background-size: 400% 100%;
      animation: skibidi-gradient 3s ease infinite;
      border-top: 3px solid var(--skibidi);
      display: flex;
      align-items: center;
      padding: 0 10px;
      gap: 10px;
      z-index: 1000;
    }

    @keyframes skibidi-gradient {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }

    .start-btn {
      background: linear-gradient(135deg, var(--gyatt), var(--sigma));
      border: none;
      padding: 8px 15px;
      border-radius: 8px;
      cursor: pointer;
      font-family: 'Bangers', cursive;
      font-size: 1.1rem;
      color: white;
      text-shadow: 2px 2px 0 #000;
      display: flex;
      align-items: center;
      gap: 8px;
      animation: start-pulse 1s ease-in-out infinite;
    }

    @keyframes start-pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }

    .start-btn:hover {
      filter: brightness(1.2);
    }

    .taskbar-apps {
      display: flex;
      gap: 8px;
      flex: 1;
    }

    .taskbar-app {
      background: rgba(255, 255, 255, 0.1);
      border: 2px solid var(--rizz);
      padding: 6px 12px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.8rem;
      color: white;
      display: flex;
      align-items: center;
      gap: 6px;
      transition: all 0.2s;
    }

    .taskbar-app:hover {
      background: rgba(255, 255, 255, 0.2);
      transform: translateY(-3px);
    }

    .taskbar-app.active {
      background: var(--skibidi);
      border-color: white;
    }

    .system-tray {
      display: flex;
      align-items: center;
      gap: 15px;
      padding: 0 10px;
      color: white;
      font-size: 0.8rem;
    }

    .tray-item {
      display: flex;
      align-items: center;
      gap: 5px;
      animation: tray-bounce 2s ease-in-out infinite;
    }

    @keyframes tray-bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-3px); }
    }

    .clock {
      font-family: 'Bangers', cursive;
      font-size: 1rem;
      color: var(--ohio);
      text-shadow: 0 0 10px var(--ohio);
    }

    /* Start Menu */
    .start-menu {
      position: fixed;
      bottom: 65px;
      left: 10px;
      width: 280px;
      background: linear-gradient(180deg, #2a0a4a, #1a0033);
      border: 3px solid var(--skibidi);
      border-radius: 12px;
      padding: 15px;
      display: none;
      z-index: 1001;
      box-shadow: 0 0 30px rgba(255, 0, 255, 0.5);
    }

    .start-menu.open {
      display: block;
      animation: menu-pop 0.2s ease-out;
    }

    @keyframes menu-pop {
      0% { transform: scale(0.8) translateY(20px); opacity: 0; }
      100% { transform: scale(1) translateY(0); opacity: 1; }
    }

    .start-menu h2 {
      font-family: 'Bangers', cursive;
      color: var(--ohio);
      text-shadow: 2px 2px 0 #000;
      margin-bottom: 15px;
      font-size: 1.3rem;
    }

    .menu-item {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px;
      border-radius: 8px;
      cursor: pointer;
      color: white;
      transition: all 0.2s;
    }

    .menu-item:hover {
      background: rgba(255, 0, 255, 0.3);
      transform: translateX(5px);
    }

    .menu-item span:first-child {
      font-size: 1.5rem;
    }

    /* Special window contents */
    .rizz-meter {
      text-align: center;
    }

    .rizz-bar {
      height: 30px;
      background: #333;
      border-radius: 15px;
      overflow: hidden;
      margin: 15px 0;
    }

    .rizz-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--gyatt), var(--sigma), var(--ohio));
      background-size: 200% 100%;
      animation: rizz-flow 1s linear infinite;
      transition: width 0.5s;
    }

    @keyframes rizz-flow {
      0% { background-position: 0% 50%; }
      100% { background-position: 200% 50%; }
    }

    .ohio-news {
      font-size: 0.85rem;
      line-height: 1.6;
    }

    .ohio-news p {
      padding: 10px;
      background: rgba(0, 255, 0, 0.1);
      border-left: 3px solid var(--ohio);
      margin-bottom: 10px;
    }

    .sigma-rules {
      counter-reset: sigma;
    }

    .sigma-rules p {
      counter-increment: sigma;
      padding: 8px;
      margin-bottom: 8px;
      background: rgba(255, 102, 0, 0.1);
      border-radius: 5px;
    }

    .sigma-rules p::before {
      content: "Rule #" counter(sigma) ": ";
      color: var(--sigma);
      font-weight: bold;
    }

    .skibidi-toilet {
      text-align: center;
      font-size: 4rem;
      animation: skibidi-dance 0.5s ease-in-out infinite;
    }

    @keyframes skibidi-dance {
      0%, 100% { transform: rotate(-10deg); }
      50% { transform: rotate(10deg); }
    }

    .fanum-tax {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
    }

    .food-item {
      background: rgba(255, 255, 255, 0.1);
      padding: 15px;
      border-radius: 8px;
      text-align: center;
      cursor: pointer;
      transition: all 0.2s;
    }

    .food-item:hover {
      background: rgba(255, 0, 102, 0.3);
      transform: scale(0.9);
    }

    .food-item.taxed {
      opacity: 0.3;
      text-decoration: line-through;
    }

    .food-item span {
      display: block;
      font-size: 2rem;
      margin-bottom: 5px;
    }

    .mewing-timer {
      text-align: center;
    }

    .mewing-face {
      font-size: 5rem;
      margin: 20px 0;
      transition: all 0.3s;
    }

    .mewing-face.active {
      transform: scaleY(0.7);
    }

    .mewing-counter {
      font-family: 'Bangers', cursive;
      font-size: 3rem;
      color: var(--rizz);
      text-shadow: 0 0 20px var(--rizz);
    }

    .edge-detector {
      text-align: center;
      padding: 20px;
    }

    .edge-result {
      font-family: 'Bangers', cursive;
      font-size: 2rem;
      margin-top: 15px;
      animation: edge-flash 0.5s ease-in-out infinite alternate;
    }

    @keyframes edge-flash {
      0% { color: var(--ohio); }
      100% { color: var(--gyatt); }
    }

    .aura-points {
      text-align: center;
    }

    .aura-display {
      font-family: 'Bangers', cursive;
      font-size: 4rem;
      background: linear-gradient(90deg, var(--skibidi), var(--rizz), var(--ohio));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      text-shadow: none;
      filter: drop-shadow(0 0 10px var(--skibidi));
    }

    .aura-btn {
      background: linear-gradient(135deg, var(--sigma), var(--gyatt));
      border: none;
      padding: 10px 20px;
      border-radius: 20px;
      color: white;
      font-family: 'Bangers', cursive;
      font-size: 1rem;
      cursor: pointer;
      margin: 5px;
      transition: all 0.2s;
    }

    .aura-btn:hover {
      transform: scale(1.1);
    }

    /* Back link */
    .back-link {
      position: fixed;
      top: 10px;
      right: 10px;
      color: rgba(255,255,255,0.5);
      text-decoration: none;
      font-size: 0.7rem;
      z-index: 100;
    }

    .back-link:hover {
      color: var(--skibidi);
    }

    @media (max-width: 600px) {
      .window {
        width: 90vw !important;
        left: 5vw !important;
        min-width: auto;
      }
      .taskbar-apps {
        display: none;
      }
    }
  </style>
</head>
<body>
  <div class="desktop" id="desktop">
    <div class="desktop-icons">
      <div class="desktop-icon" onclick="openWindow('rizz')">
        <span>üíÖ</span>
        <span>Rizz Meter</span>
      </div>
      <div class="desktop-icon" onclick="openWindow('ohio')">
        <span>üåΩ</span>
        <span>Ohio News</span>
      </div>
      <div class="desktop-icon" onclick="openWindow('sigma')">
        <span>üê∫</span>
        <span>Sigma Rules</span>
      </div>
      <div class="desktop-icon" onclick="openWindow('skibidi')">
        <span>üöΩ</span>
        <span>Skibidi.exe</span>
      </div>
      <div class="desktop-icon" onclick="openWindow('fanum')">
        <span>üçî</span>
        <span>Fanum Tax</span>
      </div>
      <div class="desktop-icon" onclick="openWindow('mewing')">
        <span>üóø</span>
        <span>Mew Timer</span>
      </div>
    </div>
  </div>

  <div class="start-menu" id="start-menu">
    <h2>üß† BRAIN ROT 67</h2>
    <div class="menu-item" onclick="openWindow('aura')">
      <span>‚ú®</span>
      <span>Aura Points</span>
    </div>
    <div class="menu-item" onclick="openWindow('edge')">
      <span>üî™</span>
      <span>Edge Detector</span>
    </div>
    <div class="menu-item" onclick="openWindow('gyatt')">
      <span>üçë</span>
      <span>Gyatt Logger</span>
    </div>
    <div class="menu-item" onclick="openWindow('npc')">
      <span>ü§ñ</span>
      <span>NPC Mode</span>
    </div>
    <div class="menu-item" onclick="openWindow('settings')">
      <span>‚öôÔ∏è</span>
      <span>Brainrot Settings</span>
    </div>
  </div>

  <div class="taskbar">
    <button class="start-btn" onclick="toggleStartMenu()">
      <span>üß†</span> START
    </button>
    <div class="taskbar-apps" id="taskbar-apps"></div>
    <div class="system-tray">
      <div class="tray-item">
        <span>üì∂</span>
        <span>ohio_wifi</span>
      </div>
      <div class="tray-item">
        <span>üîã</span>
        <span>69%</span>
      </div>
      <div class="clock" id="clock">4:20 AM</div>
    </div>
  </div>

  <a href="https://sloppy.live" class="back-link">‚Üê sloppy.live</a>

  <script>
    const desktop = document.getElementById('desktop');
    const taskbarApps = document.getElementById('taskbar-apps');
    const startMenu = document.getElementById('start-menu');

    let windows = {};
    let zIndex = 100;
    let draggedWindow = null;
    let dragOffset = { x: 0, y: 0 };

    // Window definitions
    const windowDefs = {
      rizz: {
        title: 'üíÖ RIZZ-O-METER 3000',
        color: 'var(--gyatt)',
        content: `
          <div class="rizz-meter">
            <p>Calculating your rizz levels...</p>
            <div class="rizz-bar">
              <div class="rizz-fill" id="rizz-fill" style="width: 0%"></div>
            </div>
            <p id="rizz-text">Initializing...</p>
          </div>
        `,
        onOpen: () => {
          setTimeout(() => {
            const fill = document.getElementById('rizz-fill');
            const text = document.getElementById('rizz-text');
            const rizz = Math.floor(Math.random() * 100);
            fill.style.width = rizz + '%';
            const levels = ['No Rizz Detected üíÄ', 'Mid Rizz üòê', 'Decent Rizz üòè', 'W Rizz üòé', 'INFINITE RIZZ üî•'];
            text.textContent = levels[Math.floor(rizz / 25)] + ` (${rizz}%)`;
          }, 500);
        }
      },
      ohio: {
        title: 'üåΩ OHIO DAILY NEWS',
        color: 'var(--ohio)',
        content: `
          <div class="ohio-news">
            <p>üö® BREAKING: Local man discovers his house is actually in Michigan, enters existential crisis</p>
            <p>üåΩ Corn shortage causes mass hysteria, residents resort to eating pictures of corn</p>
            <p>üõ∏ Alien lands in Toledo, immediately asks to leave</p>
            <p>ü¶é Giant lizard spotted downtown, turns out to be just a guy named Larry</p>
            <p>üí® Weather forecast: 100% chance of Ohio</p>
          </div>
        `
      },
      sigma: {
        title: 'üê∫ SIGMA GRINDSET',
        color: 'var(--sigma)',
        content: `
          <div class="sigma-rules">
            <p>Wake up at 3AM to stare at the wall</p>
            <p>Drink 47 raw eggs for breakfast</p>
            <p>Never blink. Blinking is for betas</p>
            <p>Own 17 businesses (in your mind)</p>
            <p>Sleep is optional. Grind is eternal</p>
          </div>
        `
      },
      skibidi: {
        title: 'üöΩ SKIBIDI.EXE',
        color: 'var(--skibidi)',
        content: `
          <div class="skibidi-toilet" id="skibidi-toilet">üöΩ</div>
          <p style="text-align:center;margin-top:10px">skibidi dop dop dop yes yes</p>
        `
      },
      fanum: {
        title: 'üçî FANUM TAX COLLECTOR',
        color: 'var(--gyatt)',
        content: `
          <p style="margin-bottom:10px">Click food to collect the tax:</p>
          <div class="fanum-tax" id="fanum-tax">
            <div class="food-item" onclick="taxFood(this)"><span>üçï</span>Pizza</div>
            <div class="food-item" onclick="taxFood(this)"><span>üçî</span>Burger</div>
            <div class="food-item" onclick="taxFood(this)"><span>üçü</span>Fries</div>
            <div class="food-item" onclick="taxFood(this)"><span>üåÆ</span>Taco</div>
            <div class="food-item" onclick="taxFood(this)"><span>üç©</span>Donut</div>
            <div class="food-item" onclick="taxFood(this)"><span>üç¶</span>Ice Cream</div>
          </div>
          <p id="tax-count" style="text-align:center;margin-top:10px">Taxed: 0 items</p>
        `
      },
      mewing: {
        title: 'üóø MEW STREAK TIMER',
        color: 'var(--rizz)',
        content: `
          <div class="mewing-timer">
            <div class="mewing-face" id="mewing-face">üòê</div>
            <div class="mewing-counter" id="mew-counter">0:00</div>
            <p>Hold spacebar to mew</p>
          </div>
        `,
        onOpen: () => {
          let mewing = false;
          let mewTime = 0;
          let mewInterval = null;

          document.addEventListener('keydown', (e) => {
            if (e.code === 'Space' && !mewing && windows.mewing) {
              mewing = true;
              document.getElementById('mewing-face').textContent = 'üóø';
              document.getElementById('mewing-face').classList.add('active');
              mewInterval = setInterval(() => {
                mewTime++;
                const mins = Math.floor(mewTime / 60);
                const secs = mewTime % 60;
                document.getElementById('mew-counter').textContent = `${mins}:${secs.toString().padStart(2, '0')}`;
              }, 1000);
            }
          });

          document.addEventListener('keyup', (e) => {
            if (e.code === 'Space' && mewing) {
              mewing = false;
              clearInterval(mewInterval);
              document.getElementById('mewing-face').textContent = 'üòÆ';
              document.getElementById('mewing-face').classList.remove('active');
              setTimeout(() => {
                if (document.getElementById('mewing-face')) {
                  document.getElementById('mewing-face').textContent = 'üòê';
                }
              }, 1000);
            }
          });
        }
      },
      aura: {
        title: '‚ú® AURA POINT TRACKER',
        color: 'var(--rizz)',
        content: `
          <div class="aura-points">
            <p>Your current aura:</p>
            <div class="aura-display" id="aura-display">0</div>
            <div>
              <button class="aura-btn" onclick="changeAura(100)">+100 W</button>
              <button class="aura-btn" onclick="changeAura(-50)">-50 L</button>
            </div>
            <button class="aura-btn" onclick="changeAura(1000)">üé∞ Aura Gamble</button>
          </div>
        `
      },
      edge: {
        title: 'üî™ EDGINESS DETECTOR',
        color: 'var(--sigma)',
        content: `
          <div class="edge-detector">
            <p>Scanning for edge...</p>
            <div class="edge-result" id="edge-result">üîç ANALYZING</div>
          </div>
        `,
        onOpen: () => {
          setTimeout(() => {
            const results = [
              '‚ö†Ô∏è TOO EDGY - TOUCH GRASS',
              'üî™ MAXIMUM EDGE ACHIEVED',
              'üòà CERTIFIED MENACE',
              'üíÄ LITERALLY BUILT DIFFERENT',
              'ü•∂ COLD BEYOND REPAIR'
            ];
            document.getElementById('edge-result').textContent = results[Math.floor(Math.random() * results.length)];
          }, 1500);
        }
      },
      gyatt: {
        title: 'üçë GYATT LOGGER',
        color: 'var(--gyatt)',
        content: `
          <div style="text-align:center">
            <p>Total GYATTs detected today:</p>
            <div style="font-size:4rem;margin:20px 0" id="gyatt-count">0</div>
            <button class="aura-btn" onclick="logGyatt()">LOG GYATT</button>
          </div>
        `
      },
      npc: {
        title: 'ü§ñ NPC MODE',
        color: 'var(--ohio)',
        content: `
          <div style="text-align:center">
            <div style="font-size:4rem;margin:20px 0" id="npc-face">üßç</div>
            <p id="npc-text">*stares blankly*</p>
            <button class="aura-btn" onclick="npcSpeak()">INTERACT</button>
          </div>
        `
      },
      settings: {
        title: '‚öôÔ∏è BRAINROT SETTINGS',
        color: 'var(--muted)',
        content: `
          <div style="padding:10px">
            <p style="margin-bottom:15px">‚ö†Ô∏è WARNING: Settings may cause more brainrot</p>
            <label style="display:block;margin:10px 0">
              <input type="checkbox" checked> Enable Skibidi Mode
            </label>
            <label style="display:block;margin:10px 0">
              <input type="checkbox" checked> Ohio Detection
            </label>
            <label style="display:block;margin:10px 0">
              <input type="checkbox"> Disable Sigma Grindset (not recommended)
            </label>
            <label style="display:block;margin:10px 0">
              <input type="checkbox" checked> Auto-Mew on Startup
            </label>
            <p style="margin-top:15px;color:var(--gyatt)">Brain Rot Level: MAXIMUM</p>
          </div>
        `
      }
    };

    let auraPoints = 0;
    let gyattCount = 0;
    let taxedItems = 0;

    function openWindow(type) {
      if (windows[type]) {
        bringToFront(windows[type]);
        return;
      }

      const def = windowDefs[type];
      if (!def) return;

      const win = document.createElement('div');
      win.className = 'window';
      win.style.borderColor = def.color;
      win.style.left = (100 + Math.random() * 200) + 'px';
      win.style.top = (50 + Math.random() * 150) + 'px';
      win.style.zIndex = ++zIndex;

      win.innerHTML = `
        <div class="window-header" style="background: linear-gradient(90deg, ${def.color}, var(--skibidi))">
          <span class="window-title">${def.title}</span>
          <div class="window-controls">
            <button class="window-btn minimize">_</button>
            <button class="window-btn maximize">‚ñ°</button>
            <button class="window-btn close" onclick="closeWindow('${type}')">√ó</button>
          </div>
        </div>
        <div class="window-content">${def.content}</div>
      `;

      // Drag functionality
      const header = win.querySelector('.window-header');
      header.addEventListener('mousedown', (e) => {
        if (e.target.classList.contains('window-btn')) return;
        draggedWindow = win;
        dragOffset.x = e.clientX - win.offsetLeft;
        dragOffset.y = e.clientY - win.offsetTop;
        bringToFront(win);
      });

      desktop.appendChild(win);
      windows[type] = win;

      // Add to taskbar
      const taskBtn = document.createElement('div');
      taskBtn.className = 'taskbar-app active';
      taskBtn.id = `taskbar-${type}`;
      taskBtn.innerHTML = `<span>${def.title.split(' ')[0]}</span>`;
      taskBtn.onclick = () => bringToFront(win);
      taskbarApps.appendChild(taskBtn);

      startMenu.classList.remove('open');

      if (def.onOpen) def.onOpen();
    }

    function closeWindow(type) {
      const win = windows[type];
      if (!win) return;

      win.classList.add('closing');
      setTimeout(() => {
        win.remove();
        delete windows[type];
        const taskBtn = document.getElementById(`taskbar-${type}`);
        if (taskBtn) taskBtn.remove();
      }, 300);
    }

    function bringToFront(win) {
      win.style.zIndex = ++zIndex;
    }

    document.addEventListener('mousemove', (e) => {
      if (draggedWindow) {
        draggedWindow.style.left = (e.clientX - dragOffset.x) + 'px';
        draggedWindow.style.top = (e.clientY - dragOffset.y) + 'px';
      }
    });

    document.addEventListener('mouseup', () => {
      draggedWindow = null;
    });

    function toggleStartMenu() {
      startMenu.classList.toggle('open');
    }

    document.addEventListener('click', (e) => {
      if (!e.target.closest('.start-menu') && !e.target.closest('.start-btn')) {
        startMenu.classList.remove('open');
      }
    });

    function changeAura(amount) {
      if (amount === 1000) {
        amount = Math.random() > 0.5 ? Math.floor(Math.random() * 500) : -Math.floor(Math.random() * 300);
      }
      auraPoints += amount;
      document.getElementById('aura-display').textContent = auraPoints;
    }

    function logGyatt() {
      gyattCount++;
      document.getElementById('gyatt-count').textContent = gyattCount;
    }

    function taxFood(el) {
      if (!el.classList.contains('taxed')) {
        el.classList.add('taxed');
        taxedItems++;
        document.getElementById('tax-count').textContent = `Taxed: ${taxedItems} items üòà`;
      }
    }

    function npcSpeak() {
      const phrases = [
        '*walks into wall*',
        'Hello adventurer!',
        '*T-poses menacingly*',
        'Have you heard of the High Elves?',
        '*clips through floor*',
        'I used to be an adventurer like you...',
        '*stares at sun*',
        'Welcome to Ohio.',
        '*vibrates aggressively*'
      ];
      const faces = ['üßç', 'üö∂', 'üßé', 'üíÉ', 'üï∫', 'üßü'];
      document.getElementById('npc-face').textContent = faces[Math.floor(Math.random() * faces.length)];
      document.getElementById('npc-text').textContent = phrases[Math.floor(Math.random() * phrases.length)];
    }

    // Update clock
    function updateClock() {
      const times = ['4:20 AM', '6:9 PM', '13:37', '69:420', '??:??', '0_0'];
      document.getElementById('clock').textContent = times[Math.floor(Math.random() * times.length)];
    }
    setInterval(updateClock, 5000);

    // Floating background memes
    const memes = ['üóø', 'üíÄ', 'üî•', 'üò≠', 'üöΩ', 'üê∫', '‚ú®', 'üçë', 'üåΩ', 'üß†'];
    setInterval(() => {
      const meme = document.createElement('div');
      meme.className = 'bg-meme';
      meme.textContent = memes[Math.floor(Math.random() * memes.length)];
      meme.style.left = Math.random() * 100 + '%';
      meme.style.animationDuration = (15 + Math.random() * 10) + 's';
      desktop.appendChild(meme);
      setTimeout(() => meme.remove(), 25000);
    }, 2000);

    // Open a random window on start
    setTimeout(() => openWindow('skibidi'), 500);
  </script>
</body>
</html>
