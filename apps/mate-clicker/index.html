<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mate Clicker - Yerba Mate Idle Game</title>
    <link rel="icon" href="https://emojicdn.elk.sh/üßâ">

    <meta property="og:title" content="Mate Clicker">
    <meta property="og:description" content="Click to sip yerba mate! Upgrade your gourd, get better yerba, and become the ultimate matero.">
    <meta property="og:url" content="https://sloppy.live/mate-clicker">
    <meta property="og:image" content="https://image.pollinations.ai/prompt/yerba%20mate%20gourd%20with%20bombilla%20straw%2C%20cozy%20argentine%20aesthetic%2C%20warm%20colors%2C%20digital%20art?width=1200&height=630&nologo=true">
    <meta property="og:type" content="website">

    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;900&display=swap" rel="stylesheet">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background: linear-gradient(135deg, #2d5016 0%, #4a7c23 50%, #6b8e23 100%);
            min-height: 100vh;
            color: #f5f0e1;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 20px;
            min-height: 100vh;
        }

        @media (max-width: 800px) {
            .container {
                grid-template-columns: 1fr;
            }
        }

        .main-area {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 20px;
        }

        h1 {
            font-size: 2.5rem;
            font-weight: 900;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            text-align: center;
        }

        .stats {
            background: rgba(0,0,0,0.2);
            padding: 15px 30px;
            border-radius: 15px;
            text-align: center;
        }

        .sips-count {
            font-size: 2.5rem;
            font-weight: 900;
            color: #ffd700;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }

        .per-second {
            font-size: 1rem;
            opacity: 0.8;
        }

        .mate-container {
            position: relative;
            cursor: pointer;
            transition: transform 0.1s;
        }

        .mate-container:hover {
            transform: scale(1.02);
        }

        .mate-container:active {
            transform: scale(0.95);
        }

        .mate {
            font-size: 180px;
            filter: drop-shadow(0 10px 20px rgba(0,0,0,0.3));
            animation: float 3s ease-in-out infinite;
            user-select: none;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .click-power {
            background: rgba(0,0,0,0.2);
            padding: 10px 20px;
            border-radius: 10px;
            font-size: 1.1rem;
        }

        .click-effect {
            position: absolute;
            pointer-events: none;
            font-size: 1.5rem;
            font-weight: bold;
            color: #ffd700;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
            animation: floatUp 1s ease-out forwards;
        }

        @keyframes floatUp {
            0% { opacity: 1; transform: translateY(0) scale(1); }
            100% { opacity: 0; transform: translateY(-80px) scale(1.5); }
        }

        .upgrades-panel {
            background: rgba(139, 90, 43, 0.9);
            border-radius: 15px;
            padding: 15px;
            overflow-y: auto;
            max-height: calc(100vh - 40px);
        }

        .upgrades-panel h2 {
            text-align: center;
            margin-bottom: 15px;
            font-size: 1.3rem;
            border-bottom: 2px solid rgba(255,255,255,0.2);
            padding-bottom: 10px;
        }

        .upgrade {
            background: rgba(0,0,0,0.2);
            border-radius: 10px;
            padding: 12px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.2s;
            border: 2px solid transparent;
        }

        .upgrade:hover:not(.locked) {
            background: rgba(0,0,0,0.3);
            border-color: #ffd700;
        }

        .upgrade.locked {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .upgrade-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 5px;
        }

        .upgrade-name {
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .upgrade-count {
            background: rgba(255,215,0,0.3);
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.85rem;
        }

        .upgrade-cost {
            color: #ffd700;
            font-weight: 700;
        }

        .upgrade-desc {
            font-size: 0.85rem;
            opacity: 0.8;
        }

        .upgrade-effect {
            font-size: 0.8rem;
            color: #90ee90;
            margin-top: 4px;
        }

        .achievements {
            margin-top: 20px;
            padding-top: 15px;
            border-top: 2px solid rgba(255,255,255,0.2);
        }

        .achievements h3 {
            text-align: center;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .achievement-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
        }

        .achievement {
            font-size: 1.8rem;
            text-align: center;
            padding: 8px;
            background: rgba(0,0,0,0.2);
            border-radius: 8px;
            filter: grayscale(100%);
            opacity: 0.4;
            transition: all 0.3s;
        }

        .achievement.unlocked {
            filter: grayscale(0%);
            opacity: 1;
        }

        .backlink {
            position: fixed;
            bottom: 10px;
            left: 10px;
            font-size: 11px;
            background: rgba(0,0,0,0.3);
            padding: 8px 12px;
            border-radius: 8px;
        }

        .backlink a {
            color: #ffd700;
            text-decoration: none;
        }

        .toast {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(139, 90, 43, 0.95);
            padding: 15px 25px;
            border-radius: 10px;
            font-weight: 700;
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
            z-index: 1000;
            animation: toastIn 0.3s ease-out, toastOut 0.3s ease-in 2.7s forwards;
        }

        @keyframes toastIn {
            from { opacity: 0; transform: translateX(-50%) translateY(-20px); }
            to { opacity: 1; transform: translateX(-50%) translateY(0); }
        }

        @keyframes toastOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="main-area">
            <h1>üßâ Mate Clicker</h1>

            <div class="stats">
                <div class="sips-count"><span id="sips">0</span> sips</div>
                <div class="per-second"><span id="sps">0</span> sips/second</div>
            </div>

            <div class="mate-container" id="mateBtn">
                <div class="mate">üßâ</div>
            </div>

            <div class="click-power">
                +<span id="clickPower">1</span> per click
            </div>
        </div>

        <div class="upgrades-panel">
            <h2>üõí Upgrades</h2>
            <div id="upgradesList"></div>

            <div class="achievements">
                <h3>üèÜ Achievements</h3>
                <div class="achievement-grid" id="achievementsList"></div>
            </div>
        </div>
    </div>

    <div class="backlink">
        Built live at <a href="https://sloppy.live">sloppy.live</a>
    </div>

    <script>
        // Game State
        let sips = 0;
        let totalSips = 0;
        let clickPower = 1;
        let sipsPerSecond = 0;

        const upgrades = [
            { id: 'bombilla', name: 'Better Bombilla', icon: 'ü•Ñ', desc: 'A nicer straw for smoother sipping', baseCost: 15, baseEffect: 0.1, count: 0, type: 'auto' },
            { id: 'yerba', name: 'Premium Yerba', icon: 'üåø', desc: 'Higher quality yerba mate leaves', baseCost: 100, baseEffect: 0.5, count: 0, type: 'auto' },
            { id: 'gourd', name: 'Artisan Gourd', icon: 'üè∫', desc: 'Hand-crafted calabash gourd', baseCost: 500, baseEffect: 2, count: 0, type: 'auto' },
            { id: 'thermos', name: 'Hot Thermos', icon: 'ü´ñ', desc: 'Keeps water at perfect temperature', baseCost: 2000, baseEffect: 8, count: 0, type: 'auto' },
            { id: 'friend', name: 'Mate Circle', icon: 'üë•', desc: 'Friends to share mate with', baseCost: 10000, baseEffect: 30, count: 0, type: 'auto' },
            { id: 'plantation', name: 'Yerba Plantation', icon: 'üå≥', desc: 'Your own yerba mate farm', baseCost: 50000, baseEffect: 100, count: 0, type: 'auto' },
            { id: 'factory', name: 'Mate Factory', icon: 'üè≠', desc: 'Industrial mate production', baseCost: 250000, baseEffect: 400, count: 0, type: 'auto' },
            { id: 'clickUpgrade1', name: 'Stronger Sip', icon: 'üí™', desc: '+1 sip per click', baseCost: 50, baseEffect: 1, count: 0, type: 'click', maxCount: 10 },
            { id: 'clickUpgrade2', name: 'Double Gulp', icon: 'üî•', desc: '+5 sips per click', baseCost: 1000, baseEffect: 5, count: 0, type: 'click', maxCount: 10 },
            { id: 'clickUpgrade3', name: 'Mega Chug', icon: '‚ö°', desc: '+25 sips per click', baseCost: 25000, baseEffect: 25, count: 0, type: 'click', maxCount: 10 },
        ];

        const achievements = [
            { id: 'first', icon: 'üéâ', name: 'First Sip', desc: 'Take your first sip', condition: () => totalSips >= 1 },
            { id: 'hundred', icon: 'üíØ', name: 'Century', desc: 'Reach 100 sips', condition: () => totalSips >= 100 },
            { id: 'thousand', icon: 'üåü', name: 'Matero', desc: 'Reach 1,000 sips', condition: () => totalSips >= 1000 },
            { id: 'tenk', icon: 'üèÖ', name: 'Enthusiast', desc: 'Reach 10,000 sips', condition: () => totalSips >= 10000 },
            { id: 'hundredk', icon: 'üëë', name: 'Master', desc: 'Reach 100,000 sips', condition: () => totalSips >= 100000 },
            { id: 'million', icon: 'üßâ', name: 'Mate God', desc: 'Reach 1,000,000 sips', condition: () => totalSips >= 1000000 },
            { id: 'click10', icon: 'üëÜ', name: 'Clicker', desc: 'Upgrade click power', condition: () => clickPower >= 10 },
            { id: 'auto10', icon: 'ü§ñ', name: 'Automated', desc: 'Reach 10 sips/second', condition: () => sipsPerSecond >= 10 },
        ];

        let unlockedAchievements = new Set();

        // DOM Elements
        const sipsEl = document.getElementById('sips');
        const spsEl = document.getElementById('sps');
        const clickPowerEl = document.getElementById('clickPower');
        const upgradesListEl = document.getElementById('upgradesList');
        const achievementsListEl = document.getElementById('achievementsList');
        const mateBtn = document.getElementById('mateBtn');

        // Format numbers
        function formatNumber(n) {
            if (n >= 1e9) return (n / 1e9).toFixed(2) + 'B';
            if (n >= 1e6) return (n / 1e6).toFixed(2) + 'M';
            if (n >= 1e3) return (n / 1e3).toFixed(2) + 'K';
            return Math.floor(n).toString();
        }

        // Calculate upgrade cost
        function getUpgradeCost(upgrade) {
            return Math.floor(upgrade.baseCost * Math.pow(1.15, upgrade.count));
        }

        // Click handler
        function handleClick(e) {
            sips += clickPower;
            totalSips += clickPower;

            // Create floating text
            const effect = document.createElement('div');
            effect.className = 'click-effect';
            effect.textContent = '+' + formatNumber(clickPower);
            effect.style.left = (e.clientX - mateBtn.getBoundingClientRect().left) + 'px';
            effect.style.top = (e.clientY - mateBtn.getBoundingClientRect().top) + 'px';
            mateBtn.appendChild(effect);
            setTimeout(() => effect.remove(), 1000);

            updateDisplay();
            checkAchievements();
            save();
        }

        mateBtn.addEventListener('click', handleClick);

        // Buy upgrade
        function buyUpgrade(id) {
            const upgrade = upgrades.find(u => u.id === id);
            if (!upgrade) return;

            const cost = getUpgradeCost(upgrade);
            if (sips < cost) return;
            if (upgrade.maxCount && upgrade.count >= upgrade.maxCount) return;

            sips -= cost;
            upgrade.count++;

            if (upgrade.type === 'auto') {
                sipsPerSecond += upgrade.baseEffect;
            } else if (upgrade.type === 'click') {
                clickPower += upgrade.baseEffect;
            }

            updateDisplay();
            renderUpgrades();
            checkAchievements();
            save();
        }

        // Render upgrades
        function renderUpgrades() {
            upgradesListEl.innerHTML = '';

            upgrades.forEach(upgrade => {
                const cost = getUpgradeCost(upgrade);
                const canAfford = sips >= cost;
                const maxed = upgrade.maxCount && upgrade.count >= upgrade.maxCount;

                const div = document.createElement('div');
                div.className = 'upgrade' + (!canAfford || maxed ? ' locked' : '');
                div.onclick = () => buyUpgrade(upgrade.id);

                const effectText = upgrade.type === 'auto'
                    ? `+${upgrade.baseEffect} sips/sec`
                    : `+${upgrade.baseEffect} per click`;

                div.innerHTML = `
                    <div class="upgrade-header">
                        <span class="upgrade-name">
                            ${upgrade.icon} ${upgrade.name}
                            ${upgrade.count > 0 ? `<span class="upgrade-count">${upgrade.count}</span>` : ''}
                        </span>
                        <span class="upgrade-cost">${maxed ? 'MAX' : formatNumber(cost)}</span>
                    </div>
                    <div class="upgrade-desc">${upgrade.desc}</div>
                    <div class="upgrade-effect">${effectText}</div>
                `;

                upgradesListEl.appendChild(div);
            });
        }

        // Render achievements
        function renderAchievements() {
            achievementsListEl.innerHTML = '';

            achievements.forEach(ach => {
                const div = document.createElement('div');
                div.className = 'achievement' + (unlockedAchievements.has(ach.id) ? ' unlocked' : '');
                div.textContent = ach.icon;
                div.title = ach.name + ': ' + ach.desc;
                achievementsListEl.appendChild(div);
            });
        }

        // Check achievements
        function checkAchievements() {
            achievements.forEach(ach => {
                if (!unlockedAchievements.has(ach.id) && ach.condition()) {
                    unlockedAchievements.add(ach.id);
                    showToast(`üèÜ ${ach.name}: ${ach.desc}`);
                    renderAchievements();
                }
            });
        }

        // Show toast notification
        function showToast(message) {
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.textContent = message;
            document.body.appendChild(toast);
            setTimeout(() => toast.remove(), 3000);
        }

        // Update display
        function updateDisplay() {
            sipsEl.textContent = formatNumber(sips);
            spsEl.textContent = formatNumber(sipsPerSecond);
            clickPowerEl.textContent = formatNumber(clickPower);
        }

        // Game loop
        function gameLoop() {
            if (sipsPerSecond > 0) {
                sips += sipsPerSecond / 10;
                totalSips += sipsPerSecond / 10;
                updateDisplay();
                checkAchievements();
            }
        }

        setInterval(gameLoop, 100);
        setInterval(save, 30000); // Autosave every 30s

        // Save/Load
        function save() {
            const data = {
                sips,
                totalSips,
                clickPower,
                sipsPerSecond,
                upgrades: upgrades.map(u => ({ id: u.id, count: u.count })),
                achievements: Array.from(unlockedAchievements)
            };
            localStorage.setItem('mateClicker', JSON.stringify(data));
        }

        function load() {
            const saved = localStorage.getItem('mateClicker');
            if (!saved) return;

            try {
                const data = JSON.parse(saved);
                sips = data.sips || 0;
                totalSips = data.totalSips || 0;
                clickPower = data.clickPower || 1;
                sipsPerSecond = data.sipsPerSecond || 0;

                if (data.upgrades) {
                    data.upgrades.forEach(saved => {
                        const upgrade = upgrades.find(u => u.id === saved.id);
                        if (upgrade) upgrade.count = saved.count;
                    });
                }

                if (data.achievements) {
                    unlockedAchievements = new Set(data.achievements);
                }
            } catch (e) {
                console.error('Failed to load save:', e);
            }
        }

        // Initialize
        load();
        updateDisplay();
        renderUpgrades();
        renderAchievements();
    </script>
</body>
</html>
