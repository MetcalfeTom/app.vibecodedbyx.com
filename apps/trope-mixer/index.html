<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Trope Mixer</title>
  <link rel="icon" href="https://emojicdn.elk.sh/ðŸŽ¬">
  <meta name="description" content="Combine movie genres for ridiculous plot ideas">
  <meta property="og:title" content="Trope Mixer">
  <meta property="og:description" content="Musical + Slasher = Chaos. Mix genres for absurd movies.">
  <meta property="og:url" content="https://app.sloppy.live/trope-mixer">
  <meta property="og:image" content="https://app.sloppy.live/trope-mixer/og-image.png">
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Source+Sans+3:wght@400;600&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      min-height: 100vh;
      background: #0d0d0d;
      background-image:
        radial-gradient(ellipse at top, #1a1a2e 0%, transparent 50%),
        radial-gradient(ellipse at bottom right, #16213e 0%, transparent 40%);
      font-family: 'Source Sans 3', sans-serif;
      color: #fff;
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .film-strip {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: 30px;
      background: repeating-linear-gradient(
        90deg,
        #111 0px,
        #111 20px,
        #222 20px,
        #222 25px,
        #111 25px,
        #111 45px,
        transparent 45px,
        transparent 60px
      );
      opacity: 0.5;
    }

    .film-strip.bottom {
      top: auto;
      bottom: 0;
    }

    .container {
      max-width: 800px;
      width: 100%;
      margin-top: 50px;
    }

    header {
      text-align: center;
      margin-bottom: 40px;
    }

    h1 {
      font-family: 'Bebas Neue', sans-serif;
      font-size: 72px;
      letter-spacing: 8px;
      background: linear-gradient(135deg, #f39c12, #e74c3c, #9b59b6);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      text-shadow: 0 0 60px rgba(243, 156, 18, 0.3);
    }

    .subtitle {
      font-size: 16px;
      color: #888;
      letter-spacing: 4px;
      text-transform: uppercase;
      margin-top: 5px;
    }

    .genre-display {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 20px;
      margin-bottom: 30px;
      flex-wrap: wrap;
    }

    .genre-card {
      background: linear-gradient(145deg, #1a1a2e, #16213e);
      border: 2px solid #333;
      border-radius: 15px;
      padding: 25px 35px;
      min-width: 180px;
      text-align: center;
      position: relative;
      overflow: hidden;
    }

    .genre-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: var(--accent, #f39c12);
    }

    .genre-card.genre1 { --accent: #e74c3c; }
    .genre-card.genre2 { --accent: #9b59b6; }

    .genre-label {
      font-size: 11px;
      color: #666;
      text-transform: uppercase;
      letter-spacing: 2px;
      margin-bottom: 8px;
    }

    .genre-name {
      font-family: 'Bebas Neue', sans-serif;
      font-size: 32px;
      letter-spacing: 2px;
      color: var(--accent);
    }

    .genre-emoji {
      font-size: 36px;
      margin-bottom: 10px;
    }

    .plus-sign {
      font-family: 'Bebas Neue', sans-serif;
      font-size: 48px;
      color: #f39c12;
      text-shadow: 0 0 20px rgba(243, 156, 18, 0.5);
    }

    .result-panel {
      background: #111;
      border: 1px solid #333;
      border-radius: 20px;
      padding: 40px;
      margin-bottom: 30px;
      position: relative;
    }

    .result-panel::before {
      content: 'ðŸŽ¬ NOW SHOWING';
      position: absolute;
      top: -12px;
      left: 50%;
      transform: translateX(-50%);
      background: #f39c12;
      color: #000;
      font-size: 11px;
      font-weight: 600;
      padding: 4px 15px;
      border-radius: 20px;
      letter-spacing: 2px;
    }

    .movie-title {
      font-family: 'Bebas Neue', sans-serif;
      font-size: 42px;
      text-align: center;
      letter-spacing: 3px;
      margin-bottom: 20px;
      background: linear-gradient(90deg, #f39c12, #e74c3c);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .movie-tagline {
      text-align: center;
      font-style: italic;
      color: #888;
      font-size: 18px;
      margin-bottom: 25px;
    }

    .movie-plot {
      font-size: 17px;
      line-height: 1.7;
      color: #ccc;
      text-align: center;
    }

    .trope-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      justify-content: center;
      margin-top: 25px;
    }

    .trope-tag {
      background: rgba(155, 89, 182, 0.2);
      border: 1px solid rgba(155, 89, 182, 0.4);
      color: #bb8fce;
      padding: 5px 12px;
      border-radius: 20px;
      font-size: 12px;
    }

    .mix-btn {
      display: block;
      width: 100%;
      max-width: 400px;
      margin: 0 auto 20px;
      padding: 20px 40px;
      font-family: 'Bebas Neue', sans-serif;
      font-size: 28px;
      letter-spacing: 4px;
      background: linear-gradient(135deg, #e74c3c, #c0392b);
      border: none;
      border-radius: 50px;
      color: #fff;
      cursor: pointer;
      transition: all 0.2s;
      box-shadow: 0 6px 0 #922b21, 0 10px 30px rgba(231, 76, 60, 0.3);
    }

    .mix-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 9px 0 #922b21, 0 15px 40px rgba(231, 76, 60, 0.4);
    }

    .mix-btn:active {
      transform: translateY(3px);
      box-shadow: 0 3px 0 #922b21, 0 5px 15px rgba(231, 76, 60, 0.2);
    }

    .lock-controls {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-bottom: 30px;
    }

    .lock-btn {
      background: transparent;
      border: 1px solid #444;
      color: #888;
      padding: 8px 16px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 13px;
      transition: all 0.2s;
    }

    .lock-btn:hover {
      border-color: #666;
      color: #fff;
    }

    .lock-btn.locked {
      background: rgba(243, 156, 18, 0.2);
      border-color: #f39c12;
      color: #f39c12;
    }

    .history {
      margin-top: 40px;
      padding-top: 30px;
      border-top: 1px solid #222;
    }

    .history-title {
      font-size: 12px;
      color: #555;
      text-transform: uppercase;
      letter-spacing: 3px;
      margin-bottom: 15px;
      text-align: center;
    }

    .history-list {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
    }

    .history-item {
      background: #1a1a2e;
      border: 1px solid #333;
      padding: 8px 14px;
      border-radius: 8px;
      font-size: 13px;
      color: #888;
      cursor: pointer;
      transition: all 0.2s;
    }

    .history-item:hover {
      border-color: #555;
      color: #fff;
    }

    .backlink {
      position: fixed;
      bottom: 40px;
      right: 15px;
      color: #444;
      text-decoration: none;
      font-size: 12px;
    }

    .backlink:hover {
      color: #888;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .animate {
      animation: fadeIn 0.5s ease;
    }

    @media (max-width: 600px) {
      h1 { font-size: 48px; }
      .genre-card { min-width: 140px; padding: 20px; }
      .genre-name { font-size: 24px; }
      .movie-title { font-size: 28px; }
      .plus-sign { font-size: 36px; }
    }
  </style>
</head>
<body>
  <div class="film-strip"></div>
  <div class="film-strip bottom"></div>

  <div class="container">
    <header>
      <h1>TROPE MIXER</h1>
      <p class="subtitle">Mashup Movie Madness</p>
    </header>

    <div class="genre-display">
      <div class="genre-card genre1" id="genre1Card">
        <div class="genre-emoji" id="genre1Emoji">ðŸŽ­</div>
        <div class="genre-label">Genre 1</div>
        <div class="genre-name" id="genre1Name">???</div>
      </div>
      <div class="plus-sign">+</div>
      <div class="genre-card genre2" id="genre2Card">
        <div class="genre-emoji" id="genre2Emoji">ðŸŽ­</div>
        <div class="genre-label">Genre 2</div>
        <div class="genre-name" id="genre2Name">???</div>
      </div>
    </div>

    <div class="lock-controls">
      <button class="lock-btn" id="lock1" onclick="toggleLock(1)">ðŸ”“ Lock Genre 1</button>
      <button class="lock-btn" id="lock2" onclick="toggleLock(2)">ðŸ”“ Lock Genre 2</button>
    </div>

    <div class="result-panel" id="resultPanel">
      <div class="movie-title" id="movieTitle">Press Mix to Begin!</div>
      <div class="movie-tagline" id="movieTagline">"Your next guilty pleasure awaits"</div>
      <div class="movie-plot" id="moviePlot">Click the button below to generate a ridiculous movie mashup combining two random genres with their signature tropes.</div>
      <div class="trope-tags" id="tropeTags"></div>
    </div>

    <button class="mix-btn" onclick="mix()">ðŸŽ² MIX GENRES</button>

    <div class="history" id="historySection" style="display: none;">
      <div class="history-title">Previous Mashups</div>
      <div class="history-list" id="historyList"></div>
    </div>
  </div>

  <a href="https://sloppy.live" class="backlink">sloppy.live</a>

  <script>
    const genres = {
      musical: {
        emoji: 'ðŸŽµ',
        name: 'Musical',
        tropes: ['spontaneous singing', 'dance numbers', 'love ballad', 'show-stopping finale', 'jazz hands'],
        settings: ['Broadway theater', 'high school', 'Paris cabaret', 'small town with big dreams'],
        characters: ['aspiring singer', 'choreographer with a secret', 'talent show rival']
      },
      slasher: {
        emoji: 'ðŸ”ª',
        name: 'Slasher',
        tropes: ['masked killer', 'final girl', 'creepy phone calls', 'running upstairs instead of outside', 'the car won\'t start'],
        settings: ['summer camp', 'sorority house', 'abandoned asylum', 'prom night'],
        characters: ['masked murderer', 'promiscuous teen who dies first', 'skeptical sheriff']
      },
      romcom: {
        emoji: 'ðŸ’•',
        name: 'Rom-Com',
        tropes: ['meet-cute', 'fake dating', 'airport chase scene', 'rain kiss', 'they were roommates'],
        settings: ['New York City apartment', 'quaint bookstore', 'destination wedding', 'rival companies'],
        characters: ['clumsy protagonist', 'commitment-phobic love interest', 'sassy best friend']
      },
      scifi: {
        emoji: 'ðŸš€',
        name: 'Sci-Fi',
        tropes: ['chosen one prophecy', 'AI gone rogue', 'time paradox', 'alien invasion', 'dystopian regime'],
        settings: ['space station', 'post-apocalyptic Earth', 'cyberpunk city', 'Mars colony'],
        characters: ['reluctant hero', 'wise alien mentor', 'evil corporation CEO']
      },
      western: {
        emoji: 'ðŸ¤ ',
        name: 'Western',
        tropes: ['high noon showdown', 'saloon brawl', 'revenge quest', 'train robbery', 'tumbleweed moment'],
        settings: ['dusty frontier town', 'cattle ranch', 'gold mine', 'desert canyon'],
        characters: ['grizzled gunslinger', 'corrupt sheriff', 'saloon owner with a heart of gold']
      },
      horror: {
        emoji: 'ðŸ‘»',
        name: 'Horror',
        tropes: ['creepy child', 'haunted house', 'splitting up', 'the monster was inside all along', 'jump scare fake-out'],
        settings: ['isolated cabin', 'ancient cemetery', 'cursed small town', 'possessed doll collection'],
        characters: ['skeptic who becomes believer', 'creepy neighbor', 'paranormal investigator']
      },
      noir: {
        emoji: 'ðŸ•µï¸',
        name: 'Film Noir',
        tropes: ['femme fatale', 'voice-over narration', 'double cross', 'smoking in the rain', 'everyone has secrets'],
        settings: ['smoky jazz club', 'PI\'s dingy office', 'rainy city streets', 'luxury penthouse'],
        characters: ['cynical detective', 'mysterious dame', 'crooked politician']
      },
      sports: {
        emoji: 'ðŸ†',
        name: 'Sports',
        tropes: ['underdog team', 'big game climax', 'training montage', 'injury comeback', 'inspirational speech'],
        settings: ['run-down gym', 'championship arena', 'small town with big dreams', 'locker room'],
        characters: ['washed-up coach', 'natural talent from the streets', 'rich rival team captain']
      },
      fantasy: {
        emoji: 'ðŸ§™',
        name: 'Fantasy',
        tropes: ['prophecy of the chosen one', 'magic sword', 'evil dark lord', 'band of unlikely heroes', 'dragon fight'],
        settings: ['enchanted forest', 'crumbling castle', 'underground dwarf kingdom', 'wizard academy'],
        characters: ['orphan with hidden powers', 'grumpy warrior', 'ancient elf guide']
      },
      documentary: {
        emoji: 'ðŸ“¹',
        name: 'Mockumentary',
        tropes: ['talking head interviews', 'awkward silences', 'fourth wall breaks', 'escalating absurdity', 'mundane treated as epic'],
        settings: ['boring office', 'small-town event', 'niche competition', 'failing business'],
        characters: ['clueless boss', 'deadpan employee', 'overly enthusiastic organizer']
      },
      heist: {
        emoji: 'ðŸ’Ž',
        name: 'Heist',
        tropes: ['assembling the crew', 'elaborate plan', 'last-minute twist', 'inside man', 'double cross'],
        settings: ['high-security vault', 'casino floor', 'art museum', 'moving train'],
        characters: ['mastermind getting back in the game', 'tech genius', 'acrobatic thief']
      },
      zombie: {
        emoji: 'ðŸ§Ÿ',
        name: 'Zombie',
        tropes: ['patient zero', 'barricading the mall', 'beloved character gets bitten', 'society collapses fast', 'debate about mercy killing'],
        settings: ['abandoned shopping mall', 'fortified farmhouse', 'overrun city', 'CDC bunker'],
        characters: ['reluctant leader', 'scientist seeking cure', 'trigger-happy survivor']
      },
      courtroom: {
        emoji: 'âš–ï¸',
        name: 'Courtroom Drama',
        tropes: ['surprise witness', 'dramatic objection', 'jury gasp moment', 'last-minute evidence', 'impassioned closing argument'],
        settings: ['packed courtroom', 'law firm war room', 'prison visiting room', 'judge\'s chambers'],
        characters: ['idealistic young lawyer', 'corrupt prosecutor', 'sympathetic defendant']
      },
      kaiju: {
        emoji: 'ðŸ¦–',
        name: 'Kaiju',
        tropes: ['monster awakens from the deep', 'military response fails', 'city destruction', 'scientist has the answer', 'final desperate plan'],
        settings: ['Tokyo skyline', 'military command center', 'underground bunker', 'monster\'s ancient lair'],
        characters: ['obsessed scientist', 'brave pilot', 'general who won\'t listen']
      }
    };

    const titleTemplates = [
      "{trope1} {trope2}",
      "The {adj} {noun}",
      "{noun}: {tagword}",
      "{trope1} of {place}",
      "{adj} {adj2} {noun}",
      "Night of the {noun}",
      "{trope1} & {trope2}"
    ];

    const adjectives = ['Bloody', 'Dancing', 'Singing', 'Cursed', 'Last', 'Deadly', 'Secret', 'Forbidden', 'Eternal', 'Midnight', 'Neon', 'Electric', 'Savage', 'Glamorous', 'Desperate'];
    const nouns = ['Showdown', 'Secrets', 'Revenge', 'Dreams', 'Hearts', 'Nightmares', 'Legacy', 'Redemption', 'Reckoning', 'Confession'];
    const tagwords = ['Reloaded', 'Unleashed', 'Unchained', 'Returns', 'Rising', 'Requiem', 'Redux', 'Revelations'];

    const plotTemplates = [
      "In a {setting1}, a {char1} must team up with a {char2} to survive {trope1} while dealing with {trope2}. Features {trope3} and an unforgettable {trope4}.",
      "When {trope1} meets {trope2}, a {char1} in {setting1} discovers that {trope3} is the only way to stop {trope4}. Co-starring a {char2} with trust issues.",
      "A {char1} from {setting1} gets caught up in {trope1} after {trope2} goes wrong. With a {char2} by their side, they must face {trope3} before {trope4}.",
      "Set in {setting1}, this genre-defying mashup follows a {char1} experiencing {trope1} for the first time. But when {trope2} threatens everything, only {trope3} can save the day. Expect {trope4}.",
      "{setting1} will never be the same after a {char1} unleashes {trope1}. Now a {char2} must use {trope2} to prevent {trope3}. Critics call the {trope4} 'unforgettable.'"
    ];

    const taglineTemplates = [
      "This {month}, {trope1} meets {trope2}.",
      "They sang. They slayed. They {verbed}.",
      "One {noun}. Two genres. Zero survivors.",
      "In a world of {trope1}, only {trope2} can save us.",
      "You've never seen {trope1} like this.",
      "From the studio that brought you nothing comes... everything."
    ];

    const months = ['January', 'February', 'Summer', 'Fall', 'Holiday Season', 'This Halloween'];
    const verbs = ['survived', 'danced', 'conquered', 'prevailed', 'harmonized', 'triumphed'];

    let genre1 = null;
    let genre2 = null;
    let locked = { 1: false, 2: false };
    let history = [];

    function pick(arr) {
      return arr[Math.floor(Math.random() * arr.length)];
    }

    function toggleLock(num) {
      locked[num] = !locked[num];
      const btn = document.getElementById('lock' + num);
      btn.classList.toggle('locked', locked[num]);
      btn.textContent = locked[num] ? 'ðŸ”’ Locked' : 'ðŸ”“ Lock Genre ' + num;
    }

    function generateTitle(g1, g2) {
      const template = pick(titleTemplates);
      return template
        .replace('{trope1}', pick([...g1.tropes, ...g2.tropes]).split(' ').map(w => w.charAt(0).toUpperCase() + w.slice(1)).join(' '))
        .replace('{trope2}', pick([...g1.tropes, ...g2.tropes]).split(' ').map(w => w.charAt(0).toUpperCase() + w.slice(1)).join(' '))
        .replace('{adj}', pick(adjectives))
        .replace('{adj2}', pick(adjectives))
        .replace('{noun}', pick(nouns))
        .replace('{tagword}', pick(tagwords))
        .replace('{place}', pick([...g1.settings, ...g2.settings]).split(' ').slice(-1)[0]);
    }

    function generateTagline(g1, g2) {
      const template = pick(taglineTemplates);
      return template
        .replace('{trope1}', pick([...g1.tropes, ...g2.tropes]))
        .replace('{trope2}', pick([...g1.tropes, ...g2.tropes]))
        .replace('{month}', pick(months))
        .replace('{verbed}', pick(verbs))
        .replace('{noun}', pick(nouns).toLowerCase());
    }

    function generatePlot(g1, g2) {
      const template = pick(plotTemplates);
      const allTropes = [...g1.tropes, ...g2.tropes];
      const allSettings = [...g1.settings, ...g2.settings];
      const allChars = [...g1.characters, ...g2.characters];

      return template
        .replace('{setting1}', pick(allSettings))
        .replace('{char1}', pick(allChars))
        .replace('{char2}', pick(allChars))
        .replace('{trope1}', pick(allTropes))
        .replace('{trope2}', pick(allTropes))
        .replace('{trope3}', pick(allTropes))
        .replace('{trope4}', pick(allTropes));
    }

    function mix() {
      const genreKeys = Object.keys(genres);

      if (!locked[1]) {
        let newG1;
        do {
          newG1 = pick(genreKeys);
        } while (genre2 && newG1 === genre2);
        genre1 = newG1;
      }

      if (!locked[2]) {
        let newG2;
        do {
          newG2 = pick(genreKeys);
        } while (newG2 === genre1);
        genre2 = newG2;
      }

      const g1 = genres[genre1];
      const g2 = genres[genre2];

      // Update genre cards
      document.getElementById('genre1Emoji').textContent = g1.emoji;
      document.getElementById('genre1Name').textContent = g1.name;
      document.getElementById('genre2Emoji').textContent = g2.emoji;
      document.getElementById('genre2Name').textContent = g2.name;

      // Generate movie
      const title = generateTitle(g1, g2);
      const tagline = generateTagline(g1, g2);
      const plot = generatePlot(g1, g2);

      // Display
      const panel = document.getElementById('resultPanel');
      panel.classList.remove('animate');
      void panel.offsetWidth;
      panel.classList.add('animate');

      document.getElementById('movieTitle').textContent = title;
      document.getElementById('movieTagline').textContent = `"${tagline}"`;
      document.getElementById('moviePlot').textContent = plot;

      // Trope tags
      const tags = [pick(g1.tropes), pick(g2.tropes), pick(g1.tropes), pick(g2.tropes)];
      const uniqueTags = [...new Set(tags)].slice(0, 4);
      document.getElementById('tropeTags').innerHTML = uniqueTags
        .map(t => `<span class="trope-tag">${t}</span>`)
        .join('');

      // Add to history
      const combo = `${g1.emoji} ${g1.name} + ${g2.emoji} ${g2.name}`;
      if (!history.includes(combo)) {
        history.unshift(combo);
        if (history.length > 6) history.pop();
        updateHistory();
      }

      playSound();
    }

    function updateHistory() {
      const section = document.getElementById('historySection');
      const list = document.getElementById('historyList');

      if (history.length > 0) {
        section.style.display = 'block';
        list.innerHTML = history.map(h =>
          `<span class="history-item">${h}</span>`
        ).join('');
      }
    }

    function playSound() {
      try {
        const ctx = new (window.AudioContext || window.webkitAudioContext)();

        // Film reel click
        const osc = ctx.createOscillator();
        const gain = ctx.createGain();
        osc.connect(gain);
        gain.connect(ctx.destination);
        osc.type = 'square';
        osc.frequency.setValueAtTime(150, ctx.currentTime);
        gain.gain.setValueAtTime(0.1, ctx.currentTime);
        gain.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + 0.05);
        osc.start();
        osc.stop(ctx.currentTime + 0.05);

        // Dramatic sting
        setTimeout(() => {
          const osc2 = ctx.createOscillator();
          const gain2 = ctx.createGain();
          osc2.connect(gain2);
          gain2.connect(ctx.destination);
          osc2.type = 'triangle';
          osc2.frequency.setValueAtTime(220, ctx.currentTime);
          osc2.frequency.exponentialRampToValueAtTime(440, ctx.currentTime + 0.15);
          gain2.gain.setValueAtTime(0.08, ctx.currentTime);
          gain2.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + 0.2);
          osc2.start();
          osc2.stop(ctx.currentTime + 0.2);
        }, 60);
      } catch(e) {}
    }

    // Keyboard support
    document.addEventListener('keydown', (e) => {
      if (e.code === 'Space' || e.key === 'Enter') {
        e.preventDefault();
        mix();
      }
    });
  </script>
<script src="/sloppy-header/sloppy-bar.js"></script>
</body>
</html>
