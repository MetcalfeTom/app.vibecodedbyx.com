<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Neon Bloom - Flaming Flower</title>
  <link rel="icon" href="https://emojicdn.elk.sh/ðŸŒ¸">
  <meta property="og:title" content="Neon Bloom">
  <meta property="og:description" content="A flaming neon flower that grows with your energy">
  <meta property="og:url" content="https://app.sloppy.live/neon-flower">
  <meta property="og:image" content="https://emojicdn.elk.sh/ðŸŒ¸?style=apple&size=512">
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;500;700&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      background: linear-gradient(180deg, #0a0015 0%, #150020 50%, #0a0510 100%);
      min-height: 100vh;
      overflow: hidden;
      font-family: 'Quicksand', sans-serif;
    }
    canvas { display: block; }

    .ui {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      text-align: center;
      z-index: 100;
      pointer-events: none;
    }

    .title {
      font-size: 2rem;
      font-weight: 700;
      color: #ff66aa;
      text-shadow: 0 0 30px #ff00aa, 0 0 60px #ff00aa;
      letter-spacing: 8px;
    }

    .subtitle {
      font-size: 0.9rem;
      color: rgba(255, 150, 200, 0.6);
      margin-top: 5px;
    }

    .stats {
      position: fixed;
      top: 100px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 30px;
      z-index: 100;
      pointer-events: none;
    }

    .stat {
      text-align: center;
    }

    .stat-value {
      font-size: 2rem;
      font-weight: 700;
      color: #00ffaa;
      text-shadow: 0 0 20px #00ffaa;
    }

    .stat-label {
      font-size: 0.7rem;
      color: rgba(255, 255, 255, 0.5);
      text-transform: uppercase;
      letter-spacing: 2px;
    }

    .growth-bar {
      position: fixed;
      bottom: 100px;
      left: 50%;
      transform: translateX(-50%);
      width: 300px;
      z-index: 100;
    }

    .growth-track {
      height: 12px;
      background: rgba(0, 0, 0, 0.5);
      border-radius: 6px;
      border: 1px solid #ff00aa;
      overflow: hidden;
    }

    .growth-fill {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, #ff00aa, #ffaa00, #00ffaa);
      box-shadow: 0 0 20px #ff00aa;
      transition: width 0.3s;
    }

    .growth-label {
      text-align: center;
      font-size: 0.7rem;
      color: #ff66aa;
      margin-top: 8px;
      text-shadow: 0 0 10px #ff00aa;
    }

    .tap-hint {
      position: fixed;
      bottom: 40px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 0.85rem;
      color: rgba(255, 200, 230, 0.7);
      z-index: 100;
      animation: pulse 2s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 0.5; }
      50% { opacity: 1; }
    }

    .burst {
      position: fixed;
      pointer-events: none;
      font-size: 1.5rem;
      animation: floatUp 1s ease-out forwards;
      z-index: 200;
    }

    @keyframes floatUp {
      0% { opacity: 1; transform: translateY(0) scale(1); }
      100% { opacity: 0; transform: translateY(-80px) scale(1.5); }
    }

    .backlink {
      position: fixed;
      bottom: 10px;
      right: 15px;
      color: rgba(255,255,255,0.3);
      font-size: 0.65rem;
      text-decoration: none;
      z-index: 100;
    }
    .backlink:hover { color: #ff00aa; }

    .stage-name {
      font-size: 1.2rem;
      color: #ffaa00;
      text-shadow: 0 0 15px #ffaa00;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <canvas id="garden"></canvas>

  <div class="ui">
    <div class="title">NEON BLOOM</div>
    <div class="subtitle">Feed the flower with your energy</div>
    <div class="stage-name" id="stage-name">Seed</div>
  </div>

  <div class="stats">
    <div class="stat">
      <div class="stat-value" id="energy">0</div>
      <div class="stat-label">Energy</div>
    </div>
    <div class="stat">
      <div class="stat-value" id="petals">0</div>
      <div class="stat-label">Petals</div>
    </div>
  </div>

  <div class="growth-bar">
    <div class="growth-track">
      <div class="growth-fill" id="growth-fill"></div>
    </div>
    <div class="growth-label">Growth Progress</div>
  </div>

  <div class="tap-hint">âœ¨ Tap anywhere to nurture the flower âœ¨</div>

  <a href="https://sloppy.live" class="backlink">sloppy.live</a>

  <script>
    const canvas = document.getElementById('garden');
    const ctx = canvas.getContext('2d');

    let W, H;
    function resize() {
      W = canvas.width = window.innerWidth;
      H = canvas.height = window.innerHeight;
    }
    resize();
    window.addEventListener('resize', resize);

    // Flower state
    let energy = 0;
    let growth = 0; // 0-100
    let stemHeight = 0;
    let petalCount = 0;
    let bloomPhase = 0;
    let time = 0;

    // Growth stages
    const stages = [
      { name: 'Seed', minGrowth: 0 },
      { name: 'Sprout', minGrowth: 10 },
      { name: 'Seedling', minGrowth: 25 },
      { name: 'Budding', minGrowth: 45 },
      { name: 'Blooming', minGrowth: 65 },
      { name: 'Radiant', minGrowth: 85 },
      { name: 'âœ¨ ETERNAL FLAME âœ¨', minGrowth: 100 }
    ];

    // Particles
    let fireParticles = [];
    let sparkles = [];
    let energyBursts = [];

    // Base position
    const baseX = () => W / 2;
    const baseY = () => H - 80;

    // Spawn fire particle
    function spawnFire(x, y, intensity = 1) {
      const colors = ['#ff0066', '#ff6600', '#ffaa00', '#ff00aa', '#ffff00'];
      fireParticles.push({
        x,
        y,
        vx: (Math.random() - 0.5) * 3 * intensity,
        vy: -2 - Math.random() * 4 * intensity,
        size: 5 + Math.random() * 10 * intensity,
        color: colors[Math.floor(Math.random() * colors.length)],
        life: 1,
        decay: 0.02 + Math.random() * 0.02
      });
    }

    // Spawn sparkle
    function spawnSparkle(x, y) {
      sparkles.push({
        x,
        y,
        vx: (Math.random() - 0.5) * 4,
        vy: (Math.random() - 0.5) * 4 - 2,
        size: 2 + Math.random() * 3,
        color: Math.random() > 0.5 ? '#00ffaa' : '#ff66aa',
        life: 1
      });
    }

    // Add energy (from clicks/activity)
    function addEnergy(amount, x, y) {
      energy += amount;

      // Growth increases with energy
      const growthGain = amount * 0.5 * (1 - growth / 150);
      growth = Math.min(100, growth + growthGain);

      // Burst effect
      for (let i = 0; i < 5; i++) {
        spawnSparkle(x, y);
      }

      energyBursts.push({
        x, y,
        emoji: ['ðŸŒ¸', 'âœ¨', 'ðŸ’–', 'ðŸ”¥', 'ðŸŒº'][Math.floor(Math.random() * 5)]
      });

      updateUI();
    }

    // Click handler
    canvas.addEventListener('click', e => {
      addEnergy(5, e.clientX, e.clientY);
    });

    canvas.addEventListener('touchstart', e => {
      e.preventDefault();
      const touch = e.touches[0];
      addEnergy(5, touch.clientX, touch.clientY);
    });

    // Auto activity simulation (representing chat)
    setInterval(() => {
      if (Math.random() < 0.3) {
        const x = W * 0.3 + Math.random() * W * 0.4;
        const y = H * 0.3 + Math.random() * H * 0.3;
        addEnergy(1, x, y);
      }
    }, 2000);

    // Decay over time
    setInterval(() => {
      if (growth > 0) {
        growth = Math.max(0, growth - 0.1);
        updateUI();
      }
    }, 1000);

    function updateUI() {
      document.getElementById('energy').textContent = Math.floor(energy);
      document.getElementById('petals').textContent = Math.floor(petalCount);
      document.getElementById('growth-fill').style.width = growth + '%';

      // Update stage name
      let currentStage = stages[0];
      for (const stage of stages) {
        if (growth >= stage.minGrowth) currentStage = stage;
      }
      document.getElementById('stage-name').textContent = currentStage.name;
    }

    // Draw stem
    function drawStem() {
      const targetHeight = (growth / 100) * (H * 0.45);
      stemHeight += (targetHeight - stemHeight) * 0.05;

      if (stemHeight < 5) return;

      ctx.save();
      ctx.shadowBlur = 20;
      ctx.shadowColor = '#00ff66';
      ctx.strokeStyle = '#00ff66';
      ctx.lineWidth = 8 + growth * 0.1;
      ctx.lineCap = 'round';

      // Stem with slight wave
      ctx.beginPath();
      ctx.moveTo(baseX(), baseY());

      for (let i = 0; i <= stemHeight; i += 5) {
        const wave = Math.sin(i * 0.02 + time) * (5 + growth * 0.1);
        ctx.lineTo(baseX() + wave, baseY() - i);
      }
      ctx.stroke();

      ctx.restore();
    }

    // Draw leaves
    function drawLeaves() {
      if (growth < 15) return;

      const numLeaves = Math.min(6, Math.floor((growth - 10) / 15));

      for (let i = 0; i < numLeaves; i++) {
        const y = baseY() - stemHeight * (0.2 + i * 0.15);
        const side = i % 2 === 0 ? 1 : -1;
        const wave = Math.sin(i * 0.02 + time * 2) * 3;
        const size = 20 + growth * 0.3;

        ctx.save();
        ctx.translate(baseX() + wave, y);
        ctx.rotate(side * (0.5 + Math.sin(time + i) * 0.1));

        ctx.shadowBlur = 15;
        ctx.shadowColor = '#00ffaa';
        ctx.fillStyle = '#00cc66';

        ctx.beginPath();
        ctx.moveTo(0, 0);
        ctx.quadraticCurveTo(side * size * 0.7, -size * 0.3, side * size, 0);
        ctx.quadraticCurveTo(side * size * 0.7, size * 0.3, 0, 0);
        ctx.fill();

        // Leaf vein
        ctx.strokeStyle = '#00ff88';
        ctx.lineWidth = 1;
        ctx.beginPath();
        ctx.moveTo(0, 0);
        ctx.lineTo(side * size * 0.8, 0);
        ctx.stroke();

        ctx.restore();
      }
    }

    // Draw flower center
    function drawCenter() {
      if (growth < 40) return;

      const centerY = baseY() - stemHeight;
      const centerSize = 15 + (growth - 40) * 0.4;

      ctx.save();
      ctx.shadowBlur = 30;
      ctx.shadowColor = '#ffaa00';

      // Outer glow
      const gradient = ctx.createRadialGradient(
        baseX(), centerY, 0,
        baseX(), centerY, centerSize * 1.5
      );
      gradient.addColorStop(0, '#ffdd00');
      gradient.addColorStop(0.5, '#ffaa00');
      gradient.addColorStop(1, 'transparent');

      ctx.fillStyle = gradient;
      ctx.beginPath();
      ctx.arc(baseX(), centerY, centerSize * 1.5, 0, Math.PI * 2);
      ctx.fill();

      // Center
      ctx.fillStyle = '#ffcc00';
      ctx.beginPath();
      ctx.arc(baseX(), centerY, centerSize, 0, Math.PI * 2);
      ctx.fill();

      // Inner pattern
      ctx.fillStyle = '#ff8800';
      for (let i = 0; i < 8; i++) {
        const angle = (i / 8) * Math.PI * 2 + time;
        const x = baseX() + Math.cos(angle) * centerSize * 0.5;
        const y = centerY + Math.sin(angle) * centerSize * 0.5;
        ctx.beginPath();
        ctx.arc(x, y, 3, 0, Math.PI * 2);
        ctx.fill();
      }

      ctx.restore();
    }

    // Draw petals
    function drawPetals() {
      if (growth < 50) return;

      const targetPetals = Math.min(12, Math.floor((growth - 45) / 4));
      petalCount += (targetPetals - petalCount) * 0.1;

      const centerY = baseY() - stemHeight;
      const petalLength = 40 + growth * 0.5;

      const colors = [
        { main: '#ff0088', glow: '#ff00aa' },
        { main: '#ff00cc', glow: '#ff66dd' },
        { main: '#ff3399', glow: '#ff66bb' },
        { main: '#ff0066', glow: '#ff3388' }
      ];

      for (let i = 0; i < Math.floor(petalCount); i++) {
        const angle = (i / 12) * Math.PI * 2 - Math.PI / 2 + time * 0.2;
        const color = colors[i % colors.length];
        const pulse = 1 + Math.sin(time * 3 + i) * 0.1;
        const length = petalLength * pulse;

        ctx.save();
        ctx.translate(baseX(), centerY);
        ctx.rotate(angle);

        ctx.shadowBlur = 25;
        ctx.shadowColor = color.glow;

        // Petal shape
        ctx.fillStyle = color.main;
        ctx.beginPath();
        ctx.moveTo(0, 0);
        ctx.quadraticCurveTo(length * 0.3, -length * 0.3, length, 0);
        ctx.quadraticCurveTo(length * 0.3, length * 0.3, 0, 0);
        ctx.fill();

        // Petal highlight
        ctx.fillStyle = 'rgba(255, 255, 255, 0.3)';
        ctx.beginPath();
        ctx.ellipse(length * 0.4, 0, length * 0.2, length * 0.08, 0, 0, Math.PI * 2);
        ctx.fill();

        ctx.restore();
      }
    }

    // Draw flames
    function drawFlames() {
      if (growth < 60) return;

      const centerY = baseY() - stemHeight;
      const intensity = (growth - 60) / 40;

      // Spawn flames
      if (Math.random() < 0.3 * intensity) {
        const angle = Math.random() * Math.PI * 2;
        const dist = 30 + growth * 0.4;
        spawnFire(
          baseX() + Math.cos(angle) * dist,
          centerY + Math.sin(angle) * dist * 0.5,
          intensity
        );
      }

      // Update and draw fire particles
      fireParticles.forEach(p => {
        p.x += p.vx;
        p.y += p.vy;
        p.vy -= 0.1; // Rise up
        p.life -= p.decay;
        p.size *= 0.97;

        if (p.life > 0) {
          ctx.save();
          ctx.globalAlpha = p.life;
          ctx.shadowBlur = 20;
          ctx.shadowColor = p.color;
          ctx.fillStyle = p.color;
          ctx.beginPath();
          ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
          ctx.fill();
          ctx.restore();
        }
      });

      fireParticles = fireParticles.filter(p => p.life > 0);
    }

    // Draw sparkles
    function drawSparkles() {
      sparkles.forEach(p => {
        p.x += p.vx;
        p.y += p.vy;
        p.vy += 0.05;
        p.life -= 0.02;

        if (p.life > 0) {
          ctx.save();
          ctx.globalAlpha = p.life;
          ctx.shadowBlur = 15;
          ctx.shadowColor = p.color;
          ctx.fillStyle = p.color;
          ctx.beginPath();
          ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
          ctx.fill();
          ctx.restore();
        }
      });

      sparkles = sparkles.filter(p => p.life > 0);
    }

    // Draw background particles
    function drawBackground() {
      // Floating particles
      for (let i = 0; i < 30; i++) {
        const x = (i * 137 + time * 20) % W;
        const y = (i * 89 + Math.sin(time + i) * 50) % H;
        const alpha = 0.1 + Math.sin(time * 2 + i) * 0.1;

        ctx.fillStyle = `rgba(255, 100, 200, ${alpha})`;
        ctx.beginPath();
        ctx.arc(x, y, 2, 0, Math.PI * 2);
        ctx.fill();
      }
    }

    // Draw ground glow
    function drawGround() {
      const gradient = ctx.createRadialGradient(
        baseX(), baseY() + 20, 0,
        baseX(), baseY() + 20, 200 + growth * 2
      );
      gradient.addColorStop(0, `rgba(0, 255, 100, ${0.1 + growth * 0.003})`);
      gradient.addColorStop(0.5, `rgba(255, 0, 150, ${0.05 + growth * 0.002})`);
      gradient.addColorStop(1, 'transparent');

      ctx.fillStyle = gradient;
      ctx.fillRect(0, baseY() - 100, W, H - baseY() + 100);
    }

    // Draw energy bursts (emoji)
    function drawBursts() {
      energyBursts.forEach((burst, i) => {
        const el = document.createElement('div');
        el.className = 'burst';
        el.textContent = burst.emoji;
        el.style.left = burst.x + 'px';
        el.style.top = burst.y + 'px';
        document.body.appendChild(el);

        setTimeout(() => el.remove(), 1000);
      });
      energyBursts = [];
    }

    // Main draw loop
    function draw() {
      ctx.fillStyle = 'rgba(10, 0, 21, 0.3)';
      ctx.fillRect(0, 0, W, H);

      drawBackground();
      drawGround();
      drawStem();
      drawLeaves();
      drawPetals();
      drawCenter();
      drawFlames();
      drawSparkles();
      drawBursts();
    }

    // Animation loop
    let lastTime = 0;
    function animate(timestamp) {
      requestAnimationFrame(animate);

      const dt = (timestamp - lastTime) / 1000;
      lastTime = timestamp;
      time += dt;

      bloomPhase += dt;

      draw();
    }

    updateUI();
    animate(0);
  </script>
<script src="/sloppy-header/sloppy-bar.js"></script>
</body>
</html>
