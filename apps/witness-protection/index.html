<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>Witness Protection Avatar Creator</title>
  <link rel="icon" href="https://emojicdn.elk.sh/üïµÔ∏è">
  <meta name="description" content="Create your new identity. No questions asked.">
  <meta property="og:title" content="Witness Protection Avatar Creator">
  <meta property="og:description" content="Create your new identity. No questions asked.">
  <meta property="og:image" content="https://emojicdn.elk.sh/üïµÔ∏è?style=google">
  <meta property="og:url" content="https://app.sloppy.live/witness-protection">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Russo+One&display=swap');

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      min-height: 100vh;
      background: #0a0a0f;
      font-family: 'Share Tech Mono', monospace;
      color: #fff;
    }

    .back-link {
      position: fixed;
      top: 10px;
      left: 15px;
      color: rgba(255,255,255,0.3);
      text-decoration: none;
      font-size: 0.7rem;
      z-index: 100;
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
      padding: 50px 20px 40px;
    }

    .header {
      text-align: center;
      margin-bottom: 30px;
    }

    .badge {
      display: inline-block;
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
      border: 2px solid #e94560;
      padding: 15px 30px;
      border-radius: 10px;
      margin-bottom: 15px;
    }

    .badge-text {
      font-family: 'Russo One', sans-serif;
      font-size: 0.7rem;
      color: #e94560;
      letter-spacing: 4px;
    }

    .title {
      font-family: 'Russo One', sans-serif;
      font-size: 1.8rem;
      color: #fff;
      text-transform: uppercase;
      letter-spacing: 3px;
    }

    .subtitle {
      color: #666;
      font-size: 0.8rem;
      margin-top: 10px;
    }

    .main-area {
      display: grid;
      grid-template-columns: 1fr 300px;
      gap: 30px;
    }

    @media (max-width: 768px) {
      .main-area {
        grid-template-columns: 1fr;
      }
    }

    .avatar-stage {
      background: linear-gradient(135deg, #1a1a2e 0%, #0f0f1a 100%);
      border: 2px solid #333;
      border-radius: 15px;
      padding: 30px;
      text-align: center;
    }

    .avatar-container {
      position: relative;
      width: 250px;
      height: 300px;
      margin: 0 auto 20px;
      background: linear-gradient(180deg, #2a2a3e 0%, #1a1a2e 100%);
      border-radius: 15px;
      overflow: hidden;
    }

    .avatar-layer {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 8rem;
      pointer-events: none;
    }

    .face-layer { z-index: 1; }
    .hair-layer { z-index: 2; }
    .eyes-layer { z-index: 3; }
    .nose-layer { z-index: 4; }
    .mouth-layer { z-index: 5; }
    .accessory-layer { z-index: 6; }

    .pixelated {
      image-rendering: pixelated;
      filter: url(#pixelate);
    }

    .identity-bar {
      background: #000;
      padding: 15px;
      border-radius: 8px;
      margin-top: 15px;
    }

    .identity-label {
      font-size: 0.65rem;
      color: #e94560;
      letter-spacing: 2px;
      margin-bottom: 5px;
    }

    .identity-name {
      font-family: 'Russo One', sans-serif;
      font-size: 1.2rem;
      color: #0f0;
    }

    .classified-stamp {
      color: #e94560;
      font-size: 2rem;
      opacity: 0.3;
      transform: rotate(-15deg);
      position: absolute;
      top: 20px;
      right: 20px;
    }

    .controls {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .control-section {
      background: rgba(255,255,255,0.03);
      border: 1px solid #333;
      border-radius: 10px;
      padding: 15px;
    }

    .section-title {
      font-size: 0.7rem;
      color: #e94560;
      letter-spacing: 2px;
      margin-bottom: 12px;
      text-transform: uppercase;
    }

    .option-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 8px;
    }

    .option-btn {
      aspect-ratio: 1;
      background: #1a1a2e;
      border: 2px solid #333;
      border-radius: 8px;
      font-size: 1.5rem;
      cursor: pointer;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .option-btn:hover {
      border-color: #e94560;
      transform: scale(1.1);
    }

    .option-btn.active {
      border-color: #0f0;
      background: rgba(0,255,0,0.1);
      box-shadow: 0 0 15px rgba(0,255,0,0.3);
    }

    .action-buttons {
      display: flex;
      gap: 10px;
      margin-top: 15px;
    }

    .action-btn {
      flex: 1;
      padding: 12px;
      background: linear-gradient(135deg, #e94560 0%, #c73e54 100%);
      border: none;
      border-radius: 8px;
      color: #fff;
      font-family: 'Share Tech Mono', monospace;
      font-size: 0.75rem;
      cursor: pointer;
      transition: all 0.2s;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .action-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 20px rgba(233,69,96,0.4);
    }

    .action-btn.secondary {
      background: linear-gradient(135deg, #333 0%, #222 100%);
    }

    .warning {
      margin-top: 20px;
      padding: 15px;
      background: rgba(233,69,96,0.1);
      border-left: 3px solid #e94560;
      font-size: 0.7rem;
      color: #888;
    }

    .toby-note {
      text-align: center;
      margin-top: 25px;
      font-size: 0.7rem;
      color: #444;
    }

    /* Pixelation filter */
    .pixel-overlay {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 6rem;
      z-index: 10;
    }

    .scanlines {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: repeating-linear-gradient(
        0deg,
        transparent,
        transparent 2px,
        rgba(0,0,0,0.1) 2px,
        rgba(0,0,0,0.1) 4px
      );
      pointer-events: none;
      z-index: 20;
    }
  </style>
</head>
<body>
  <a href="https://sloppy.live" class="back-link">‚Üê abort mission</a>

  <div class="container">
    <div class="header">
      <div class="badge">
        <div class="badge-text">FEDERAL WITNESS PROTECTION</div>
      </div>
      <div class="title">Identity Creator</div>
      <div class="subtitle">Your old life is over. Choose wisely.</div>
    </div>

    <div class="main-area">
      <div class="avatar-stage">
        <div class="classified-stamp">CLASSIFIED</div>
        <div class="avatar-container" id="avatarContainer">
          <div class="avatar-layer face-layer" id="faceLayer">üòê</div>
          <div class="avatar-layer hair-layer" id="hairLayer"></div>
          <div class="avatar-layer eyes-layer" id="eyesLayer"></div>
          <div class="avatar-layer nose-layer" id="noseLayer"></div>
          <div class="avatar-layer mouth-layer" id="mouthLayer"></div>
          <div class="avatar-layer accessory-layer" id="accessoryLayer"></div>
          <div class="pixel-overlay" id="pixelOverlay"></div>
          <div class="scanlines"></div>
        </div>

        <div class="identity-bar">
          <div class="identity-label">NEW IDENTITY</div>
          <div class="identity-name" id="newName">GENERATING...</div>
        </div>

        <div class="action-buttons">
          <button class="action-btn" onclick="randomize()">üé≤ Randomize</button>
          <button class="action-btn secondary" onclick="newIdentity()">üîÑ New Name</button>
          <button class="action-btn secondary" onclick="downloadAvatar()">üíæ Save</button>
        </div>
      </div>

      <div class="controls">
        <div class="control-section">
          <div class="section-title">üë§ Base Face</div>
          <div class="option-grid" id="faceOptions"></div>
        </div>

        <div class="control-section">
          <div class="section-title">üï∂Ô∏è Eye Disguise</div>
          <div class="option-grid" id="eyeOptions"></div>
        </div>

        <div class="control-section">
          <div class="section-title">üëÉ Nose Cover</div>
          <div class="option-grid" id="noseOptions"></div>
        </div>

        <div class="control-section">
          <div class="section-title">ü•∏ Facial Hair</div>
          <div class="option-grid" id="mouthOptions"></div>
        </div>

        <div class="control-section">
          <div class="section-title">üé© Headwear</div>
          <div class="option-grid" id="hairOptions"></div>
        </div>

        <div class="control-section">
          <div class="section-title">‚ú® Extra</div>
          <div class="option-grid" id="accessoryOptions"></div>
        </div>
      </div>
    </div>

    <div class="warning">
      ‚ö†Ô∏è WARNING: This identity is for entertainment purposes only.
      Actual witness protection requires federal authorization.
      Looking at you, Toby.
    </div>

    <div class="toby-note">
      Toby, a fake mustache won't hide you from your failed jailbreak attempts.
    </div>
  </div>

  <script>
    const options = {
      face: ['üòê', 'üò∂', 'üôÇ', 'üòë', 'ü´•', 'üë§', 'üßë', 'üë®'],
      eyes: ['', 'üï∂Ô∏è', 'üëì', 'ü•Ω', 'üòé', 'ü§ì', '‚ñ™Ô∏è‚ñ™Ô∏è', '‚¨õ'],
      nose: ['', 'üî¥', 'ü§°', 'üëÉ', 'üêΩ', '‚ö´'],
      mouth: ['', 'ü•∏', 'üë®‚Äçü¶∞', 'üë®‚Äçü¶≥', 'üßî', 'üßî‚Äç‚ôÇÔ∏è', 'üë∫', 'üò∑'],
      hair: ['', 'üé©', 'üß¢', 'üëí', 'üéì', '‚õëÔ∏è', 'ü™ñ', 'üëë'],
      accessory: ['', 'üî≤', 'üìç', '‚ùå', '‚≠ï', 'üö´', '‚ùì', 'üè∑Ô∏è']
    };

    const firstNames = [
      'John', 'Jane', 'Mike', 'Sarah', 'Bob', 'Lisa', 'Tom', 'Emma',
      'Jack', 'Olivia', 'David', 'Sophie', 'James', 'Emily', 'Robert', 'Anna',
      'Definitely Not Toby', 'Totally Normal Person', 'Average Joe', 'Nobody Special'
    ];

    const lastNames = [
      'Smith', 'Johnson', 'Williams', 'Brown', 'Jones', 'Garcia', 'Miller', 'Davis',
      'Wilson', 'Anderson', 'Taylor', 'Thomas', 'Moore', 'Martin', 'Jackson', 'White',
      'McNotacriminal', 'Legitimateson', 'Realperson', 'Notfake'
    ];

    let current = {
      face: 0,
      eyes: 0,
      nose: 0,
      mouth: 0,
      hair: 0,
      accessory: 0
    };

    function createOptionButtons(category, containerId) {
      const container = document.getElementById(containerId);
      options[category].forEach((opt, idx) => {
        const btn = document.createElement('button');
        btn.className = 'option-btn' + (idx === 0 ? ' active' : '');
        btn.textContent = opt || '‚ùå';
        btn.onclick = () => selectOption(category, idx, containerId);
        container.appendChild(btn);
      });
    }

    function selectOption(category, idx, containerId) {
      current[category] = idx;

      // Update active state
      const container = document.getElementById(containerId);
      container.querySelectorAll('.option-btn').forEach((btn, i) => {
        btn.classList.toggle('active', i === idx);
      });

      updateAvatar();
    }

    function updateAvatar() {
      document.getElementById('faceLayer').textContent = options.face[current.face];

      // Eyes - special handling for pixelated bar
      const eyeOpt = options.eyes[current.eyes];
      const eyesLayer = document.getElementById('eyesLayer');
      if (eyeOpt === '‚ñ™Ô∏è‚ñ™Ô∏è' || eyeOpt === '‚¨õ') {
        eyesLayer.innerHTML = `<div style="background:#000;width:80%;height:30px;margin-top:-30px;"></div>`;
      } else {
        eyesLayer.innerHTML = `<span style="margin-top:-20px;font-size:4rem;">${eyeOpt}</span>`;
      }

      document.getElementById('noseLayer').innerHTML =
        `<span style="margin-top:20px;font-size:3rem;">${options.nose[current.nose]}</span>`;

      document.getElementById('mouthLayer').innerHTML =
        `<span style="margin-top:60px;font-size:4rem;">${options.mouth[current.mouth]}</span>`;

      document.getElementById('hairLayer').innerHTML =
        `<span style="margin-top:-80px;font-size:4rem;">${options.hair[current.hair]}</span>`;

      // Accessory overlay
      const accOpt = options.accessory[current.accessory];
      const pixelOverlay = document.getElementById('pixelOverlay');
      if (accOpt === 'üî≤') {
        pixelOverlay.innerHTML = `<div style="background:rgba(0,0,0,0.8);width:150px;height:50px;margin-top:-20px;"></div>`;
      } else {
        pixelOverlay.textContent = accOpt;
      }
    }

    function newIdentity() {
      const first = firstNames[Math.floor(Math.random() * firstNames.length)];
      const last = lastNames[Math.floor(Math.random() * lastNames.length)];
      document.getElementById('newName').textContent = `${first} ${last}`.toUpperCase();
    }

    function randomize() {
      Object.keys(current).forEach(key => {
        const idx = Math.floor(Math.random() * options[key].length);
        current[key] = idx;

        const containerId = key + 'Options';
        const container = document.getElementById(containerId);
        if (container) {
          container.querySelectorAll('.option-btn').forEach((btn, i) => {
            btn.classList.toggle('active', i === idx);
          });
        }
      });

      updateAvatar();
      newIdentity();
    }

    function downloadAvatar() {
      // Create a simple text representation
      const identity = document.getElementById('newName').textContent;
      alert(`Identity "${identity}" has been registered.\n\nYour cover is now active.\n\nDestroy this message.`);
    }

    // Initialize
    createOptionButtons('face', 'faceOptions');
    createOptionButtons('eyes', 'eyeOptions');
    createOptionButtons('nose', 'noseOptions');
    createOptionButtons('mouth', 'mouthOptions');
    createOptionButtons('hair', 'hairOptions');
    createOptionButtons('accessory', 'accessoryOptions');

    newIdentity();
    updateAvatar();
  </script>
<script src="/apps/sloppy-header/sloppy-bar.js"></script>
<script src="/vibelib-extended.js"></script>
<script>
  // Compatibility Patch for Legacy Apps
  window.addEventListener("load", () => {
    if (window.SloppyKarma && window.VibeLib.Economy) {
      // Redirect old calls to new engine
      window.SloppyKarma.track = window.VibeLib.Economy.track;
    }
  });
</script>
</body>
</html>
