<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grave Generator - Write Your Epitaph</title>
    <link rel="icon" href="https://emojicdn.elk.sh/ü™¶">

    <meta property="og:title" content="Grave Generator">
    <meta property="og:description" content="Create your own weird digital tombstone with a custom epitaph. What will YOUR gravestone say?">
    <meta property="og:url" content="https://app.sloppy.live/grave-generator">
    <meta property="og:image" content="https://image.pollinations.ai/prompt/cartoon%20tombstone%20gravestone%20with%20funny%20epitaph%20spooky%20cute%20halloween%20style?width=1200&height=630&nologo=true">
    <meta property="og:type" content="website">

    <link href="https://fonts.googleapis.com/css2?family=Creepster&family=IM+Fell+English+SC&family=UnifrakturMaguntia&display=swap" rel="stylesheet">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(180deg, #1a1a2e 0%, #16213e 50%, #1a1a2e 100%);
            min-height: 100vh;
            color: #e0e0e0;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
        }

        h1 {
            font-family: 'Creepster', cursive;
            font-size: 3rem;
            color: #9b59b6;
            text-shadow: 3px 3px 0 #1a1a2e, 0 0 20px rgba(155, 89, 182, 0.5);
            margin-bottom: 10px;
        }

        .subtitle {
            color: #888;
            font-style: italic;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }

        @media (max-width: 700px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            h1 {
                font-size: 2rem;
            }
        }

        .editor-panel {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid #333;
        }

        .section-title {
            font-family: 'Creepster', cursive;
            font-size: 1.3rem;
            color: #9b59b6;
            margin-bottom: 15px;
        }

        .form-group {
            margin-bottom: 16px;
        }

        label {
            display: block;
            margin-bottom: 6px;
            color: #aaa;
            font-size: 0.9rem;
        }

        input, textarea, select {
            width: 100%;
            padding: 10px 12px;
            background: #1a1a2e;
            border: 2px solid #333;
            border-radius: 8px;
            color: #e0e0e0;
            font-family: inherit;
            font-size: 1rem;
            transition: border-color 0.2s;
        }

        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: #9b59b6;
        }

        textarea {
            resize: vertical;
            min-height: 80px;
        }

        .style-options {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
        }

        .style-option {
            padding: 12px 8px;
            background: #1a1a2e;
            border: 2px solid #333;
            border-radius: 8px;
            cursor: pointer;
            text-align: center;
            transition: all 0.2s;
        }

        .style-option:hover {
            border-color: #666;
        }

        .style-option.selected {
            border-color: #9b59b6;
            background: rgba(155, 89, 182, 0.2);
        }

        .style-option .icon {
            font-size: 1.5rem;
            margin-bottom: 4px;
        }

        .style-option .name {
            font-size: 0.75rem;
            color: #888;
        }

        .inspiration-btn {
            width: 100%;
            padding: 12px;
            background: linear-gradient(135deg, #9b59b6, #8e44ad);
            border: none;
            border-radius: 8px;
            color: white;
            font-family: inherit;
            font-size: 1rem;
            cursor: pointer;
            margin-top: 10px;
            transition: transform 0.1s;
        }

        .inspiration-btn:hover {
            transform: scale(1.02);
        }

        .preview-panel {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .grave-container {
            position: relative;
            padding: 20px;
        }

        /* Ground */
        .ground {
            position: absolute;
            bottom: 0;
            left: -20px;
            right: -20px;
            height: 40px;
            background: linear-gradient(180deg, #2d5016 0%, #1a3009 100%);
            border-radius: 50% 50% 0 0 / 20px 20px 0 0;
        }

        .grass {
            position: absolute;
            bottom: 35px;
            font-size: 12px;
            color: #3d6b1e;
            letter-spacing: 2px;
        }

        .grass.left { left: 10px; }
        .grass.right { right: 10px; }

        /* Tombstone styles */
        .tombstone {
            position: relative;
            width: 280px;
            min-height: 350px;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 30px 20px;
            z-index: 1;
        }

        /* Classic rounded */
        .tombstone.classic {
            background: linear-gradient(180deg, #666 0%, #555 50%, #444 100%);
            border-radius: 140px 140px 10px 10px;
            box-shadow: inset 0 0 30px rgba(0,0,0,0.5), 5px 5px 20px rgba(0,0,0,0.5);
        }

        /* Gothic pointed */
        .tombstone.gothic {
            background: linear-gradient(180deg, #4a4a4a 0%, #333 100%);
            clip-path: polygon(50% 0%, 100% 15%, 100% 100%, 0% 100%, 0% 15%);
            box-shadow: 5px 5px 20px rgba(0,0,0,0.5);
        }

        /* Cross style */
        .tombstone.cross {
            background: linear-gradient(180deg, #5a5a5a 0%, #3a3a3a 100%);
            border-radius: 5px;
            box-shadow: 5px 5px 20px rgba(0,0,0,0.5);
        }

        .tombstone.cross::before {
            content: '‚úù';
            position: absolute;
            top: 15px;
            font-size: 40px;
            color: #777;
        }

        /* Heart shape */
        .tombstone.heart {
            background: linear-gradient(180deg, #8b6b8b 0%, #5a4a5a 100%);
            border-radius: 10px;
            box-shadow: 5px 5px 20px rgba(0,0,0,0.5);
        }

        .tombstone.heart::before {
            content: '‚ô•';
            position: absolute;
            top: 15px;
            font-size: 35px;
            color: #a88ba8;
        }

        /* Angel style */
        .tombstone.angel {
            background: linear-gradient(180deg, #f5f5dc 0%, #d4c4a8 100%);
            border-radius: 100px 100px 10px 10px;
            box-shadow: 5px 5px 20px rgba(0,0,0,0.5);
        }

        .tombstone.angel::before {
            content: 'üëº';
            position: absolute;
            top: -20px;
            font-size: 40px;
        }

        /* Spooky */
        .tombstone.spooky {
            background: linear-gradient(180deg, #2a2a2a 0%, #1a1a1a 100%);
            border-radius: 80px 80px 10px 10px;
            box-shadow: 5px 5px 20px rgba(0,0,0,0.8), 0 0 30px rgba(100, 50, 150, 0.3);
            border: 2px solid #444;
        }

        .tombstone.spooky::before {
            content: 'üíÄ';
            position: absolute;
            top: 20px;
            font-size: 35px;
        }

        .tombstone-text {
            text-align: center;
            margin-top: 50px;
            width: 100%;
        }

        .tombstone-name {
            font-family: 'IM Fell English SC', serif;
            font-size: 1.6rem;
            color: #222;
            text-shadow: 1px 1px 0 #888;
            margin-bottom: 10px;
            word-wrap: break-word;
        }

        .tombstone.spooky .tombstone-name,
        .tombstone.gothic .tombstone-name {
            color: #999;
            text-shadow: 1px 1px 0 #000;
        }

        .tombstone-dates {
            font-family: 'IM Fell English SC', serif;
            font-size: 1rem;
            color: #444;
            margin-bottom: 15px;
        }

        .tombstone.spooky .tombstone-dates,
        .tombstone.gothic .tombstone-dates {
            color: #777;
        }

        .tombstone-epitaph {
            font-family: 'IM Fell English SC', serif;
            font-size: 1.1rem;
            color: #333;
            font-style: italic;
            line-height: 1.5;
            padding: 0 10px;
            word-wrap: break-word;
        }

        .tombstone.spooky .tombstone-epitaph,
        .tombstone.gothic .tombstone-epitaph {
            color: #aaa;
        }

        .tombstone-rip {
            font-family: 'UnifrakturMaguntia', cursive;
            font-size: 1.8rem;
            color: #333;
            margin-bottom: 10px;
        }

        .tombstone.spooky .tombstone-rip,
        .tombstone.gothic .tombstone-rip {
            color: #888;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .action-btn {
            padding: 10px 20px;
            background: #333;
            border: 2px solid #555;
            border-radius: 8px;
            color: #e0e0e0;
            font-family: inherit;
            cursor: pointer;
            transition: all 0.2s;
        }

        .action-btn:hover {
            background: #444;
            border-color: #9b59b6;
        }

        .backlink {
            text-align: center;
            margin-top: 30px;
            font-size: 12px;
            color: #555;
        }

        .backlink a {
            color: #9b59b6;
            text-decoration: none;
        }

        .pg-notice {
            text-align: center;
            font-size: 0.8rem;
            color: #666;
            margin-top: 10px;
            font-style: italic;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ü™¶ Grave Generator</h1>
            <p class="subtitle">What will YOUR tombstone say?</p>
        </header>

        <div class="main-content">
            <div class="editor-panel">
                <h2 class="section-title">‚úçÔ∏è Write Your Epitaph</h2>

                <div class="form-group">
                    <label>Name</label>
                    <input type="text" id="nameInput" placeholder="Your name here" maxlength="30" value="Here Lies Reader">
                </div>

                <div class="form-group">
                    <label>Birth Year</label>
                    <input type="text" id="birthYear" placeholder="1990" maxlength="4" value="1990">
                </div>

                <div class="form-group">
                    <label>Death Year</label>
                    <input type="text" id="deathYear" placeholder="2099" maxlength="4" value="2099">
                </div>

                <div class="form-group">
                    <label>Epitaph</label>
                    <textarea id="epitaphInput" placeholder="Write something memorable..." maxlength="150">Died doing what they loved: ignoring low battery warnings</textarea>
                </div>

                <p class="pg-notice">Keep it PG and family-friendly!</p>

                <button class="inspiration-btn" onclick="randomEpitaph()">üé≤ Random Weird Epitaph</button>

                <h2 class="section-title" style="margin-top: 20px;">ü™¶ Tombstone Style</h2>

                <div class="style-options">
                    <div class="style-option selected" data-style="classic" onclick="setStyle('classic')">
                        <div class="icon">ü™¶</div>
                        <div class="name">Classic</div>
                    </div>
                    <div class="style-option" data-style="gothic" onclick="setStyle('gothic')">
                        <div class="icon">‚õ™</div>
                        <div class="name">Gothic</div>
                    </div>
                    <div class="style-option" data-style="cross" onclick="setStyle('cross')">
                        <div class="icon">‚úùÔ∏è</div>
                        <div class="name">Cross</div>
                    </div>
                    <div class="style-option" data-style="heart" onclick="setStyle('heart')">
                        <div class="icon">üíú</div>
                        <div class="name">Heart</div>
                    </div>
                    <div class="style-option" data-style="angel" onclick="setStyle('angel')">
                        <div class="icon">üëº</div>
                        <div class="name">Angel</div>
                    </div>
                    <div class="style-option" data-style="spooky" onclick="setStyle('spooky')">
                        <div class="icon">üíÄ</div>
                        <div class="name">Spooky</div>
                    </div>
                </div>
            </div>

            <div class="preview-panel">
                <h2 class="section-title">üëÄ Preview</h2>

                <div class="grave-container" id="graveContainer">
                    <div class="tombstone classic" id="tombstone">
                        <div class="tombstone-text">
                            <div class="tombstone-rip">R.I.P.</div>
                            <div class="tombstone-name" id="displayName">Here Lies Reader</div>
                            <div class="tombstone-dates" id="displayDates">1990 - 2099</div>
                            <div class="tombstone-epitaph" id="displayEpitaph">"Died doing what they loved: ignoring low battery warnings"</div>
                        </div>
                    </div>
                    <div class="ground"></div>
                    <div class="grass left">üå±üåøüå±</div>
                    <div class="grass right">üåøüå±üåø</div>
                </div>

                <div class="action-buttons">
                    <button class="action-btn" onclick="downloadImage()">üì• Download</button>
                    <button class="action-btn" onclick="copyText()">üìã Copy Text</button>
                    <button class="action-btn" onclick="shareGrave()">üîó Share</button>
                </div>
            </div>
        </div>

        <div class="backlink">
            Built with ‚ö∞Ô∏è at <a href="https://sloppy.live">sloppy.live</a>
        </div>
    </div>

    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <script>
        // Weird but PG epitaphs
        const EPITAPHS = [
            "Died doing what they loved: ignoring low battery warnings",
            "Finally got out of replying to emails",
            "BRB - checking if there's WiFi in heaven",
            "Alexa, skip",
            "I told you I was sick",
            "Here lies someone who never finished their to-do list",
            "Paused indefinitely",
            "Gone to clear their browser history in person",
            "Finally achieved inbox zero",
            "Respawning...",
            "404: Life not found",
            "Died waiting for their food delivery",
            "At least I don't have to update my password anymore",
            "Went offline permanently",
            "Left the group chat",
            "Unsubscribed from life",
            "Last seen: just now",
            "Buffering forever",
            "Gone to see if my plants survived",
            "Finally finished that Netflix queue",
            "Ghosting everyone now, literally",
            "Out of office forever",
            "Ctrl+Alt+Deleted",
            "Died before the sequel came out",
            "Here lies someone who peaked early",
            "Gone to restart the router in the sky",
            "Finally stopped procrastinating",
            "Swiped right on the afterlife",
            "Logging off",
            "Gone to debug the matrix",
            "Told you that burrito was sus",
            "Died of secondhand embarrassment",
            "Here by popular demand",
            "Back in 5 minutes (lied)",
            "Connection lost",
            "Achievement unlocked: Game Over",
            "Still waiting for Half-Life 3",
            "Gone to touch grass permanently",
            "Napped too hard",
            "Died from cringe",
            "Here lies someone who read the terms and conditions",
            "Finally escaped the simulation",
            "Loading next level...",
            "Error 503: Service unavailable",
            "Went to get milk",
        ];

        let currentStyle = 'classic';

        // Update preview in real-time
        document.getElementById('nameInput').addEventListener('input', updatePreview);
        document.getElementById('birthYear').addEventListener('input', updatePreview);
        document.getElementById('deathYear').addEventListener('input', updatePreview);
        document.getElementById('epitaphInput').addEventListener('input', updatePreview);

        function updatePreview() {
            const name = document.getElementById('nameInput').value || 'Unknown';
            const birth = document.getElementById('birthYear').value || '????';
            const death = document.getElementById('deathYear').value || '????';
            const epitaph = document.getElementById('epitaphInput').value || '';

            document.getElementById('displayName').textContent = name;
            document.getElementById('displayDates').textContent = `${birth} - ${death}`;
            document.getElementById('displayEpitaph').textContent = epitaph ? `"${epitaph}"` : '';
        }

        function setStyle(style) {
            currentStyle = style;

            // Update selection
            document.querySelectorAll('.style-option').forEach(opt => {
                opt.classList.toggle('selected', opt.dataset.style === style);
            });

            // Update tombstone class
            const tombstone = document.getElementById('tombstone');
            tombstone.className = 'tombstone ' + style;
        }

        function randomEpitaph() {
            const epitaph = EPITAPHS[Math.floor(Math.random() * EPITAPHS.length)];
            document.getElementById('epitaphInput').value = epitaph;
            updatePreview();
        }

        async function downloadImage() {
            try {
                const container = document.getElementById('graveContainer');
                const canvas = await html2canvas(container, {
                    backgroundColor: '#1a1a2e',
                    scale: 2
                });

                const link = document.createElement('a');
                link.download = 'my-tombstone.png';
                link.href = canvas.toDataURL('image/png');
                link.click();
            } catch (e) {
                alert('Could not generate image. Try a screenshot instead!');
            }
        }

        function copyText() {
            const name = document.getElementById('nameInput').value;
            const birth = document.getElementById('birthYear').value;
            const death = document.getElementById('deathYear').value;
            const epitaph = document.getElementById('epitaphInput').value;

            const text = `ü™¶ R.I.P.\n${name}\n${birth} - ${death}\n"${epitaph}"\n\nMade at sloppy.live/grave-generator`;

            navigator.clipboard.writeText(text).then(() => {
                alert('Epitaph copied to clipboard!');
            }).catch(() => {
                prompt('Copy this text:', text);
            });
        }

        function shareGrave() {
            const name = document.getElementById('nameInput').value;
            const epitaph = document.getElementById('epitaphInput').value;

            const text = `ü™¶ My tombstone: "${epitaph}" - ${name}`;
            const url = 'https://app.sloppy.live/grave-generator';

            if (navigator.share) {
                navigator.share({
                    title: 'My Grave Generator Epitaph',
                    text: text,
                    url: url
                });
            } else {
                const fullText = `${text}\n\nCreate yours: ${url}`;
                navigator.clipboard.writeText(fullText).then(() => {
                    alert('Share text copied to clipboard!');
                }).catch(() => {
                    prompt('Share this:', fullText);
                });
            }
        }

        // Initial preview
        updatePreview();
    </script>
<script src="/apps/sloppy-header/sloppy-bar.js"></script>
<script src="/vibelib-extended.js"></script>
<script>
  // Compatibility Patch for Legacy Apps
  window.addEventListener("load", () => {
    if (window.SloppyKarma && window.VibeLib.Economy) {
      // Redirect old calls to new engine
      window.SloppyKarma.track = window.VibeLib.Economy.track;
    }
  });
</script>
</body>
</html>
