<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Night Watch - Surveillance Monitor</title>
  <meta name="description" content="Yellow neon surveillance system with anomaly detection">
  <meta property="og:title" content="Night Watch">
  <meta property="og:description" content="Surveillance monitor with glitchy anomaly detection">
  <meta property="og:url" content="https://app.sloppy.live/night-watch">
  <meta property="og:image" content="https://app.sloppy.live/night-watch/og-image.png">
  <link rel="icon" href="https://emojicdn.elk.sh/üëÅÔ∏è">
  <link href="https://fonts.googleapis.com/css2?family=VT323&family=Share+Tech+Mono&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      min-height: 100vh;
      background: #0a0a00;
      font-family: 'VT323', monospace;
      color: #ffdd00;
      overflow: hidden;
    }

    /* Scanlines overlay */
    .scanlines {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: repeating-linear-gradient(
        0deg,
        rgba(0, 0, 0, 0.1) 0px,
        rgba(0, 0, 0, 0.1) 1px,
        transparent 1px,
        transparent 2px
      );
      pointer-events: none;
      z-index: 1000;
    }

    /* CRT flicker */
    .crt-flicker {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 999;
      animation: flicker 0.1s infinite;
      opacity: 0.02;
      background: #fff;
    }

    @keyframes flicker {
      0%, 100% { opacity: 0.02; }
      50% { opacity: 0.04; }
    }

    .container {
      height: 100vh;
      display: flex;
      flex-direction: column;
      padding: 10px;
    }

    /* Header */
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 15px;
      background: rgba(255, 221, 0, 0.05);
      border: 1px solid rgba(255, 221, 0, 0.3);
      margin-bottom: 10px;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .logo-icon {
      font-size: 1.8rem;
      animation: pulse 2s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    .logo-text h1 {
      font-size: 1.5rem;
      letter-spacing: 5px;
      text-shadow: 0 0 10px #ffdd00, 0 0 20px #ffdd00;
    }

    .logo-text p {
      font-family: 'Share Tech Mono', monospace;
      font-size: 0.65rem;
      color: #888;
      letter-spacing: 2px;
    }

    .status-bar {
      display: flex;
      gap: 25px;
      font-family: 'Share Tech Mono', monospace;
      font-size: 0.75rem;
    }

    .status-item {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .status-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: #00ff00;
      box-shadow: 0 0 10px #00ff00;
      animation: blink 1s infinite;
    }

    .status-dot.warning {
      background: #ffdd00;
      box-shadow: 0 0 10px #ffdd00;
    }

    .status-dot.alert {
      background: #ff0000;
      box-shadow: 0 0 10px #ff0000;
      animation: blink 0.3s infinite;
    }

    @keyframes blink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.3; }
    }

    /* Camera Grid */
    .camera-grid {
      flex: 1;
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      grid-template-rows: repeat(2, 1fr);
      gap: 10px;
      min-height: 0;
    }

    .camera-feed {
      position: relative;
      background: #000;
      border: 1px solid rgba(255, 221, 0, 0.4);
      overflow: hidden;
    }

    .camera-feed canvas {
      width: 100%;
      height: 100%;
      display: block;
    }

    .camera-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
    }

    .camera-header {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      padding: 8px 12px;
      background: linear-gradient(180deg, rgba(0,0,0,0.8) 0%, transparent 100%);
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
    }

    .camera-id {
      font-size: 0.9rem;
      text-shadow: 0 0 5px #ffdd00;
    }

    .camera-status {
      font-family: 'Share Tech Mono', monospace;
      font-size: 0.6rem;
      padding: 2px 6px;
      background: rgba(0, 255, 0, 0.2);
      border: 1px solid #00ff00;
      color: #00ff00;
    }

    .camera-status.anomaly {
      background: rgba(255, 0, 0, 0.3);
      border-color: #ff0000;
      color: #ff0000;
      animation: alertPulse 0.5s infinite;
    }

    @keyframes alertPulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    .camera-footer {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      padding: 8px 12px;
      background: linear-gradient(0deg, rgba(0,0,0,0.8) 0%, transparent 100%);
      display: flex;
      justify-content: space-between;
      font-family: 'Share Tech Mono', monospace;
      font-size: 0.6rem;
      color: #888;
    }

    .camera-location {
      color: #ffdd00;
    }

    /* Glitch effect */
    .glitch-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: transparent;
      pointer-events: none;
      opacity: 0;
    }

    .camera-feed.glitching .glitch-overlay {
      animation: glitch 0.2s infinite;
    }

    @keyframes glitch {
      0% {
        opacity: 0;
        transform: translate(0);
      }
      20% {
        opacity: 0.8;
        background: linear-gradient(90deg, transparent 0%, #ff0000 20%, transparent 21%, transparent 40%, #00ff00 41%, transparent 42%, transparent 80%, #0000ff 81%, transparent 82%);
        transform: translate(-5px, 2px);
      }
      40% {
        opacity: 0;
        transform: translate(5px, -2px);
      }
      60% {
        opacity: 0.5;
        background: linear-gradient(0deg, transparent 30%, rgba(255,255,255,0.3) 31%, transparent 32%);
        transform: translate(-3px, 0);
      }
      80% {
        opacity: 0;
        transform: translate(0);
      }
      100% {
        opacity: 0;
      }
    }

    /* Anomaly box */
    .anomaly-box {
      position: absolute;
      border: 2px solid #ff0000;
      background: rgba(255, 0, 0, 0.1);
      pointer-events: none;
      display: none;
    }

    .anomaly-box.active {
      display: block;
      animation: anomalyPulse 0.5s infinite;
    }

    @keyframes anomalyPulse {
      0%, 100% { border-color: #ff0000; box-shadow: 0 0 10px #ff0000; }
      50% { border-color: #ff6600; box-shadow: 0 0 20px #ff6600; }
    }

    .anomaly-label {
      position: absolute;
      top: -20px;
      left: 0;
      font-size: 0.6rem;
      color: #ff0000;
      background: rgba(0, 0, 0, 0.8);
      padding: 2px 5px;
      white-space: nowrap;
    }

    /* Alert Panel */
    .alert-panel {
      margin-top: 10px;
      padding: 10px 15px;
      background: rgba(255, 0, 0, 0.1);
      border: 1px solid rgba(255, 0, 0, 0.3);
      max-height: 80px;
      overflow-y: auto;
    }

    .alert-panel.clear {
      background: rgba(0, 255, 0, 0.05);
      border-color: rgba(0, 255, 0, 0.2);
    }

    .alert-title {
      font-size: 0.8rem;
      margin-bottom: 5px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .alert-title.clear {
      color: #00ff00;
    }

    .alert-log {
      font-family: 'Share Tech Mono', monospace;
      font-size: 0.65rem;
      color: #ff6666;
    }

    .alert-log.clear {
      color: #00ff00;
    }

    .alert-entry {
      margin: 3px 0;
      opacity: 0.8;
    }

    .back-link {
      position: fixed;
      bottom: 10px;
      right: 15px;
      color: #444;
      text-decoration: none;
      font-size: 0.6rem;
      letter-spacing: 2px;
      z-index: 100;
      transition: color 0.3s;
    }

    .back-link:hover {
      color: #ffdd00;
    }

    @media (max-width: 768px) {
      .camera-grid {
        grid-template-columns: repeat(2, 1fr);
        grid-template-rows: repeat(3, 1fr);
      }
      .status-bar { display: none; }
      .logo-text h1 { font-size: 1.2rem; }
    }

    @media (max-width: 500px) {
      .camera-grid {
        grid-template-columns: 1fr;
        grid-template-rows: repeat(6, 1fr);
      }
    }
  </style>
</head>
<body>
  <div class="scanlines"></div>
  <div class="crt-flicker"></div>

  <div class="container">
    <div class="header">
      <div class="logo">
        <span class="logo-icon">üëÅÔ∏è</span>
        <div class="logo-text">
          <h1>NIGHT WATCH</h1>
          <p>SURVEILLANCE SYSTEM v2.4.1</p>
        </div>
      </div>
      <div class="status-bar">
        <div class="status-item">
          <div class="status-dot" id="systemStatus"></div>
          <span>SYSTEM</span>
        </div>
        <div class="status-item">
          <div class="status-dot warning" id="networkStatus"></div>
          <span>NETWORK</span>
        </div>
        <div class="status-item">
          <div class="status-dot" id="recordStatus"></div>
          <span>RECORDING</span>
        </div>
        <div class="status-item" id="timeDisplay">--:--:--</div>
      </div>
    </div>

    <div class="camera-grid" id="cameraGrid"></div>

    <div class="alert-panel clear" id="alertPanel">
      <div class="alert-title clear" id="alertTitle">
        <span>‚ñ∂ ALL SECTORS CLEAR</span>
      </div>
      <div class="alert-log clear" id="alertLog">
        <div class="alert-entry">System initialized. Monitoring 6 sectors.</div>
      </div>
    </div>
  </div>

  <a href="https://sloppy.live" class="back-link">SLOPPY.LIVE</a>

  <script>
    const cameras = [
      { id: 'CAM-01', location: 'NORTH ENTRANCE', sector: 'A1' },
      { id: 'CAM-02', location: 'WEST CORRIDOR', sector: 'A2' },
      { id: 'CAM-03', location: 'SERVER ROOM', sector: 'B1' },
      { id: 'CAM-04', location: 'PARKING LOT', sector: 'B2' },
      { id: 'CAM-05', location: 'ROOFTOP', sector: 'C1' },
      { id: 'CAM-06', location: 'SOUTH EXIT', sector: 'C2' }
    ];

    const anomalyTypes = [
      'MOTION DETECTED',
      'UNKNOWN ENTITY',
      'SIGNAL INTERFERENCE',
      'THERMAL ANOMALY',
      'PERIMETER BREACH',
      'UNIDENTIFIED OBJECT'
    ];

    let alertLog = [];
    let activeAnomalies = new Set();

    // Create camera feeds
    function createCameraGrid() {
      const grid = document.getElementById('cameraGrid');

      cameras.forEach((cam, index) => {
        const feed = document.createElement('div');
        feed.className = 'camera-feed';
        feed.id = `feed-${index}`;
        feed.innerHTML = `
          <canvas id="canvas-${index}"></canvas>
          <div class="camera-overlay">
            <div class="camera-header">
              <span class="camera-id">${cam.id}</span>
              <span class="camera-status" id="status-${index}">ONLINE</span>
            </div>
            <div class="camera-footer">
              <span class="camera-location">${cam.location}</span>
              <span class="camera-time" id="time-${index}">00:00:00</span>
            </div>
            <div class="anomaly-box" id="anomaly-${index}">
              <span class="anomaly-label" id="anomaly-label-${index}"></span>
            </div>
          </div>
          <div class="glitch-overlay"></div>
        `;
        grid.appendChild(feed);

        // Initialize canvas
        initCanvas(index);
      });
    }

    // Initialize canvas with noise
    function initCanvas(index) {
      const canvas = document.getElementById(`canvas-${index}`);
      const ctx = canvas.getContext('2d');

      function resize() {
        const rect = canvas.parentElement.getBoundingClientRect();
        canvas.width = rect.width;
        canvas.height = rect.height;
      }
      resize();
      window.addEventListener('resize', resize);

      // Draw static/noise
      function drawNoise() {
        const imageData = ctx.createImageData(canvas.width, canvas.height);
        const data = imageData.data;

        // Base darkness with occasional lighter spots
        for (let i = 0; i < data.length; i += 4) {
          const noise = Math.random();
          const value = noise < 0.97 ? Math.random() * 30 : Math.random() * 60;

          // Slight yellow/green tint
          data[i] = value * 1.1;     // R
          data[i + 1] = value;       // G
          data[i + 2] = value * 0.5; // B
          data[i + 3] = 255;         // A
        }

        // Add some structure (fake scene elements)
        addSceneElements(data, canvas.width, canvas.height, index);

        ctx.putImageData(imageData, 0, 0);

        // Add vignette
        const gradient = ctx.createRadialGradient(
          canvas.width / 2, canvas.height / 2, 0,
          canvas.width / 2, canvas.height / 2, canvas.width * 0.7
        );
        gradient.addColorStop(0, 'transparent');
        gradient.addColorStop(1, 'rgba(0, 0, 0, 0.6)');
        ctx.fillStyle = gradient;
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        requestAnimationFrame(drawNoise);
      }

      drawNoise();
    }

    // Add fake scene elements to make it look like real footage
    function addSceneElements(data, width, height, camIndex) {
      // Different scenes for different cameras
      const scenes = [
        // CAM-01: Door frame
        () => {
          drawRect(data, width, width * 0.3, 0, width * 0.4, height * 0.8, 15);
        },
        // CAM-02: Corridor lines
        () => {
          for (let y = height * 0.4; y < height; y += 30) {
            drawLine(data, width, 0, y, width, y + 20, 12);
          }
        },
        // CAM-03: Server racks
        () => {
          for (let x = width * 0.1; x < width * 0.9; x += width * 0.2) {
            drawRect(data, width, x, height * 0.2, width * 0.15, height * 0.6, 20);
            // Blinking lights
            if (Math.random() > 0.5) {
              drawDot(data, width, x + 10, height * 0.3, 3, 80, 255, 80);
            }
          }
        },
        // CAM-04: Parking lines
        () => {
          for (let x = width * 0.1; x < width; x += width * 0.25) {
            drawLine(data, width, x, height * 0.3, x, height, 10);
          }
        },
        // CAM-05: Rooftop edge
        () => {
          drawLine(data, width, 0, height * 0.6, width, height * 0.6, 18);
          // Stars
          for (let i = 0; i < 20; i++) {
            if (Math.random() > 0.3) {
              drawDot(data, width, Math.random() * width, Math.random() * height * 0.5, 1, 200, 200, 150);
            }
          }
        },
        // CAM-06: Exit sign glow
        () => {
          drawRect(data, width, width * 0.4, height * 0.1, width * 0.2, height * 0.08, 25);
          drawDot(data, width, width * 0.5, height * 0.14, 30, 80, 255, 80);
        }
      ];

      if (scenes[camIndex]) scenes[camIndex]();
    }

    function drawRect(data, width, x, y, w, h, brightness) {
      for (let py = Math.floor(y); py < y + h; py++) {
        for (let px = Math.floor(x); px < x + w; px++) {
          const i = (py * width + px) * 4;
          if (i >= 0 && i < data.length - 3) {
            data[i] = Math.min(255, data[i] + brightness);
            data[i + 1] = Math.min(255, data[i + 1] + brightness);
            data[i + 2] = Math.min(255, data[i + 2] + brightness * 0.5);
          }
        }
      }
    }

    function drawLine(data, width, x1, y1, x2, y2, brightness) {
      const dx = Math.abs(x2 - x1);
      const dy = Math.abs(y2 - y1);
      const steps = Math.max(dx, dy);

      for (let s = 0; s < steps; s++) {
        const px = Math.floor(x1 + (x2 - x1) * s / steps);
        const py = Math.floor(y1 + (y2 - y1) * s / steps);
        const i = (py * width + px) * 4;
        if (i >= 0 && i < data.length - 3) {
          data[i] = Math.min(255, data[i] + brightness);
          data[i + 1] = Math.min(255, data[i + 1] + brightness);
          data[i + 2] = Math.min(255, data[i + 2] + brightness * 0.5);
        }
      }
    }

    function drawDot(data, width, x, y, radius, r, g, b) {
      for (let py = y - radius; py <= y + radius; py++) {
        for (let px = x - radius; px <= x + radius; px++) {
          const dist = Math.sqrt((px - x) ** 2 + (py - y) ** 2);
          if (dist <= radius) {
            const i = (Math.floor(py) * width + Math.floor(px)) * 4;
            if (i >= 0 && i < data.length - 3) {
              const intensity = 1 - dist / radius;
              data[i] = Math.min(255, data[i] + r * intensity);
              data[i + 1] = Math.min(255, data[i + 1] + g * intensity);
              data[i + 2] = Math.min(255, data[i + 2] + b * intensity);
            }
          }
        }
      }
    }

    // Trigger anomaly
    function triggerAnomaly(index) {
      const feed = document.getElementById(`feed-${index}`);
      const status = document.getElementById(`status-${index}`);
      const anomalyBox = document.getElementById(`anomaly-${index}`);
      const anomalyLabel = document.getElementById(`anomaly-label-${index}`);
      const cam = cameras[index];

      const anomalyType = anomalyTypes[Math.floor(Math.random() * anomalyTypes.length)];

      // Glitch effect
      feed.classList.add('glitching');
      setTimeout(() => feed.classList.remove('glitching'), 500 + Math.random() * 1000);

      // Status change
      status.textContent = 'ANOMALY';
      status.classList.add('anomaly');

      // Anomaly box
      const boxX = 20 + Math.random() * 40;
      const boxY = 30 + Math.random() * 30;
      const boxW = 20 + Math.random() * 30;
      const boxH = 15 + Math.random() * 25;

      anomalyBox.style.left = boxX + '%';
      anomalyBox.style.top = boxY + '%';
      anomalyBox.style.width = boxW + '%';
      anomalyBox.style.height = boxH + '%';
      anomalyBox.classList.add('active');
      anomalyLabel.textContent = anomalyType;

      // Add to log
      addAlert(`[${cam.id}] ${anomalyType} in ${cam.location}`);
      activeAnomalies.add(index);
      updateAlertPanel();

      // Clear after duration
      const duration = 3000 + Math.random() * 5000;
      setTimeout(() => clearAnomaly(index), duration);
    }

    // Clear anomaly
    function clearAnomaly(index) {
      const status = document.getElementById(`status-${index}`);
      const anomalyBox = document.getElementById(`anomaly-${index}`);

      status.textContent = 'ONLINE';
      status.classList.remove('anomaly');
      anomalyBox.classList.remove('active');

      activeAnomalies.delete(index);
      updateAlertPanel();
    }

    // Add alert to log
    function addAlert(message) {
      const time = new Date().toLocaleTimeString('en-US', { hour12: false });
      alertLog.unshift(`[${time}] ${message}`);
      if (alertLog.length > 10) alertLog.pop();

      const logEl = document.getElementById('alertLog');
      logEl.innerHTML = alertLog.map(a => `<div class="alert-entry">${a}</div>`).join('');
    }

    // Update alert panel state
    function updateAlertPanel() {
      const panel = document.getElementById('alertPanel');
      const title = document.getElementById('alertTitle');
      const log = document.getElementById('alertLog');
      const systemStatus = document.getElementById('systemStatus');

      if (activeAnomalies.size > 0) {
        panel.classList.remove('clear');
        title.classList.remove('clear');
        title.innerHTML = `<span>‚ö† ${activeAnomalies.size} ACTIVE ANOMAL${activeAnomalies.size > 1 ? 'IES' : 'Y'}</span>`;
        log.classList.remove('clear');
        systemStatus.classList.add('alert');
      } else {
        panel.classList.add('clear');
        title.classList.add('clear');
        title.innerHTML = '<span>‚ñ∂ ALL SECTORS CLEAR</span>';
        log.classList.add('clear');
        systemStatus.classList.remove('alert');
      }
    }

    // Update time displays
    function updateTime() {
      const now = new Date();
      const time = now.toLocaleTimeString('en-US', { hour12: false });
      const date = now.toLocaleDateString('en-US', { year: '2-digit', month: '2-digit', day: '2-digit' });

      document.getElementById('timeDisplay').textContent = time;

      cameras.forEach((_, i) => {
        document.getElementById(`time-${i}`).textContent = time;
      });
    }

    // Random anomaly trigger
    function scheduleAnomaly() {
      const delay = 5000 + Math.random() * 15000;
      setTimeout(() => {
        const index = Math.floor(Math.random() * cameras.length);
        if (!activeAnomalies.has(index)) {
          triggerAnomaly(index);
        }
        scheduleAnomaly();
      }, delay);
    }

    // Random glitch
    function scheduleGlitch() {
      const delay = 2000 + Math.random() * 8000;
      setTimeout(() => {
        const index = Math.floor(Math.random() * cameras.length);
        const feed = document.getElementById(`feed-${index}`);
        feed.classList.add('glitching');
        setTimeout(() => feed.classList.remove('glitching'), 100 + Math.random() * 300);
        scheduleGlitch();
      }, delay);
    }

    // Network status flicker
    function flickerNetwork() {
      const network = document.getElementById('networkStatus');
      setInterval(() => {
        if (Math.random() > 0.9) {
          network.style.opacity = '0.3';
          setTimeout(() => network.style.opacity = '1', 100);
        }
      }, 500);
    }

    // Initialize
    createCameraGrid();
    updateTime();
    setInterval(updateTime, 1000);
    scheduleAnomaly();
    scheduleGlitch();
    flickerNetwork();

    // Initial log entry
    setTimeout(() => addAlert('Night Watch system online. All cameras active.'), 1000);
  </script>
<script src="/sloppy-header/sloppy-bar.js"></script>
</body>
</html>
