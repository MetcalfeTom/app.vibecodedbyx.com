<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Neon Heist - Terminal Hacker</title>
  <meta name="description" content="Crack vaults and bypass laser grids in this neon hacker game">
  <meta property="og:title" content="Neon Heist">
  <meta property="og:description" content="Terminal hacker game with logic puzzles and laser grids">
  <meta property="og:url" content="https://sloppy.live/neon-heist">
  <meta property="og:image" content="https://sloppy.live/neon-heist/og-image.png">
  <link rel="icon" href="https://emojicdn.elk.sh/üîì">
  <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Orbitron:wght@700&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      min-height: 100vh;
      background: #0a0a0f;
      font-family: 'Share Tech Mono', monospace;
      color: #0f0;
      overflow: hidden;
    }

    /* Scanlines */
    .scanlines {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: repeating-linear-gradient(
        0deg,
        rgba(0, 0, 0, 0.1) 0px,
        rgba(0, 0, 0, 0.1) 1px,
        transparent 1px,
        transparent 2px
      );
      pointer-events: none;
      z-index: 1000;
    }

    .container {
      height: 100vh;
      display: flex;
      flex-direction: column;
      padding: 15px;
    }

    /* Header */
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 15px;
      background: rgba(0, 255, 0, 0.05);
      border: 1px solid rgba(0, 255, 0, 0.3);
      margin-bottom: 15px;
    }

    .logo {
      font-family: 'Orbitron', sans-serif;
      font-size: 1.3rem;
      color: #0f0;
      text-shadow: 0 0 10px #0f0, 0 0 20px #0f0;
      letter-spacing: 3px;
    }

    .stats {
      display: flex;
      gap: 25px;
      font-size: 0.8rem;
    }

    .stat {
      color: #888;
    }

    .stat span {
      color: #0ff;
      text-shadow: 0 0 5px #0ff;
    }

    /* Main game area */
    .game-area {
      flex: 1;
      display: flex;
      gap: 15px;
      min-height: 0;
    }

    /* Terminal */
    .terminal {
      flex: 1;
      background: rgba(0, 0, 0, 0.8);
      border: 1px solid rgba(0, 255, 0, 0.3);
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    .terminal-header {
      padding: 8px 12px;
      background: rgba(0, 255, 0, 0.1);
      border-bottom: 1px solid rgba(0, 255, 0, 0.2);
      font-size: 0.7rem;
      color: #0f0;
      display: flex;
      justify-content: space-between;
    }

    .terminal-body {
      flex: 1;
      padding: 15px;
      overflow-y: auto;
      font-size: 0.85rem;
      line-height: 1.6;
    }

    .terminal-line {
      margin: 5px 0;
    }

    .terminal-line.system {
      color: #0ff;
    }

    .terminal-line.error {
      color: #f44;
    }

    .terminal-line.success {
      color: #0f0;
      text-shadow: 0 0 5px #0f0;
    }

    .terminal-line.warning {
      color: #ff0;
    }

    .terminal-input-line {
      display: flex;
      align-items: center;
      margin-top: 10px;
    }

    .prompt {
      color: #0f0;
      margin-right: 8px;
    }

    #terminalInput {
      flex: 1;
      background: transparent;
      border: none;
      color: #0f0;
      font-family: inherit;
      font-size: 0.85rem;
      outline: none;
      caret-color: #0f0;
    }

    /* Puzzle panel */
    .puzzle-panel {
      width: 350px;
      background: rgba(0, 0, 0, 0.8);
      border: 1px solid rgba(0, 255, 255, 0.3);
      display: flex;
      flex-direction: column;
    }

    .puzzle-header {
      padding: 10px 15px;
      background: rgba(0, 255, 255, 0.1);
      border-bottom: 1px solid rgba(0, 255, 255, 0.2);
      font-size: 0.75rem;
      color: #0ff;
      text-transform: uppercase;
      letter-spacing: 2px;
    }

    .puzzle-body {
      flex: 1;
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    /* Laser Grid */
    .laser-grid {
      display: grid;
      grid-template-columns: repeat(5, 50px);
      grid-template-rows: repeat(5, 50px);
      gap: 2px;
      margin-bottom: 20px;
    }

    .grid-cell {
      background: rgba(0, 0, 0, 0.5);
      border: 1px solid rgba(255, 0, 255, 0.2);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
      cursor: pointer;
      transition: all 0.2s;
    }

    .grid-cell:hover {
      background: rgba(255, 0, 255, 0.1);
    }

    .grid-cell.laser-h {
      background: linear-gradient(90deg, transparent, rgba(255, 0, 0, 0.6), transparent);
      box-shadow: 0 0 10px rgba(255, 0, 0, 0.5);
    }

    .grid-cell.laser-v {
      background: linear-gradient(180deg, transparent, rgba(255, 0, 0, 0.6), transparent);
      box-shadow: 0 0 10px rgba(255, 0, 0, 0.5);
    }

    .grid-cell.laser-both {
      background: rgba(255, 0, 0, 0.8);
      box-shadow: 0 0 15px rgba(255, 0, 0, 0.8);
    }

    .grid-cell.start {
      background: rgba(0, 255, 0, 0.3);
      border-color: #0f0;
    }

    .grid-cell.end {
      background: rgba(0, 255, 255, 0.3);
      border-color: #0ff;
    }

    .grid-cell.path {
      background: rgba(0, 255, 0, 0.2);
      border-color: rgba(0, 255, 0, 0.5);
    }

    .grid-cell.player {
      background: rgba(0, 255, 0, 0.6);
      box-shadow: 0 0 15px #0f0;
    }

    /* Code puzzle */
    .code-display {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
    }

    .code-digit {
      width: 50px;
      height: 60px;
      background: rgba(0, 0, 0, 0.5);
      border: 2px solid rgba(0, 255, 255, 0.3);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.8rem;
      color: #0ff;
      text-shadow: 0 0 10px #0ff;
    }

    .code-digit.correct {
      border-color: #0f0;
      color: #0f0;
      text-shadow: 0 0 10px #0f0;
    }

    .code-digit.wrong-pos {
      border-color: #ff0;
      color: #ff0;
      text-shadow: 0 0 10px #ff0;
    }

    /* Sequence puzzle */
    .sequence-grid {
      display: grid;
      grid-template-columns: repeat(4, 60px);
      gap: 10px;
      margin-bottom: 20px;
    }

    .seq-cell {
      height: 60px;
      background: rgba(0, 0, 0, 0.5);
      border: 2px solid rgba(255, 0, 255, 0.3);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      cursor: pointer;
      transition: all 0.2s;
    }

    .seq-cell:hover {
      border-color: #f0f;
      box-shadow: 0 0 15px rgba(255, 0, 255, 0.4);
    }

    .seq-cell.selected {
      background: rgba(255, 0, 255, 0.3);
      border-color: #f0f;
      box-shadow: 0 0 20px rgba(255, 0, 255, 0.6);
    }

    .seq-cell.flash {
      background: rgba(255, 0, 255, 0.8);
      box-shadow: 0 0 30px #f0f;
    }

    /* Hint */
    .hint-text {
      font-size: 0.75rem;
      color: #888;
      text-align: center;
      margin-top: 15px;
    }

    /* Timer */
    .timer {
      font-size: 1.5rem;
      color: #f44;
      text-shadow: 0 0 10px #f44;
      margin-bottom: 15px;
    }

    .timer.safe {
      color: #0f0;
      text-shadow: 0 0 10px #0f0;
    }

    /* Buttons */
    .btn {
      font-family: 'Share Tech Mono', monospace;
      font-size: 0.8rem;
      padding: 10px 20px;
      background: transparent;
      border: 1px solid #0f0;
      color: #0f0;
      cursor: pointer;
      transition: all 0.2s;
      margin-top: 15px;
    }

    .btn:hover {
      background: rgba(0, 255, 0, 0.1);
      box-shadow: 0 0 15px rgba(0, 255, 0, 0.3);
    }

    /* Overlays */
    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.95);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 500;
    }

    .overlay.hidden {
      display: none;
    }

    .overlay h1 {
      font-family: 'Orbitron', sans-serif;
      font-size: 2.5rem;
      color: #0f0;
      text-shadow: 0 0 20px #0f0, 0 0 40px #0f0;
      margin-bottom: 20px;
      letter-spacing: 5px;
    }

    .overlay p {
      color: #888;
      margin-bottom: 30px;
    }

    .back-link {
      position: fixed;
      bottom: 15px;
      right: 20px;
      color: #333;
      text-decoration: none;
      font-size: 0.65rem;
      z-index: 100;
    }

    .back-link:hover {
      color: #0f0;
    }

    @media (max-width: 800px) {
      .game-area {
        flex-direction: column;
      }
      .puzzle-panel {
        width: 100%;
        min-height: 300px;
      }
      .laser-grid {
        grid-template-columns: repeat(5, 40px);
        grid-template-rows: repeat(5, 40px);
      }
    }
  </style>
</head>
<body>
  <div class="scanlines"></div>

  <div class="container">
    <div class="header">
      <div class="logo">NEON HEIST</div>
      <div class="stats">
        <div class="stat">VAULT: <span id="vaultNum">1</span>/5</div>
        <div class="stat">CREDITS: <span id="credits">0</span></div>
        <div class="stat">ALERTS: <span id="alerts">0</span></div>
      </div>
    </div>

    <div class="game-area">
      <div class="terminal">
        <div class="terminal-header">
          <span>TERMINAL v3.7.1</span>
          <span id="connectionStatus">CONNECTED</span>
        </div>
        <div class="terminal-body" id="terminalBody">
          <div class="terminal-line system">// NEON HEIST TERMINAL //</div>
          <div class="terminal-line">Connecting to vault network...</div>
          <div class="terminal-line success">Connection established.</div>
          <div class="terminal-line">Type 'help' for commands.</div>
        </div>
        <div class="terminal-input-line">
          <span class="prompt">&gt;</span>
          <input type="text" id="terminalInput" autofocus autocomplete="off">
        </div>
      </div>

      <div class="puzzle-panel">
        <div class="puzzle-header" id="puzzleTitle">VAULT SECURITY</div>
        <div class="puzzle-body" id="puzzleBody">
          <!-- Puzzle content injected here -->
        </div>
      </div>
    </div>
  </div>

  <div class="overlay" id="startOverlay">
    <h1>NEON HEIST</h1>
    <p>Crack 5 vaults. Bypass security. Don't get caught.</p>
    <button class="btn" id="startBtn">INITIATE HEIST</button>
  </div>

  <div class="overlay hidden" id="winOverlay">
    <h1>HEIST COMPLETE</h1>
    <p>All vaults cracked. Total credits: <span id="finalCredits">0</span></p>
    <button class="btn" id="replayBtn">NEW HEIST</button>
  </div>

  <a href="https://sloppy.live" class="back-link">SLOPPY.LIVE</a>

  <script>
    // Game state
    let currentVault = 1;
    let credits = 0;
    let alerts = 0;
    let puzzleType = '';
    let puzzleData = {};
    let timerInterval = null;

    // Terminal
    const terminalBody = document.getElementById('terminalBody');
    const terminalInput = document.getElementById('terminalInput');

    function addLine(text, type = '') {
      const line = document.createElement('div');
      line.className = 'terminal-line' + (type ? ' ' + type : '');
      line.textContent = text;
      terminalBody.appendChild(line);
      terminalBody.scrollTop = terminalBody.scrollHeight;
    }

    function clearTerminal() {
      terminalBody.innerHTML = '';
    }

    // Commands
    const commands = {
      help: () => {
        addLine('Available commands:', 'system');
        addLine('  scan    - Scan vault security');
        addLine('  crack   - Attempt to crack current puzzle');
        addLine('  hint    - Get a hint (costs 50 credits)');
        addLine('  status  - View current status');
        addLine('  clear   - Clear terminal');
      },
      scan: () => {
        addLine('Scanning vault security...', 'system');
        setTimeout(() => {
          addLine(`Security type: ${puzzleType.toUpperCase()}`, 'warning');
          addLine('Use the puzzle panel to bypass security.');
        }, 500);
      },
      crack: () => {
        addLine('Use the puzzle panel to crack the vault.', 'warning');
      },
      hint: () => {
        if (credits >= 50) {
          credits -= 50;
          updateStats();
          giveHint();
        } else {
          addLine('Insufficient credits. Need 50.', 'error');
        }
      },
      status: () => {
        addLine(`Vault: ${currentVault}/5`, 'system');
        addLine(`Credits: ${credits}`);
        addLine(`Alerts: ${alerts}`);
        addLine(`Security: ${puzzleType.toUpperCase()}`);
      },
      clear: () => {
        clearTerminal();
        addLine('Terminal cleared.', 'system');
      }
    };

    function processCommand(cmd) {
      const parts = cmd.toLowerCase().trim().split(' ');
      const command = parts[0];
      const args = parts.slice(1);

      addLine('> ' + cmd);

      if (commands[command]) {
        commands[command](args);
      } else if (command) {
        addLine(`Command not found: ${command}`, 'error');
      }
    }

    terminalInput.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') {
        processCommand(terminalInput.value);
        terminalInput.value = '';
      }
    });

    // Puzzles
    function generatePuzzle() {
      const types = ['code', 'sequence', 'laser'];
      puzzleType = types[Math.floor(Math.random() * types.length)];

      document.getElementById('puzzleTitle').textContent =
        puzzleType === 'code' ? 'CODE BREAKER' :
        puzzleType === 'sequence' ? 'MEMORY SEQUENCE' : 'LASER GRID';

      if (puzzleType === 'code') generateCodePuzzle();
      else if (puzzleType === 'sequence') generateSequencePuzzle();
      else generateLaserPuzzle();

      addLine(`New security detected: ${puzzleType.toUpperCase()}`, 'warning');
    }

    // Code Breaker Puzzle
    function generateCodePuzzle() {
      puzzleData = {
        code: Array(4).fill(0).map(() => Math.floor(Math.random() * 10)),
        attempts: 0,
        maxAttempts: 6
      };

      renderCodePuzzle();
    }

    function renderCodePuzzle() {
      const body = document.getElementById('puzzleBody');
      body.innerHTML = `
        <div class="timer safe" id="attemptsLeft">${puzzleData.maxAttempts - puzzleData.attempts} attempts left</div>
        <div class="code-display" id="codeDisplay">
          ${Array(4).fill('<div class="code-digit">?</div>').join('')}
        </div>
        <input type="text" id="codeInput" maxlength="4" placeholder="Enter 4 digits"
          style="background:#111;border:1px solid #0ff;color:#0ff;padding:10px;font-family:inherit;font-size:1rem;text-align:center;width:150px;">
        <button class="btn" id="submitCode">SUBMIT</button>
        <p class="hint-text">üü¢ = Correct position | üü° = Wrong position</p>
      `;

      document.getElementById('submitCode').addEventListener('click', checkCode);
      document.getElementById('codeInput').addEventListener('keydown', (e) => {
        if (e.key === 'Enter') checkCode();
      });
    }

    function checkCode() {
      const input = document.getElementById('codeInput').value;
      if (!/^\d{4}$/.test(input)) {
        addLine('Enter exactly 4 digits.', 'error');
        return;
      }

      puzzleData.attempts++;
      const guess = input.split('').map(Number);
      const code = puzzleData.code;

      let result = [];
      let codeUsed = [...code];
      let guessUsed = [...guess];

      // Check correct positions
      for (let i = 0; i < 4; i++) {
        if (guess[i] === code[i]) {
          result[i] = 'correct';
          codeUsed[i] = null;
          guessUsed[i] = null;
        }
      }

      // Check wrong positions
      for (let i = 0; i < 4; i++) {
        if (result[i]) continue;
        const idx = codeUsed.indexOf(guessUsed[i]);
        if (idx !== -1 && guessUsed[i] !== null) {
          result[i] = 'wrong-pos';
          codeUsed[idx] = null;
        } else {
          result[i] = 'wrong';
        }
      }

      // Update display
      const display = document.getElementById('codeDisplay');
      display.innerHTML = guess.map((d, i) =>
        `<div class="code-digit ${result[i]}">${d}</div>`
      ).join('');

      document.getElementById('attemptsLeft').textContent =
        `${puzzleData.maxAttempts - puzzleData.attempts} attempts left`;

      if (result.every(r => r === 'correct')) {
        puzzleSuccess();
      } else if (puzzleData.attempts >= puzzleData.maxAttempts) {
        puzzleFail();
      } else {
        document.getElementById('codeInput').value = '';
        addLine(`Attempt ${puzzleData.attempts}: ${result.filter(r => r === 'correct').length} correct`, 'warning');
      }
    }

    // Sequence Puzzle
    function generateSequencePuzzle() {
      const length = 3 + currentVault;
      puzzleData = {
        sequence: Array(length).fill(0).map(() => Math.floor(Math.random() * 8)),
        playerSequence: [],
        showing: true
      };

      renderSequencePuzzle();
      setTimeout(showSequence, 500);
    }

    function renderSequencePuzzle() {
      const symbols = ['‚óÜ', '‚óá', '‚óã', '‚óè', '‚ñ°', '‚ñ†', '‚ñ≥', '‚ñ≤'];
      const body = document.getElementById('puzzleBody');

      body.innerHTML = `
        <p class="hint-text" id="seqHint">Watch the sequence...</p>
        <div class="sequence-grid" id="seqGrid">
          ${symbols.map((s, i) => `<div class="seq-cell" data-idx="${i}">${s}</div>`).join('')}
        </div>
      `;

      document.querySelectorAll('.seq-cell').forEach(cell => {
        cell.addEventListener('click', () => {
          if (puzzleData.showing) return;
          selectSequenceCell(parseInt(cell.dataset.idx));
        });
      });
    }

    function showSequence() {
      const cells = document.querySelectorAll('.seq-cell');
      let i = 0;

      const interval = setInterval(() => {
        if (i > 0) cells[puzzleData.sequence[i-1]].classList.remove('flash');

        if (i < puzzleData.sequence.length) {
          cells[puzzleData.sequence[i]].classList.add('flash');
          i++;
        } else {
          clearInterval(interval);
          puzzleData.showing = false;
          document.getElementById('seqHint').textContent = 'Repeat the sequence!';
        }
      }, 600);
    }

    function selectSequenceCell(idx) {
      const cells = document.querySelectorAll('.seq-cell');
      cells[idx].classList.add('selected');
      setTimeout(() => cells[idx].classList.remove('selected'), 200);

      puzzleData.playerSequence.push(idx);
      const pos = puzzleData.playerSequence.length - 1;

      if (puzzleData.sequence[pos] !== idx) {
        puzzleFail();
        return;
      }

      if (puzzleData.playerSequence.length === puzzleData.sequence.length) {
        puzzleSuccess();
      }
    }

    // Laser Grid Puzzle
    function generateLaserPuzzle() {
      const grid = Array(5).fill(null).map(() => Array(5).fill(0));

      // Add lasers
      const laserCount = 2 + currentVault;
      for (let i = 0; i < laserCount; i++) {
        const isHorizontal = Math.random() > 0.5;
        const pos = Math.floor(Math.random() * 5);

        for (let j = 0; j < 5; j++) {
          if (isHorizontal) {
            grid[pos][j] = grid[pos][j] === 2 ? 3 : 1; // 1=H, 2=V, 3=both
          } else {
            grid[j][pos] = grid[j][pos] === 1 ? 3 : 2;
          }
        }
      }

      // Start and end
      grid[0][0] = 0;
      grid[4][4] = 0;

      puzzleData = {
        grid,
        playerPos: { x: 0, y: 0 },
        path: [[0, 0]]
      };

      renderLaserPuzzle();
    }

    function renderLaserPuzzle() {
      const body = document.getElementById('puzzleBody');
      const { grid, playerPos, path } = puzzleData;

      let html = '<div class="laser-grid">';

      for (let y = 0; y < 5; y++) {
        for (let x = 0; x < 5; x++) {
          let classes = 'grid-cell';

          if (x === 0 && y === 0) classes += ' start';
          else if (x === 4 && y === 4) classes += ' end';
          else if (grid[y][x] === 1) classes += ' laser-h';
          else if (grid[y][x] === 2) classes += ' laser-v';
          else if (grid[y][x] === 3) classes += ' laser-both';

          if (path.some(p => p[0] === x && p[1] === y)) classes += ' path';
          if (playerPos.x === x && playerPos.y === y) classes += ' player';

          html += `<div class="${classes}" data-x="${x}" data-y="${y}"></div>`;
        }
      }

      html += '</div>';
      html += '<p class="hint-text">Click adjacent cells to move. Reach the exit!</p>';
      body.innerHTML = html;

      document.querySelectorAll('.grid-cell').forEach(cell => {
        cell.addEventListener('click', () => {
          moveLaser(parseInt(cell.dataset.x), parseInt(cell.dataset.y));
        });
      });
    }

    function moveLaser(x, y) {
      const { playerPos, grid, path } = puzzleData;
      const dx = Math.abs(x - playerPos.x);
      const dy = Math.abs(y - playerPos.y);

      // Only adjacent cells
      if ((dx === 1 && dy === 0) || (dx === 0 && dy === 1)) {
        // Check for laser
        if (grid[y][x] > 0) {
          puzzleFail();
          return;
        }

        playerPos.x = x;
        playerPos.y = y;
        path.push([x, y]);
        renderLaserPuzzle();

        if (x === 4 && y === 4) {
          puzzleSuccess();
        }
      }
    }

    // Puzzle results
    function puzzleSuccess() {
      const reward = 100 * currentVault;
      credits += reward;
      addLine(`VAULT ${currentVault} CRACKED! +${reward} credits`, 'success');
      updateStats();

      if (currentVault >= 5) {
        setTimeout(() => {
          document.getElementById('finalCredits').textContent = credits;
          document.getElementById('winOverlay').classList.remove('hidden');
        }, 1000);
      } else {
        currentVault++;
        updateStats();
        setTimeout(() => {
          addLine(`Accessing vault ${currentVault}...`, 'system');
          generatePuzzle();
        }, 1500);
      }
    }

    function puzzleFail() {
      alerts++;
      updateStats();
      addLine('SECURITY ALERT! Puzzle reset.', 'error');

      if (alerts >= 3) {
        addLine('TOO MANY ALERTS! Heist failed.', 'error');
        setTimeout(() => location.reload(), 2000);
      } else {
        setTimeout(generatePuzzle, 1000);
      }
    }

    function giveHint() {
      if (puzzleType === 'code') {
        const hint = puzzleData.code[0];
        addLine(`Hint: First digit is ${hint}`, 'warning');
      } else if (puzzleType === 'sequence') {
        addLine(`Hint: Sequence length is ${puzzleData.sequence.length}`, 'warning');
      } else {
        addLine('Hint: Avoid red cells - they are lasers!', 'warning');
      }
    }

    function updateStats() {
      document.getElementById('vaultNum').textContent = currentVault;
      document.getElementById('credits').textContent = credits;
      document.getElementById('alerts').textContent = alerts;
    }

    // Start game
    function startGame() {
      document.getElementById('startOverlay').classList.add('hidden');
      currentVault = 1;
      credits = 0;
      alerts = 0;
      updateStats();
      clearTerminal();
      addLine('// HEIST INITIATED //', 'system');
      addLine('Accessing vault 1...');
      setTimeout(generatePuzzle, 1000);
    }

    document.getElementById('startBtn').addEventListener('click', startGame);
    document.getElementById('replayBtn').addEventListener('click', () => {
      document.getElementById('winOverlay').classList.add('hidden');
      startGame();
    });
  </script>
<script src="/sloppy-header/sloppy-bar.js"></script>
</body>
</html>
