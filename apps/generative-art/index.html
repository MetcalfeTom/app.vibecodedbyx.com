<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generative Art Studio - Create Beautiful Digital Art</title>
    <link rel="icon" href="https://emojicdn.elk.sh/üé®" type="image/x-icon">

    <!-- OG Tags -->
    <meta property="og:title" content="Generative Art Studio - Create Beautiful Digital Art">
    <meta property="og:description" content="Explore mesmerizing generative art algorithms. Watch art create itself in real-time.">
    <meta property="og:url" content="https://sloppy.live/generative-art">
    <meta property="og:image" content="https://sloppy.live/generative-art/og-image.png">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Helvetica Neue', Arial, sans-serif;
            background: #0a0a0a;
            color: #fff;
            overflow: hidden;
            height: 100vh;
        }

        #canvas {
            display: block;
            width: 100%;
            height: 100vh;
            cursor: crosshair;
        }

        .controls {
            position: fixed;
            top: 30px;
            left: 30px;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            padding: 25px;
            border-radius: 4px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            max-width: 320px;
            z-index: 100;
            transition: opacity 0.3s;
            max-height: calc(100vh - 60px);
            overflow-y: auto;
        }

        .controls::-webkit-scrollbar {
            width: 6px;
        }

        .controls::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 0;
        }

        .controls::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 0;
        }

        .controls.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .controls h1 {
            font-size: 1.5em;
            margin-bottom: 5px;
            font-weight: 300;
            letter-spacing: 1px;
        }

        .controls .subtitle {
            font-size: 0.85em;
            color: rgba(255, 255, 255, 0.6);
            margin-bottom: 20px;
        }

        .art-selector {
            margin-bottom: 20px;
        }

        .art-selector select {
            width: 100%;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.95em;
            font-weight: 300;
            outline: none;
        }

        .art-selector select option {
            background: #1a1a1a;
            color: white;
            padding: 10px;
        }

        #dynamicControls {
            margin-bottom: 20px;
        }

        .control-group {
            margin-bottom: 15px;
        }

        .control-group label {
            display: block;
            font-size: 0.85em;
            margin-bottom: 8px;
            color: rgba(255, 255, 255, 0.8);
            font-weight: 300;
        }

        .control-group input[type="range"] {
            width: 100%;
            height: 4px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 0;
            outline: none;
            -webkit-appearance: none;
        }

        .control-group input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 16px;
            height: 16px;
            background: white;
            border-radius: 50%;
            cursor: pointer;
        }

        .control-group input[type="range"]::-moz-range-thumb {
            width: 16px;
            height: 16px;
            background: white;
            border-radius: 50%;
            cursor: pointer;
            border: none;
        }

        .control-group input[type="color"] {
            width: 100%;
            height: 40px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            background: transparent;
        }

        .action-btn {
            width: 100%;
            background: rgba(255, 255, 255, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.95em;
            margin-bottom: 10px;
            transition: all 0.3s;
            font-weight: 300;
        }

        .action-btn:hover {
            background: rgba(255, 255, 255, 0.25);
        }

        .toggle-ui {
            position: fixed;
            top: 30px;
            right: 30px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 12px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9em;
            backdrop-filter: blur(20px);
            z-index: 101;
            transition: all 0.3s;
        }

        .toggle-ui:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .backlink {
            position: fixed;
            bottom: 30px;
            left: 30px;
            z-index: 100;
        }

        .backlink a {
            color: rgba(255, 255, 255, 0.6);
            text-decoration: none;
            font-size: 0.9em;
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 4px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            display: inline-block;
            transition: all 0.3s;
        }

        .backlink a:hover {
            color: white;
            background: rgba(255, 255, 255, 0.1);
        }

        @media (max-width: 768px) {
            .controls {
                top: 20px;
                left: 20px;
                right: 20px;
                max-width: none;
                padding: 20px;
                max-height: calc(100vh - 40px);
            }

            .toggle-ui {
                top: 20px;
                right: 20px;
            }

            .backlink {
                bottom: 20px;
                left: 20px;
            }
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>

    <button class="toggle-ui" onclick="toggleUI()">Toggle UI</button>

    <div class="controls" id="controls">
        <h1>üé® Generative Art</h1>
        <p class="subtitle">Explore algorithmic beauty</p>

        <div class="art-selector">
            <select id="artSelector">
                <option value="flowField">Flow Field</option>
                <option value="particles">Particle Explosion</option>
                <option value="waves">Wave Patterns</option>
                <option value="spirograph">Spirograph</option>
                <option value="circlePacking">Circle Packing</option>
                <option value="fractalTree">Fractal Tree</option>
                <option value="lissajous">Lissajous Curves</option>
                <option value="constellation">Constellation</option>
            </select>
        </div>

        <div id="dynamicControls"></div>

        <button class="action-btn" onclick="regenerate()">Regenerate</button>
        <button class="action-btn" onclick="clearCanvas()">Clear Canvas</button>
    </div>

    <div class="backlink">
        <a href="https://sloppy.live">‚Üê VibeCodedByX</a> | <a href="https://sloppy.live/overview" style="color:#4ecdc4;text-decoration:none">üé® View All Apps</a>
    </div>

    <script src="../../supabase-config.js"></script>
    <script type="module">
        import FlowField from './flowField.js';
        import ParticleExplosion from './particles.js';
        import Waves from './waves.js';
        import Spirograph from './spirograph.js';
        import CirclePacking from './circlePacking.js';
        import FractalTree from './fractalTree.js';
        import Lissajous from './lissajous.js';
        import Constellation from './constellation.js';

        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');

        let width, height;
        let currentArt = null;
        let currentArtType = 'flowField';

        const artModules = {
            flowField: FlowField,
            particles: ParticleExplosion,
            waves: Waves,
            spirograph: Spirograph,
            circlePacking: CirclePacking,
            fractalTree: FractalTree,
            lissajous: Lissajous,
            constellation: Constellation
        };

        function resizeCanvas() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
        }

        resizeCanvas();
        window.addEventListener('resize', () => {
            resizeCanvas();
            if (currentArt) {
                currentArt.clear();
            }
        });

        function loadArt(artType) {
            // Stop current animation
            if (currentArt) {
                currentArt.stop();
            }

            // Clear canvas
            ctx.fillStyle = '#0a0a0a';
            ctx.fillRect(0, 0, width, height);

            // Create new art instance
            const ArtClass = artModules[artType];
            currentArt = new ArtClass(canvas, ctx);

            // Load controls
            const controlsContainer = document.getElementById('dynamicControls');
            controlsContainer.innerHTML = currentArt.getControls();

            // Attach event listeners
            currentArt.attachListeners();

            // Start animation
            currentArt.start();

            currentArtType = artType;
        }

        // Art selector change handler
        document.getElementById('artSelector').addEventListener('change', (e) => {
            loadArt(e.target.value);
        });

        window.regenerate = function() {
            if (currentArt) {
                currentArt.clear();
            }
        };

        window.clearCanvas = function() {
            ctx.fillStyle = '#0a0a0a';
            ctx.fillRect(0, 0, width, height);
            if (currentArt) {
                currentArt.stop();
                currentArt.start();
            }
        };

        window.toggleUI = function() {
            const controls = document.getElementById('controls');
            controls.classList.toggle('hidden');
        };

        // Initialize with flow field
        loadArt('flowField');

        // Optional: Supabase auth
        if (typeof supabase !== 'undefined') {
            supabase.auth.getSession().then(({ data: { session } }) => {
                if (session) {
                    console.log('User logged in:', session.user.id);
                }
            });
        }
    </script>
<script src="/sloppy-header/sloppy-bar.js"></script>
</body>
</html>
