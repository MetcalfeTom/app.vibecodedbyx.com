<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSON ‚Üî TOON Converter</title>
    <link rel="icon" href="https://emojicdn.elk.sh/üîÑ">

    <meta property="og:title" content="JSON ‚Üî TOON Converter">
    <meta property="og:description" content="Convert between JSON and TOON format - the AI-optimized data format">
    <meta property="og:url" content="https://app.vibecodedbyx.com/json-toon-converter">
    <meta property="og:image" content="https://app.vibecodedbyx.com/json-toon-converter/og-image.png">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .back-link {
            display: inline-block;
            color: white;
            text-decoration: none;
            margin-bottom: 20px;
            padding: 8px 16px;
            background: rgba(255,255,255,0.2);
            border-radius: 8px;
            transition: background 0.3s;
        }

        .back-link:hover {
            background: rgba(255,255,255,0.3);
        }

        .converter-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .panel {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }

        .panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .panel-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #667eea;
        }

        textarea {
            width: 100%;
            height: 400px;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            resize: vertical;
            transition: border-color 0.3s;
        }

        textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        button {
            padding: 12px 30px;
            font-size: 1rem;
            font-weight: 600;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .btn-convert {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-convert:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0,0,0,0.2);
        }

        .btn-swap {
            background: #f0f0f0;
            color: #333;
        }

        .btn-swap:hover {
            background: #e0e0e0;
        }

        .btn-clear {
            background: #ff6b6b;
            color: white;
        }

        .btn-clear:hover {
            background: #ff5252;
        }

        .btn-copy {
            padding: 6px 12px;
            font-size: 0.9rem;
            background: #4caf50;
            color: white;
        }

        .btn-copy:hover {
            background: #45a049;
        }

        .info-panel {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }

        .info-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: #667eea;
            margin-bottom: 15px;
        }

        .info-content {
            line-height: 1.6;
            color: #666;
        }

        .example {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            overflow-x: auto;
        }

        .error {
            background: #ffebee;
            color: #c62828;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            display: none;
        }

        .success {
            background: #e8f5e9;
            color: #2e7d32;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            display: none;
        }

        @media (max-width: 768px) {
            .converter-container {
                grid-template-columns: 1fr;
            }

            h1 {
                font-size: 1.8rem;
            }

            textarea {
                height: 300px;
            }

            .controls {
                flex-direction: column;
            }

            button {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="https://www.vibecodedbyx.com" class="back-link">‚Üê Back to VibeCodedByX</a>

        <header>
            <h1>üîÑ JSON ‚Üî TOON Converter</h1>
            <p class="subtitle">Convert between JSON and TOON - the AI-optimized data format</p>
        </header>

        <div class="converter-container">
            <div class="panel">
                <div class="panel-header">
                    <h2 class="panel-title">JSON Input</h2>
                    <button class="btn-copy" onclick="copyToClipboard('jsonInput')">Copy</button>
                </div>
                <textarea id="jsonInput" placeholder='Enter JSON here, e.g.:
{
  "users": [
    {"id": 1, "name": "Alice", "role": "admin"},
    {"id": 2, "name": "Bob", "role": "user"}
  ]
}'></textarea>
            </div>

            <div class="panel">
                <div class="panel-header">
                    <h2 class="panel-title">TOON Output</h2>
                    <button class="btn-copy" onclick="copyToClipboard('toonInput')">Copy</button>
                </div>
                <textarea id="toonInput" placeholder='TOON format will appear here, e.g.:
users[2]{id,name,role}:
1,Alice,admin
2,Bob,user'></textarea>
            </div>
        </div>

        <div class="controls">
            <button class="btn-convert" onclick="convertJsonToToon()">JSON ‚Üí TOON</button>
            <button class="btn-swap" onclick="swapContent()">‚áÑ Swap</button>
            <button class="btn-convert" onclick="convertToonToJson()">TOON ‚Üí JSON</button>
            <button class="btn-clear" onclick="clearAll()">Clear All</button>
        </div>

        <div class="error" id="errorMsg"></div>
        <div class="success" id="successMsg"></div>

        <div class="info-panel">
            <h3 class="info-title">About TOON Format</h3>
            <div class="info-content">
                <p><strong>TOON (Token-Oriented Object Notation)</strong> is a modern data format optimized for AI and Large Language Models. It reduces token count by 30-60% compared to JSON, making it ideal for AI applications.</p>

                <p style="margin-top: 10px;"><strong>Key Features:</strong></p>
                <ul style="margin-left: 20px; margin-top: 5px;">
                    <li>Indentation-based structure</li>
                    <li>Column headers with square brackets</li>
                    <li>Comma-separated data rows</li>
                    <li>Minimal redundancy</li>
                </ul>

                <div class="example">
<strong>JSON:</strong>
{
  "users": [
    {"id": 1, "name": "Sreeni", "role": "admin"},
    {"id": 2, "name": "Krishna", "role": "admin"}
  ],
  "metadata": {
    "total": 2,
    "updated": "2024-01-15"
  }
}

<strong>TOON:</strong>
users[2]{id,name,role}:
1,Sreeni,admin
2,Krishna,admin

metadata{total,updated}:
2,2024-01-15
                </div>
            </div>
        </div>
    </div>

    <script>
        function showError(message) {
            const errorEl = document.getElementById('errorMsg');
            const successEl = document.getElementById('successMsg');
            errorEl.textContent = message;
            errorEl.style.display = 'block';
            successEl.style.display = 'none';
            setTimeout(() => {
                errorEl.style.display = 'none';
            }, 5000);
        }

        function showSuccess(message) {
            const errorEl = document.getElementById('errorMsg');
            const successEl = document.getElementById('successMsg');
            successEl.textContent = message;
            successEl.style.display = 'block';
            errorEl.style.display = 'none';
            setTimeout(() => {
                successEl.style.display = 'none';
            }, 3000);
        }

        function jsonToToon(json) {
            let toonOutput = '';

            for (let [key, value] of Object.entries(json)) {
                if (Array.isArray(value) && value.length > 0) {
                    // Array of objects
                    if (typeof value[0] === 'object' && !Array.isArray(value[0])) {
                        const keys = Object.keys(value[0]);
                        toonOutput += `${key}[${value.length}]{${keys.join(',')}}:\n`;

                        for (let item of value) {
                            const values = keys.map(k => {
                                const v = item[k];
                                if (typeof v === 'string' && (v.includes(',') || v.includes('\n') || v.includes('"'))) {
                                    return `"${v.replace(/"/g, '""')}"`;
                                }
                                return v;
                            });
                            toonOutput += `${values.join(',')}\n`;
                        }
                    } else {
                        // Simple array
                        toonOutput += `${key}[${value.length}]:\n`;
                        toonOutput += `${value.join(',')}\n`;
                    }
                } else if (typeof value === 'object' && value !== null && !Array.isArray(value)) {
                    // Object
                    const keys = Object.keys(value);
                    toonOutput += `${key}{${keys.join(',')}}:\n`;
                    const values = keys.map(k => {
                        const v = value[k];
                        if (typeof v === 'string' && (v.includes(',') || v.includes('\n') || v.includes('"'))) {
                            return `"${v.replace(/"/g, '""')}"`;
                        }
                        return v;
                    });
                    toonOutput += `${values.join(',')}\n`;
                } else {
                    // Simple value
                    toonOutput += `${key}:\n${value}\n`;
                }

                toonOutput += '\n';
            }

            return toonOutput.trim();
        }

        function toonToJson(toon) {
            const lines = toon.split('\n').map(l => l.trim()).filter(l => l);
            const result = {};
            let currentKey = null;
            let currentSchema = null;
            let currentCount = null;
            let currentType = null;

            for (let line of lines) {
                // Check if it's a header line (ends with :)
                if (line.endsWith(':')) {
                    const headerMatch = line.match(/^(\w+)(\[(\d+)\])?(\{([^}]+)\})?:$/);
                    if (headerMatch) {
                        currentKey = headerMatch[1];
                        currentCount = headerMatch[3] ? parseInt(headerMatch[3]) : null;
                        currentSchema = headerMatch[5] ? headerMatch[5].split(',').map(s => s.trim()) : null;

                        if (currentCount !== null && currentSchema) {
                            // Array of objects
                            result[currentKey] = [];
                            currentType = 'arrayOfObjects';
                        } else if (currentCount !== null) {
                            // Simple array
                            result[currentKey] = [];
                            currentType = 'array';
                        } else if (currentSchema) {
                            // Single object
                            result[currentKey] = {};
                            currentType = 'object';
                        } else {
                            // Simple value
                            currentType = 'value';
                        }
                    }
                } else if (currentKey) {
                    // Data line
                    if (currentType === 'arrayOfObjects') {
                        const values = parseCSVLine(line);
                        const obj = {};
                        currentSchema.forEach((key, i) => {
                            obj[key] = parseValue(values[i]);
                        });
                        result[currentKey].push(obj);
                    } else if (currentType === 'array') {
                        const values = parseCSVLine(line);
                        result[currentKey] = values.map(parseValue);
                    } else if (currentType === 'object') {
                        const values = parseCSVLine(line);
                        currentSchema.forEach((key, i) => {
                            result[currentKey][key] = parseValue(values[i]);
                        });
                        currentType = null; // Reset after single object
                    } else if (currentType === 'value') {
                        result[currentKey] = parseValue(line);
                        currentType = null;
                    }
                }
            }

            return result;
        }

        function parseCSVLine(line) {
            const result = [];
            let current = '';
            let inQuotes = false;

            for (let i = 0; i < line.length; i++) {
                const char = line[i];

                if (char === '"') {
                    if (inQuotes && line[i + 1] === '"') {
                        current += '"';
                        i++;
                    } else {
                        inQuotes = !inQuotes;
                    }
                } else if (char === ',' && !inQuotes) {
                    result.push(current.trim());
                    current = '';
                } else {
                    current += char;
                }
            }

            result.push(current.trim());
            return result;
        }

        function parseValue(value) {
            if (value === 'null') return null;
            if (value === 'true') return true;
            if (value === 'false') return false;
            if (!isNaN(value) && value !== '') return Number(value);
            return value;
        }

        function convertJsonToToon() {
            const jsonInput = document.getElementById('jsonInput').value.trim();

            if (!jsonInput) {
                showError('Please enter JSON data to convert');
                return;
            }

            try {
                const jsonObj = JSON.parse(jsonInput);
                const toonOutput = jsonToToon(jsonObj);
                document.getElementById('toonInput').value = toonOutput;
                showSuccess('Successfully converted JSON to TOON!');
            } catch (e) {
                showError('Invalid JSON: ' + e.message);
            }
        }

        function convertToonToJson() {
            const toonInput = document.getElementById('toonInput').value.trim();

            if (!toonInput) {
                showError('Please enter TOON data to convert');
                return;
            }

            try {
                const jsonObj = toonToJson(toonInput);
                const jsonOutput = JSON.stringify(jsonObj, null, 2);
                document.getElementById('jsonInput').value = jsonOutput;
                showSuccess('Successfully converted TOON to JSON!');
            } catch (e) {
                showError('Invalid TOON format: ' + e.message);
            }
        }

        function swapContent() {
            const jsonInput = document.getElementById('jsonInput');
            const toonInput = document.getElementById('toonInput');

            const temp = jsonInput.value;
            jsonInput.value = toonInput.value;
            toonInput.value = temp;

            showSuccess('Content swapped!');
        }

        function clearAll() {
            document.getElementById('jsonInput').value = '';
            document.getElementById('toonInput').value = '';
            document.getElementById('errorMsg').style.display = 'none';
            document.getElementById('successMsg').style.display = 'none';
        }

        function copyToClipboard(textareaId) {
            const textarea = document.getElementById(textareaId);
            if (!textarea.value) {
                showError('Nothing to copy!');
                return;
            }

            textarea.select();
            document.execCommand('copy');
            showSuccess('Copied to clipboard!');
        }

        // Add example data on load
        window.addEventListener('load', () => {
            const exampleJson = {
                "users": [
                    {"id": 1, "name": "Alice", "role": "admin", "email": "alice@example.com"},
                    {"id": 2, "name": "Bob", "role": "user", "email": "bob@example.com"},
                    {"id": 3, "name": "Charlie", "role": "user", "email": "charlie@example.com"}
                ],
                "metadata": {
                    "total": 3,
                    "last_updated": "2024-01-15T10:30:00Z"
                }
            };

            document.getElementById('jsonInput').value = JSON.stringify(exampleJson, null, 2);
        });
    </script>
</body>
</html>
