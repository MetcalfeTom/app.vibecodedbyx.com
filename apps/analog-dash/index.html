<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Analog Computer Dashboard</title>
  <link rel="icon" href="https://emojicdn.elk.sh/üéõÔ∏è">
  <meta property="og:title" content="Analog Computer Dashboard">
  <meta property="og:description" content="Vintage analog computer with voltage meters and patch cables">
  <meta property="og:url" content="https://app.sloppy.live/analog-dash">
  <meta property="og:image" content="https://emojicdn.elk.sh/üéõÔ∏è?style=apple&size=512">
  <link href="https://fonts.googleapis.com/css2?family=Courier+Prime:wght@700&family=Orbitron:wght@500&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    :root {
      --panel-bg: #2a2520;
      --panel-light: #3d3530;
      --bezel: #1a1815;
      --cream: #e8e0d0;
      --orange: #ff6b35;
      --red: #cc3333;
      --green: #33aa55;
      --amber: #ffaa00;
      --copper: #b87333;
      --brass: #c9a227;
    }

    body {
      font-family: 'Courier Prime', monospace;
      background: linear-gradient(180deg, #1a1512 0%, #2a2520 100%);
      min-height: 100vh;
      overflow-x: hidden;
      color: var(--cream);
    }

    .dashboard {
      max-width: 1400px;
      margin: 0 auto;
      padding: 20px;
    }

    /* Header panel */
    .header-panel {
      background: var(--panel-bg);
      border: 4px solid var(--bezel);
      border-radius: 8px;
      padding: 15px 25px;
      margin-bottom: 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: inset 0 2px 10px rgba(0,0,0,0.5);
    }

    .title {
      font-family: 'Orbitron', sans-serif;
      font-size: 1.3rem;
      color: var(--amber);
      text-shadow: 0 0 10px var(--amber);
      letter-spacing: 3px;
    }

    .indicator-lights {
      display: flex;
      gap: 15px;
    }

    .indicator {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 0.7rem;
      text-transform: uppercase;
    }

    .light {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      border: 2px solid #444;
      box-shadow: inset 0 -2px 4px rgba(0,0,0,0.5);
    }

    .light.on { animation: blink 1s ease-in-out infinite; }
    .light.green { background: var(--green); box-shadow: 0 0 10px var(--green); }
    .light.amber { background: var(--amber); box-shadow: 0 0 10px var(--amber); }
    .light.red { background: var(--red); box-shadow: 0 0 10px var(--red); }

    @keyframes blink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.6; }
    }

    /* Main panel grid */
    .main-panel {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 20px;
      margin-bottom: 20px;
    }

    /* Voltage meters */
    .meter {
      background: var(--panel-light);
      border: 4px solid var(--bezel);
      border-radius: 8px;
      padding: 15px;
      text-align: center;
      box-shadow: inset 0 2px 10px rgba(0,0,0,0.3);
    }

    .meter-label {
      font-size: 0.7rem;
      color: var(--amber);
      text-transform: uppercase;
      letter-spacing: 2px;
      margin-bottom: 10px;
    }

    .meter-display {
      position: relative;
      width: 120px;
      height: 70px;
      margin: 0 auto;
      background: linear-gradient(180deg, #f5f0e0 0%, #e0d8c8 100%);
      border: 3px solid var(--bezel);
      border-radius: 8px 8px 60px 60px;
      overflow: hidden;
    }

    .meter-scale {
      position: absolute;
      bottom: 10px;
      left: 10px;
      right: 10px;
      height: 50px;
      border-bottom: 2px solid #333;
    }

    .meter-tick {
      position: absolute;
      bottom: 0;
      width: 1px;
      background: #333;
      transform-origin: bottom center;
    }

    .meter-tick.major { height: 15px; width: 2px; }
    .meter-tick.minor { height: 8px; }

    .meter-value {
      position: absolute;
      bottom: 20px;
      font-size: 0.5rem;
      color: #333;
      transform: translateX(-50%);
    }

    .meter-needle {
      position: absolute;
      bottom: 5px;
      left: 50%;
      width: 3px;
      height: 55px;
      background: linear-gradient(180deg, var(--red) 0%, #800 100%);
      transform-origin: bottom center;
      transform: rotate(-45deg);
      border-radius: 2px 2px 0 0;
      box-shadow: 2px 2px 4px rgba(0,0,0,0.3);
      transition: transform 0.1s ease-out;
    }

    .meter-needle::after {
      content: '';
      position: absolute;
      bottom: -4px;
      left: 50%;
      transform: translateX(-50%);
      width: 10px;
      height: 10px;
      background: var(--brass);
      border-radius: 50%;
      border: 2px solid #333;
    }

    .meter-reading {
      margin-top: 10px;
      font-family: 'Orbitron', sans-serif;
      font-size: 1.1rem;
      color: var(--green);
      text-shadow: 0 0 5px var(--green);
    }

    /* Patch bay */
    .patch-bay {
      background: var(--panel-bg);
      border: 4px solid var(--bezel);
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 20px;
      box-shadow: inset 0 2px 10px rgba(0,0,0,0.5);
    }

    .patch-title {
      font-size: 0.8rem;
      color: var(--amber);
      text-transform: uppercase;
      letter-spacing: 2px;
      margin-bottom: 15px;
      text-align: center;
    }

    .patch-grid {
      display: flex;
      justify-content: space-around;
      position: relative;
    }

    .node-column {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .node-column-label {
      font-size: 0.65rem;
      color: #888;
      text-transform: uppercase;
      text-align: center;
      margin-bottom: 5px;
    }

    .signal-node {
      position: relative;
      width: 50px;
      height: 50px;
      background: radial-gradient(circle at 30% 30%, #444, #222);
      border: 3px solid var(--brass);
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s;
      box-shadow: 0 4px 8px rgba(0,0,0,0.4), inset 0 2px 4px rgba(255,255,255,0.1);
    }

    .signal-node:hover {
      border-color: var(--amber);
      box-shadow: 0 0 15px var(--amber);
    }

    .signal-node.active {
      border-color: var(--green);
      box-shadow: 0 0 20px var(--green);
    }

    .signal-node.selected {
      border-color: var(--orange);
      box-shadow: 0 0 25px var(--orange);
      animation: pulse-node 0.5s ease-in-out infinite;
    }

    @keyframes pulse-node {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }

    .node-jack {
      width: 16px;
      height: 16px;
      background: radial-gradient(circle at 30% 30%, #1a1a1a, #000);
      border: 2px solid var(--copper);
      border-radius: 50%;
    }

    .node-label {
      position: absolute;
      bottom: -18px;
      font-size: 0.55rem;
      color: var(--cream);
      white-space: nowrap;
    }

    /* SVG for cables */
    .cable-layer {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 5;
    }

    .patch-cable {
      fill: none;
      stroke-width: 6;
      stroke-linecap: round;
      filter: drop-shadow(2px 4px 3px rgba(0,0,0,0.5));
      animation: cable-pulse 2s ease-in-out infinite;
    }

    @keyframes cable-pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.8; }
    }

    /* Oscilloscope */
    .scope-panel {
      background: var(--panel-bg);
      border: 4px solid var(--bezel);
      border-radius: 8px;
      padding: 20px;
      box-shadow: inset 0 2px 10px rgba(0,0,0,0.5);
    }

    .scope-title {
      font-size: 0.8rem;
      color: var(--amber);
      text-transform: uppercase;
      letter-spacing: 2px;
      margin-bottom: 15px;
      text-align: center;
    }

    .scope-screen {
      background: #001a00;
      border: 6px solid var(--bezel);
      border-radius: 12px;
      height: 150px;
      position: relative;
      overflow: hidden;
      box-shadow: inset 0 0 30px rgba(0,255,0,0.1);
    }

    .scope-grid {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image:
        linear-gradient(rgba(0,255,0,0.1) 1px, transparent 1px),
        linear-gradient(90deg, rgba(0,255,0,0.1) 1px, transparent 1px);
      background-size: 20px 20px;
    }

    .scope-trace {
      position: absolute;
      top: 50%;
      left: 0;
      width: 100%;
      height: 2px;
      background: var(--green);
      box-shadow: 0 0 10px var(--green), 0 0 20px var(--green);
    }

    #scopeCanvas {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }

    /* Control knobs */
    .controls-row {
      display: flex;
      justify-content: center;
      gap: 40px;
      margin-top: 20px;
    }

    .knob-container {
      text-align: center;
    }

    .knob {
      width: 60px;
      height: 60px;
      background: radial-gradient(circle at 30% 30%, #555, #222);
      border: 4px solid var(--brass);
      border-radius: 50%;
      position: relative;
      cursor: pointer;
      box-shadow: 0 4px 10px rgba(0,0,0,0.5);
    }

    .knob::before {
      content: '';
      position: absolute;
      top: 8px;
      left: 50%;
      transform: translateX(-50%);
      width: 4px;
      height: 15px;
      background: var(--cream);
      border-radius: 2px;
    }

    .knob-label {
      font-size: 0.6rem;
      color: #888;
      text-transform: uppercase;
      margin-top: 8px;
    }

    .back-link {
      position: fixed;
      top: 10px;
      right: 10px;
      color: #555;
      text-decoration: none;
      font-size: 0.7rem;
      z-index: 100;
    }

    .back-link:hover { color: var(--amber); }

    /* Instructions */
    .instructions {
      text-align: center;
      font-size: 0.7rem;
      color: #666;
      margin-top: 15px;
    }

    @media (max-width: 900px) {
      .main-panel {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (max-width: 500px) {
      .main-panel {
        grid-template-columns: 1fr;
      }
      .patch-grid {
        flex-direction: column;
        align-items: center;
        gap: 30px;
      }
    }
  </style>
</head>
<body>
  <div class="dashboard">
    <div class="header-panel">
      <div class="title">‚ö° ANALOG COMPUTER MK-IV</div>
      <div class="indicator-lights">
        <div class="indicator">
          <div class="light green on"></div>
          <span>Power</span>
        </div>
        <div class="indicator">
          <div class="light amber on"></div>
          <span>Compute</span>
        </div>
        <div class="indicator">
          <div class="light red" id="overload-light"></div>
          <span>Overload</span>
        </div>
      </div>
    </div>

    <div class="main-panel">
      <div class="meter" id="meter-1">
        <div class="meter-label">Voltage A</div>
        <div class="meter-display">
          <div class="meter-scale" id="scale-1"></div>
          <div class="meter-needle" id="needle-1"></div>
        </div>
        <div class="meter-reading" id="reading-1">0.00 V</div>
      </div>
      <div class="meter" id="meter-2">
        <div class="meter-label">Voltage B</div>
        <div class="meter-display">
          <div class="meter-scale" id="scale-2"></div>
          <div class="meter-needle" id="needle-2"></div>
        </div>
        <div class="meter-reading" id="reading-2">0.00 V</div>
      </div>
      <div class="meter" id="meter-3">
        <div class="meter-label">Current</div>
        <div class="meter-display">
          <div class="meter-scale" id="scale-3"></div>
          <div class="meter-needle" id="needle-3"></div>
        </div>
        <div class="meter-reading" id="reading-3">0.00 mA</div>
      </div>
      <div class="meter" id="meter-4">
        <div class="meter-label">Output</div>
        <div class="meter-display">
          <div class="meter-scale" id="scale-4"></div>
          <div class="meter-needle" id="needle-4"></div>
        </div>
        <div class="meter-reading" id="reading-4">0.00 V</div>
      </div>
    </div>

    <div class="patch-bay">
      <div class="patch-title">‚¨° Signal Patch Bay</div>
      <div class="patch-grid" id="patch-grid">
        <svg class="cable-layer" id="cable-layer"></svg>

        <div class="node-column">
          <div class="node-column-label">Inputs</div>
          <div class="signal-node" data-node="in-1" data-type="input">
            <div class="node-jack"></div>
            <span class="node-label">SIN</span>
          </div>
          <div class="signal-node" data-node="in-2" data-type="input">
            <div class="node-jack"></div>
            <span class="node-label">SQR</span>
          </div>
          <div class="signal-node" data-node="in-3" data-type="input">
            <div class="node-jack"></div>
            <span class="node-label">TRI</span>
          </div>
          <div class="signal-node" data-node="in-4" data-type="input">
            <div class="node-jack"></div>
            <span class="node-label">NOISE</span>
          </div>
        </div>

        <div class="node-column">
          <div class="node-column-label">Process</div>
          <div class="signal-node" data-node="proc-1" data-type="process">
            <div class="node-jack"></div>
            <span class="node-label">AMP</span>
          </div>
          <div class="signal-node" data-node="proc-2" data-type="process">
            <div class="node-jack"></div>
            <span class="node-label">MULT</span>
          </div>
          <div class="signal-node" data-node="proc-3" data-type="process">
            <div class="node-jack"></div>
            <span class="node-label">INTEG</span>
          </div>
          <div class="signal-node" data-node="proc-4" data-type="process">
            <div class="node-jack"></div>
            <span class="node-label">DIFF</span>
          </div>
        </div>

        <div class="node-column">
          <div class="node-column-label">Outputs</div>
          <div class="signal-node" data-node="out-1" data-type="output">
            <div class="node-jack"></div>
            <span class="node-label">CH A</span>
          </div>
          <div class="signal-node" data-node="out-2" data-type="output">
            <div class="node-jack"></div>
            <span class="node-label">CH B</span>
          </div>
          <div class="signal-node" data-node="out-3" data-type="output">
            <div class="node-jack"></div>
            <span class="node-label">SCOPE</span>
          </div>
          <div class="signal-node" data-node="out-4" data-type="output">
            <div class="node-jack"></div>
            <span class="node-label">METER</span>
          </div>
        </div>
      </div>
      <p class="instructions">Click two nodes to connect with a patch cable. Click a cable to remove it.</p>
    </div>

    <div class="scope-panel">
      <div class="scope-title">‚óâ Oscilloscope Monitor</div>
      <div class="scope-screen">
        <div class="scope-grid"></div>
        <canvas id="scopeCanvas"></canvas>
      </div>
      <div class="controls-row">
        <div class="knob-container">
          <div class="knob" id="knob-freq" style="transform: rotate(45deg)"></div>
          <div class="knob-label">Frequency</div>
        </div>
        <div class="knob-container">
          <div class="knob" id="knob-amp" style="transform: rotate(90deg)"></div>
          <div class="knob-label">Amplitude</div>
        </div>
        <div class="knob-container">
          <div class="knob" id="knob-phase" style="transform: rotate(0deg)"></div>
          <div class="knob-label">Phase</div>
        </div>
      </div>
    </div>
  </div>

  <a href="https://sloppy.live" class="back-link">‚Üê sloppy.live</a>

  <script>
    // Meter needle simulation
    const needles = [
      { el: document.getElementById('needle-1'), reading: document.getElementById('reading-1'), value: 0, target: 0, unit: 'V', max: 10 },
      { el: document.getElementById('needle-2'), reading: document.getElementById('reading-2'), value: 0, target: 0, unit: 'V', max: 10 },
      { el: document.getElementById('needle-3'), reading: document.getElementById('reading-3'), value: 0, target: 0, unit: 'mA', max: 100 },
      { el: document.getElementById('needle-4'), reading: document.getElementById('reading-4'), value: 0, target: 0, unit: 'V', max: 10 }
    ];

    // Create meter scales
    document.querySelectorAll('.meter-scale').forEach((scale, idx) => {
      for (let i = 0; i <= 10; i++) {
        const tick = document.createElement('div');
        tick.className = 'meter-tick ' + (i % 2 === 0 ? 'major' : 'minor');
        const angle = -45 + (i * 9);
        const rad = (angle - 90) * Math.PI / 180;
        const x = 50 + 40 * Math.cos(rad);
        tick.style.left = x + '%';
        tick.style.transform = `rotate(${angle}deg)`;
        scale.appendChild(tick);

        if (i % 2 === 0) {
          const val = document.createElement('div');
          val.className = 'meter-value';
          val.style.left = x + '%';
          val.textContent = i;
          scale.appendChild(val);
        }
      }
    });

    // Needle vibration and movement
    function updateNeedles() {
      needles.forEach((n, i) => {
        // Random target changes
        if (Math.random() < 0.02) {
          n.target = Math.random() * n.max;
        }

        // Move toward target with vibration
        const diff = n.target - n.value;
        n.value += diff * 0.05;

        // Add vibration based on connected cables
        const vibration = (Math.random() - 0.5) * (connections.length > 0 ? 2 : 0.5);
        const displayValue = n.value + vibration * 0.1;

        // Convert to angle (-45 to 45 degrees)
        const angle = -45 + (displayValue / n.max) * 90;
        n.el.style.transform = `rotate(${angle}deg)`;

        // Update reading
        n.reading.textContent = displayValue.toFixed(2) + ' ' + n.unit;
      });

      requestAnimationFrame(updateNeedles);
    }

    // Patch cable system
    const cableLayer = document.getElementById('cable-layer');
    const nodes = document.querySelectorAll('.signal-node');
    let selectedNode = null;
    let connections = [];

    const cableColors = ['#ff6b35', '#3366ff', '#33cc66', '#cc33cc', '#ffcc00', '#ff3366'];
    let colorIndex = 0;

    nodes.forEach(node => {
      node.addEventListener('click', () => handleNodeClick(node));
    });

    function handleNodeClick(node) {
      if (selectedNode === null) {
        // First node selected
        selectedNode = node;
        node.classList.add('selected');
      } else if (selectedNode === node) {
        // Deselect
        selectedNode.classList.remove('selected');
        selectedNode = null;
      } else {
        // Connect nodes
        createConnection(selectedNode, node);
        selectedNode.classList.remove('selected');
        selectedNode = null;
      }
    }

    function createConnection(node1, node2) {
      // Check if connection already exists
      const exists = connections.find(c =>
        (c.from === node1 && c.to === node2) ||
        (c.from === node2 && c.to === node1)
      );
      if (exists) return;

      const color = cableColors[colorIndex % cableColors.length];
      colorIndex++;

      const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
      path.classList.add('patch-cable');
      path.style.stroke = color;

      const conn = { from: node1, to: node2, path, color };
      connections.push(conn);

      path.addEventListener('click', () => {
        removeConnection(conn);
      });
      path.style.pointerEvents = 'stroke';
      path.style.cursor = 'pointer';

      cableLayer.appendChild(path);
      updateCablePath(conn);

      node1.classList.add('active');
      node2.classList.add('active');

      // Boost needle activity
      needles.forEach(n => {
        n.target = Math.random() * n.max;
      });
    }

    function removeConnection(conn) {
      conn.path.remove();
      connections = connections.filter(c => c !== conn);

      // Check if nodes still have connections
      [conn.from, conn.to].forEach(node => {
        const hasConn = connections.some(c => c.from === node || c.to === node);
        if (!hasConn) {
          node.classList.remove('active');
        }
      });
    }

    function updateCablePath(conn) {
      const rect1 = conn.from.getBoundingClientRect();
      const rect2 = conn.to.getBoundingClientRect();
      const container = cableLayer.getBoundingClientRect();

      const x1 = rect1.left + rect1.width / 2 - container.left;
      const y1 = rect1.top + rect1.height / 2 - container.top;
      const x2 = rect2.left + rect2.width / 2 - container.left;
      const y2 = rect2.top + rect2.height / 2 - container.top;

      // Create droopy cable path
      const midX = (x1 + x2) / 2;
      const dist = Math.abs(x2 - x1);
      const sag = Math.min(dist * 0.3, 80);
      const midY = Math.max(y1, y2) + sag;

      const d = `M ${x1} ${y1} Q ${midX} ${midY} ${x2} ${y2}`;
      conn.path.setAttribute('d', d);
    }

    // Update cable positions on resize
    function updateAllCables() {
      connections.forEach(updateCablePath);
    }
    window.addEventListener('resize', updateAllCables);

    // Oscilloscope
    const scopeCanvas = document.getElementById('scopeCanvas');
    const ctx = scopeCanvas.getContext('2d');
    let scopePhase = 0;

    function resizeScope() {
      scopeCanvas.width = scopeCanvas.offsetWidth * 2;
      scopeCanvas.height = scopeCanvas.offsetHeight * 2;
      ctx.scale(2, 2);
    }
    resizeScope();
    window.addEventListener('resize', resizeScope);

    function drawScope() {
      const w = scopeCanvas.offsetWidth;
      const h = scopeCanvas.offsetHeight;

      ctx.clearRect(0, 0, w, h);

      // Draw waveform based on connections
      ctx.strokeStyle = '#00ff00';
      ctx.lineWidth = 2;
      ctx.shadowColor = '#00ff00';
      ctx.shadowBlur = 10;

      ctx.beginPath();

      const activeInputs = connections.filter(c =>
        c.from.dataset.type === 'input' || c.to.dataset.type === 'input'
      );

      for (let x = 0; x < w; x++) {
        let y = h / 2;

        if (activeInputs.length > 0) {
          const t = (x / w) * Math.PI * 4 + scopePhase;

          activeInputs.forEach((conn, i) => {
            const inputNode = conn.from.dataset.type === 'input' ? conn.from : conn.to;
            const inputType = inputNode.dataset.node;

            const amp = 30 + i * 10;
            const freq = 1 + i * 0.5;

            if (inputType.includes('in-1')) {
              y += Math.sin(t * freq) * amp;
            } else if (inputType.includes('in-2')) {
              y += (Math.sin(t * freq) > 0 ? 1 : -1) * amp * 0.8;
            } else if (inputType.includes('in-3')) {
              y += (Math.asin(Math.sin(t * freq)) * 2 / Math.PI) * amp;
            } else if (inputType.includes('in-4')) {
              y += (Math.random() - 0.5) * amp;
            }
          });
        } else {
          // Flatline with slight noise
          y += (Math.random() - 0.5) * 2;
        }

        if (x === 0) {
          ctx.moveTo(x, y);
        } else {
          ctx.lineTo(x, y);
        }
      }

      ctx.stroke();
      ctx.shadowBlur = 0;

      scopePhase += 0.05;
      requestAnimationFrame(drawScope);
    }

    // Knob rotation
    document.querySelectorAll('.knob').forEach(knob => {
      let rotating = false;
      let startY, startRotation;

      knob.addEventListener('mousedown', e => {
        rotating = true;
        startY = e.clientY;
        const transform = knob.style.transform;
        startRotation = parseFloat(transform.match(/rotate\(([^)]+)deg\)/)?.[1] || 0);
      });

      document.addEventListener('mousemove', e => {
        if (!rotating) return;
        const delta = startY - e.clientY;
        const newRotation = Math.max(-135, Math.min(135, startRotation + delta));
        knob.style.transform = `rotate(${newRotation}deg)`;
      });

      document.addEventListener('mouseup', () => {
        rotating = false;
      });
    });

    // Overload light flicker
    const overloadLight = document.getElementById('overload-light');
    setInterval(() => {
      if (connections.length >= 3 && Math.random() < 0.3) {
        overloadLight.classList.add('red', 'on');
        setTimeout(() => overloadLight.classList.remove('red', 'on'), 200);
      }
    }, 500);

    // Initialize
    updateNeedles();
    drawScope();

    // Create some initial demo connections
    setTimeout(() => {
      const sin = document.querySelector('[data-node="in-1"]');
      const amp = document.querySelector('[data-node="proc-1"]');
      const scope = document.querySelector('[data-node="out-3"]');
      createConnection(sin, amp);
      setTimeout(() => createConnection(amp, scope), 500);
    }, 1000);
  </script>
<script src="/sloppy-header/sloppy-bar.js"></script>
<script src="/vibelib-extended.js"></script>
<script>
  // Compatibility Patch for Legacy Apps
  window.addEventListener("load", () => {
    if (window.SloppyKarma && window.VibeLib.Economy) {
      // Redirect old calls to new engine
      window.SloppyKarma.track = window.VibeLib.Economy.track;
    }
  });
</script>
</body>
</html>
