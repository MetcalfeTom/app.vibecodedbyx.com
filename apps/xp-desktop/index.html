<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>Neon XP</title>
  <link rel="icon" href="https://emojicdn.elk.sh/ğŸ’¾">
  <meta name="description" content="Retro Windows XP desktop with a neon cyberpunk twist">
  <meta property="og:title" content="Neon XP">
  <meta property="og:description" content="Retro Windows XP desktop with a neon cyberpunk twist">
  <meta property="og:image" content="https://emojicdn.elk.sh/ğŸ’¾?style=google">
  <meta property="og:url" content="https://sloppy.live/xp-desktop">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=VT323&family=Tahoma&display=swap');

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'Tahoma', 'Segoe UI', sans-serif;
      overflow: hidden;
      height: 100vh;
      user-select: none;
    }

    /* Desktop */
    .desktop {
      width: 100vw;
      height: calc(100vh - 40px);
      background: linear-gradient(135deg, #0a0a1a 0%, #1a0a2a 50%, #0a1a2a 100%);
      position: relative;
      background-image:
        radial-gradient(ellipse at 20% 80%, rgba(0,255,255,0.1) 0%, transparent 50%),
        radial-gradient(ellipse at 80% 20%, rgba(255,0,255,0.1) 0%, transparent 50%);
    }

    /* Desktop Icons */
    .desktop-icons {
      padding: 20px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      position: absolute;
      top: 0;
      left: 0;
    }

    .desktop-icon {
      width: 80px;
      padding: 8px;
      text-align: center;
      cursor: pointer;
      border-radius: 4px;
      transition: all 0.2s;
    }

    .desktop-icon:hover {
      background: rgba(0,255,255,0.2);
      box-shadow: 0 0 10px rgba(0,255,255,0.3);
    }

    .desktop-icon.selected {
      background: rgba(0,255,255,0.3);
      box-shadow: 0 0 15px rgba(0,255,255,0.5);
    }

    .desktop-icon .icon {
      font-size: 2.5rem;
      display: block;
      filter: drop-shadow(0 0 5px currentColor);
    }

    .desktop-icon .label {
      font-size: 11px;
      color: #fff;
      text-shadow: 1px 1px 2px #000, 0 0 10px #0ff;
      margin-top: 4px;
      word-wrap: break-word;
    }

    /* Taskbar */
    .taskbar {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      height: 40px;
      background: linear-gradient(180deg, #2a1a3a 0%, #1a0a2a 50%, #0a0a1a 100%);
      border-top: 2px solid #f0f;
      box-shadow: 0 -2px 20px rgba(255,0,255,0.3);
      display: flex;
      align-items: center;
      padding: 0 4px;
      z-index: 1000;
    }

    /* Start Button */
    .start-btn {
      height: 32px;
      padding: 0 15px;
      background: linear-gradient(180deg, #0ff 0%, #08a 50%, #066 100%);
      border: 2px solid #0ff;
      border-radius: 0 20px 20px 0;
      color: #fff;
      font-weight: bold;
      font-size: 14px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 6px;
      box-shadow: 0 0 15px rgba(0,255,255,0.5), inset 0 1px 0 rgba(255,255,255,0.3);
      transition: all 0.2s;
    }

    .start-btn:hover {
      background: linear-gradient(180deg, #0ff 0%, #0cc 50%, #088 100%);
      box-shadow: 0 0 25px rgba(0,255,255,0.7), inset 0 1px 0 rgba(255,255,255,0.3);
    }

    .start-btn.active {
      background: linear-gradient(180deg, #066 0%, #044 50%, #022 100%);
    }

    .start-btn .logo {
      font-size: 1.2rem;
    }

    /* Quick Launch */
    .quick-launch {
      display: flex;
      gap: 4px;
      padding: 0 10px;
      border-left: 1px solid rgba(255,255,255,0.2);
      border-right: 1px solid rgba(255,255,255,0.2);
      margin-left: 10px;
      height: 100%;
      align-items: center;
    }

    .quick-btn {
      width: 28px;
      height: 28px;
      background: transparent;
      border: none;
      font-size: 1.1rem;
      cursor: pointer;
      border-radius: 4px;
      transition: all 0.2s;
    }

    .quick-btn:hover {
      background: rgba(0,255,255,0.3);
      box-shadow: 0 0 10px rgba(0,255,255,0.5);
    }

    /* Taskbar Windows */
    .taskbar-windows {
      flex: 1;
      display: flex;
      gap: 4px;
      padding: 0 10px;
      overflow-x: auto;
    }

    .taskbar-item {
      height: 28px;
      padding: 0 12px;
      background: linear-gradient(180deg, rgba(255,0,255,0.3) 0%, rgba(100,0,100,0.3) 100%);
      border: 1px solid #f0f;
      border-radius: 4px;
      color: #fff;
      font-size: 11px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 6px;
      max-width: 160px;
      transition: all 0.2s;
    }

    .taskbar-item:hover {
      background: linear-gradient(180deg, rgba(255,0,255,0.5) 0%, rgba(150,0,150,0.4) 100%);
    }

    .taskbar-item.active {
      background: linear-gradient(180deg, rgba(0,255,255,0.4) 0%, rgba(0,100,100,0.3) 100%);
      border-color: #0ff;
      box-shadow: 0 0 10px rgba(0,255,255,0.5);
    }

    .taskbar-item .icon { font-size: 1rem; }
    .taskbar-item .title {
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    /* System Tray */
    .system-tray {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 0 10px;
      border-left: 1px solid rgba(255,255,255,0.2);
      height: 100%;
    }

    .tray-icon {
      font-size: 0.9rem;
      opacity: 0.8;
    }

    .clock {
      font-family: 'VT323', monospace;
      font-size: 16px;
      color: #0ff;
      text-shadow: 0 0 10px #0ff;
      padding: 0 8px;
    }

    /* Start Menu */
    .start-menu {
      position: fixed;
      bottom: 42px;
      left: 0;
      width: 380px;
      background: linear-gradient(180deg, #1a0a2a 0%, #0a0a1a 100%);
      border: 2px solid #f0f;
      border-radius: 8px 8px 0 0;
      box-shadow: 0 0 30px rgba(255,0,255,0.4), 0 -5px 30px rgba(0,0,0,0.5);
      display: none;
      z-index: 999;
      overflow: hidden;
    }

    .start-menu.open { display: block; }

    .start-menu-header {
      background: linear-gradient(90deg, #0ff, #f0f);
      padding: 15px;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .user-avatar {
      width: 50px;
      height: 50px;
      background: linear-gradient(135deg, #f0f, #0ff);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.8rem;
      border: 2px solid #fff;
      box-shadow: 0 0 15px rgba(255,255,255,0.5);
    }

    .user-name {
      font-size: 16px;
      font-weight: bold;
      color: #fff;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
    }

    .start-menu-body {
      display: flex;
      height: 300px;
    }

    .start-menu-left {
      flex: 1;
      background: rgba(0,0,0,0.3);
      border-right: 1px solid rgba(255,0,255,0.3);
    }

    .start-menu-right {
      width: 150px;
      background: rgba(0,0,0,0.5);
      padding: 10px 0;
    }

    .menu-item {
      padding: 10px 15px;
      display: flex;
      align-items: center;
      gap: 12px;
      cursor: pointer;
      transition: all 0.2s;
      color: #fff;
      font-size: 12px;
    }

    .menu-item:hover {
      background: linear-gradient(90deg, rgba(0,255,255,0.3) 0%, transparent 100%);
    }

    .menu-item .icon {
      font-size: 1.5rem;
      width: 32px;
      text-align: center;
    }

    .menu-separator {
      height: 1px;
      background: linear-gradient(90deg, #f0f, transparent);
      margin: 5px 0;
    }

    .start-menu-footer {
      border-top: 1px solid rgba(255,0,255,0.3);
      padding: 8px;
      display: flex;
      justify-content: flex-end;
      gap: 8px;
    }

    .footer-btn {
      padding: 6px 15px;
      background: linear-gradient(180deg, rgba(255,0,255,0.3) 0%, rgba(100,0,100,0.2) 100%);
      border: 1px solid #f0f;
      border-radius: 4px;
      color: #fff;
      font-size: 11px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 6px;
      transition: all 0.2s;
    }

    .footer-btn:hover {
      background: linear-gradient(180deg, rgba(255,0,255,0.5) 0%, rgba(150,0,150,0.3) 100%);
      box-shadow: 0 0 10px rgba(255,0,255,0.5);
    }

    /* Windows */
    .window {
      position: absolute;
      background: linear-gradient(180deg, #1a0a2a 0%, #0a0a1a 100%);
      border: 2px solid #f0f;
      border-radius: 8px 8px 4px 4px;
      box-shadow: 0 0 30px rgba(255,0,255,0.3), 0 10px 40px rgba(0,0,0,0.5);
      min-width: 200px;
      min-height: 150px;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    .window.focused {
      border-color: #0ff;
      box-shadow: 0 0 40px rgba(0,255,255,0.4), 0 10px 40px rgba(0,0,0,0.5);
      z-index: 100;
    }

    .window-titlebar {
      background: linear-gradient(180deg, #f0f 0%, #a0a 50%, #606 100%);
      padding: 6px 10px;
      display: flex;
      align-items: center;
      gap: 8px;
      cursor: move;
    }

    .window.focused .window-titlebar {
      background: linear-gradient(180deg, #0ff 0%, #0aa 50%, #066 100%);
    }

    .window-icon { font-size: 1rem; }

    .window-title {
      flex: 1;
      font-size: 12px;
      font-weight: bold;
      color: #fff;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    .window-controls {
      display: flex;
      gap: 4px;
    }

    .window-btn {
      width: 22px;
      height: 22px;
      border: none;
      border-radius: 4px;
      font-size: 12px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s;
    }

    .btn-minimize {
      background: linear-gradient(180deg, #ff0 0%, #aa0 100%);
      color: #000;
    }

    .btn-maximize {
      background: linear-gradient(180deg, #0f0 0%, #0a0 100%);
      color: #000;
    }

    .btn-close {
      background: linear-gradient(180deg, #f00 0%, #a00 100%);
      color: #fff;
    }

    .window-btn:hover {
      transform: scale(1.1);
      box-shadow: 0 0 10px currentColor;
    }

    .window-content {
      flex: 1;
      padding: 15px;
      color: #fff;
      font-size: 12px;
      overflow: auto;
      background: rgba(0,0,0,0.3);
    }

    .window-content h2 {
      color: #0ff;
      text-shadow: 0 0 10px #0ff;
      margin-bottom: 15px;
      font-size: 16px;
    }

    .window-content p {
      line-height: 1.6;
      margin-bottom: 10px;
    }

    /* Notepad specific */
    .notepad-content {
      width: 100%;
      height: 100%;
      background: #0a0a0a;
      border: none;
      color: #0f0;
      font-family: 'VT323', monospace;
      font-size: 16px;
      padding: 10px;
      resize: none;
      outline: none;
    }

    /* Error dialog */
    .error-icon {
      font-size: 3rem;
      margin-right: 15px;
    }

    .error-content {
      display: flex;
      align-items: center;
      margin-bottom: 20px;
    }

    .error-btns {
      display: flex;
      justify-content: center;
      gap: 10px;
    }

    .error-btn {
      padding: 8px 25px;
      background: linear-gradient(180deg, #333 0%, #222 100%);
      border: 1px solid #f0f;
      border-radius: 4px;
      color: #fff;
      cursor: pointer;
      transition: all 0.2s;
    }

    .error-btn:hover {
      background: linear-gradient(180deg, #444 0%, #333 100%);
      box-shadow: 0 0 10px rgba(255,0,255,0.5);
    }

    /* Back link */
    .back-link {
      position: fixed;
      top: 5px;
      right: 10px;
      color: rgba(255,255,255,0.3);
      text-decoration: none;
      font-size: 11px;
      z-index: 50;
    }

    /* Animations */
    @keyframes windowOpen {
      from { transform: scale(0.8); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }

    .window { animation: windowOpen 0.2s ease-out; }
  </style>
</head>
<body>
  <a href="https://sloppy.live" class="back-link">sloppy.live</a>

  <div class="desktop" id="desktop">
    <div class="desktop-icons">
      <div class="desktop-icon" ondblclick="openWindow('mycomputer')">
        <span class="icon">ğŸ’»</span>
        <span class="label">My Computer</span>
      </div>
      <div class="desktop-icon" ondblclick="openWindow('documents')">
        <span class="icon">ğŸ“</span>
        <span class="label">My Documents</span>
      </div>
      <div class="desktop-icon" ondblclick="openWindow('notepad')">
        <span class="icon">ğŸ“</span>
        <span class="label">Notepad</span>
      </div>
      <div class="desktop-icon" ondblclick="openWindow('recyclebin')">
        <span class="icon">ğŸ—‘ï¸</span>
        <span class="label">Recycle Bin</span>
      </div>
      <div class="desktop-icon" ondblclick="openWindow('error')">
        <span class="icon">âš ï¸</span>
        <span class="label">error.exe</span>
      </div>
    </div>
  </div>

  <div class="start-menu" id="startMenu">
    <div class="start-menu-header">
      <div class="user-avatar">ğŸ‘¤</div>
      <div class="user-name">Neon User</div>
    </div>
    <div class="start-menu-body">
      <div class="start-menu-left">
        <div class="menu-item" onclick="openWindow('browser')">
          <span class="icon">ğŸŒ</span>
          <span>Internet Explorer</span>
        </div>
        <div class="menu-item" onclick="openWindow('notepad')">
          <span class="icon">ğŸ“</span>
          <span>Notepad</span>
        </div>
        <div class="menu-item" onclick="openWindow('paint')">
          <span class="icon">ğŸ¨</span>
          <span>Paint</span>
        </div>
        <div class="menu-item" onclick="openWindow('calculator')">
          <span class="icon">ğŸ”¢</span>
          <span>Calculator</span>
        </div>
        <div class="menu-separator"></div>
        <div class="menu-item" onclick="openWindow('games')">
          <span class="icon">ğŸ®</span>
          <span>Games</span>
        </div>
        <div class="menu-item" onclick="openWindow('media')">
          <span class="icon">ğŸµ</span>
          <span>Media Player</span>
        </div>
      </div>
      <div class="start-menu-right">
        <div class="menu-item" onclick="openWindow('mycomputer')">
          <span class="icon">ğŸ’»</span>
          <span>My Computer</span>
        </div>
        <div class="menu-item" onclick="openWindow('documents')">
          <span class="icon">ğŸ“</span>
          <span>My Documents</span>
        </div>
        <div class="menu-item" onclick="openWindow('settings')">
          <span class="icon">âš™ï¸</span>
          <span>Settings</span>
        </div>
        <div class="menu-separator"></div>
        <div class="menu-item" onclick="openWindow('help')">
          <span class="icon">â“</span>
          <span>Help</span>
        </div>
      </div>
    </div>
    <div class="start-menu-footer">
      <button class="footer-btn" onclick="alert('Logging off...')">
        <span>ğŸšª</span> Log Off
      </button>
      <button class="footer-btn" onclick="alert('Shutting down...')">
        <span>â»</span> Shut Down
      </button>
    </div>
  </div>

  <div class="taskbar">
    <button class="start-btn" id="startBtn" onclick="toggleStartMenu()">
      <span class="logo">ğŸªŸ</span>
      <span>Start</span>
    </button>

    <div class="quick-launch">
      <button class="quick-btn" onclick="openWindow('browser')" title="Internet">ğŸŒ</button>
      <button class="quick-btn" onclick="openWindow('notepad')" title="Notepad">ğŸ“</button>
      <button class="quick-btn" onclick="openWindow('documents')" title="Files">ğŸ“</button>
    </div>

    <div class="taskbar-windows" id="taskbarWindows"></div>

    <div class="system-tray">
      <span class="tray-icon">ğŸ”Š</span>
      <span class="tray-icon">ğŸ“¶</span>
      <span class="tray-icon">ğŸ”‹</span>
      <div class="clock" id="clock">12:00 PM</div>
    </div>
  </div>

  <script>
    // Window management
    let windows = {};
    let windowOrder = [];
    let zIndex = 10;
    let activeWindow = null;

    const windowTemplates = {
      mycomputer: {
        title: 'My Computer',
        icon: 'ğŸ’»',
        width: 500,
        height: 350,
        content: `
          <h2>ğŸ’» My Computer</h2>
          <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; text-align: center;">
            <div style="cursor: pointer;" ondblclick="openWindow('documents')">
              <div style="font-size: 2.5rem;">ğŸ’¾</div>
              <div>Local Disk (C:)</div>
              <div style="color: #0ff; font-size: 10px;">420.69 GB free</div>
            </div>
            <div style="cursor: pointer;">
              <div style="font-size: 2.5rem;">ğŸ’¿</div>
              <div>DVD Drive (D:)</div>
              <div style="color: #f0f; font-size: 10px;">Empty</div>
            </div>
            <div style="cursor: pointer;">
              <div style="font-size: 2.5rem;">ğŸ–¨ï¸</div>
              <div>Printers</div>
            </div>
          </div>
        `
      },
      documents: {
        title: 'My Documents',
        icon: 'ğŸ“',
        width: 450,
        height: 300,
        content: `
          <h2>ğŸ“ My Documents</h2>
          <div style="display: flex; flex-direction: column; gap: 8px;">
            <div style="padding: 8px; background: rgba(0,255,255,0.1); border-radius: 4px; cursor: pointer;">
              ğŸ“„ readme.txt
            </div>
            <div style="padding: 8px; background: rgba(255,0,255,0.1); border-radius: 4px; cursor: pointer;">
              ğŸ“ My Pictures
            </div>
            <div style="padding: 8px; background: rgba(0,255,255,0.1); border-radius: 4px; cursor: pointer;">
              ğŸ“ My Music
            </div>
            <div style="padding: 8px; background: rgba(255,0,255,0.1); border-radius: 4px; cursor: pointer;">
              ğŸ® Games
            </div>
            <div style="padding: 8px; background: rgba(0,255,255,0.1); border-radius: 4px; cursor: pointer;">
              ğŸ“„ todo_list.txt
            </div>
          </div>
        `
      },
      notepad: {
        title: 'Notepad',
        icon: 'ğŸ“',
        width: 400,
        height: 300,
        content: `<textarea class="notepad-content" placeholder="Type your notes here..."></textarea>`
      },
      recyclebin: {
        title: 'Recycle Bin',
        icon: 'ğŸ—‘ï¸',
        width: 350,
        height: 250,
        content: `
          <h2>ğŸ—‘ï¸ Recycle Bin</h2>
          <p style="color: #888; text-align: center; margin-top: 40px;">
            The Recycle Bin is empty.
          </p>
        `
      },
      error: {
        title: 'System Error',
        icon: 'âš ï¸',
        width: 380,
        height: 180,
        content: `
          <div class="error-content">
            <span class="error-icon">ğŸ’€</span>
            <div>
              <p><strong>FATAL ERROR</strong></p>
              <p>Your system has encountered a neon overload. Please vibe responsibly.</p>
            </div>
          </div>
          <div class="error-btns">
            <button class="error-btn" onclick="closeWindow('error')">OK</button>
            <button class="error-btn" onclick="openWindow('error')">More Errors</button>
          </div>
        `
      },
      browser: {
        title: 'Internet Explorer',
        icon: 'ğŸŒ',
        width: 550,
        height: 400,
        content: `
          <div style="background: #111; padding: 8px; margin: -15px -15px 15px -15px; display: flex; gap: 8px; align-items: center;">
            <span style="color: #666;">ğŸ”™ ğŸ”œ</span>
            <input type="text" value="https://sloppy.live" style="flex: 1; padding: 6px 10px; background: #222; border: 1px solid #f0f; border-radius: 4px; color: #0ff; font-size: 12px;">
            <span style="cursor: pointer;">ğŸ”</span>
          </div>
          <div style="text-align: center; padding: 40px;">
            <div style="font-size: 4rem; margin-bottom: 20px;">ğŸŒ</div>
            <h2 style="color: #f0f;">Welcome to the Neon Web</h2>
            <p style="color: #888; margin-top: 10px;">The internet is under construction.</p>
            <p style="color: #0ff; margin-top: 20px; font-size: 10px;">Best viewed in 800x600</p>
          </div>
        `
      },
      paint: {
        title: 'Paint',
        icon: 'ğŸ¨',
        width: 450,
        height: 350,
        content: `
          <h2>ğŸ¨ Neon Paint</h2>
          <canvas id="paintCanvas" width="400" height="250" style="background: #000; border: 1px solid #f0f; cursor: crosshair;"></canvas>
          <div style="margin-top: 10px; display: flex; gap: 8px;">
            <button onclick="setPaintColor('#0ff')" style="width: 25px; height: 25px; background: #0ff; border: 2px solid #fff; cursor: pointer;"></button>
            <button onclick="setPaintColor('#f0f')" style="width: 25px; height: 25px; background: #f0f; border: 2px solid #fff; cursor: pointer;"></button>
            <button onclick="setPaintColor('#ff0')" style="width: 25px; height: 25px; background: #ff0; border: 2px solid #fff; cursor: pointer;"></button>
            <button onclick="setPaintColor('#0f0')" style="width: 25px; height: 25px; background: #0f0; border: 2px solid #fff; cursor: pointer;"></button>
            <button onclick="setPaintColor('#f00')" style="width: 25px; height: 25px; background: #f00; border: 2px solid #fff; cursor: pointer;"></button>
            <button onclick="clearPaint()" style="padding: 4px 12px; background: #333; border: 1px solid #f0f; color: #fff; cursor: pointer;">Clear</button>
          </div>
        `
      },
      calculator: {
        title: 'Calculator',
        icon: 'ğŸ”¢',
        width: 250,
        height: 320,
        content: `
          <div style="background: #000; padding: 10px; border: 2px solid #0ff; border-radius: 4px; margin-bottom: 10px;">
            <input type="text" id="calcDisplay" value="0" style="width: 100%; background: transparent; border: none; color: #0ff; font-family: 'VT323', monospace; font-size: 28px; text-align: right;" readonly>
          </div>
          <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 6px;" id="calcButtons">
          </div>
        `
      },
      games: {
        title: 'Games',
        icon: 'ğŸ®',
        width: 350,
        height: 250,
        content: `
          <h2>ğŸ® Games</h2>
          <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-top: 15px;">
            <div style="text-align: center; cursor: pointer; padding: 15px; background: rgba(0,255,255,0.1); border-radius: 8px;">
              <div style="font-size: 2rem;">ğŸƒ</div>
              <div>Solitaire</div>
            </div>
            <div style="text-align: center; cursor: pointer; padding: 15px; background: rgba(255,0,255,0.1); border-radius: 8px;">
              <div style="font-size: 2rem;">ğŸ’£</div>
              <div>Minesweeper</div>
            </div>
            <div style="text-align: center; cursor: pointer; padding: 15px; background: rgba(255,0,255,0.1); border-radius: 8px;">
              <div style="font-size: 2rem;">ğŸ</div>
              <div>Pinball</div>
            </div>
            <div style="text-align: center; cursor: pointer; padding: 15px; background: rgba(0,255,255,0.1); border-radius: 8px;">
              <div style="font-size: 2rem;">ğŸ</div>
              <div>Snake</div>
            </div>
          </div>
        `
      },
      media: {
        title: 'Media Player',
        icon: 'ğŸµ',
        width: 400,
        height: 200,
        content: `
          <div style="text-align: center;">
            <div style="font-size: 4rem; margin: 20px 0;">ğŸµ</div>
            <p style="color: #f0f;">Now Playing: Neon Dreams.mp3</p>
            <div style="margin: 20px 0; display: flex; justify-content: center; gap: 15px; font-size: 1.5rem;">
              <span style="cursor: pointer;">â®ï¸</span>
              <span style="cursor: pointer;">â–¶ï¸</span>
              <span style="cursor: pointer;">â­ï¸</span>
            </div>
            <div style="background: #333; height: 6px; border-radius: 3px; margin: 0 20px;">
              <div style="background: linear-gradient(90deg, #0ff, #f0f); height: 100%; width: 35%; border-radius: 3px;"></div>
            </div>
          </div>
        `
      },
      settings: {
        title: 'Settings',
        icon: 'âš™ï¸',
        width: 400,
        height: 300,
        content: `
          <h2>âš™ï¸ Neon Settings</h2>
          <div style="margin-top: 15px;">
            <div style="padding: 12px; background: rgba(0,255,255,0.1); border-radius: 4px; margin-bottom: 8px; cursor: pointer;">
              ğŸ–¥ï¸ Display Settings
            </div>
            <div style="padding: 12px; background: rgba(255,0,255,0.1); border-radius: 4px; margin-bottom: 8px; cursor: pointer;">
              ğŸ”Š Sound Settings
            </div>
            <div style="padding: 12px; background: rgba(0,255,255,0.1); border-radius: 4px; margin-bottom: 8px; cursor: pointer;">
              ğŸŒ Network Settings
            </div>
            <div style="padding: 12px; background: rgba(255,0,255,0.1); border-radius: 4px; cursor: pointer;">
              ğŸ”’ Security Center
            </div>
          </div>
        `
      },
      help: {
        title: 'Help and Support',
        icon: 'â“',
        width: 400,
        height: 250,
        content: `
          <h2>â“ Neon XP Help</h2>
          <p style="margin: 15px 0;">Welcome to Neon XP, the most aesthetic operating system in the multiverse.</p>
          <p><strong style="color: #0ff;">Features:</strong></p>
          <ul style="margin-left: 20px; line-height: 1.8;">
            <li>Double-click icons to open windows</li>
            <li>Drag windows by their title bar</li>
            <li>Click Start for the menu</li>
            <li>Maximum neon vibes included</li>
          </ul>
          <p style="margin-top: 15px; color: #f0f;">Version: XP Neon Edition 2026</p>
        `
      }
    };

    // Open window
    function openWindow(id) {
      closeStartMenu();

      if (windows[id]) {
        focusWindow(id);
        return;
      }

      const template = windowTemplates[id];
      if (!template) return;

      const win = document.createElement('div');
      win.className = 'window';
      win.id = 'window-' + id;
      win.style.width = template.width + 'px';
      win.style.height = template.height + 'px';
      win.style.left = (100 + Object.keys(windows).length * 30) + 'px';
      win.style.top = (50 + Object.keys(windows).length * 30) + 'px';
      win.style.zIndex = ++zIndex;

      win.innerHTML = `
        <div class="window-titlebar" onmousedown="startDrag(event, '${id}')">
          <span class="window-icon">${template.icon}</span>
          <span class="window-title">${template.title}</span>
          <div class="window-controls">
            <button class="window-btn btn-minimize" onclick="minimizeWindow('${id}')">â”€</button>
            <button class="window-btn btn-maximize" onclick="maximizeWindow('${id}')">â–¡</button>
            <button class="window-btn btn-close" onclick="closeWindow('${id}')">âœ•</button>
          </div>
        </div>
        <div class="window-content">${template.content}</div>
      `;

      win.addEventListener('mousedown', () => focusWindow(id));
      document.getElementById('desktop').appendChild(win);

      windows[id] = { element: win, template, minimized: false, maximized: false };
      windowOrder.push(id);

      updateTaskbar();
      focusWindow(id);

      // Initialize paint if opened
      if (id === 'paint') initPaint();
      if (id === 'calculator') initCalculator();
    }

    // Close window
    function closeWindow(id) {
      if (!windows[id]) return;
      windows[id].element.remove();
      delete windows[id];
      windowOrder = windowOrder.filter(w => w !== id);
      updateTaskbar();

      if (activeWindow === id) {
        activeWindow = windowOrder[windowOrder.length - 1] || null;
        if (activeWindow) focusWindow(activeWindow);
      }
    }

    // Minimize window
    function minimizeWindow(id) {
      if (!windows[id]) return;
      windows[id].element.style.display = 'none';
      windows[id].minimized = true;
      updateTaskbar();
    }

    // Maximize window
    function maximizeWindow(id) {
      if (!windows[id]) return;
      const win = windows[id];

      if (win.maximized) {
        win.element.style.left = win.prevPos.left;
        win.element.style.top = win.prevPos.top;
        win.element.style.width = win.prevPos.width;
        win.element.style.height = win.prevPos.height;
        win.maximized = false;
      } else {
        win.prevPos = {
          left: win.element.style.left,
          top: win.element.style.top,
          width: win.element.style.width,
          height: win.element.style.height
        };
        win.element.style.left = '0';
        win.element.style.top = '0';
        win.element.style.width = '100%';
        win.element.style.height = 'calc(100vh - 40px)';
        win.maximized = true;
      }
    }

    // Focus window
    function focusWindow(id) {
      if (!windows[id]) return;

      // Restore if minimized
      if (windows[id].minimized) {
        windows[id].element.style.display = 'flex';
        windows[id].minimized = false;
      }

      // Update z-index
      windows[id].element.style.zIndex = ++zIndex;

      // Update focused state
      document.querySelectorAll('.window').forEach(w => w.classList.remove('focused'));
      windows[id].element.classList.add('focused');

      activeWindow = id;
      updateTaskbar();
    }

    // Drag windows
    let dragWindow = null;
    let dragOffset = { x: 0, y: 0 };

    function startDrag(e, id) {
      if (e.target.closest('.window-controls')) return;
      dragWindow = id;
      const rect = windows[id].element.getBoundingClientRect();
      dragOffset.x = e.clientX - rect.left;
      dragOffset.y = e.clientY - rect.top;
      focusWindow(id);
    }

    document.addEventListener('mousemove', (e) => {
      if (!dragWindow) return;
      const win = windows[dragWindow];
      if (!win || win.maximized) return;

      win.element.style.left = (e.clientX - dragOffset.x) + 'px';
      win.element.style.top = Math.max(0, e.clientY - dragOffset.y) + 'px';
    });

    document.addEventListener('mouseup', () => {
      dragWindow = null;
    });

    // Update taskbar
    function updateTaskbar() {
      const container = document.getElementById('taskbarWindows');
      container.innerHTML = '';

      windowOrder.forEach(id => {
        const win = windows[id];
        if (!win) return;

        const item = document.createElement('div');
        item.className = 'taskbar-item' + (activeWindow === id && !win.minimized ? ' active' : '');
        item.innerHTML = `
          <span class="icon">${win.template.icon}</span>
          <span class="title">${win.template.title}</span>
        `;
        item.onclick = () => {
          if (activeWindow === id && !win.minimized) {
            minimizeWindow(id);
          } else {
            focusWindow(id);
          }
        };
        container.appendChild(item);
      });
    }

    // Start menu
    function toggleStartMenu() {
      const menu = document.getElementById('startMenu');
      const btn = document.getElementById('startBtn');
      menu.classList.toggle('open');
      btn.classList.toggle('active');
    }

    function closeStartMenu() {
      document.getElementById('startMenu').classList.remove('open');
      document.getElementById('startBtn').classList.remove('active');
    }

    // Close start menu when clicking elsewhere
    document.addEventListener('click', (e) => {
      if (!e.target.closest('.start-menu') && !e.target.closest('.start-btn')) {
        closeStartMenu();
      }
    });

    // Clock
    function updateClock() {
      const now = new Date();
      let hours = now.getHours();
      const ampm = hours >= 12 ? 'PM' : 'AM';
      hours = hours % 12 || 12;
      const mins = now.getMinutes().toString().padStart(2, '0');
      document.getElementById('clock').textContent = `${hours}:${mins} ${ampm}`;
    }
    updateClock();
    setInterval(updateClock, 1000);

    // Paint functionality
    let paintColor = '#0ff';
    let painting = false;
    let paintCtx = null;

    function initPaint() {
      const canvas = document.getElementById('paintCanvas');
      if (!canvas) return;
      paintCtx = canvas.getContext('2d');

      canvas.addEventListener('mousedown', (e) => {
        painting = true;
        paintCtx.beginPath();
        paintCtx.moveTo(e.offsetX, e.offsetY);
      });

      canvas.addEventListener('mousemove', (e) => {
        if (!painting) return;
        paintCtx.lineTo(e.offsetX, e.offsetY);
        paintCtx.strokeStyle = paintColor;
        paintCtx.lineWidth = 3;
        paintCtx.lineCap = 'round';
        paintCtx.shadowBlur = 10;
        paintCtx.shadowColor = paintColor;
        paintCtx.stroke();
      });

      canvas.addEventListener('mouseup', () => painting = false);
      canvas.addEventListener('mouseleave', () => painting = false);
    }

    function setPaintColor(color) {
      paintColor = color;
    }

    function clearPaint() {
      if (paintCtx) {
        paintCtx.clearRect(0, 0, 400, 250);
      }
    }

    // Calculator
    let calcValue = '0';
    let calcOp = null;
    let calcPrev = null;

    function initCalculator() {
      const container = document.getElementById('calcButtons');
      if (!container) return;

      const buttons = [
        '7', '8', '9', '/',
        '4', '5', '6', '*',
        '1', '2', '3', '-',
        '0', '.', '=', '+'
      ];

      buttons.forEach(btn => {
        const el = document.createElement('button');
        el.textContent = btn;
        el.style.cssText = 'padding: 12px; font-size: 16px; background: linear-gradient(180deg, #333 0%, #222 100%); border: 1px solid #f0f; color: #fff; cursor: pointer; border-radius: 4px;';
        el.onclick = () => calcPress(btn);
        container.appendChild(el);
      });

      // Add clear button
      const clearBtn = document.createElement('button');
      clearBtn.textContent = 'C';
      clearBtn.style.cssText = 'grid-column: span 4; padding: 8px; font-size: 14px; background: linear-gradient(180deg, #a00 0%, #600 100%); border: 1px solid #f00; color: #fff; cursor: pointer; border-radius: 4px; margin-top: 6px;';
      clearBtn.onclick = () => { calcValue = '0'; calcOp = null; calcPrev = null; updateCalcDisplay(); };
      container.appendChild(clearBtn);
    }

    function calcPress(btn) {
      if ('0123456789.'.includes(btn)) {
        if (calcValue === '0' && btn !== '.') calcValue = btn;
        else calcValue += btn;
      } else if ('+-*/'.includes(btn)) {
        calcPrev = parseFloat(calcValue);
        calcOp = btn;
        calcValue = '0';
      } else if (btn === '=' && calcOp && calcPrev !== null) {
        const curr = parseFloat(calcValue);
        let result;
        switch(calcOp) {
          case '+': result = calcPrev + curr; break;
          case '-': result = calcPrev - curr; break;
          case '*': result = calcPrev * curr; break;
          case '/': result = calcPrev / curr; break;
        }
        calcValue = result.toString();
        calcOp = null;
        calcPrev = null;
      }
      updateCalcDisplay();
    }

    function updateCalcDisplay() {
      const display = document.getElementById('calcDisplay');
      if (display) display.value = calcValue;
    }

    // Desktop icon selection
    document.querySelectorAll('.desktop-icon').forEach(icon => {
      icon.addEventListener('click', (e) => {
        document.querySelectorAll('.desktop-icon').forEach(i => i.classList.remove('selected'));
        icon.classList.add('selected');
      });
    });

    // Clear selection when clicking desktop
    document.getElementById('desktop').addEventListener('click', (e) => {
      if (e.target.id === 'desktop' || e.target.classList.contains('desktop')) {
        document.querySelectorAll('.desktop-icon').forEach(i => i.classList.remove('selected'));
      }
    });
  </script>
<script src="/sloppy-header/sloppy-bar.js"></script>
</body>
</html>
