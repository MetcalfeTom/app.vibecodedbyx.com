<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="A non-text-based romance simulator that combines the themes of Macbeth, anime dating sims, and an orangutan love quest." />
  <meta property="og:title" content="Romance Quest" />
  <meta property="og:description" content="A non-text-based romance simulator that combines the themes of Macbeth, anime dating sims, and an orangutan love quest." />
  <meta property="og:url" content="https://app.vibecodedbyx.com/romance-quest/" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="https://app.vibecodedbyx.com/romance-quest/og.svg" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Romance Quest" />
  <meta name="twitter:description" content="A non-text-based romance simulator that combines the themes of Macbeth, anime dating sims, and an orangutan love quest." />
  <meta name="twitter:image" content="https://app.vibecodedbyx.com/romance-quest/og.svg" />
  <title>Romance Quest</title>
  <link rel="icon" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCAxMDAgMTAwJz48dGV4dCB5PScuOWVtJyBmb250LXNpemU9JzkwJz7wn5ikPC90ZXh0Pjwvc3ZnPg==" />
  <style>
    :root {
      --bg: #1a1a1a;
      --text: #ffffff;
      --accent: #ff4d8d;
    }

    body {
      background: radial-gradient(circle at top, #35134c, #15061d 45%);
      color: var(--text);
      font-family: sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
    }

    #game-container {
      width: 80%;
      max-width: 800px;
      height: 60%;
      max-height: 600px;
      background-color: rgba(0, 0, 0, 0.5);
      border: 2px solid var(--accent);
      border-radius: 10px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: space-between;
      padding: 20px;
    }

    .character {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      background-color: #ccc;
      cursor: pointer;
      font-size: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .choice {
      width: 50px;
      height: 50px;
      background-color: #ccc;
      cursor: pointer;
      font-size: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
    }

    @media (max-width: 768px) {
      #game-container {
        width: 90%;
        height: 80%;
      }
    }
  </style>
  <script src="supabase-config.js"></script>
</head>
<body>
  <div id="game-container">
    <h1>Romance Quest</h1>
    <div id="character-container">
      <div class="character" id="yumi"></div>
      <div class="character" id="kai"></div>
      <div class="character" id="mei"></div>
      <div class="character" id="orangutan"></div>
    </div>
    <div id="choice-container">
    </div>
    <a href="https://www.vibecodedbyx.com">Watch the livestream</a>
  </div>
  <script>
    const gameState = {
      scene: 0,
      affection: {
        yumi: 0,
        kai: 0,
        mei: 0,
        orangutan: 0,
      },
      inventory: [],
    };

    const characters = {
      yumi: {
        name: "Yumi",
        image: "🎀",
        guilt: 0,
      },
      kai: {
        name: "Kai",
        image: "🎧",
        guilt: 0,
      },
      mei: {
        name: "Mei",
        image: "🖌️",
        guilt: 0,
      },
      orangutan: {
        name: "Orangutan",
        image: "🦧",
        guilt: 0,
      },
    };

    const scenes = [
      {
        choices: [
          {
            emoji: "💬",
            character: "yumi",
            affection: 1,
          },
          {
            emoji: "💬",
            character: "kai",
            affection: 1,
          },
          {
            emoji: "💬",
            character: "mei",
            affection: 1,
          },
        ],
      },
      {
        choices: [
          {
            emoji: "🌸",
            character: "yumi",
            affection: 2,
          },
          {
            emoji: "🖌️",
            character: "mei",
            affection: 2,
          },
          {
            emoji: "🎧",
            character: "kai",
            affection: 2,
          },
        ],
      },
      {
        title: "Macbeth Rehearsal",
        choices: [
          {
            emoji: "🎭",
            character: "yumi",
            affection: 1,
            guilt: 2,
          },
          {
            emoji: "🎭",
            character: "kai",
            affection: 1,
            guilt: 2,
          },
          {
            emoji: "🎭",
            character: "mei",
            affection: 1,
            guilt: 2,
          },
        ],
      },
    ];

    const characterContainer = document.getElementById("character-container");
    const choiceContainer = document.getElementById("choice-container");

    function renderCharacters() {
      characterContainer.innerHTML = "";
      for (const characterId in characters) {
        const character = characters[characterId];
        const characterDiv = document.createElement("div");
        characterDiv.classList.add("character");
        characterDiv.id = characterId;
        characterDiv.textContent = character.image;
        characterContainer.appendChild(characterDiv);
      }
    }

    function nextScene() {
      gameState.scene++;
      if (gameState.scene >= scenes.length) {
        endGame();
        return;
      }
      renderChoices();
    }

    function getEnding() {
      let winner = null;
      let maxAffection = -1;

      for (const characterId in gameState.affection) {
        if (gameState.affection[characterId] > maxAffection) {
          maxAffection = gameState.affection[characterId];
          winner = characterId;
        }
      }

      if (characters[winner].guilt > 5) {
        return `You and ${characters[winner].name} are consumed by guilt.`;
      }

      return `You and ${characters[winner].name} live happily ever after.`;
    }

    function endGame() {
      const ending = getEnding();
      choiceContainer.innerHTML = `<h2>Game Over</h2><p>${ending}</p>`;
    }

    function renderChoices() {
      choiceContainer.innerHTML = "";
      const scene = scenes[gameState.scene];
      for (const choice of scene.choices) {
        const choiceDiv = document.createElement("div");
        choiceDiv.classList.add("choice");
        choiceDiv.textContent = choice.emoji;
        choiceDiv.addEventListener("click", () => {
          gameState.affection[choice.character] += choice.affection;
          if (choice.guilt) {
            characters[choice.character].guilt += choice.guilt;
          }
          console.log(gameState.affection);
          console.log(characters);
          nextScene();
        });
        choiceContainer.appendChild(choiceDiv);
      }
    }

    function init() {
      renderCharacters();
      renderChoices();
    }

    init();
  </script>
</body>
</html>