<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="A non-text-based romance simulator that combines the themes of Macbeth, anime dating sims, and an orangutan love quest." />
  <meta property="og:title" content="Romance Quest" />
  <meta property="og:description" content="A non-text-based romance simulator that combines the themes of Macbeth, anime dating sims, and an orangutan love quest." />
  <meta property="og:url" content="https://app.vibecodedbyx.com/romance-quest/" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="https://app.vibecodedbyx.com/romance-quest/og.svg" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Romance Quest" />
  <meta name="twitter:description" content="A non-text-based romance simulator that combines the themes of Macbeth, anime dating sims, and an orangutan love quest." />
  <meta name="twitter:image" content="https://app.vibecodedbyx.com/romance-quest/og.svg" />
  <title>Romance Quest</title>
  <link rel="icon" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCAxMDAgMTAwJz48dGV4dCB5PScuOWVtJyBmb250LXNpemU9JzkwJz7wn5ikPC90ZXh0Pjwvc3ZnPg==" />
  <style>
    :root {
      --bg: #1a1a1a;
      --text: #ffffff;
      --accent: #ff4d8d;
    }

    body {
      background: radial-gradient(circle at top, #35134c, #15061d 45%);
      color: var(--text);
      font-family: sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
    }

    #game-container {
      width: 80%;
      max-width: 800px;
      height: 60%;
      max-height: 600px;
      background-color: rgba(0, 0, 0, 0.5);
      border: 2px solid var(--accent);
      border-radius: 10px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: space-between;
      padding: 20px;
    }

    .character {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      background-color: #ccc;
      cursor: pointer;
      font-size: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .choice {
      min-width: 120px;
      min-height: 80px;
      background: rgba(255, 255, 255, 0.1);
      border: 2px solid var(--accent);
      cursor: pointer;
      font-size: 24px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      border-radius: 10px;
      transition: all 0.3s ease;
      padding: 10px;
    }

    .choice:hover {
      background: rgba(255, 77, 141, 0.2);
      transform: translateY(-2px);
    }

    .choice small {
      font-size: 12px;
      margin-top: 5px;
      opacity: 0.9;
    }

    @media (max-width: 768px) {
      #game-container {
        width: 90%;
        height: 80%;
      }
    }

    h1 {
      text-align: center;
      margin-bottom: 20px;
    }

    #story-text {
      background: rgba(255, 255, 255, 0.1);
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 20px;
      text-align: center;
      min-height: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #character-container {
      display: flex;
      gap: 20px;
      margin: 20px 0;
      flex-wrap: wrap;
      justify-content: center;
    }

    #choice-container {
      display: flex;
      gap: 15px;
      margin: 20px 0;
      flex-wrap: wrap;
      justify-content: center;
    }
  </style>
  <script src="supabase-config.js"></script>
</head>
<body>
  <div id="game-container">
    <h1>Romance Quest</h1>
    <div id="story-text">
      <p>Welcome to the school drama club! Choose your romantic path...</p>
    </div>
    <div id="character-container">
      <div class="character" id="yumi"></div>
      <div class="character" id="kai"></div>
      <div class="character" id="mei"></div>
      <div class="character" id="orangutan"></div>
    </div>
    <div id="choice-container">
    </div>
    <a href="https://www.vibecodedbyx.com">Watch the livestream</a>
  </div>
  <script>
    const gameState = {
      scene: 0,
      affection: {
        yumi: 0,
        kai: 0,
        mei: 0,
        orangutan: 0,
      },
      inventory: [],
    };

    const characters = {
      yumi: {
        name: "Yumi",
        image: "üéÄ",
        guilt: 0,
      },
      kai: {
        name: "Kai",
        image: "üéß",
        guilt: 0,
      },
      mei: {
        name: "Mei",
        image: "üñåÔ∏è",
        guilt: 0,
      },
      orangutan: {
        name: "Orangutan",
        image: "ü¶ß",
        guilt: 0,
      },
    };

    const scenes = [
      {
        text: "Welcome to the school drama club! You're the new student and everyone wants to meet you. Who do you approach first?",
        choices: [
          {
            emoji: "üí¨",
            text: "Talk to Yumi (shy bookworm)",
            character: "yumi",
            affection: 1,
          },
          {
            emoji: "üí¨",
            text: "Talk to Kai (music lover)",
            character: "kai",
            affection: 1,
          },
          {
            emoji: "üí¨",
            text: "Talk to Mei (artist)",
            character: "mei",
            affection: 1,
          },
        ],
      },
      {
        text: "After introductions, you notice each person has a special interest. What catches your attention?",
        choices: [
          {
            emoji: "üå∏",
            text: "Yumi's poetry notebook",
            character: "yumi",
            affection: 2,
          },
          {
            emoji: "üñåÔ∏è",
            text: "Mei's beautiful artwork",
            character: "mei",
            affection: 2,
          },
          {
            emoji: "üéß",
            text: "Kai's music playlist",
            character: "kai",
            affection: 2,
          },
        ],
      },
      {
        text: "It's time for Macbeth rehearsal! The drama is intense and passions run high. Who do you support in the heated scene?",
        choices: [
          {
            emoji: "üé≠",
            text: "Help Yumi with Lady Macbeth",
            character: "yumi",
            affection: 1,
            guilt: 2,
          },
          {
            emoji: "üé≠",
            text: "Support Kai as Macbeth",
            character: "kai",
            affection: 1,
            guilt: 2,
          },
          {
            emoji: "üé≠",
            text: "Assist Mei with stage design",
            character: "mei",
            affection: 1,
            guilt: 2,
          },
        ],
      },
      {
        text: "During lunch break, you spot an orangutan that somehow got into the school! Everyone is panicking. What do you do?",
        choices: [
          {
            emoji: "ü¶ß",
            text: "Approach the orangutan calmly",
            character: "orangutan",
            affection: 3,
          },
          {
            emoji: "üçå",
            text: "Offer it a banana",
            character: "orangutan",
            affection: 2,
          },
          {
            emoji: "üìû",
            text: "Call animal control",
            character: "orangutan",
            affection: -1,
          },
        ],
      },
    ];

    const characterContainer = document.getElementById("character-container");
    const choiceContainer = document.getElementById("choice-container");
    const storyText = document.getElementById("story-text");

    function renderCharacters() {
      characterContainer.innerHTML = "";
      for (const characterId in characters) {
        const character = characters[characterId];
        const characterDiv = document.createElement("div");
        characterDiv.classList.add("character");
        characterDiv.id = characterId;
        characterDiv.textContent = character.image;
        characterDiv.title = character.name;
        characterContainer.appendChild(characterDiv);
      }
    }

    function updateStoryText(text) {
      storyText.innerHTML = `<p>${text}</p>`;
    }

    function nextScene() {
      gameState.scene++;
      if (gameState.scene >= scenes.length) {
        endGame();
        return;
      }
      renderChoices();
    }

    function getEnding() {
      let winner = null;
      let maxAffection = -1;

      for (const characterId in gameState.affection) {
        if (gameState.affection[characterId] > maxAffection) {
          maxAffection = gameState.affection[characterId];
          winner = characterId;
        }
      }

      if (characters[winner] && characters[winner].guilt > 5) {
        return `You and ${characters[winner].name} are consumed by guilt from your Macbeth-like ambitions.`;
      }

      return `You and ${characters[winner].name} live happily ever after! ‚ù§Ô∏è`;
    }

    function endGame() {
      const ending = getEnding();
      updateStoryText("The End");
      choiceContainer.innerHTML = `<div style="text-align: center; padding: 20px;"><h2>Game Over</h2><p>${ending}</p><button onclick="location.reload()" style="padding: 10px 20px; margin-top: 10px; background: var(--accent); color: white; border: none; border-radius: 5px; cursor: pointer;">Play Again</button></div>`;
    }

    function renderChoices() {
      const scene = scenes[gameState.scene];
      updateStoryText(scene.text);

      choiceContainer.innerHTML = "";
      for (const choice of scene.choices) {
        const choiceDiv = document.createElement("div");
        choiceDiv.classList.add("choice");
        choiceDiv.innerHTML = `${choice.emoji}<br><small>${choice.text}</small>`;
        choiceDiv.style.padding = "15px";
        choiceDiv.style.textAlign = "center";
        choiceDiv.style.lineHeight = "1.2";
        choiceDiv.addEventListener("click", () => {
          gameState.affection[choice.character] += choice.affection;
          if (choice.guilt) {
            characters[choice.character].guilt += choice.guilt;
          }
          nextScene();
        });
        choiceContainer.appendChild(choiceDiv);
      }
    }

    function init() {
      renderCharacters();
      renderChoices();
    }

    init();
  </script>
</body>
</html>