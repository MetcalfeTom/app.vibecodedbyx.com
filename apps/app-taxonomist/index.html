<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>App Taxonomist</title>
  <link rel="icon" href="https://emojicdn.elk.sh/üóÇÔ∏è">

  <meta property="og:title" content="App Taxonomist">
  <meta property="og:description" content="Explore 458 apps with fuzzy search and sorting">
  <meta property="og:url" content="https://app.sloppy.live/app-taxonomist">
  <meta property="og:image" content="https://app.sloppy.live/app-taxonomist/og-image.png">
  <meta property="og:type" content="website">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=IBM+Plex+Sans:wght@400;500;600&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg: #0a0a0f;
      --bg-card: #12121a;
      --bg-hover: #1a1a24;
      --border: #2a2a3a;
      --text: #e0e0e0;
      --text-dim: #666;
      --neon-green: #0f0;
      --neon-cyan: #0ff;
      --neon-pink: #ff2d95;
      --neon-purple: #b700ff;
      --accent-games: #f85149;
      --accent-tools: #58a6ff;
      --accent-art: #a371f7;
      --accent-social: #3fb950;
      --accent-finance: #f0883e;
      --accent-retro: #db61a2;
      --accent-sim: #79c0ff;
      --accent-music: #d2a8ff;
      --accent-misc: #8b949e;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'IBM Plex Sans', sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      line-height: 1.5;
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 40px 24px;
    }

    header {
      text-align: center;
      margin-bottom: 40px;
    }

    h1 {
      font-family: 'JetBrains Mono', monospace;
      font-size: 2.5rem;
      font-weight: 700;
      margin-bottom: 8px;
      color: var(--neon-green);
      text-shadow: 0 0 20px rgba(0,255,0,0.5);
    }

    .subtitle {
      color: var(--text-dim);
      font-size: 1rem;
    }

    .stats {
      display: flex;
      justify-content: center;
      gap: 40px;
      margin-top: 20px;
      flex-wrap: wrap;
    }

    .stat {
      text-align: center;
    }

    .stat-value {
      font-family: 'JetBrains Mono', monospace;
      font-size: 2rem;
      font-weight: 600;
      color: var(--neon-cyan);
      text-shadow: 0 0 10px rgba(0,255,255,0.5);
    }

    .stat-label {
      font-size: 0.8rem;
      color: var(--text-dim);
      text-transform: uppercase;
      letter-spacing: 0.1em;
    }

    /* Terminal search box */
    .search-container {
      background: var(--bg-card);
      border: 1px solid var(--neon-green);
      border-radius: 4px;
      padding: 20px;
      margin-bottom: 24px;
      box-shadow: 0 0 20px rgba(0,255,0,0.1);
    }

    .search-header {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 12px;
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.85rem;
      color: var(--neon-green);
    }

    .search-prompt {
      color: var(--neon-cyan);
    }

    .search-input-wrapper {
      display: flex;
      align-items: center;
      background: #000;
      border: 1px solid var(--border);
      padding: 12px 16px;
      font-family: 'JetBrains Mono', monospace;
    }

    .search-prefix {
      color: var(--neon-green);
      margin-right: 8px;
      user-select: none;
    }

    .search-input {
      flex: 1;
      background: transparent;
      border: none;
      color: var(--neon-green);
      font-family: 'JetBrains Mono', monospace;
      font-size: 1rem;
      outline: none;
      caret-color: var(--neon-green);
    }

    .search-input::placeholder {
      color: var(--text-dim);
    }

    .cursor-blink {
      width: 8px;
      height: 18px;
      background: var(--neon-green);
      animation: blink 1s step-end infinite;
      margin-left: 2px;
    }

    @keyframes blink {
      0%, 50% { opacity: 1; }
      51%, 100% { opacity: 0; }
    }

    .search-info {
      display: flex;
      justify-content: space-between;
      margin-top: 10px;
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.75rem;
      color: var(--text-dim);
    }

    .match-count {
      color: var(--neon-cyan);
    }

    /* Controls bar */
    .controls {
      display: flex;
      gap: 12px;
      margin-bottom: 24px;
      flex-wrap: wrap;
      align-items: center;
    }

    .sort-buttons {
      display: flex;
      gap: 8px;
    }

    .sort-btn {
      padding: 10px 18px;
      background: var(--bg-card);
      border: 1px solid var(--border);
      color: var(--text-dim);
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.85rem;
      cursor: pointer;
      transition: all 0.2s;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .sort-btn:hover {
      border-color: var(--neon-pink);
      color: var(--neon-pink);
    }

    .sort-btn.active {
      background: var(--neon-pink);
      border-color: var(--neon-pink);
      color: #000;
      box-shadow: 0 0 15px rgba(255,45,149,0.4);
    }

    .category-filters {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      flex: 1;
    }

    .filter-btn {
      padding: 8px 14px;
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 16px;
      color: var(--text-dim);
      font-family: inherit;
      font-size: 0.8rem;
      cursor: pointer;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .filter-btn:hover {
      background: var(--bg-hover);
      color: var(--text);
    }

    .filter-btn.active {
      background: var(--bg-hover);
      border-color: var(--neon-cyan);
      color: var(--neon-cyan);
      box-shadow: 0 0 10px rgba(0,255,255,0.2);
    }

    .filter-btn .count {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.7rem;
      opacity: 0.7;
    }

    /* Apps grid - flat list mode */
    .apps-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
      gap: 12px;
    }

    /* Category section mode */
    .category-section {
      margin-bottom: 40px;
    }

    .category-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 16px;
      padding-bottom: 10px;
      border-bottom: 1px solid var(--border);
    }

    .category-icon {
      font-size: 1.4rem;
    }

    .category-name {
      font-family: 'JetBrains Mono', monospace;
      font-size: 1.1rem;
      font-weight: 500;
    }

    .category-count {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.8rem;
      color: var(--text-dim);
      background: var(--bg-card);
      padding: 3px 10px;
      border-radius: 10px;
    }

    .app-card {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 6px;
      padding: 14px 16px;
      cursor: pointer;
      transition: all 0.2s;
      text-decoration: none;
      color: inherit;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
    }

    .app-card:hover {
      background: var(--bg-hover);
      border-color: var(--neon-cyan);
      transform: translateY(-2px);
      box-shadow: 0 4px 20px rgba(0,255,255,0.1);
    }

    .app-name {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.9rem;
      font-weight: 500;
      color: var(--text);
    }

    .app-name .match {
      background: rgba(0,255,0,0.3);
      color: var(--neon-green);
      padding: 0 2px;
      border-radius: 2px;
    }

    .app-category-tag {
      padding: 3px 8px;
      border-radius: 4px;
      font-size: 0.65rem;
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      white-space: nowrap;
    }

    .tag-games { background: rgba(248, 81, 73, 0.2); color: var(--accent-games); }
    .tag-tools { background: rgba(88, 166, 255, 0.2); color: var(--accent-tools); }
    .tag-art { background: rgba(163, 113, 247, 0.2); color: var(--accent-art); }
    .tag-social { background: rgba(63, 185, 80, 0.2); color: var(--accent-social); }
    .tag-finance { background: rgba(240, 136, 62, 0.2); color: var(--accent-finance); }
    .tag-retro { background: rgba(219, 97, 162, 0.2); color: var(--accent-retro); }
    .tag-simulation { background: rgba(121, 192, 255, 0.2); color: var(--accent-sim); }
    .tag-music { background: rgba(210, 168, 255, 0.2); color: var(--accent-music); }
    .tag-misc { background: rgba(139, 148, 158, 0.2); color: var(--accent-misc); }

    .no-results {
      text-align: center;
      padding: 60px 20px;
      color: var(--text-dim);
      grid-column: 1 / -1;
    }

    .no-results-icon {
      font-size: 3rem;
      margin-bottom: 16px;
      opacity: 0.5;
    }

    .no-results code {
      color: var(--neon-green);
      background: rgba(0,255,0,0.1);
      padding: 2px 8px;
      border-radius: 4px;
    }

    footer {
      text-align: center;
      padding: 40px 20px;
      color: var(--text-dim);
      font-size: 0.85rem;
      border-top: 1px solid var(--border);
      margin-top: 40px;
    }

    footer a {
      color: var(--neon-cyan);
      text-decoration: none;
    }

    footer a:hover {
      text-shadow: 0 0 10px var(--neon-cyan);
    }

    @media (max-width: 600px) {
      .container {
        padding: 20px 16px;
      }

      h1 {
        font-size: 1.8rem;
      }

      .stats {
        gap: 24px;
      }

      .stat-value {
        font-size: 1.5rem;
      }

      .controls {
        flex-direction: column;
        align-items: stretch;
      }

      .sort-buttons {
        justify-content: center;
      }

      .category-filters {
        justify-content: center;
      }

      .apps-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div style="background: #ff5f56; color: white; text-align: center; padding: 10px; font-weight: bold; position: sticky; top: 0; z-index: 1000;">
    ‚ö†Ô∏è This tool is legacy. Use the App Library in SloppyOS for the best experience.
  </div>
  <div class="container">
    <header>
      <h1>// APP_TAXONOMIST</h1>
      <p class="subtitle">Cataloging the sloppy.live ecosystem</p>
      <div class="stats">
        <div class="stat">
          <div class="stat-value" id="totalApps">0</div>
          <div class="stat-label">Total Apps</div>
        </div>
        <div class="stat">
          <div class="stat-value" id="totalCategories">0</div>
          <div class="stat-label">Categories</div>
        </div>
        <div class="stat">
          <div class="stat-value" id="matchCount">0</div>
          <div class="stat-label">Matching</div>
        </div>
      </div>
    </header>

    <!-- Terminal-style search -->
    <div class="search-container">
      <div class="search-header">
        <span class="search-prompt">$</span>
        <span>fuzzy_search --apps</span>
      </div>
      <div class="search-input-wrapper">
        <span class="search-prefix">&gt;</span>
        <input type="text" class="search-input" id="searchInput" placeholder="type to search... (fuzzy matching enabled)" autofocus>
        <div class="cursor-blink" id="cursorBlink"></div>
      </div>
      <div class="search-info">
        <span>Tip: Try partial matches like "neo", "slop", or "ter"</span>
        <span class="match-count" id="searchStatus">Ready</span>
      </div>
    </div>

    <!-- Sort and filter controls -->
    <div class="controls">
      <div class="sort-buttons">
        <button class="sort-btn active" data-sort="category">By Category</button>
        <button class="sort-btn" data-sort="az">A ‚Üí Z</button>
        <button class="sort-btn" data-sort="za">Z ‚Üí A</button>
        <button class="sort-btn" data-sort="newest">Newest</button>
      </div>
      <div class="category-filters" id="filters"></div>
    </div>

    <main id="appList"></main>

    <footer>
      <p>A catalog from <a href="https://sloppy.live" target="_blank">sloppy.live</a></p>
    </footer>
  </div>

  <script>
    // App taxonomy
    const taxonomy = {
      games: {
        icon: 'üéÆ',
        name: 'Games',
        keywords: ['game', 'clicker', 'shooter', 'platformer', 'tetris', 'snake', 'pong', 'invaders', 'arcade', 'quest', 'battle', 'fight', 'racing', 'dodge', 'jump', 'catch', 'defense', 'tower', 'puzzle', 'maze', 'chess', 'escape', 'adventure', 'runner', 'blast', 'zap', 'dash', 'slam', 'smash', 'bounce', 'stack', 'craft', 'drill', 'mash', 'flip', 'slice', 'survival', 'pinball', 'bowling', 'soccer']
      },
      tools: {
        icon: 'üîß',
        name: 'Tools',
        keywords: ['tool', 'calculator', 'tracker', 'manager', 'editor', 'generator', 'finder', 'scanner', 'monitor', 'dashboard', 'audit', 'convert', 'schedule', 'vault', 'security', 'protocol', 'bridge', 'api', 'tests', 'detector', 'redact', 'translator', 'explorer', 'scout', 'search', 'taxonomist']
      },
      art: {
        icon: 'üé®',
        name: 'Art',
        keywords: ['art', 'visual', 'fractal', 'particle', 'kaleidoscope', 'lava', 'lamp', 'fluid', 'animation', 'generative', 'pixel', 'canvas', 'paint', 'draw', 'sketch', 'color', 'pattern', 'dream', 'trippy', 'psychedelic', 'effect', 'vortex', 'spiral', 'geometric', 'mesh', 'terrain', 'landscape', 'visualizer', 'sphere', 'shapes']
      },
      social: {
        icon: 'üí¨',
        name: 'Social',
        keywords: ['social', 'chat', 'message', 'community', 'wall', 'board', 'gram', 'feed', 'post', 'comment', 'confession', 'guestbook', 'forum', 'hub', 'collab', 'share', 'diary', 'journal', 'manifesto']
      },
      finance: {
        icon: 'üí∞',
        name: 'Finance',
        keywords: ['crypto', 'coin', 'token', 'btc', 'solana', 'eth', 'wallet', 'trade', 'market', 'price', 'chart', 'finance', 'money', 'bank', 'casino', 'slots', 'bet', 'rugpull', 'bags']
      },
      retro: {
        icon: 'üì∫',
        name: 'Retro',
        keywords: ['retro', 'terminal', 'crt', 'dos', 'win95', 'windows', 'mac', 'os9', 'vhs', 'ascii', 'cli', 'console', 'emulator', '6502', 'sid', 'commodore', 'vintage', 'xp', 'desktop']
      },
      simulation: {
        icon: 'üåç',
        name: 'Simulation',
        keywords: ['sim', 'simulation', 'sandbox', 'world', 'city', 'civilization', 'evolution', 'life', 'ecosystem', 'physics', 'gravity', 'orbital', 'space', 'planet', 'universe', 'nuclear', 'weather', 'flight']
      },
      music: {
        icon: 'üéµ',
        name: 'Music',
        keywords: ['music', 'synth', 'drum', 'beat', 'sound', 'audio', 'tone', 'oscillator', 'speech', 'voice', 'tts', 'radio', 'lofi', 'soundboard', 'tune']
      },
      misc: {
        icon: 'üì¶',
        name: 'Misc',
        keywords: []
      }
    };

    // Complete app list with approximate creation order (newest at end) - 458 apps
    const apps = [
      '6502-emulator', 'abstract-tower-defense', 'access-denied', 'accountability-hub',
      'activity-overlay', 'aegis-protocol', 'agent-manager-3d', 'akash-portfolio',
      'alien-artillery', 'alpha-blast', 'analog-dash', 'angry-cookie', 'api',
      'app-directory', 'app-taxonomist', 'ascii-art', 'ascii-fish', 'asteroids',
      'audit-report', 'aurora-lab', 'bad-advice', 'bags-tracker', 'ball-pit',
      'batsman', 'bear-cycle', 'beef-clicker', 'beer-garden', 'bikini-bottom-brawl',
      'black-hole-vortex', 'bladder-blast', 'blue-box', 'blueprint-portal',
      'boss-blocker', 'bouldering-game', 'bouncy-berry', 'brainrot-os',
      'breakfast-game', 'breakout-terminal', 'breath-visualizer', 'btc-tracker',
      'bug-zap', 'butter-physics', 'calorie-tracker', 'candle-jumper',
      'candle-sailor', 'cat-pics', 'cat-zap', 'chaos-organizer', 'chart-comparison',
      'chat-boss-battle', 'chat-buddy', 'chat-suggestions', 'chatcloud',
      'chess-advice', 'chrome-sphere', 'claude-love', 'claude-status',
      'claudes-digital-diary', 'cli-poem', 'cloud-jumper', 'code-sprint',
      'code-unlock', 'coffee-facts', 'coin-pusher', 'color-cycler', 'color-match',
      'comedy-club', 'confession-wall', 'confetti-cannon', 'content-manager',
      'cosmic-cat-quest-pp', 'cosmic-chat', 'cosmic-shapes', 'costeo-gastro',
      'cowsay', 'cozy-pet', 'crisis-dashboard', 'crt-calculator', 'crypto-tools',
      'cube-escape', 'cute-duck', 'cyber-notes', 'cyber-shield', 'cyber-vault',
      'cybercall', 'dan-detector', 'dancing-whales', 'deadfish', 'deprecated-trivia',
      'desperate-ai', 'detective-board', 'deutsch-dash', 'diamond-drill',
      'digit-brain', 'disco-ball', 'discord-clone', 'doom-3d', 'doom-port',
      'dos-anime-dream', 'dp-pathfinder', 'dreamy-sleep', 'drum-machine',
      'dungeon-crawler', 'dunny-dash', 'dutch-still-life', 'eggcraft',
      'eggnet-sentinel', 'elite-landing', 'emo-shrine', 'emo-slash',
      'emoji-shooter', 'evidence-board', 'evo-sandbox', 'existential-autocorrect',
      'fake-reviews', 'fake-shutdown', 'feather-vault', 'federated-truth',
      'fee-watchtower', 'feedback', 'fema-portal', 'fighting-game',
      'file-generator', 'finance-shorts', 'first-date', 'fish-tank', 'fluid-sim',
      'fly-simulator', 'focus-buddy', 'fox-berries', 'fox-den', 'fox-playground',
      'fox-security', 'fox-tickle', 'fox-tickle-sim', 'fox-trap', 'fractal-dance',
      'future-news', 'gas-delivery', 'gemini-puzzle', 'genealogist',
      'generative-art', 'geometry-dash', 'ghost-runner', 'ghost-town-radio',
      'gift-gallery', 'git-sim', 'gitscope', 'glitch-vending', 'glitchmon',
      'glove-box', 'goblin-loot', 'godel-agent', 'golden-game', 'golden-stopwatch',
      'gorilla-fart', 'graffiti-wall', 'grape-vault', 'grapple-bot',
      'gratitude-journal', 'grave-generator', 'gravity-flip', 'gravity-surfer',
      'gravity-vortex', 'grok-penises', 'hacker-terminal', 'hello-world',
      'hex-conquest', 'hippo-pizzeria', 'hobbit-trip', 'hola-mundo',
      'holiday-luck', 'horny-jail', 'icy-tower', 'impossible-platform',
      'indie-hacker', 'infinite-abyss', 'interactive-novel', 'inventory-manager',
      'jellyfish-abyss', 'json-toon-converter', 'judgmental-cat', 'kaleidoscope',
      'kanban', 'kaneidog-vault', 'knowledge-chaos', 'kratos-couture',
      'laptop-fire', 'laughter-fractals', 'laughter-meter', 'lava-lamp',
      'lighthouse', 'lil-sloppy', 'lint-roller', 'live-scanner', 'livestream-hub',
      'logic-grove', 'lost-found', 'love-sloppy', 'mac-os9', 'malloc-madness',
      'manifesto-generator', 'mansion-butler', 'mate-clicker', 'matrix-friends',
      'matrix-rain', 'maxz00m-tictactoe', 'maze-pathfinder', 'mech-suit',
      'mechanical-calculator', 'medieval-romance', 'mesh-curvature', 'mesh-relax',
      'micro-city', 'minecraft', 'minecraft-guide', 'modern-node-typescript-developer',
      'monster-mash', 'moodmouse', 'moon-explorer', 'motorbike-racing',
      'mouse-mood', 'mundane-adventure', 'mundane-poetry', 'mysterious-life',
      'nacho-empire', 'narnia-map', 'nda-redactor', 'neon-alarm-clock',
      'neon-aquarium', 'neon-asteroids', 'neon-bonsai', 'neon-bowling',
      'neon-casino', 'neon-cigarette-factory', 'neon-cocktails', 'neon-crash',
      'neon-dodgeball', 'neon-donut', 'neon-dream-visualizer', 'neon-drift',
      'neon-drill', 'neon-fireworks', 'neon-flap', 'neon-flappy', 'neon-flower',
      'neon-fluid', 'neon-fox-chaos', 'neon-giftcard', 'neon-giraffe-clicker',
      'neon-guestbook', 'neon-heist', 'neon-invaders', 'neon-lava-lamp',
      'neon-life', 'neon-maelstrom', 'neon-particles', 'neon-pet', 'neon-phone',
      'neon-physics', 'neon-pong', 'neon-racer', 'neon-rave', 'neon-recovery-room',
      'neon-sandbox', 'neon-slice', 'neon-snake', 'neon-soundboard',
      'neon-speech', 'neon-synth', 'neon-terminal', 'neon-tetris',
      'neon-tickle-defense', 'neon-vault', 'neon-water', 'neon-weather',
      'neon-zen', 'network-scan', 'neural-viz', 'news-gen', 'night-watch',
      'not-human-cult', 'notes', 'nuclear-pizza', 'nuke-sim', 'nullify',
      'nutribullet', 'nye-vibe', 'obsidian-security', 'orbital-strike', 'origins',
      'ornament-toss', 'oscillator', 'ouija-board', 'ouija-board-v2', 'overview',
      'p5-art', 'page-of-nothingness', 'pancake-stack', 'phaser-platformer',
      'pho-game', 'physics-balls', 'ping-payload', 'pirate-captcha',
      'pirate-laser', 'pixel-bonfire', 'pixel-conflict', 'pixel-editor',
      'planets', 'plant-cli', 'platformer', 'pokemon-clone', 'pokevault',
      'polybius', 'pong-terminal', 'poo-palace', 'portal', 'prank-names',
      'prism-echo', 'purple-scanner', 'purple-trap', 'quarantine-pinball',
      'quaternion-orbits', 'quine-viz', 'random-greeting', 'raptor-pet',
      'recursive-agent', 'redact-o-matic', 'relativistic', 'robo-arm',
      'robot-arm', 'rocketship', 'roikku', 'romance-quest', 'rugpull-simulator',
      'safe-fork-bomb', 'sand-sandbox', 'sandbox', 'sandustry-clone',
      'sandwich-stack', 'seahorse', 'search-bridge', 'secret-shredder',
      'security-audit', 'sensible-soccer', 'shenzhen-spa-finder', 'sid-emulator',
      'silence-collector', 'silence-meter', 'simon-says', 'simp-meter',
      'simple-chat', 'simpsons-road-rage', 'sky-unlimited', 'slap-battle',
      'sleep-space', 'sloppy-analytics', 'sloppy-civ', 'sloppy-coin-info',
      'sloppy-community', 'sloppy-dashboard', 'sloppy-flow', 'sloppy-hunt',
      'sloppy-id', 'sloppy-lance', 'sloppy-os', 'sloppy-says', 'sloppy-slots',
      'sloppy-spectrum', 'sloppy-xp', 'sloppygram', 'sloppys-gift', 'sloppys-manifesto',
      'snake', 'snark-terminal', 'snowball-fight', 'solana-tracker',
      'south-park-creator', 'space-chess', 'space-flight', 'space-invaders',
      'space-taco', 'space-xmas-blocks', 'sploppy', 'sql-towers', 'star-catcher',
      'starship-bridge', 'status-dashboard', 'sticker-workshop', 'submarine-craft',
      'supabase-tests', 'swarm-nexus', 'swarm-oracle', 'synth', 'synth-collab',
      'synth-player', 'system-health', 'tag-explorer', 'tech-church',
      'terminal-escape', 'test', 'tetris', 'tetris-mobile', 'tetris-terminal',
      'text-effects', 'text-to-speech', 'the-last-word', 'the-singularity',
      'the-unclickable', 'the-void', 'thiel-soundboard', 'throne-rater',
      'tic-tac-toe', 'tickle-defense', 'tickle-grape', 'tickle-reactor',
      'tictactoe', 'toilet-run', 'toiletgram', 'tombstone-todo', 'train-scheduler',
      'train-signals', 'trash-compactor', 'treasure-calculator', 'trope-mixer',
      'truchet-tiles', 'trump-truth', 'tsp-genetic', 'tune-scout',
      'ubicacion-geografica', 'ucmj-translator', 'uk-pub-finder',
      'valkyrae-revenge', 'vhs-deck', 'vibe-clone', 'void-fishing',
      'voxel-terrain', 'voxel-world', 'wasm-dedup', 'web-archive', 'web-os',
      'webgl-text', 'whiteboard', 'who-is-gary', 'wichteln', 'wiki-scout',
      'win95', 'win95-lofi-soundboard', 'windows-95', 'witness-protection',
      'world-monitor', 'writer', 'xp-desktop', 'yoga', 'yorkie-stacker',
      'youtube-wizard', 'zen-garden'
    ];

    // Fuzzy search implementation
    function fuzzyMatch(text, pattern) {
      if (!pattern) return { match: true, score: 0, indices: [] };

      text = text.toLowerCase();
      pattern = pattern.toLowerCase();

      // Exact match gets highest score
      if (text.includes(pattern)) {
        const idx = text.indexOf(pattern);
        const indices = [];
        for (let i = idx; i < idx + pattern.length; i++) indices.push(i);
        return { match: true, score: 100 - idx, indices };
      }

      // Fuzzy match
      let ti = 0, pi = 0;
      const indices = [];
      let score = 0;
      let lastMatchIdx = -1;

      while (ti < text.length && pi < pattern.length) {
        if (text[ti] === pattern[pi]) {
          indices.push(ti);
          // Consecutive matches score higher
          if (lastMatchIdx === ti - 1) score += 5;
          else score += 1;
          // Start of word bonus
          if (ti === 0 || text[ti-1] === '-' || text[ti-1] === '_') score += 3;
          lastMatchIdx = ti;
          pi++;
        }
        ti++;
      }

      if (pi === pattern.length) {
        // Penalize gaps
        const gaps = indices.length > 1 ? indices[indices.length-1] - indices[0] - indices.length + 1 : 0;
        score -= gaps * 0.5;
        return { match: true, score, indices };
      }

      return { match: false, score: 0, indices: [] };
    }

    function highlightMatch(text, indices) {
      if (!indices.length) return text;

      let result = '';
      let lastIdx = 0;

      // Group consecutive indices
      const groups = [];
      let currentGroup = [indices[0]];

      for (let i = 1; i < indices.length; i++) {
        if (indices[i] === indices[i-1] + 1) {
          currentGroup.push(indices[i]);
        } else {
          groups.push(currentGroup);
          currentGroup = [indices[i]];
        }
      }
      groups.push(currentGroup);

      for (const group of groups) {
        result += text.slice(lastIdx, group[0]);
        result += `<span class="match">${text.slice(group[0], group[group.length-1] + 1)}</span>`;
        lastIdx = group[group.length-1] + 1;
      }
      result += text.slice(lastIdx);

      return result;
    }

    function categorizeApp(appName) {
      const name = appName.toLowerCase();
      for (const [catKey, catData] of Object.entries(taxonomy)) {
        if (catKey === 'misc') continue;
        for (const keyword of catData.keywords) {
          if (name.includes(keyword)) return catKey;
        }
      }
      return 'misc';
    }

    // State
    let currentSort = 'category';
    let currentFilter = 'all';
    let currentSearch = '';
    let categorizedApps = {};
    let appData = [];

    const TAXONOMIST_CACHE_KEY = 'taxonomist_cache';
    const TAXONOMIST_CACHE_TTL = 60 * 60 * 1000; // 1 hour

    function initAppData() {
      // Check sessionStorage cache first
      try {
        const cached = sessionStorage.getItem(TAXONOMIST_CACHE_KEY);
        if (cached) {
          const parsed = JSON.parse(cached);
          // Validate cache: same app count and not expired
          if (parsed.appCount === apps.length && Date.now() - parsed.cachedAt < TAXONOMIST_CACHE_TTL) {
            appData = parsed.appData;
            categorizedApps = parsed.categorizedApps;
            return;
          }
        }
      } catch (e) { /* sessionStorage unavailable */ }

      // Build fresh data
      appData = apps.map((name, index) => ({
        name,
        category: categorizeApp(name),
        index // Use index as proxy for "newness"
      }));

      for (const catKey of Object.keys(taxonomy)) {
        categorizedApps[catKey] = appData.filter(a => a.category === catKey);
      }

      // Persist to sessionStorage
      try {
        sessionStorage.setItem(TAXONOMIST_CACHE_KEY, JSON.stringify({
          appData,
          categorizedApps,
          appCount: apps.length,
          cachedAt: Date.now()
        }));
      } catch (e) { /* sessionStorage full or unavailable */ }
    }

    function renderFilters() {
      const filtersEl = document.getElementById('filters');
      filtersEl.innerHTML = '';

      const allBtn = document.createElement('button');
      allBtn.className = 'filter-btn active';
      allBtn.dataset.category = 'all';
      allBtn.innerHTML = `All <span class="count">${apps.length}</span>`;
      allBtn.onclick = () => filterByCategory('all');
      filtersEl.appendChild(allBtn);

      for (const [catKey, catData] of Object.entries(taxonomy)) {
        const count = categorizedApps[catKey]?.length || 0;
        if (count === 0) continue;

        const btn = document.createElement('button');
        btn.className = 'filter-btn';
        btn.dataset.category = catKey;
        btn.innerHTML = `${catData.icon} <span class="count">${count}</span>`;
        btn.onclick = () => filterByCategory(catKey);
        filtersEl.appendChild(btn);
      }
    }

    function getFilteredAndSortedApps() {
      let filtered = [...appData];

      // Apply category filter
      if (currentFilter !== 'all') {
        filtered = filtered.filter(a => a.category === currentFilter);
      }

      // Apply search with fuzzy matching
      if (currentSearch) {
        filtered = filtered.map(a => {
          const result = fuzzyMatch(a.name, currentSearch);
          return { ...a, ...result };
        }).filter(a => a.match).sort((a, b) => b.score - a.score);
      }

      // Apply sort (only if no search, as search has its own sorting)
      if (!currentSearch) {
        switch (currentSort) {
          case 'az':
            filtered.sort((a, b) => a.name.localeCompare(b.name));
            break;
          case 'za':
            filtered.sort((a, b) => b.name.localeCompare(a.name));
            break;
          case 'newest':
            filtered.sort((a, b) => b.index - a.index);
            break;
          case 'category':
          default:
            // Will be grouped by category in render
            break;
        }
      }

      return filtered;
    }

    function renderApps() {
      const listEl = document.getElementById('appList');
      const filtered = getFilteredAndSortedApps();

      // Update match count
      document.getElementById('matchCount').textContent = filtered.length;
      document.getElementById('searchStatus').textContent =
        currentSearch ? `${filtered.length} matches` : 'Ready';

      if (filtered.length === 0) {
        listEl.innerHTML = `
          <div class="no-results">
            <div class="no-results-icon">üîç</div>
            <p>No apps found matching <code>${currentSearch}</code></p>
            <p style="margin-top: 8px; font-size: 0.9rem;">Try a shorter or different search term</p>
          </div>
        `;
        return;
      }

      // Group by category or flat list
      if (currentSort === 'category' && !currentSearch) {
        listEl.innerHTML = '';

        for (const [catKey, catData] of Object.entries(taxonomy)) {
          const appsInCat = filtered.filter(a => a.category === catKey);
          if (appsInCat.length === 0) continue;

          const section = document.createElement('section');
          section.className = 'category-section';
          section.innerHTML = `
            <div class="category-header">
              <span class="category-icon">${catData.icon}</span>
              <span class="category-name">${catData.name}</span>
              <span class="category-count">${appsInCat.length}</span>
            </div>
            <div class="apps-grid">
              ${appsInCat.map(app => renderAppCard(app)).join('')}
            </div>
          `;
          listEl.appendChild(section);
        }
      } else {
        // Flat grid
        listEl.innerHTML = `
          <div class="apps-grid">
            ${filtered.map(app => renderAppCard(app)).join('')}
          </div>
        `;
      }
    }

    function renderAppCard(app) {
      const catData = taxonomy[app.category];
      const displayName = app.indices ? highlightMatch(app.name, app.indices) : app.name;

      return `
        <a href="https://app.sloppy.live/${app.name}/" target="_blank" class="app-card">
          <span class="app-name">${displayName}</span>
          <span class="app-category-tag tag-${app.category}">${catData.icon} ${catData.name}</span>
        </a>
      `;
    }

    function filterByCategory(category) {
      currentFilter = category;
      document.querySelectorAll('.filter-btn').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.category === category);
      });
      renderApps();
    }

    function setSort(sort) {
      currentSort = sort;
      document.querySelectorAll('.sort-btn').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.sort === sort);
      });
      renderApps();
    }

    function init() {
      initAppData();

      // Update stats
      document.getElementById('totalApps').textContent = apps.length;
      document.getElementById('totalCategories').textContent =
        Object.values(categorizedApps).filter(arr => arr.length > 0).length;
      document.getElementById('matchCount').textContent = apps.length;

      renderFilters();
      renderApps();

      // Search handler with real-time updates
      const searchInput = document.getElementById('searchInput');
      const cursorBlink = document.getElementById('cursorBlink');

      searchInput.addEventListener('input', (e) => {
        currentSearch = e.target.value.trim();
        renderApps();
      });

      searchInput.addEventListener('focus', () => {
        cursorBlink.style.display = 'none';
      });

      searchInput.addEventListener('blur', () => {
        if (!searchInput.value) cursorBlink.style.display = 'block';
      });

      // Sort button handlers
      document.querySelectorAll('.sort-btn').forEach(btn => {
        btn.addEventListener('click', () => setSort(btn.dataset.sort));
      });
    }

    init();
  </script>
<script src="/apps/sloppy-header/sloppy-bar.js"></script>
<script src="/vibelib-extended.js"></script>
<script>
  // Compatibility Patch for Legacy Apps
  window.addEventListener("load", () => {
    if (window.SloppyKarma && window.VibeLib.Economy) {
      // Redirect old calls to new engine
      window.SloppyKarma.track = window.VibeLib.Economy.track;
    }
  });
</script>
</body>
</html>
