<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net; style-src 'self' 'unsafe-inline'; img-src 'self' https://emojicdn.elk.sh data:; connect-src 'self' https://*.supabase.co; font-src 'self'; frame-ancestors 'none';">
<title>ğŸ’­ Anonymous Confession Wall - Share Your Thoughts Safely</title>
<link rel="icon" href="https://emojicdn.elk.sh/ğŸ’­">
<meta property="og:title" content="ğŸ’­ Anonymous Confession Wall - Share Your Thoughts Safely">
<meta property="og:description" content="Share your thoughts anonymously on our digital confession wall. A safe space for secrets, feelings, and honest reflections.">
<meta property="og:url" content="https://app.sloppy.live/confession-wall">
<meta property="og:image" content="https://app.sloppy.live/confession-wall/confession-preview.png">
<meta property="og:type" content="website">
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.39.0/dist/umd/supabase.js"></script>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Georgia',serif;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);min-height:100vh;color:#333;line-height:1.6}
.container{max-width:1200px;margin:0 auto;padding:20px}
.header{text-align:center;margin-bottom:40px;color:#fff}
.header h1{font-size:2.5em;margin-bottom:10px;text-shadow:2px 2px 4px rgba(0,0,0,.3)}
.header p{font-size:1.2em;opacity:.9;max-width:600px;margin:0 auto}
.confession-form{background:rgba(255,255,255,.95);backdrop-filter:blur(10px);border-radius:20px;padding:30px;margin-bottom:40px;box-shadow:0 8px 32px rgba(0,0,0,.1)}
.form-group{margin-bottom:20px}
.form-group label{display:block;margin-bottom:8px;font-weight:bold;color:#555}
.confession-textarea{width:100%;min-height:120px;padding:15px;border:2px solid #ddd;border-radius:12px;font-size:16px;font-family:inherit;resize:vertical;transition:border-color .3s ease}
.confession-textarea:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px rgba(102,126,234,.1)}
.theme-selector{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
.theme-option{padding:8px 16px;border:2px solid #ddd;border-radius:20px;background:#fff;cursor:pointer;transition:all .3s ease;font-size:14px}
.theme-option:hover{transform:translateY(-2px);box-shadow:0 4px 12px rgba(0,0,0,.1)}
.theme-option.selected{background:#667eea;color:#fff;border-color:#667eea}
.submit-btn{background:linear-gradient(45deg,#667eea,#764ba2);color:#fff;border:none;padding:15px 30px;border-radius:25px;font-size:16px;font-weight:bold;cursor:pointer;transition:all .3s ease;width:100%}
.submit-btn:hover{transform:translateY(-2px);box-shadow:0 6px 20px rgba(102,126,234,.3)}
.submit-btn:disabled{opacity:.6;cursor:not-allowed;transform:none}
.wall{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px;margin-top:40px}
.confession{background:rgba(255,255,255,.9);backdrop-filter:blur(10px);border-radius:15px;padding:20px;box-shadow:0 4px 20px rgba(0,0,0,.1);transition:transform .3s ease;position:relative;overflow:hidden}
.confession:hover{transform:translateY(-5px)}
.confession::before{content:'';position:absolute;top:0;left:0;right:0;height:4px;background:var(--theme-color,#667eea)}
.confession-content{font-size:16px;line-height:1.6;margin-bottom:15px;word-wrap:break-word}
.confession-meta{display:flex;justify-content:space-between;align-items:center;font-size:14px;color:#666}
.confession-theme{background:rgba(102,126,234,.1);padding:4px 12px;border-radius:12px;font-size:12px;color:#667eea;font-weight:bold}
.confession-time{opacity:.7}
.like-btn{background:none;border:none;cursor:pointer;display:flex;align-items:center;gap:5px;color:#666;transition:color .3s ease}
.like-btn:hover,.like-btn.liked{color:#e74c3c}
.stats{display:flex;justify-content:center;gap:30px;margin:30px 0;color:#fff;font-size:18px}
.stat{text-align:center}
.stat-number{display:block;font-size:2em;font-weight:bold}
.loading{text-align:center;padding:40px;color:#fff;font-size:18px}
.empty-state{text-align:center;padding:60px 20px;color:rgba(255,255,255,.8)}
.empty-state h3{font-size:1.5em;margin-bottom:10px}
.backlink{text-align:center;margin-top:40px;padding:20px;background:rgba(255,255,255,.1);border-radius:10px;color:#fff}
.backlink a{color:#87CEEB;text-decoration:none;font-weight:bold}
.theme-love{--theme-color:#e74c3c}
.theme-work{--theme-color:#3498db}
.theme-family{--theme-color:#2ecc71}
.theme-friendship{--theme-color:#f39c12}
.theme-regret{--theme-color:#9b59b6}
.theme-dreams{--theme-color:#1abc9c}
.theme-general{--theme-color:#667eea}
@media (max-width:768px){
.container{padding:15px}
.header h1{font-size:2em}
.confession-form{padding:20px}
.wall{grid-template-columns:1fr;gap:15px}
.stats{gap:20px;font-size:16px}
.theme-selector{gap:8px}
.theme-option{padding:6px 12px;font-size:13px}
}
</style>
</head>
<body>
<div class="container">
<div class="header">
<h1>ğŸ’­ Confession Wall</h1>
<p>Share your thoughts anonymously in a safe space. Your identity remains completely private.</p>
</div>
<div class="confession-form">
<form id="confessionForm">
<div class="form-group">
<label for="confession">What's on your mind? Share anonymously:</label>
<textarea id="confession" class="confession-textarea" placeholder="Write your confession, thought, or feeling here... This will be posted anonymously." maxlength="500" required></textarea>
<div style="text-align:right;font-size:12px;color:#666;margin-top:5px">
<span id="charCount">0</span>/500 characters
</div>
</div>
<div class="form-group">
<label>Choose a theme (optional):</label>
<div class="theme-selector">
<div class="theme-option selected" data-theme="general">ğŸ’­ General</div>
<div class="theme-option" data-theme="love">â¤ï¸ Love</div>
<div class="theme-option" data-theme="work">ğŸ’¼ Work</div>
<div class="theme-option" data-theme="family">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Family</div>
<div class="theme-option" data-theme="friendship">ğŸ‘« Friendship</div>
<div class="theme-option" data-theme="regret">ğŸ˜” Regret</div>
<div class="theme-option" data-theme="dreams">âœ¨ Dreams</div>
</div>
</div>
<button type="submit" class="submit-btn">Share Anonymously</button>
</form>
</div>
<div class="stats">
<div class="stat">
<span class="stat-number" id="totalConfessions">0</span>
<span>Confessions</span>
</div>
<div class="stat">
<span class="stat-number" id="totalLikes">0</span>
<span>Hearts Given</span>
</div>
</div>
<div id="confessionsWall" class="wall">
<div class="loading">Loading confessions...</div>
</div>
<div class="backlink">
ğŸ¬ Built live at <a href="https://sloppy.live" target="_blank">sloppy.live</a> | <a href="https://app.sloppy.live/overview" style="color:#4ecdc4;text-decoration:none">ğŸ¨ View All Apps</a>
</div>
</div>
<script>
const SUPABASE_URL='https://yjyxteqzhhmtrgcaekgz.supabase.co';
const SUPABASE_ANON_KEY='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlqeXh0ZXF6aGhtdHJnY2Fla2d6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTczNTg3NDIsImV4cCI6MjA3MjkzNDc0Mn0.G8SRde7IN2QFW1EnASM8IS32IUYR2eenCCjdDdioiBU';
const supabase=window.supabase.createClient(SUPABASE_URL,SUPABASE_ANON_KEY);
let selectedTheme='general',confessions=[],currentUser=null;
const init=async()=>{
try{
const{data:{session}}=await supabase.auth.getSession();
if(!session){
const{data,error}=await supabase.auth.signInAnonymously();
if(error)throw error;
currentUser=data.user
}else{currentUser=session.user}
await loadConfessions();
setupEventListeners()
}catch(error){
console.error('Error initializing app:',error);
document.getElementById('confessionsWall').innerHTML='<div style="text-align:center;color:white;padding:40px"><h3>Unable to load confessions</h3><p>Please refresh the page to try again.</p></div>'
}
};
const loadConfessions=async()=>{
try{
const{data,error}=await supabase.from('confessions').select('*').eq('is_approved',true).order('created_at',{ascending:false}).limit(50);
if(error)throw error;
confessions=data||[];
renderConfessions();
updateStats()
}catch(error){console.error('Error loading confessions:',error)}
};
const renderConfessions=()=>{
const wall=document.getElementById('confessionsWall');
if(confessions.length===0){
wall.innerHTML='<div class="empty-state"><h3>ğŸ’­ Be the first to share</h3><p>The wall is waiting for your anonymous confession.</p></div>';
return
}
wall.textContent='';
confessions.forEach(confession=>{
const confessionDiv=document.createElement('div');
confessionDiv.className=`confession theme-${escapeHtml(confession.theme||'general')}`;
const contentDiv=document.createElement('div');
contentDiv.className='confession-content';
contentDiv.textContent=confession.content;
const metaDiv=document.createElement('div');
metaDiv.className='confession-meta';
const themeDiv=document.createElement('div');
const themeSpan=document.createElement('span');
themeSpan.className='confession-theme';
themeSpan.textContent=`${getThemeEmoji(confession.theme)} ${confession.theme||'general'}`;
themeDiv.appendChild(themeSpan);
const actionsDiv=document.createElement('div');
actionsDiv.style.display='flex';
actionsDiv.style.alignItems='center';
actionsDiv.style.gap='15px';
const likeBtn=document.createElement('button');
likeBtn.className='like-btn';
likeBtn.onclick=()=>likeConfession(confession.id);
const likeSpan=document.createElement('span');
likeSpan.textContent=confession.likes||0;
likeBtn.innerHTML='â¤ï¸ ';
likeBtn.appendChild(likeSpan);
const timeSpan=document.createElement('span');
timeSpan.className='confession-time';
timeSpan.textContent=formatTimeAgo(confession.created_at);
actionsDiv.appendChild(likeBtn);
actionsDiv.appendChild(timeSpan);
metaDiv.appendChild(themeDiv);
metaDiv.appendChild(actionsDiv);
confessionDiv.appendChild(contentDiv);
confessionDiv.appendChild(metaDiv);
wall.appendChild(confessionDiv)
})
};
let lastConfessionTime=0;
const CONFESSION_COOLDOWN=3e3;
const submitConfession=async event=>{
event.preventDefault();
const content=document.getElementById('confession').value.trim();
if(!content)return;
const now=Date.now();
if(now-lastConfessionTime<CONFESSION_COOLDOWN){alert('Please wait before sharing another confession.');return}
if(content.length>500){alert('Confession is too long. Maximum 500 characters.');return}
if(content.length<10){alert('Confession is too short. Minimum 10 characters.');return}
const validThemes=['general','love','work','family','friendship','regret','dreams'];
const safeTheme=validThemes.includes(selectedTheme)?selectedTheme:'general';
lastConfessionTime=now;
const submitBtn=document.querySelector('.submit-btn');
submitBtn.disabled=true;
submitBtn.textContent='Sharing...';
try{
const{error}=await supabase.from('confessions').insert({content:content,theme:safeTheme,likes:0,is_approved:true,user_id:currentUser.id});
if(error)throw error;
document.getElementById('confession').value='';
document.getElementById('charCount').textContent='0';
await loadConfessions();
submitBtn.textContent='âœ“ Shared!';
setTimeout(()=>{submitBtn.textContent='Share Anonymously';submitBtn.disabled=false},2e3)
}catch(error){
console.error('Error submitting confession:',error);
submitBtn.textContent='Error - Try Again';
setTimeout(()=>{submitBtn.textContent='Share Anonymously';submitBtn.disabled=false},2e3)
}
};
const likeConfession=async confessionId=>{
try{
const confession=confessions.find(c=>c.id===confessionId);
if(!confession)return;
const newLikes=(confession.likes||0)+1;
const{error}=await supabase.from('confessions').update({likes:newLikes}).eq('id',confessionId);
if(error)throw error;
confession.likes=newLikes;
renderConfessions();
updateStats()
}catch(error){console.error('Error liking confession:',error)}
};
const updateStats=()=>{
const totalConfessions=confessions.length,totalLikes=confessions.reduce((sum,c)=>sum+(c.likes||0),0);
document.getElementById('totalConfessions').textContent=totalConfessions;
document.getElementById('totalLikes').textContent=totalLikes
};
const setupEventListeners=()=>{
document.getElementById('confessionForm').addEventListener('submit',submitConfession);
const textarea=document.getElementById('confession'),charCount=document.getElementById('charCount');
textarea.addEventListener('input',()=>charCount.textContent=textarea.value.length);
document.querySelectorAll('.theme-option').forEach(option=>{
option.addEventListener('click',()=>{
document.querySelectorAll('.theme-option').forEach(o=>o.classList.remove('selected'));
option.classList.add('selected');
selectedTheme=option.dataset.theme
})
});
setInterval(loadConfessions,3e4)
};
const escapeHtml=text=>{const div=document.createElement('div');div.textContent=text;return div.innerHTML};
const formatTimeAgo=dateString=>{
const date=new Date(dateString),now=new Date(),diffInSeconds=Math.floor((now-date)/1e3);
if(diffInSeconds<60)return 'just now';
if(diffInSeconds<3600)return `${Math.floor(diffInSeconds/60)}m ago`;
if(diffInSeconds<86400)return `${Math.floor(diffInSeconds/3600)}h ago`;
return `${Math.floor(diffInSeconds/86400)}d ago`
};
const getThemeEmoji=theme=>{
const emojis={general:'ğŸ’­',love:'â¤ï¸',work:'ğŸ’¼',family:'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦',friendship:'ğŸ‘«',regret:'ğŸ˜”',dreams:'âœ¨'};
return emojis[theme]||'ğŸ’­'
};
document.addEventListener('DOMContentLoaded',init)
</script>
<script src="/sloppy-header/sloppy-bar.js"></script>
</body>
</html>
