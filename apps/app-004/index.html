<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Banana Platformer üçå</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, system-ui, sans-serif;
            background: linear-gradient(135deg, #87CEEB 0%, #98D8C8 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            overflow: hidden;
        }
        .back-link {
            position: absolute;
            top: 20px;
            left: 20px;
            color: white;
            text-decoration: none;
            padding: 10px 20px;
            background: rgba(0,0,0,0.3);
            border-radius: 25px;
            transition: all 0.3s;
            z-index: 100;
        }
        .back-link:hover {
            background: rgba(0,0,0,0.5);
            transform: translateX(-5px);
        }
        .game-header {
            text-align: center;
            padding: 20px;
            color: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        .score-board {
            display: flex;
            gap: 30px;
            justify-content: center;
            font-size: 1.2em;
            background: rgba(255,255,255,0.2);
            padding: 10px 30px;
            border-radius: 20px;
        }
        .score-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .score-item span {
            font-weight: bold;
            color: #FFD700;
        }
        #gameCanvas {
            border: 3px solid rgba(255,255,255,0.3);
            border-radius: 10px;
            background: linear-gradient(to bottom, #87CEEB 0%, #98D8C8 60%, #8B7355 60%, #654321 100%);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            cursor: pointer;
        }
        .controls {
            margin-top: 20px;
            text-align: center;
            color: white;
            background: rgba(0,0,0,0.3);
            padding: 15px 30px;
            border-radius: 20px;
        }
        .controls h3 {
            margin-bottom: 10px;
        }
        .control-keys {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }
        .key {
            background: rgba(255,255,255,0.2);
            padding: 5px 10px;
            border-radius: 5px;
            font-weight: bold;
        }
        .game-over {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 30px 50px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            display: none;
            z-index: 1000;
        }
        .game-over.show {
            display: block;
        }
        .game-over h2 {
            color: #2d3436;
            margin-bottom: 15px;
            font-size: 2em;
        }
        .game-over p {
            color: #636e72;
            margin-bottom: 20px;
            font-size: 1.2em;
        }
        .restart-btn {
            padding: 15px 30px;
            font-size: 1.1em;
            border: none;
            border-radius: 15px;
            background: #55efc4;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
        }
        .restart-btn:hover {
            background: #00b894;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,184,148,0.3);
        }
        .mobile-controls {
            display: none;
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            gap: 20px;
            z-index: 100;
        }
        .mobile-btn {
            padding: 15px 25px;
            font-size: 1.5em;
            border: none;
            border-radius: 10px;
            background: rgba(255,255,255,0.3);
            color: white;
            cursor: pointer;
            touch-action: manipulation;
        }
        @media (max-width: 768px) {
            .mobile-controls {
                display: flex;
            }
            .controls {
                display: none;
            }
        }
    </style>
</head>
<body>
    <a href="https://app.vibecodedbyx.com" class="back-link">‚Üê Back to Apps</a>
    
    <div class="game-header">
        <h1>üçå Banana Platformer üçå</h1>
        <div class="score-board">
            <div class="score-item">
                üçå Score: <span id="score">0</span>
            </div>
            <div class="score-item">
                ü•ß Lives: <span id="livesIcons"></span>
            </div>
            <div class="score-item">
                ‚è±Ô∏è Time: <span id="time">0</span>s
            </div>
        </div>
    </div>
    
    <canvas id="gameCanvas" width="800" height="400"></canvas>
    
    <div class="controls">
        <h3>Controls</h3>
        <div class="control-keys">
            <div><span class="key">‚Üê‚Üí</span> Move</div>
            <div><span class="key">Space/‚Üë</span> Jump</div>
            <div><span class="key">Click/Tap</span> Jump</div>
        </div>
    </div>
    
    <div class="mobile-controls">
        <button class="mobile-btn" id="leftBtn">‚Üê</button>
        <button class="mobile-btn" id="jumpBtn">Jump</button>
        <button class="mobile-btn" id="rightBtn">‚Üí</button>
    </div>
    
    <div class="game-over" id="gameOver">
        <h2>Game Over!</h2>
        <p>Final Score: <span id="finalScore">0</span></p>
        <p>Time Survived: <span id="finalTime">0</span>s</p>
        <button class="restart-btn" onclick="restartGame()">Play Again</button>
    </div>
    
    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        
        // Game state
        let score = 0;
        let lives = 3;
        let gameTime = 0;
        let gameRunning = true;
        let startTime = Date.now();
        
        // Player
        const player = {
            x: 100,
            y: 300,
            width: 30,
            height: 40,
            velocityX: 0,
            velocityY: 0,
            speed: 5,
            jumpPower: 12,
            onGround: false,
            facing: 'right'
        };
        
        // Game objects
        let platforms = [];
        let bananas = [];
        let enemies = [];
        let clouds = [];
        
        // Controls
        const keys = {};
        
        // Initialize platforms
        function initPlatforms() {
            platforms = [
                // Ground
                {x: 0, y: 350, width: 800, height: 50},
                // Platforms
                {x: 150, y: 280, width: 100, height: 20},
                {x: 300, y: 220, width: 120, height: 20},
                {x: 500, y: 250, width: 100, height: 20},
                {x: 650, y: 180, width: 100, height: 20},
                {x: 400, y: 150, width: 80, height: 20},
                {x: 200, y: 120, width: 100, height: 20}
            ];
        }
        
        // Initialize bananas
        function initBananas() {
            bananas = [
                {x: 180, y: 240, width: 25, height: 30, collected: false},
                {x: 350, y: 180, width: 25, height: 30, collected: false},
                {x: 530, y: 210, width: 25, height: 30, collected: false},
                {x: 680, y: 140, width: 25, height: 30, collected: false},
                {x: 430, y: 110, width: 25, height: 30, collected: false},
                {x: 230, y: 80, width: 25, height: 30, collected: false}
            ];
        }
        
        // Initialize enemies
        function initEnemies() {
            enemies = [
                {x: 350, y: 320, width: 30, height: 30, velocityX: 2, minX: 300, maxX: 450},
                {x: 550, y: 320, width: 30, height: 30, velocityX: -1.5, minX: 500, maxX: 650},
                {x: 250, y: 90, width: 30, height: 30, velocityX: 1, minX: 200, maxX: 300}
            ];
        }
        
        // Initialize clouds
        function initClouds() {
            clouds = [
                {x: 100, y: 50, velocityX: 0.5},
                {x: 400, y: 80, velocityX: 0.3},
                {x: 650, y: 40, velocityX: 0.4}
            ];
        }
        
        // Input handlers
        document.addEventListener('keydown', (e) => {
            keys[e.key] = true;
            if (e.key === ' ' || e.key === 'ArrowUp') {
                e.preventDefault();
            }
        });
        
        document.addEventListener('keyup', (e) => {
            keys[e.key] = false;
        });
        
        canvas.addEventListener('click', () => {
            if (player.onGround && gameRunning) {
                player.velocityY = -player.jumpPower;
            }
        });
        
        // Mobile controls
        document.getElementById('leftBtn').addEventListener('touchstart', () => keys['ArrowLeft'] = true);
        document.getElementById('leftBtn').addEventListener('touchend', () => keys['ArrowLeft'] = false);
        document.getElementById('rightBtn').addEventListener('touchstart', () => keys['ArrowRight'] = true);
        document.getElementById('rightBtn').addEventListener('touchend', () => keys['ArrowRight'] = false);
        document.getElementById('jumpBtn').addEventListener('touchstart', () => {
            if (player.onGround && gameRunning) {
                player.velocityY = -player.jumpPower;
            }
        });
        
        // render lives as small apple pies
        function renderLives() {
            const container = document.getElementById('livesIcons');
            if (!container) return;
            container.innerHTML = '';
            for (let i = 0; i < lives; i++) {
                const span = document.createElement('span');
                span.textContent = 'ü•ß';
                span.style.fontSize = '18px';
                span.style.marginRight = '4px';
                container.appendChild(span);
            }
        }

        // Update game
        function update() {
            if (!gameRunning) return;
            
            // Update game time
            gameTime = Math.floor((Date.now() - startTime) / 1000);
            document.getElementById('time').textContent = gameTime;
            
            // Player movement
            if (keys['ArrowLeft']) {
                player.velocityX = -player.speed;
                player.facing = 'left';
            } else if (keys['ArrowRight']) {
                player.velocityX = player.speed;
                player.facing = 'right';
            } else {
                player.velocityX *= 0.8; // Friction
            }
            
            // Jump
            if ((keys[' '] || keys['ArrowUp']) && player.onGround) {
                player.velocityY = -player.jumpPower;
            }
            
            // Gravity
            player.velocityY += 0.5;
            
            // Update position
            player.x += player.velocityX;
            player.y += player.velocityY;
            
            // Keep player in bounds
            if (player.x < 0) player.x = 0;
            if (player.x > canvas.width - player.width) player.x = canvas.width - player.width;
            
            // Check platform collisions
            player.onGround = false;
            for (let platform of platforms) {
                if (player.x < platform.x + platform.width &&
                    player.x + player.width > platform.x &&
                    player.y < platform.y + platform.height &&
                    player.y + player.height > platform.y) {
                    
                    // Landing on top
                    if (player.velocityY > 0 && player.y < platform.y) {
                        player.y = platform.y - player.height;
                        player.velocityY = 0;
                        player.onGround = true;
                    }
                    // Hit from below
                    else if (player.velocityY < 0 && player.y > platform.y) {
                        player.y = platform.y + platform.height;
                        player.velocityY = 0;
                    }
                }
            }
            
            // Collect bananas
            for (let banana of bananas) {
                if (!banana.collected &&
                    player.x < banana.x + banana.width &&
                    player.x + player.width > banana.x &&
                    player.y < banana.y + banana.height &&
                    player.y + player.height > banana.y) {
                    
                    banana.collected = true;
                    score += 10;
                    document.getElementById('score').textContent = score;
                    
                    // Spawn new banana
                    setTimeout(() => {
                        banana.x = Math.random() * (canvas.width - 30);
                        banana.y = Math.random() * 200 + 50;
                        banana.collected = false;
                    }, 3000);
                }
            }
            
            // Update enemies
            for (let enemy of enemies) {
                enemy.x += enemy.velocityX;
                
                // Bounce at boundaries
                if (enemy.x <= enemy.minX || enemy.x >= enemy.maxX) {
                    enemy.velocityX *= -1;
                }
                
                // Check collision with player
                if (player.x < enemy.x + enemy.width &&
                    player.x + player.width > enemy.x &&
                    player.y < enemy.y + enemy.height &&
                    player.y + player.height > enemy.y) {
                    
                    // Player stomps enemy
                    if (player.velocityY > 0 && player.y < enemy.y) {
                        player.velocityY = -10;
                        score += 5;
                        document.getElementById('score').textContent = score;
                        // Move enemy off screen
                        enemy.y = -100;
                        setTimeout(() => {
                            enemy.y = 320;
                        }, 5000);
                    } else {
                        // Player takes damage
                        lives--;
                        renderLives();
                        player.x = 100;
                        player.y = 300;
                        
                        if (lives <= 0) {
                            endGame();
                        }
                    }
                }
            }
            
            // Update clouds
            for (let cloud of clouds) {
                cloud.x += cloud.velocityX;
                if (cloud.x > canvas.width + 100) {
                    cloud.x = -100;
                }
            }
            
            // Fall off map
            if (player.y > canvas.height) {
                lives--;
                renderLives();
                player.x = 100;
                player.y = 300;
                player.velocityX = 0;
                player.velocityY = 0;
                
                if (lives <= 0) {
                    endGame();
                }
            }
        }
        
        // Draw game
        function draw() {
            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Draw sky gradient
            const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
            gradient.addColorStop(0, '#87CEEB');
            gradient.addColorStop(0.6, '#98D8C8');
            gradient.addColorStop(0.6, '#8B7355');
            gradient.addColorStop(1, '#654321');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Draw clouds
            ctx.fillStyle = 'rgba(255, 255, 255, 0.7)';
            for (let cloud of clouds) {
                // Simple cloud shape
                ctx.beginPath();
                ctx.arc(cloud.x, cloud.y, 20, 0, Math.PI * 2);
                ctx.arc(cloud.x + 25, cloud.y, 25, 0, Math.PI * 2);
                ctx.arc(cloud.x + 50, cloud.y, 20, 0, Math.PI * 2);
                ctx.fill();
            }
            
            // Draw platforms
            for (let platform of platforms) {
                if (platform.y === 350) {
                    // Ground
                    ctx.fillStyle = '#654321';
                    ctx.fillRect(platform.x, platform.y, platform.width, platform.height);
                    // Grass
                    ctx.fillStyle = '#228B22';
                    ctx.fillRect(platform.x, platform.y, platform.width, 5);
                } else {
                    // Platforms
                    ctx.fillStyle = '#8B4513';
                    ctx.fillRect(platform.x, platform.y, platform.width, platform.height);
                    ctx.fillStyle = '#228B22';
                    ctx.fillRect(platform.x, platform.y, platform.width, 3);
                }
            }
            
            // Draw bananas
            ctx.font = '25px Arial';
            for (let banana of bananas) {
                if (!banana.collected) {
                    ctx.fillText('üçå', banana.x, banana.y + 25);
                }
            }
            
            // Draw enemies
            ctx.font = '30px Arial';
            for (let enemy of enemies) {
                if (enemy.y > 0) {
                    ctx.fillText('ü¶Ä', enemy.x, enemy.y + 25);
                }
            }
            
            // Draw player
            ctx.font = '35px Arial';
            if (player.facing === 'right') {
                ctx.fillText('üçå', player.x, player.y + 35);
            } else {
                ctx.save();
                ctx.translate(player.x + player.width, player.y + 35);
                ctx.scale(-1, 1);
                ctx.fillText('üçå', 0, 0);
                ctx.restore();
            }
        }
        
        // Game loop
        function gameLoop() {
            update();
            draw();
            if (gameRunning) {
                requestAnimationFrame(gameLoop);
            }
        }
        
        // End game
        function endGame() {
            gameRunning = false;
            document.getElementById('finalScore').textContent = score;
            document.getElementById('finalTime').textContent = gameTime;
            document.getElementById('gameOver').classList.add('show');
        }
        
        // Restart game
        function restartGame() {
            score = 0;
            lives = 3;
            gameTime = 0;
            gameRunning = true;
            startTime = Date.now();
            
            player.x = 100;
            player.y = 300;
            player.velocityX = 0;
            player.velocityY = 0;
            
            document.getElementById('score').textContent = score;
            renderLives();
            document.getElementById('time').textContent = gameTime;
            document.getElementById('gameOver').classList.remove('show');
            
            initPlatforms();
            initBananas();
            initEnemies();
            initClouds();
            
            gameLoop();
        }
        
        // Initialize game
        initPlatforms();
        initBananas();
        initEnemies();
        initClouds();
        renderLives();
        gameLoop();
    </script>
</body>
</html>
