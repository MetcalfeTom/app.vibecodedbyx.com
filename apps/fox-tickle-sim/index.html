<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Neon Fox Tickle Simulator</title>
  <link rel="icon" href="https://emojicdn.elk.sh/ü¶ä">
  <meta property="og:title" content="Neon Fox Tickle Simulator">
  <meta property="og:description" content="Tickle the neon fox and watch it lose its mind">
  <meta property="og:url" content="https://app.sloppy.live/fox-tickle-sim">
  <meta property="og:image" content="https://emojicdn.elk.sh/ü¶ä?style=apple&size=512">
  <link href="https://fonts.googleapis.com/css2?family=Bangers&family=Nunito:wght@700&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      min-height: 100vh;
      background: linear-gradient(135deg, #0a0a1a 0%, #1a0a2e 50%, #0a1a2e 100%);
      font-family: 'Nunito', sans-serif;
      overflow: hidden;
      user-select: none;
    }

    .container {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      padding: 20px;
    }

    h1 {
      font-family: 'Bangers', cursive;
      font-size: 3rem;
      color: #ff6b00;
      text-shadow: 0 0 20px #ff6b00, 0 0 40px #ff6b00, 0 0 60px #ff3300;
      letter-spacing: 4px;
      margin-bottom: 10px;
      animation: glow 2s ease-in-out infinite alternate;
    }

    @keyframes glow {
      from { text-shadow: 0 0 20px #ff6b00, 0 0 40px #ff6b00; }
      to { text-shadow: 0 0 30px #ff6b00, 0 0 60px #ff6b00, 0 0 80px #ff3300; }
    }

    .subtitle {
      color: #00ffff;
      font-size: 1rem;
      margin-bottom: 30px;
      text-shadow: 0 0 10px #00ffff;
    }

    .fox-container {
      position: relative;
      width: 350px;
      height: 400px;
      cursor: pointer;
    }

    .fox {
      position: relative;
      width: 100%;
      height: 100%;
      transition: transform 0.1s;
    }

    .fox.tickled {
      animation: vibrate 0.1s linear infinite;
    }

    .fox.manic {
      animation: manic-vibrate 0.05s linear infinite;
    }

    @keyframes vibrate {
      0%, 100% { transform: translateX(0) rotate(0deg); }
      25% { transform: translateX(-5px) rotate(-2deg); }
      75% { transform: translateX(5px) rotate(2deg); }
    }

    @keyframes manic-vibrate {
      0%, 100% { transform: translateX(0) rotate(0deg) scale(1); }
      20% { transform: translateX(-8px) rotate(-5deg) scale(1.02); }
      40% { transform: translateX(8px) rotate(5deg) scale(0.98); }
      60% { transform: translateX(-6px) rotate(-3deg) scale(1.01); }
      80% { transform: translateX(6px) rotate(3deg) scale(0.99); }
    }

    /* Fox Body Parts */
    .fox-body {
      position: absolute;
      bottom: 50px;
      left: 50%;
      transform: translateX(-50%);
      width: 180px;
      height: 140px;
      background: linear-gradient(180deg, #ff6b00 0%, #ff4500 100%);
      border-radius: 50% 50% 45% 45%;
      box-shadow: 0 0 30px #ff6b00, inset 0 -20px 40px rgba(0,0,0,0.3);
      border: 3px solid #ff8c00;
    }

    .fox-belly {
      position: absolute;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      width: 100px;
      height: 80px;
      background: linear-gradient(180deg, #ffe4b5 0%, #ffd39b 100%);
      border-radius: 50%;
      box-shadow: 0 0 20px rgba(255,228,181,0.5);
    }

    .fox-head {
      position: absolute;
      bottom: 160px;
      left: 50%;
      transform: translateX(-50%);
      width: 140px;
      height: 120px;
      background: linear-gradient(180deg, #ff6b00 0%, #ff5500 100%);
      border-radius: 50% 50% 45% 45%;
      box-shadow: 0 0 25px #ff6b00;
      border: 3px solid #ff8c00;
    }

    .fox-ear {
      position: absolute;
      width: 50px;
      height: 70px;
      background: linear-gradient(180deg, #ff6b00 0%, #ff4500 100%);
      border: 3px solid #ff8c00;
      box-shadow: 0 0 15px #ff6b00;
    }

    .fox-ear.left {
      bottom: 250px;
      left: 70px;
      border-radius: 50% 50% 20% 20%;
      transform: rotate(-15deg);
    }

    .fox-ear.right {
      bottom: 250px;
      right: 70px;
      border-radius: 50% 50% 20% 20%;
      transform: rotate(15deg);
    }

    .fox-ear-inner {
      position: absolute;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      width: 25px;
      height: 35px;
      background: linear-gradient(180deg, #ff69b4 0%, #ff1493 100%);
      border-radius: 50% 50% 30% 30%;
      box-shadow: 0 0 10px #ff69b4;
    }

    .fox-eye {
      position: absolute;
      width: 25px;
      height: 25px;
      background: #00ffff;
      border-radius: 50%;
      box-shadow: 0 0 15px #00ffff, 0 0 30px #00ffff;
      transition: all 0.2s;
    }

    .fox-eye.left {
      bottom: 200px;
      left: 115px;
    }

    .fox-eye.right {
      bottom: 200px;
      right: 115px;
    }

    .fox-eye-pupil {
      position: absolute;
      width: 12px;
      height: 12px;
      background: #000;
      border-radius: 50%;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }

    .fox.tickled .fox-eye,
    .fox.manic .fox-eye {
      height: 8px;
      border-radius: 20px 20px 50% 50%;
    }

    .fox-nose {
      position: absolute;
      bottom: 175px;
      left: 50%;
      transform: translateX(-50%);
      width: 20px;
      height: 15px;
      background: #1a1a1a;
      border-radius: 50% 50% 40% 40%;
      box-shadow: 0 0 10px rgba(0,0,0,0.5);
    }

    .fox-mouth {
      position: absolute;
      bottom: 160px;
      left: 50%;
      transform: translateX(-50%);
      width: 30px;
      height: 10px;
      border-bottom: 4px solid #1a1a1a;
      border-radius: 0 0 50% 50%;
      transition: all 0.2s;
    }

    .fox.tickled .fox-mouth,
    .fox.manic .fox-mouth {
      width: 60px;
      height: 30px;
      background: #ff1493;
      border: none;
      border-radius: 0 0 50% 50%;
      box-shadow: 0 0 20px #ff1493;
    }

    .fox-cheek {
      position: absolute;
      width: 30px;
      height: 20px;
      background: #ff69b4;
      border-radius: 50%;
      opacity: 0;
      transition: opacity 0.3s;
      box-shadow: 0 0 15px #ff69b4;
    }

    .fox-cheek.left {
      bottom: 185px;
      left: 90px;
    }

    .fox-cheek.right {
      bottom: 185px;
      right: 90px;
    }

    .fox.tickled .fox-cheek,
    .fox.manic .fox-cheek {
      opacity: 1;
    }

    .fox-tail {
      position: absolute;
      bottom: 30px;
      right: 20px;
      width: 120px;
      height: 60px;
      background: linear-gradient(90deg, #ff6b00 0%, #ff4500 70%, #ffe4b5 100%);
      border-radius: 60% 80% 80% 40%;
      transform: rotate(-20deg);
      transform-origin: left center;
      box-shadow: 0 0 20px #ff6b00;
      border: 3px solid #ff8c00;
      transition: transform 0.1s;
    }

    .fox.tickled .fox-tail {
      animation: wag 0.2s ease-in-out infinite;
    }

    .fox.manic .fox-tail {
      animation: crazy-wag 0.1s ease-in-out infinite;
    }

    @keyframes wag {
      0%, 100% { transform: rotate(-20deg); }
      50% { transform: rotate(-35deg); }
    }

    @keyframes crazy-wag {
      0%, 100% { transform: rotate(-10deg) scaleX(1.1); }
      50% { transform: rotate(-50deg) scaleX(0.9); }
    }

    /* Tickle zones */
    .tickle-zone {
      position: absolute;
      cursor: pointer;
      z-index: 10;
      opacity: 0;
      transition: opacity 0.3s;
    }

    .tickle-zone:hover {
      opacity: 0.3;
      background: radial-gradient(circle, #ff69b4 0%, transparent 70%);
    }

    .tickle-zone.belly {
      bottom: 70px;
      left: 50%;
      transform: translateX(-50%);
      width: 100px;
      height: 70px;
      border-radius: 50%;
    }

    .tickle-zone.chin {
      bottom: 155px;
      left: 50%;
      transform: translateX(-50%);
      width: 60px;
      height: 40px;
      border-radius: 50%;
    }

    .tickle-zone.ear-left {
      bottom: 250px;
      left: 70px;
      width: 50px;
      height: 50px;
      border-radius: 50%;
    }

    .tickle-zone.ear-right {
      bottom: 250px;
      right: 70px;
      width: 50px;
      height: 50px;
      border-radius: 50%;
    }

    .tickle-zone.paw-left {
      bottom: 40px;
      left: 60px;
      width: 50px;
      height: 40px;
      border-radius: 50%;
    }

    .tickle-zone.paw-right {
      bottom: 40px;
      right: 60px;
      width: 50px;
      height: 40px;
      border-radius: 50%;
    }

    /* Particles */
    .particle {
      position: absolute;
      pointer-events: none;
      font-size: 1.5rem;
      animation: float-up 1s ease-out forwards;
    }

    @keyframes float-up {
      0% { opacity: 1; transform: translateY(0) scale(1); }
      100% { opacity: 0; transform: translateY(-100px) scale(0.5) rotate(360deg); }
    }

    /* Stats */
    .stats {
      display: flex;
      gap: 30px;
      margin-top: 30px;
      color: #fff;
      font-size: 1rem;
    }

    .stat {
      text-align: center;
    }

    .stat-value {
      font-size: 2rem;
      color: #ff6b00;
      text-shadow: 0 0 10px #ff6b00;
      font-family: 'Bangers', cursive;
    }

    .stat-label {
      color: #888;
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    /* Laugh meter */
    .laugh-meter {
      width: 300px;
      height: 20px;
      background: #1a1a2e;
      border-radius: 10px;
      margin-top: 20px;
      overflow: hidden;
      border: 2px solid #333;
    }

    .laugh-fill {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, #00ff00, #ffff00, #ff6b00, #ff0000, #ff00ff);
      border-radius: 8px;
      transition: width 0.1s;
      box-shadow: 0 0 20px currentColor;
    }

    .laugh-label {
      color: #888;
      font-size: 0.8rem;
      margin-top: 8px;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .instructions {
      color: #666;
      font-size: 0.85rem;
      margin-top: 20px;
      text-align: center;
    }

    .back-link {
      position: fixed;
      bottom: 20px;
      right: 20px;
      color: #444;
      text-decoration: none;
      font-size: 0.8rem;
      transition: color 0.3s;
    }

    .back-link:hover {
      color: #ff6b00;
    }

    .sound-toggle {
      position: fixed;
      top: 20px;
      right: 20px;
      background: rgba(255,107,0,0.2);
      border: 1px solid #ff6b00;
      color: #ff6b00;
      padding: 8px 16px;
      border-radius: 20px;
      cursor: pointer;
      font-family: inherit;
      font-size: 0.8rem;
      transition: all 0.3s;
    }

    .sound-toggle:hover {
      background: rgba(255,107,0,0.3);
    }

    .screen-shake {
      animation: screen-shake 0.3s ease-in-out;
    }

    @keyframes screen-shake {
      0%, 100% { transform: translateX(0); }
      20% { transform: translateX(-10px); }
      40% { transform: translateX(10px); }
      60% { transform: translateX(-5px); }
      80% { transform: translateX(5px); }
    }

    @media (max-width: 500px) {
      h1 { font-size: 2rem; }
      .fox-container { transform: scale(0.8); }
    }
  </style>
</head>
<body>
  <div class="container" id="container">
    <h1>TICKLE THE FOX</h1>
    <p class="subtitle">Touch the glowing zones to tickle!</p>

    <div class="fox-container" id="fox-container">
      <div class="fox" id="fox">
        <!-- Ears -->
        <div class="fox-ear left"><div class="fox-ear-inner"></div></div>
        <div class="fox-ear right"><div class="fox-ear-inner"></div></div>

        <!-- Head -->
        <div class="fox-head"></div>
        <div class="fox-eye left"><div class="fox-eye-pupil"></div></div>
        <div class="fox-eye right"><div class="fox-eye-pupil"></div></div>
        <div class="fox-nose"></div>
        <div class="fox-mouth"></div>
        <div class="fox-cheek left"></div>
        <div class="fox-cheek right"></div>

        <!-- Body -->
        <div class="fox-body"></div>
        <div class="fox-belly"></div>

        <!-- Tail -->
        <div class="fox-tail"></div>

        <!-- Tickle Zones -->
        <div class="tickle-zone belly" data-zone="belly"></div>
        <div class="tickle-zone chin" data-zone="chin"></div>
        <div class="tickle-zone ear-left" data-zone="ear"></div>
        <div class="tickle-zone ear-right" data-zone="ear"></div>
        <div class="tickle-zone paw-left" data-zone="paw"></div>
        <div class="tickle-zone paw-right" data-zone="paw"></div>
      </div>
    </div>

    <div class="laugh-meter">
      <div class="laugh-fill" id="laugh-fill"></div>
    </div>
    <div class="laugh-label">Laugh Meter</div>

    <div class="stats">
      <div class="stat">
        <div class="stat-value" id="tickle-count">0</div>
        <div class="stat-label">Tickles</div>
      </div>
      <div class="stat">
        <div class="stat-value" id="laugh-level">Calm</div>
        <div class="stat-label">Fox Mood</div>
      </div>
      <div class="stat">
        <div class="stat-value" id="combo">0x</div>
        <div class="stat-label">Combo</div>
      </div>
    </div>

    <p class="instructions">Tickle the belly, chin, ears, or paws!</p>
  </div>

  <button class="sound-toggle" id="sound-toggle">üîä Sound ON</button>
  <a href="https://sloppy.live" class="back-link">‚Üê sloppy.live</a>

  <script>
    // Audio context
    let audioCtx = null;
    let soundEnabled = true;

    function initAudio() {
      if (!audioCtx) {
        audioCtx = new (window.AudioContext || window.webkitAudioContext)();
      }
    }

    // Generate laughter sound
    function playLaugh(intensity = 1) {
      if (!soundEnabled || !audioCtx) return;

      const now = audioCtx.currentTime;
      const laughCount = Math.floor(2 + intensity * 4);

      for (let i = 0; i < laughCount; i++) {
        const osc = audioCtx.createOscillator();
        const gain = audioCtx.createGain();
        const filter = audioCtx.createBiquadFilter();

        // Random pitch for "ha ha ha" effect
        const baseFreq = 300 + Math.random() * 200 + intensity * 100;
        osc.frequency.setValueAtTime(baseFreq, now + i * 0.1);
        osc.frequency.exponentialRampToValueAtTime(baseFreq * 0.7, now + i * 0.1 + 0.08);

        osc.type = 'sawtooth';

        filter.type = 'bandpass';
        filter.frequency.value = 1000 + intensity * 500;
        filter.Q.value = 2;

        gain.gain.setValueAtTime(0, now + i * 0.1);
        gain.gain.linearRampToValueAtTime(0.15 * intensity, now + i * 0.1 + 0.02);
        gain.gain.exponentialRampToValueAtTime(0.01, now + i * 0.1 + 0.1);

        osc.connect(filter);
        filter.connect(gain);
        gain.connect(audioCtx.destination);

        osc.start(now + i * 0.1);
        osc.stop(now + i * 0.1 + 0.12);
      }

      // Add some squeaky overtones for manic laughter
      if (intensity > 0.7) {
        for (let i = 0; i < 3; i++) {
          const squeak = audioCtx.createOscillator();
          const squeakGain = audioCtx.createGain();

          squeak.frequency.setValueAtTime(800 + Math.random() * 400, now + i * 0.15);
          squeak.frequency.exponentialRampToValueAtTime(1200, now + i * 0.15 + 0.05);
          squeak.type = 'sine';

          squeakGain.gain.setValueAtTime(0.05 * intensity, now + i * 0.15);
          squeakGain.gain.exponentialRampToValueAtTime(0.001, now + i * 0.15 + 0.1);

          squeak.connect(squeakGain);
          squeakGain.connect(audioCtx.destination);

          squeak.start(now + i * 0.15);
          squeak.stop(now + i * 0.15 + 0.12);
        }
      }
    }

    // Game state
    let tickleCount = 0;
    let laughMeter = 0;
    let combo = 0;
    let lastTickleTime = 0;
    let isTickling = false;

    // DOM elements
    const fox = document.getElementById('fox');
    const foxContainer = document.getElementById('fox-container');
    const container = document.getElementById('container');
    const laughFill = document.getElementById('laugh-fill');
    const tickleCountEl = document.getElementById('tickle-count');
    const laughLevelEl = document.getElementById('laugh-level');
    const comboEl = document.getElementById('combo');
    const soundToggle = document.getElementById('sound-toggle');
    const tickleZones = document.querySelectorAll('.tickle-zone');

    const particles = ['üòÇ', 'ü§£', '‚ú®', 'üí´', '‚ö°', 'üíñ', 'ü¶ä', 'HA', 'HE'];
    const moods = [
      { threshold: 0, label: 'Calm', color: '#00ff00' },
      { threshold: 20, label: 'Giggly', color: '#88ff00' },
      { threshold: 40, label: 'Laughing', color: '#ffff00' },
      { threshold: 60, label: 'Hysterical', color: '#ff8800' },
      { threshold: 80, label: 'MANIC', color: '#ff0000' },
      { threshold: 95, label: 'ü§Ø CHAOS', color: '#ff00ff' }
    ];

    function spawnParticle(x, y) {
      const particle = document.createElement('div');
      particle.className = 'particle';
      particle.textContent = particles[Math.floor(Math.random() * particles.length)];
      particle.style.left = x + 'px';
      particle.style.top = y + 'px';
      foxContainer.appendChild(particle);

      setTimeout(() => particle.remove(), 1000);
    }

    function updateMood() {
      let currentMood = moods[0];
      for (const mood of moods) {
        if (laughMeter >= mood.threshold) {
          currentMood = mood;
        }
      }
      laughLevelEl.textContent = currentMood.label;
      laughLevelEl.style.color = currentMood.color;
      laughFill.style.width = Math.min(100, laughMeter) + '%';

      // Update fox state
      fox.classList.remove('tickled', 'manic');
      if (laughMeter >= 80) {
        fox.classList.add('manic');
      } else if (laughMeter > 20) {
        fox.classList.add('tickled');
      }
    }

    function triggerTickle(zone, event) {
      initAudio();

      const now = Date.now();
      const timeSinceLastTickle = now - lastTickleTime;

      // Combo system
      if (timeSinceLastTickle < 500) {
        combo++;
      } else {
        combo = 1;
      }
      lastTickleTime = now;

      // Update stats
      tickleCount++;
      tickleCountEl.textContent = tickleCount;
      comboEl.textContent = combo + 'x';

      // Increase laugh meter based on zone and combo
      const zoneMultiplier = zone === 'belly' ? 3 : zone === 'chin' ? 2 : 1.5;
      laughMeter = Math.min(100, laughMeter + (2 * zoneMultiplier * Math.min(combo, 5)));

      updateMood();

      // Spawn particles
      const rect = foxContainer.getBoundingClientRect();
      const x = event.clientX - rect.left;
      const y = event.clientY - rect.top;

      for (let i = 0; i < Math.min(combo, 5); i++) {
        setTimeout(() => {
          spawnParticle(
            x + (Math.random() - 0.5) * 50,
            y + (Math.random() - 0.5) * 50
          );
        }, i * 50);
      }

      // Play laugh sound
      const intensity = laughMeter / 100;
      playLaugh(intensity);

      // Screen shake at high intensity
      if (laughMeter >= 80) {
        container.classList.add('screen-shake');
        setTimeout(() => container.classList.remove('screen-shake'), 300);

        // Vibration API if available
        if (navigator.vibrate) {
          navigator.vibrate([50, 30, 50]);
        }
      }
    }

    // Decay laugh meter over time
    setInterval(() => {
      if (laughMeter > 0 && !isTickling) {
        laughMeter = Math.max(0, laughMeter - 0.5);
        updateMood();
      }
    }, 100);

    // Event listeners for tickle zones
    tickleZones.forEach(zone => {
      const handleTickle = (e) => {
        e.preventDefault();
        const zoneType = zone.dataset.zone;
        triggerTickle(zoneType, e.touches ? e.touches[0] : e);
      };

      zone.addEventListener('mousedown', (e) => {
        isTickling = true;
        handleTickle(e);
      });

      zone.addEventListener('mousemove', (e) => {
        if (isTickling) handleTickle(e);
      });

      zone.addEventListener('touchstart', (e) => {
        isTickling = true;
        handleTickle(e);
      });

      zone.addEventListener('touchmove', (e) => {
        if (isTickling) handleTickle(e);
      });
    });

    document.addEventListener('mouseup', () => isTickling = false);
    document.addEventListener('touchend', () => isTickling = false);

    // Sound toggle
    soundToggle.addEventListener('click', () => {
      initAudio();
      soundEnabled = !soundEnabled;
      soundToggle.textContent = soundEnabled ? 'üîä Sound ON' : 'üîá Sound OFF';
    });

    // Initialize
    updateMood();
  </script>
<script src="/apps/sloppy-header/sloppy-bar.js"></script>
<script src="/vibelib-extended.js"></script>
<script>
  // Compatibility Patch for Legacy Apps
  window.addEventListener("load", () => {
    if (window.SloppyKarma && window.VibeLib.Economy) {
      // Redirect old calls to new engine
      window.SloppyKarma.track = window.VibeLib.Economy.track;
    }
  });
</script>
</body>
</html>
