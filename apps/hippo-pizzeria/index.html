<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>Happy Hippo's Pizza Palace - 1987</title>
  <link rel="icon" href="https://emojicdn.elk.sh/ü¶õ">
  <meta name="description" content="Welcome to Happy Hippo's Pizza Palace! Est. 1987">
  <meta property="og:title" content="Happy Hippo's Pizza Palace - 1987">
  <meta property="og:description" content="Welcome to Happy Hippo's Pizza Palace! Est. 1987">
  <meta property="og:image" content="https://emojicdn.elk.sh/ü¶õ?style=google">
  <meta property="og:url" content="https://sloppy.live/hippo-pizzeria">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Righteous&display=swap');
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      background: #1a0a2e;
      min-height: 100vh;
      font-family: 'Righteous', cursive;
      overflow: hidden;
    }
    #gameCanvas { display: block; margin: 0 auto; }
    .vhs-overlay {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      pointer-events: none;
      z-index: 100;
      background: repeating-linear-gradient(0deg, rgba(0,0,0,0.1) 0px, rgba(0,0,0,0.1) 1px, transparent 1px, transparent 2px);
    }
    .vhs-overlay::after {
      content: '';
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      background: radial-gradient(ellipse at center, transparent 50%, rgba(0,0,0,0.4) 100%);
    }
    .header { position: fixed; top: 10px; width: 100%; text-align: center; z-index: 50; }
    h1 {
      font-family: 'Righteous', cursive;
      font-size: 1.8rem;
      color: #ff66aa;
      text-shadow: 3px 3px 0 #6622aa, 0 0 20px #ff66aa;
    }
    .subtitle { font-family: 'Press Start 2P', cursive; font-size: 0.6rem; color: #ffcc00; margin-top: 5px; }
    .ui { position: fixed; top: 80px; width: 100%; display: flex; justify-content: center; gap: 30px; z-index: 50; }
    .stat { font-family: 'Press Start 2P', cursive; font-size: 0.7rem; color: #00ffaa; text-shadow: 0 0 10px #00ffaa; }
    .back-link { position: fixed; top: 15px; left: 15px; color: #ff66aa; text-decoration: none; font-size: 0.8rem; z-index: 101; }
    .instructions { position: fixed; bottom: 15px; width: 100%; text-align: center; font-family: 'Press Start 2P', cursive; font-size: 0.5rem; color: #ffcc00; z-index: 50; opacity: 0.8; }
    .rec { position: fixed; top: 15px; right: 15px; font-family: 'Press Start 2P', cursive; font-size: 0.6rem; color: #ff0000; z-index: 101; animation: blink 1s infinite; }
    @keyframes blink { 0%, 50% { opacity: 1; } 51%, 100% { opacity: 0; } }
    .date-stamp { position: fixed; bottom: 15px; right: 15px; font-family: 'Press Start 2P', cursive; font-size: 0.5rem; color: #ffcc00; z-index: 101; }
  </style>
</head>
<body>
  <div class="vhs-overlay"></div>
  <a href="https://sloppy.live" class="back-link">‚Üê EXIT</a>
  <div class="rec">‚óè REC</div>
  <div class="date-stamp">JUN 26 1987</div>
  <div class="header">
    <h1>ü¶õ HAPPY HIPPO'S PIZZA PALACE üçï</h1>
    <div class="subtitle">‚òÖ WHERE A KID CAN BE A KID ‚òÖ EST. 1987</div>
  </div>
  <div class="ui">
    <div class="stat">HAPPY KIDS: <span id="score">0</span></div>
    <div class="stat">FARTS: <span id="farts">0</span>üí®</div>
    <div class="stat">CHAOS: <span id="chaos">0</span>%</div>
  </div>
  <canvas id="gameCanvas"></canvas>
  <div class="instructions">CLICK TO FART ‚Ä¢ MOVE MOUSE TO WADDLE</div>
  <script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    function resize() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
    resize();
    window.addEventListener('resize', resize);
    let audioCtx;
    function initAudio() { if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)(); }
    function playFart() {
      if (!audioCtx) return;
      const osc = audioCtx.createOscillator();
      const gain = audioCtx.createGain();
      const filter = audioCtx.createBiquadFilter();
      osc.connect(filter); filter.connect(gain); gain.connect(audioCtx.destination);
      osc.type = 'sawtooth';
      filter.type = 'lowpass';
      filter.frequency.value = 150 + Math.random() * 100;
      const duration = 0.3 + Math.random() * 0.4;
      osc.frequency.setValueAtTime(80 + Math.random() * 40, audioCtx.currentTime);
      osc.frequency.exponentialRampToValueAtTime(40, audioCtx.currentTime + duration);
      gain.gain.setValueAtTime(0.4, audioCtx.currentTime);
      gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + duration);
      osc.start(); osc.stop(audioCtx.currentTime + duration);
    }
    function playLaugh() {
      if (!audioCtx) return;
      for (let i = 0; i < 3; i++) {
        setTimeout(() => {
          const osc = audioCtx.createOscillator();
          const gain = audioCtx.createGain();
          osc.connect(gain); gain.connect(audioCtx.destination);
          osc.type = 'sine';
          osc.frequency.setValueAtTime(400 + i * 100, audioCtx.currentTime);
          gain.gain.setValueAtTime(0.1, audioCtx.currentTime);
          gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.1);
          osc.start(); osc.stop(audioCtx.currentTime + 0.1);
        }, i * 80);
      }
    }
    function playOink() {
      if (!audioCtx) return;
      const osc = audioCtx.createOscillator();
      const gain = audioCtx.createGain();
      osc.connect(gain); gain.connect(audioCtx.destination);
      osc.type = 'square';
      osc.frequency.setValueAtTime(200, audioCtx.currentTime);
      osc.frequency.exponentialRampToValueAtTime(150, audioCtx.currentTime + 0.1);
      osc.frequency.setValueAtTime(250, audioCtx.currentTime + 0.1);
      osc.frequency.exponentialRampToValueAtTime(180, audioCtx.currentTime + 0.2);
      gain.gain.setValueAtTime(0.15, audioCtx.currentTime);
      gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.2);
      osc.start(); osc.stop(audioCtx.currentTime + 0.2);
    }
    function playSplat() {
      if (!audioCtx) return;
      const osc = audioCtx.createOscillator();
      const gain = audioCtx.createGain();
      osc.connect(gain); gain.connect(audioCtx.destination);
      osc.type = 'triangle';
      osc.frequency.setValueAtTime(100, audioCtx.currentTime);
      osc.frequency.exponentialRampToValueAtTime(50, audioCtx.currentTime + 0.15);
      gain.gain.setValueAtTime(0.2, audioCtx.currentTime);
      gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.15);
      osc.start(); osc.stop(audioCtx.currentTime + 0.15);
    }
    let score = 0, fartCount = 0, chaos = 0, mouseX = 400, mouseY = 300, frameCount = 0;
    const hippo = { x: 400, y: 300, mouthOpen: 0, wobble: 0, isFarting: false, fartTimer: 0 };
    const kids = [], fartClouds = [], balloons = [], pigs = [], messes = [];
    function init() {
      for (let i = 0; i < 8; i++) {
        kids.push({
          x: 100 + (i % 4) * (canvas.width - 200) / 3,
          y: canvas.height * 0.7 + Math.floor(i / 4) * 80,
          happy: 50, laughTimer: 0, sadTimer: 0,
          color: ['#ff6699', '#66ccff', '#ffcc66', '#99ff66', '#ff9966', '#cc99ff'][i % 6],
          hatColor: ['#ff0066', '#0066ff', '#ffaa00', '#00ff66', '#ff6600', '#9900ff'][i % 6]
        });
      }
      for (let i = 0; i < 12; i++) {
        balloons.push({
          x: Math.random() * canvas.width,
          y: canvas.height * 0.15 + Math.random() * canvas.height * 0.25,
          color: ['#ff0066', '#00ffaa', '#ffcc00', '#ff6600', '#aa00ff', '#00aaff'][i % 6],
          wobble: Math.random() * Math.PI * 2,
          size: 20 + Math.random() * 15
        });
      }
    }
    class FartCloud {
      constructor(x, y) { this.x = x; this.y = y; this.size = 30; this.maxSize = 100; this.life = 120; this.wobble = 0; }
      update() { this.life--; this.size = Math.min(this.size + 2, this.maxSize); this.y -= 1; this.wobble += 0.1; return this.life > 0; }
      draw() {
        const alpha = this.life / 120;
        ctx.save(); ctx.translate(this.x, this.y);
        const gradient = ctx.createRadialGradient(0, 0, 0, 0, 0, this.size);
        gradient.addColorStop(0, 'rgba(100, 255, 100, ' + (alpha * 0.6) + ')');
        gradient.addColorStop(1, 'rgba(100, 200, 100, 0)');
        ctx.fillStyle = gradient;
        for (let i = 0; i < 5; i++) {
          const angle = (i / 5) * Math.PI * 2 + this.wobble;
          ctx.beginPath();
          ctx.arc(Math.cos(angle) * this.size * 0.3, Math.sin(angle) * this.size * 0.3, this.size * 0.5, 0, Math.PI * 2);
          ctx.fill();
        }
        ctx.restore();
      }
    }
    class PartyPooperPig {
      constructor() {
        this.x = Math.random() < 0.5 ? -50 : canvas.width + 50;
        this.y = canvas.height * 0.6 + Math.random() * canvas.height * 0.25;
        this.vx = this.x < 0 ? 2 : -2;
        this.vy = 0;
        this.wobble = Math.random() * Math.PI * 2;
        this.dropTimer = 60 + Math.random() * 60;
        this.oinkTimer = 30;
      }
      update() {
        this.wobble += 0.15;
        this.x += this.vx + Math.sin(this.wobble * 0.5) * 0.5;
        this.y += Math.sin(this.wobble) * 0.8;
        this.dropTimer--;
        this.oinkTimer--;
        if (this.oinkTimer <= 0) { playOink(); this.oinkTimer = 90 + Math.random() * 60; }
        if (this.dropTimer <= 0) {
          messes.push(new PigMess(this.x, this.y + 30));
          playSplat();
          this.dropTimer = 80 + Math.random() * 40;
        }
        return this.x > -100 && this.x < canvas.width + 100;
      }
      draw() {
        ctx.save();
        ctx.translate(this.x, this.y);
        ctx.scale(this.vx > 0 ? 1 : -1, 1);
        ctx.rotate(Math.sin(this.wobble) * 0.1);
        ctx.shadowColor = '#ff88aa'; ctx.shadowBlur = 15;
        ctx.fillStyle = '#ff99aa';
        ctx.beginPath(); ctx.ellipse(0, 0, 35, 28, 0, 0, Math.PI * 2); ctx.fill();
        ctx.fillStyle = '#ffaabb';
        ctx.beginPath(); ctx.ellipse(0, 5, 25, 18, 0, 0, Math.PI * 2); ctx.fill();
        ctx.fillStyle = '#ff99aa';
        ctx.beginPath(); ctx.ellipse(25, -5, 18, 15, 0.2, 0, Math.PI * 2); ctx.fill();
        ctx.fillStyle = '#ffbbcc';
        ctx.beginPath(); ctx.ellipse(32, -5, 12, 10, 0, 0, Math.PI * 2); ctx.fill();
        ctx.fillStyle = '#aa4466';
        ctx.beginPath(); ctx.ellipse(30, -8, 3, 4, 0, 0, Math.PI * 2); ctx.fill();
        ctx.beginPath(); ctx.ellipse(36, -8, 3, 4, 0, 0, Math.PI * 2); ctx.fill();
        ctx.fillStyle = '#222';
        ctx.beginPath(); ctx.arc(20, -12, 4, 0, Math.PI * 2); ctx.fill();
        ctx.fillStyle = '#fff';
        ctx.beginPath(); ctx.arc(19, -13, 1.5, 0, Math.PI * 2); ctx.fill();
        ctx.strokeStyle = '#222'; ctx.lineWidth = 2;
        ctx.beginPath(); ctx.arc(28, 2, 5, 0.3, Math.PI - 0.3); ctx.stroke();
        ctx.fillStyle = '#ff88aa';
        ctx.beginPath(); ctx.moveTo(-10, -18); ctx.lineTo(-5, -30); ctx.lineTo(0, -18); ctx.closePath(); ctx.fill();
        ctx.beginPath(); ctx.moveTo(8, -18); ctx.lineTo(13, -30); ctx.lineTo(18, -18); ctx.closePath(); ctx.fill();
        ctx.fillStyle = '#aa6688';
        ctx.beginPath();
        const tailWag = Math.sin(this.wobble * 2) * 0.5;
        ctx.save(); ctx.translate(-35, 0); ctx.rotate(tailWag);
        ctx.beginPath();
        ctx.moveTo(0, 0);
        for (let i = 0; i < 10; i++) { ctx.lineTo(-3 - i * 1.5, Math.sin(i * 0.8) * 5); }
        ctx.lineWidth = 4; ctx.strokeStyle = '#ff99aa'; ctx.stroke();
        ctx.restore();
        ctx.fillStyle = '#ff88aa';
        ctx.beginPath(); ctx.ellipse(-15, 25, 8, 6, -0.3, 0, Math.PI * 2); ctx.fill();
        ctx.beginPath(); ctx.ellipse(15, 25, 8, 6, 0.3, 0, Math.PI * 2); ctx.fill();
        ctx.fillStyle = '#331111'; ctx.font = 'bold 10px Press Start 2P'; ctx.textAlign = 'center';
        ctx.fillText('PARTY', 0, -35); ctx.fillText('POOPER', 0, -25);
        ctx.shadowBlur = 0;
        ctx.restore();
      }
    }
    class PigMess {
      constructor(x, y) {
        this.x = x; this.y = y;
        this.size = 20 + Math.random() * 15;
        this.life = 300;
        this.wobble = Math.random() * Math.PI * 2;
        this.hasHitKid = false;
      }
      update() {
        this.life--;
        this.wobble += 0.05;
        return this.life > 0;
      }
      draw() {
        const alpha = Math.min(1, this.life / 60);
        ctx.save();
        ctx.translate(this.x, this.y);
        ctx.fillStyle = 'rgba(80, 50, 30, ' + alpha + ')';
        ctx.shadowColor = '#553322'; ctx.shadowBlur = 5;
        ctx.beginPath();
        for (let i = 0; i < 6; i++) {
          const angle = (i / 6) * Math.PI * 2 + this.wobble * 0.2;
          const dist = this.size * (0.6 + Math.sin(angle * 3) * 0.2);
          if (i === 0) ctx.moveTo(Math.cos(angle) * dist, Math.sin(angle) * dist * 0.4);
          else ctx.lineTo(Math.cos(angle) * dist, Math.sin(angle) * dist * 0.4);
        }
        ctx.closePath(); ctx.fill();
        ctx.fillStyle = 'rgba(60, 35, 20, ' + (alpha * 0.7) + ')';
        ctx.beginPath(); ctx.ellipse(5, 2, this.size * 0.3, this.size * 0.15, 0.3, 0, Math.PI * 2); ctx.fill();
        if (this.life > 240) {
          ctx.fillStyle = 'rgba(100, 70, 40, ' + ((this.life - 240) / 60) + ')';
          ctx.font = 'bold 14px Righteous'; ctx.textAlign = 'center';
          ctx.fillText('EWWW!', 0, -20);
        }
        ctx.shadowBlur = 0;
        ctx.restore();
      }
    }
    function drawFloor() {
      const tileSize = 40;
      for (let y = canvas.height * 0.55; y < canvas.height; y += tileSize) {
        for (let x = 0; x < canvas.width; x += tileSize) {
          ctx.fillStyle = ((x / tileSize) + (y / tileSize)) % 2 === 0 ? '#2a1a4a' : '#1a0a2e';
          ctx.fillRect(x, y, tileSize, tileSize);
        }
      }
    }
    function drawStage() {
      ctx.fillStyle = '#4a2a6a';
      ctx.fillRect(canvas.width * 0.3, canvas.height * 0.35, canvas.width * 0.4, canvas.height * 0.22);
      ctx.fillStyle = '#aa0044';
      ctx.fillRect(canvas.width * 0.25, canvas.height * 0.1, 40, canvas.height * 0.48);
      ctx.fillRect(canvas.width * 0.75 - 40, canvas.height * 0.1, 40, canvas.height * 0.48);
      ctx.fillStyle = '#cc0055';
      ctx.fillRect(canvas.width * 0.2, canvas.height * 0.08, canvas.width * 0.6, 30);
      for (let i = 0; i < 5; i++) {
        const hue = (frameCount * 2 + i * 60) % 360;
        ctx.fillStyle = 'hsl(' + hue + ', 100%, 60%)';
        ctx.shadowColor = 'hsl(' + hue + ', 100%, 60%)';
        ctx.shadowBlur = 30;
        ctx.beginPath();
        ctx.arc(canvas.width * 0.3 + i * (canvas.width * 0.4 / 4), canvas.height * 0.12, 10, 0, Math.PI * 2);
        ctx.fill();
      }
      ctx.shadowBlur = 0;
      ctx.fillStyle = '#ffcc00';
      ctx.font = 'bold 24px Righteous';
      ctx.textAlign = 'center';
      ctx.fillText('‚òÖ HAPPY BIRTHDAY ‚òÖ', canvas.width / 2, canvas.height * 0.18);
    }
    function drawHippo() {
      ctx.save();
      ctx.translate(hippo.x, hippo.y);
      ctx.rotate(Math.sin(hippo.wobble) * 0.05);
      ctx.shadowColor = '#aa66cc'; ctx.shadowBlur = 20;
      ctx.fillStyle = '#8844aa';
      ctx.beginPath(); ctx.ellipse(0, 20, 55, 45, 0, 0, Math.PI * 2); ctx.fill();
      ctx.fillStyle = '#aa66cc';
      ctx.beginPath(); ctx.ellipse(0, 30, 40, 30, 0, 0, Math.PI * 2); ctx.fill();
      ctx.fillStyle = '#8844aa';
      ctx.beginPath(); ctx.ellipse(0, -30, 45, 40, 0, 0, Math.PI * 2); ctx.fill();
      ctx.fillStyle = '#9955bb';
      ctx.beginPath(); ctx.ellipse(0, -10, 35, 25, 0, 0, Math.PI * 2); ctx.fill();
      ctx.fillStyle = '#331144';
      ctx.beginPath(); ctx.ellipse(-12, -15, 6, 8, 0.3, 0, Math.PI * 2); ctx.fill();
      ctx.beginPath(); ctx.ellipse(12, -15, 6, 8, -0.3, 0, Math.PI * 2); ctx.fill();
      ctx.fillStyle = '#fff';
      ctx.beginPath(); ctx.ellipse(-20, -45, 15, 18, 0, 0, Math.PI * 2); ctx.fill();
      ctx.beginPath(); ctx.ellipse(20, -45, 15, 18, 0, 0, Math.PI * 2); ctx.fill();
      ctx.fillStyle = '#000';
      const po = Math.sin(frameCount * 0.05) * 3;
      ctx.beginPath(); ctx.arc(-20 + po, -45, 8, 0, Math.PI * 2); ctx.fill();
      ctx.beginPath(); ctx.arc(20 + po, -45, 8, 0, Math.PI * 2); ctx.fill();
      ctx.fillStyle = '#fff';
      ctx.beginPath(); ctx.arc(-23 + po, -48, 3, 0, Math.PI * 2); ctx.fill();
      ctx.beginPath(); ctx.arc(17 + po, -48, 3, 0, Math.PI * 2); ctx.fill();
      ctx.fillStyle = '#7733aa';
      ctx.beginPath(); ctx.ellipse(-40, -55, 12, 15, -0.3, 0, Math.PI * 2); ctx.fill();
      ctx.beginPath(); ctx.ellipse(40, -55, 12, 15, 0.3, 0, Math.PI * 2); ctx.fill();
      ctx.fillStyle = '#ff88cc';
      ctx.beginPath(); ctx.ellipse(-40, -55, 7, 10, -0.3, 0, Math.PI * 2); ctx.fill();
      ctx.beginPath(); ctx.ellipse(40, -55, 7, 10, 0.3, 0, Math.PI * 2); ctx.fill();
      const mouthOpen = hippo.mouthOpen * 15;
      ctx.fillStyle = '#440022';
      ctx.beginPath(); ctx.ellipse(0, 5 + mouthOpen/2, 25, 8 + mouthOpen, 0, 0, Math.PI * 2); ctx.fill();
      if (mouthOpen > 5) { ctx.fillStyle = '#fff'; ctx.fillRect(-18, -2, 8, 10); ctx.fillRect(-6, -2, 8, 10); ctx.fillRect(6, -2, 8, 10); }
      ctx.fillStyle = '#ff0066';
      ctx.beginPath(); ctx.moveTo(0, -90); ctx.lineTo(-20, -55); ctx.lineTo(20, -55); ctx.closePath(); ctx.fill();
      ctx.fillStyle = '#ffcc00';
      ctx.beginPath(); ctx.arc(0, -92, 8, 0, Math.PI * 2); ctx.fill();
      ctx.fillStyle = '#00ffaa';
      ctx.beginPath(); ctx.moveTo(0, 55); ctx.lineTo(-20, 45); ctx.lineTo(-20, 65); ctx.closePath(); ctx.fill();
      ctx.beginPath(); ctx.moveTo(0, 55); ctx.lineTo(20, 45); ctx.lineTo(20, 65); ctx.closePath(); ctx.fill();
      if (hippo.isFarting) {
        ctx.fillStyle = 'rgba(100, 255, 100, 0.5)';
        for (let i = 0; i < 3; i++) { ctx.beginPath(); ctx.arc(-20 - i * 15, 70 + i * 10, 10 + i * 8, 0, Math.PI * 2); ctx.fill(); }
      }
      ctx.shadowBlur = 0;
      ctx.restore();
    }
    function drawKid(kid) {
      ctx.save(); ctx.translate(kid.x, kid.y);
      ctx.fillStyle = kid.color;
      ctx.fillRect(-12, 0, 24, 30);
      ctx.fillStyle = '#ffcc99';
      ctx.beginPath(); ctx.arc(0, -10, 15, 0, Math.PI * 2); ctx.fill();
      ctx.fillStyle = kid.hatColor;
      ctx.beginPath(); ctx.moveTo(0, -35); ctx.lineTo(-12, -15); ctx.lineTo(12, -15); ctx.closePath(); ctx.fill();
      ctx.fillStyle = '#000';
      if (kid.sadTimer > 0) {
        // Sad face from pig mess
        ctx.beginPath(); ctx.arc(-5, -12, 3, 0, Math.PI * 2); ctx.fill();
        ctx.beginPath(); ctx.arc(5, -12, 3, 0, Math.PI * 2); ctx.fill();
        // Tears
        ctx.fillStyle = '#66ccff';
        ctx.beginPath(); ctx.ellipse(-8, -6, 2, 4, 0, 0, Math.PI * 2); ctx.fill();
        ctx.beginPath(); ctx.ellipse(8, -6, 2, 4, 0, 0, Math.PI * 2); ctx.fill();
        // Sad mouth
        ctx.strokeStyle = '#000'; ctx.lineWidth = 2;
        ctx.beginPath(); ctx.arc(0, 2, 6, Math.PI + 0.3, -0.3); ctx.stroke();
        ctx.fillStyle = '#ff4444'; ctx.font = 'bold 12px Righteous'; ctx.textAlign = 'center';
        ctx.fillText('GROSS!', 0, -45);
      } else if (kid.laughTimer > 0) {
        ctx.strokeStyle = '#000'; ctx.lineWidth = 2;
        ctx.beginPath(); ctx.arc(-5, -12, 4, 0, Math.PI); ctx.stroke();
        ctx.beginPath(); ctx.arc(5, -12, 4, 0, Math.PI); ctx.stroke();
        ctx.beginPath(); ctx.arc(0, -3, 8, 0, Math.PI); ctx.stroke();
        ctx.fillStyle = '#ffcc00'; ctx.font = 'bold 12px Righteous'; ctx.textAlign = 'center'; ctx.fillText('HA HA!', 0, -45);
      } else {
        ctx.beginPath(); ctx.arc(-5, -12, 3, 0, Math.PI * 2); ctx.fill();
        ctx.beginPath(); ctx.arc(5, -12, 3, 0, Math.PI * 2); ctx.fill();
        ctx.strokeStyle = '#000'; ctx.lineWidth = 2;
        ctx.beginPath(); ctx.arc(0, -5, 6, 0.2, Math.PI - 0.2); ctx.stroke();
      }
      ctx.restore();
    }
    function drawBalloons() {
      balloons.forEach(b => {
        b.wobble += 0.03;
        const wx = Math.sin(b.wobble) * 5;
        ctx.strokeStyle = '#666';
        ctx.beginPath(); ctx.moveTo(b.x + wx, b.y + b.size); ctx.lineTo(b.x - wx, b.y + b.size + 50); ctx.stroke();
        ctx.fillStyle = b.color; ctx.shadowColor = b.color; ctx.shadowBlur = 15;
        ctx.beginPath(); ctx.ellipse(b.x + wx, b.y, b.size * 0.8, b.size, 0, 0, Math.PI * 2); ctx.fill();
        ctx.fillStyle = 'rgba(255,255,255,0.4)';
        ctx.beginPath(); ctx.ellipse(b.x + wx - b.size * 0.3, b.y - b.size * 0.3, b.size * 0.2, b.size * 0.3, -0.5, 0, Math.PI * 2); ctx.fill();
      });
      ctx.shadowBlur = 0;
    }
    function drawTables() {
      for (let i = 0; i < 4; i++) {
        const tx = 100 + i * (canvas.width - 200) / 3;
        ctx.fillStyle = '#553322';
        ctx.fillRect(tx - 40, canvas.height * 0.75, 80, 10);
        ctx.fillRect(tx - 5, canvas.height * 0.76, 10, 40);
        ctx.fillStyle = '#ffcc44';
        ctx.beginPath(); ctx.arc(tx, canvas.height * 0.745, 25, 0, Math.PI * 2); ctx.fill();
        ctx.fillStyle = '#ff4444';
        for (let p = 0; p < 6; p++) { ctx.beginPath(); ctx.arc(tx + Math.cos(p) * 12, canvas.height * 0.745 + Math.sin(p) * 12, 5, 0, Math.PI * 2); ctx.fill(); }
      }
    }
    function update() {
      frameCount++;
      hippo.x += (mouseX - hippo.x) * 0.05;
      hippo.y += (Math.min(mouseY, canvas.height * 0.5) - hippo.y) * 0.05;
      hippo.wobble += 0.1;
      if (hippo.isFarting) { hippo.fartTimer++; hippo.mouthOpen = Math.max(0, hippo.mouthOpen - 0.1); if (hippo.fartTimer > 20) { hippo.isFarting = false; hippo.fartTimer = 0; } }
      for (let i = fartClouds.length - 1; i >= 0; i--) { if (!fartClouds[i].update()) fartClouds.splice(i, 1); }
      // Spawn party pooper pigs
      if (frameCount % 300 === 0 && pigs.length < 3) { pigs.push(new PartyPooperPig()); }
      // Update pigs
      for (let i = pigs.length - 1; i >= 0; i--) { if (!pigs[i].update()) pigs.splice(i, 1); }
      // Update messes
      for (let i = messes.length - 1; i >= 0; i--) { if (!messes[i].update()) messes.splice(i, 1); }
      kids.forEach(kid => {
        if (kid.laughTimer > 0) kid.laughTimer--;
        if (kid.sadTimer > 0) kid.sadTimer--;
        fartClouds.forEach(cloud => {
          const dist = Math.sqrt(Math.pow(kid.x - cloud.x, 2) + Math.pow(kid.y - cloud.y, 2));
          if (dist < cloud.size + 50 && kid.laughTimer === 0) { kid.laughTimer = 60; kid.happy = Math.min(100, kid.happy + 20); score += 10; playLaugh(); }
        });
        // Check if mess near kid - lower score!
        messes.forEach(mess => {
          const dist = Math.sqrt(Math.pow(kid.x - mess.x, 2) + Math.pow(kid.y - mess.y, 2));
          if (dist < mess.size + 40 && !mess.hasHitKid) {
            mess.hasHitKid = true;
            kid.sadTimer = 60;
            kid.happy = Math.max(0, kid.happy - 30);
            score = Math.max(0, score - 15);
          }
        });
        kid.happy = Math.max(0, kid.happy - 0.02);
      });
      chaos = Math.min(100, fartClouds.length * 15 + messes.length * 5);
      document.getElementById('score').textContent = score;
      document.getElementById('farts').textContent = fartCount;
      document.getElementById('chaos').textContent = Math.floor(chaos);
    }
    function draw() {
      ctx.fillStyle = '#1a0a2e'; ctx.fillRect(0, 0, canvas.width, canvas.height);
      drawStage(); drawFloor(); drawTables(); drawBalloons();
      messes.forEach(mess => mess.draw());
      kids.forEach(kid => drawKid(kid));
      fartClouds.forEach(cloud => cloud.draw());
      pigs.forEach(pig => pig.draw());
      drawHippo();
      if (Math.random() < 0.02) { ctx.fillStyle = 'rgba(255,255,255,0.1)'; ctx.fillRect(0, Math.random() * canvas.height, canvas.width, 5); }
    }
    canvas.addEventListener('mousemove', e => { mouseX = e.clientX; mouseY = e.clientY; });
    canvas.addEventListener('click', e => {
      initAudio();
      hippo.isFarting = true; hippo.fartTimer = 0; hippo.mouthOpen = 1; fartCount++;
      fartClouds.push(new FartCloud(hippo.x - 30, hippo.y + 50));
      playFart();
    });
    canvas.addEventListener('touchstart', e => {
      e.preventDefault(); initAudio();
      mouseX = e.touches[0].clientX; mouseY = e.touches[0].clientY;
      hippo.isFarting = true; hippo.fartTimer = 0; hippo.mouthOpen = 1; fartCount++;
      fartClouds.push(new FartCloud(hippo.x - 30, hippo.y + 50));
      playFart();
    });
    canvas.addEventListener('touchmove', e => { e.preventDefault(); mouseX = e.touches[0].clientX; mouseY = e.touches[0].clientY; });
    function gameLoop() { update(); draw(); requestAnimationFrame(gameLoop); }
    init(); gameLoop();
  </script>
<script src="/sloppy-header/sloppy-bar.js"></script>
</body>
</html>
