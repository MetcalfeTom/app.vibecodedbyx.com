<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Impossible Platform - Can You Beat It?</title>
    <link rel="icon" href="https://emojicdn.elk.sh/üéÆ">

    <meta property="og:title" content="The Impossible Platform">
    <meta property="og:description" content="A deceptively simple platformer that will make you rage quit">
    <meta property="og:url" content="https://app.sloppy.live/impossible-platform">
    <meta property="og:image" content="https://image.pollinations.ai/prompt/frustrating%20impossible%20platformer%20game%20pixel%20art%20traps%20obstacles?width=1200&height=630&referrer=sloppy.live">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Press Start 2P', 'Courier New', monospace;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: #fff;
            overflow: hidden;
        }

        .container {
            text-align: center;
            max-width: 900px;
        }

        h1 {
            font-size: 24px;
            margin-bottom: 20px;
            color: #ff6b6b;
            text-shadow: 2px 2px 0 #000;
        }

        .game-container {
            position: relative;
            margin: 20px auto;
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
        }

        canvas {
            border: 4px solid #fff;
            background: #87CEEB;
            display: block;
            image-rendering: pixelated;
            image-rendering: crisp-edges;
        }

        .stats {
            display: flex;
            gap: 30px;
            justify-content: center;
            margin: 20px 0;
            font-size: 12px;
        }

        .stat {
            background: rgba(255,255,255,0.1);
            padding: 10px 20px;
            border-radius: 8px;
            border: 2px solid #fff;
        }

        .stat-value {
            font-size: 20px;
            color: #4ecdc4;
            margin-top: 5px;
        }

        .controls {
            margin: 20px 0;
            font-size: 10px;
            color: #aaa;
        }

        .message {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.8);
            color: #ff6b6b;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 12px;
            display: none;
            z-index: 100;
            max-width: 400px;
            border: 2px solid #ff6b6b;
        }

        .message.show {
            display: block;
            animation: shake 0.5s;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(-50%) translateY(0); }
            25% { transform: translateX(-50%) translateY(-10px); }
            75% { transform: translateX(-50%) translateY(10px); }
        }

        .back-link {
            color: #4ecdc4;
            text-decoration: none;
            font-size: 10px;
            margin-top: 20px;
            display: inline-block;
        }

        .back-link:hover {
            color: #fff;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 16px;
            }
            canvas {
                max-width: 100%;
                height: auto;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéÆ THE IMPOSSIBLE PLATFORM üéÆ</h1>

        <div class="stats">
            <div class="stat">
                <div>LEVEL</div>
                <div class="stat-value" id="level">1</div>
            </div>
            <div class="stat">
                <div>DEATHS</div>
                <div class="stat-value" id="deaths">0</div>
            </div>
            <div class="stat">
                <div>TIME</div>
                <div class="stat-value" id="time">0:00</div>
            </div>
        </div>

        <div class="game-container">
            <canvas id="gameCanvas" width="800" height="600"></canvas>
            <div class="message" id="message"></div>
        </div>

        <div class="controls">
            ‚Üê ‚Üí ARROW KEYS TO MOVE | SPACE TO JUMP | R TO RESTART
        </div>

        <a href="https://sloppy.live" class="back-link">‚Üê Back to sloppy.live</a> | <a href="https://app.sloppy.live/overview" style="color:#4ecdc4;text-decoration:none">üé® View All Apps</a>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        // Game state
        let player = {
            x: 50,
            y: 500,
            width: 30,
            height: 30,
            vx: 0,
            vy: 0,
            speed: 4,
            jumpPower: 12,
            gravity: 0.6,
            onGround: false
        };

        let keys = {};
        let level = 1;
        let deaths = 0;
        let startTime = Date.now();
        let platforms = [];
        let spikes = [];
        let movingPlatforms = [];
        let fakePlatforms = [];
        let invisibleWalls = [];
        let goal = {};
        let trollMessages = [
            "Really? You fell for that?",
            "Maybe try jumping EARLIER next time?",
            "LOL that platform was fake",
            "Did you think that would work?",
            "So close... yet so far",
            "You're not very good at this, are you?",
            "Press Alt+F4 to enable easy mode",
            "Have you considered... not dying?",
            "This is painful to watch",
            "My grandma could beat this level",
            "Achievement Unlocked: Professional Failure",
            "Error: Skill not found",
            "The spike just wanted a hug",
            "That platform? Yeah, it's fake.",
            "Surprise! Everything is rigged against you!",
            "This is what you get for trusting a game",
            "I can't believe you fell for it AGAIN"
        ];

        // Input handling
        document.addEventListener('keydown', e => {
            keys[e.code] = true;
            if (e.code === 'KeyR') restartLevel();
        });
        document.addEventListener('keyup', e => keys[e.code] = false);

        function showMessage(text) {
            const msg = document.getElementById('message');
            msg.textContent = text;
            msg.classList.add('show');
            setTimeout(() => msg.classList.remove('show'), 2000);
        }

        function loadLevel(lvl) {
            platforms = [];
            spikes = [];
            movingPlatforms = [];
            fakePlatforms = [];
            invisibleWalls = [];
            player.x = 50;
            player.y = 500;
            player.vx = 0;
            player.vy = 0;

            if (lvl === 1) {
                // Looks easy, but...
                platforms.push({x: 0, y: 550, width: 200, height: 50});
                platforms.push({x: 300, y: 500, width: 150, height: 50});
                fakePlatforms.push({x: 500, y: 450, width: 150, height: 50}); // Fake!
                platforms.push({x: 500, y: 450, width: 150, height: 50, disappears: true, timer: 0}); // Real but disappears
                platforms.push({x: 700, y: 400, width: 100, height: 50});
                spikes.push({x: 250, y: 540, width: 40, height: 20});
                goal = {x: 750, y: 350, width: 40, height: 40};
            } else if (lvl === 2) {
                // Moving platforms that speed up when you get close
                platforms.push({x: 0, y: 550, width: 150, height: 50});
                movingPlatforms.push({x: 200, y: 500, width: 120, height: 20, vx: 2, baseVx: 2, range: [200, 400]});
                movingPlatforms.push({x: 450, y: 450, width: 120, height: 20, vx: -3, baseVx: -3, range: [450, 650]});
                platforms.push({x: 700, y: 380, width: 100, height: 50});
                spikes.push({x: 150, y: 540, width: 600, height: 20}); // Huge spike trap
                goal = {x: 730, y: 330, width: 40, height: 40};
            } else if (lvl === 3) {
                // Invisible walls + reverse controls
                platforms.push({x: 0, y: 550, width: 150, height: 50});
                platforms.push({x: 250, y: 500, width: 100, height: 50});
                platforms.push({x: 450, y: 450, width: 100, height: 50});
                platforms.push({x: 650, y: 400, width: 150, height: 50});
                invisibleWalls.push({x: 350, y: 0, width: 20, height: 600}); // Invisible wall
                spikes.push({x: 200, y: 540, width: 40, height: 20});
                spikes.push({x: 400, y: 540, width: 40, height: 20});
                goal = {x: 700, y: 350, width: 40, height: 40};
                showMessage("Controls feel... different?");
            } else if (lvl === 4) {
                // The "victory" is fake
                platforms.push({x: 0, y: 550, width: 200, height: 50});
                platforms.push({x: 300, y: 500, width: 500, height: 50});
                goal = {x: 700, y: 450, width: 40, height: 40, fake: true};
            } else if (lvl === 5) {
                // Congratulations screen
                showMessage("You actually made it? Wow!");
            }
        }

        function restartLevel() {
            loadLevel(level);
        }

        function die() {
            deaths++;
            document.getElementById('deaths').textContent = deaths;
            const msg = trollMessages[Math.floor(Math.random() * trollMessages.length)];
            showMessage(msg);
            restartLevel();
        }

        function checkCollision(rect1, rect2) {
            return rect1.x < rect2.x + rect2.width &&
                   rect1.x + rect1.width > rect2.x &&
                   rect1.y < rect2.y + rect2.height &&
                   rect1.y + rect1.height > rect2.y;
        }

        function update() {
            // Time
            const elapsed = Math.floor((Date.now() - startTime) / 1000);
            const mins = Math.floor(elapsed / 60);
            const secs = elapsed % 60;
            document.getElementById('time').textContent = `${mins}:${secs.toString().padStart(2, '0')}`;

            if (level === 5) return; // Victory screen

            // Controls (reversed on level 3)
            const reverse = level === 3;
            if (keys['ArrowLeft']) player.vx = reverse ? player.speed : -player.speed;
            else if (keys['ArrowRight']) player.vx = reverse ? -player.speed : player.speed;
            else player.vx = 0;

            if (keys['Space'] && player.onGround) {
                player.vy = -player.jumpPower;
                player.onGround = false;
            }

            // Gravity
            player.vy += player.gravity;
            player.y += player.vy;
            player.x += player.vx;

            // Ground detection
            player.onGround = false;

            // Platforms collision
            [...platforms, ...movingPlatforms].forEach(plat => {
                if (!plat.disappeared && checkCollision(player, plat)) {
                    if (player.vy > 0 && player.y + player.height - player.vy < plat.y + 5) {
                        player.y = plat.y - player.height;
                        player.vy = 0;
                        player.onGround = true;

                        // Disappearing platform
                        if (plat.disappears) {
                            plat.timer = (plat.timer || 0) + 1;
                            if (plat.timer > 30) {
                                plat.disappeared = true;
                                showMessage("Oops! Platform's gone!");
                            }
                        }
                    }
                }
            });

            // Invisible walls
            invisibleWalls.forEach(wall => {
                if (checkCollision(player, wall)) {
                    player.x -= player.vx;
                    if (Math.random() < 0.05) showMessage("Something's blocking you...");
                }
            });

            // Moving platforms
            movingPlatforms.forEach(plat => {
                plat.x += plat.vx;

                // Speed up near player (trolling)
                const dist = Math.abs(player.x - plat.x);
                if (dist < 150) {
                    plat.vx = plat.baseVx * 3;
                } else {
                    plat.vx = plat.baseVx;
                }

                if (plat.x <= plat.range[0] || plat.x >= plat.range[1]) {
                    plat.vx = -plat.vx;
                    plat.baseVx = -plat.baseVx;
                }
            });

            // Bounds
            if (player.x < 0) player.x = 0;
            if (player.x > canvas.width - player.width) player.x = canvas.width - player.width;

            // Fall off screen
            if (player.y > canvas.height) die();

            // Spikes
            spikes.forEach(spike => {
                if (checkCollision(player, spike)) die();
            });

            // Goal
            if (checkCollision(player, goal)) {
                if (goal.fake) {
                    showMessage("Did you really think I'd let you win?");
                    spikes.push({x: goal.x, y: goal.y, width: goal.width, height: goal.height});
                    die();
                } else {
                    level++;
                    document.getElementById('level').textContent = level;
                    if (level <= 5) {
                        loadLevel(level);
                        showMessage(`Level ${level} - Good luck (you'll need it)`);
                    }
                }
            }
        }

        function draw() {
            // Clear
            ctx.fillStyle = '#87CEEB';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Draw clouds (decoration)
            ctx.fillStyle = 'rgba(255,255,255,0.6)';
            ctx.fillRect(100, 50, 80, 40);
            ctx.fillRect(400, 100, 100, 50);
            ctx.fillRect(600, 30, 90, 45);

            if (level === 5) {
                // Victory screen
                ctx.fillStyle = '#000';
                ctx.font = '30px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('CONGRATULATIONS!', canvas.width/2, canvas.height/2 - 50);
                ctx.font = '16px Arial';
                ctx.fillText('You somehow beat the impossible game', canvas.width/2, canvas.height/2);
                ctx.fillText(`Deaths: ${deaths}`, canvas.width/2, canvas.height/2 + 40);
                ctx.fillText('You are either very skilled or very stubborn', canvas.width/2, canvas.height/2 + 80);
                return;
            }

            // Platforms
            ctx.fillStyle = '#8B4513';
            platforms.forEach(plat => {
                if (!plat.disappeared) {
                    ctx.fillRect(plat.x, plat.y, plat.width, plat.height);
                    if (plat.disappears && plat.timer > 0) {
                        // Visual warning
                        ctx.fillStyle = `rgba(139, 69, 19, ${1 - plat.timer/30})`;
                        ctx.fillRect(plat.x, plat.y, plat.width, plat.height);
                        ctx.fillStyle = '#8B4513';
                    }
                }
            });

            // Moving platforms
            ctx.fillStyle = '#654321';
            movingPlatforms.forEach(plat => {
                ctx.fillRect(plat.x, plat.y, plat.width, plat.height);
            });

            // Fake platforms (look real)
            ctx.fillStyle = '#8B4513';
            ctx.globalAlpha = 0.7;
            fakePlatforms.forEach(plat => {
                ctx.fillRect(plat.x, plat.y, plat.width, plat.height);
            });
            ctx.globalAlpha = 1;

            // Spikes
            ctx.fillStyle = '#FF0000';
            spikes.forEach(spike => {
                for (let i = 0; i < spike.width; i += 20) {
                    ctx.beginPath();
                    ctx.moveTo(spike.x + i, spike.y + spike.height);
                    ctx.lineTo(spike.x + i + 10, spike.y);
                    ctx.lineTo(spike.x + i + 20, spike.y + spike.height);
                    ctx.fill();
                }
            });

            // Goal
            ctx.fillStyle = goal.fake ? '#FFD700' : '#00FF00';
            ctx.fillRect(goal.x, goal.y, goal.width, goal.height);
            ctx.fillStyle = '#000';
            ctx.font = '20px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('üèÅ', goal.x + goal.width/2, goal.y + goal.height/2 + 7);

            // Player
            ctx.fillStyle = '#FF1493';
            ctx.fillRect(player.x, player.y, player.width, player.height);

            // Player face
            ctx.fillStyle = '#000';
            ctx.fillRect(player.x + 8, player.y + 8, 4, 4); // Left eye
            ctx.fillRect(player.x + 18, player.y + 8, 4, 4); // Right eye
            ctx.fillRect(player.x + 10, player.y + 20, 10, 3); // Mouth
        }

        function gameLoop() {
            update();
            draw();
            requestAnimationFrame(gameLoop);
        }

        // Initialize
        loadLevel(1);
        showMessage("This looks easy... or does it?");
        gameLoop();
    </script>
<script src="/sloppy-header/sloppy-bar.js"></script>
</body>
</html>
