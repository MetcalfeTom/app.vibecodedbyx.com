<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Jellyfish Abyss - Neon Deep</title>
  <link rel="icon" href="https://emojicdn.elk.sh/ðŸª¼">
  <meta property="og:title" content="Jellyfish Abyss">
  <meta property="og:description" content="Touch the glowing jellyfish in the neon deep">
  <meta property="og:url" content="https://sloppy.live/jellyfish-abyss">
  <meta property="og:image" content="https://emojicdn.elk.sh/ðŸª¼?style=apple&size=512">
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;500;700&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      background: linear-gradient(180deg, #000510 0%, #001025 30%, #002040 60%, #001530 100%);
      min-height: 100vh;
      overflow: hidden;
      font-family: 'Quicksand', sans-serif;
    }
    canvas { display: block; }

    .title {
      position: fixed;
      top: 25px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 1.8rem;
      font-weight: 700;
      color: #00ffff;
      text-shadow: 0 0 30px #00ffff, 0 0 60px #0088ff;
      letter-spacing: 8px;
      z-index: 100;
      pointer-events: none;
      opacity: 0.8;
    }

    .subtitle {
      position: fixed;
      top: 70px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 0.8rem;
      color: rgba(100, 200, 255, 0.6);
      letter-spacing: 3px;
      z-index: 100;
      pointer-events: none;
    }

    .depth {
      position: fixed;
      bottom: 30px;
      left: 30px;
      font-size: 0.9rem;
      color: rgba(0, 255, 200, 0.5);
      z-index: 100;
      pointer-events: none;
    }

    .depth-value {
      font-size: 2rem;
      font-weight: 700;
      color: #00ffaa;
      text-shadow: 0 0 20px #00ffaa;
    }

    .creatures-touched {
      position: fixed;
      bottom: 30px;
      right: 30px;
      text-align: right;
      font-size: 0.9rem;
      color: rgba(255, 100, 200, 0.5);
      z-index: 100;
      pointer-events: none;
    }

    .touched-value {
      font-size: 2rem;
      font-weight: 700;
      color: #ff66cc;
      text-shadow: 0 0 20px #ff66cc;
    }

    .hint {
      position: fixed;
      bottom: 100px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 0.75rem;
      color: rgba(255, 255, 255, 0.3);
      z-index: 100;
      pointer-events: none;
      animation: fadeHint 3s ease-in-out infinite;
    }

    @keyframes fadeHint {
      0%, 100% { opacity: 0.3; }
      50% { opacity: 0.6; }
    }

    .backlink {
      position: fixed;
      bottom: 10px;
      right: 15px;
      color: rgba(255,255,255,0.2);
      font-size: 0.6rem;
      text-decoration: none;
      z-index: 100;
    }
    .backlink:hover { color: #00ffff; }
  </style>
</head>
<body>
  <canvas id="abyss"></canvas>

  <div class="title">JELLYFISH ABYSS</div>
  <div class="subtitle">TOUCH THE CREATURES</div>

  <div class="depth">
    DEPTH<br>
    <span class="depth-value" id="depth">0</span>m
  </div>

  <div class="creatures-touched">
    TOUCHED<br>
    <span class="touched-value" id="touched">0</span>
  </div>

  <div class="hint">~ drift through the neon deep ~</div>

  <a href="https://sloppy.live" class="backlink">sloppy.live</a>

  <script>
    const canvas = document.getElementById('abyss');
    const ctx = canvas.getContext('2d');

    let W, H;
    function resize() {
      W = canvas.width = window.innerWidth;
      H = canvas.height = window.innerHeight;
    }
    resize();
    window.addEventListener('resize', resize);

    // State
    let jellyfish = [];
    let particles = [];
    let bubbles = [];
    let touchedCount = 0;
    let depth = 0;
    let time = 0;
    let mouseX = W / 2;
    let mouseY = H / 2;

    // Jellyfish colors
    const jellyColors = [
      { main: '#ff00ff', glow: '#ff66ff', inner: '#ffaaff' },
      { main: '#00ffff', glow: '#66ffff', inner: '#aaffff' },
      { main: '#ff6600', glow: '#ff9944', inner: '#ffcc88' },
      { main: '#00ff88', glow: '#66ffaa', inner: '#aaffcc' },
      { main: '#ff0088', glow: '#ff66aa', inner: '#ffaacc' },
      { main: '#8800ff', glow: '#aa66ff', inner: '#ccaaff' },
      { main: '#ffff00', glow: '#ffff66', inner: '#ffffaa' }
    ];

    // Create jellyfish
    function createJellyfish(x, y) {
      const color = jellyColors[Math.floor(Math.random() * jellyColors.length)];
      const size = 30 + Math.random() * 50;

      return {
        x: x || Math.random() * W,
        y: y || Math.random() * H,
        size,
        color,
        phase: Math.random() * Math.PI * 2,
        pulsePhase: Math.random() * Math.PI * 2,
        speed: 0.3 + Math.random() * 0.5,
        drift: Math.random() * Math.PI * 2,
        tentacles: 5 + Math.floor(Math.random() * 4),
        glowIntensity: 0.5,
        touched: false,
        touchTimer: 0
      };
    }

    // Initialize jellyfish
    for (let i = 0; i < 12; i++) {
      jellyfish.push(createJellyfish());
    }

    // Create particle burst
    function createParticleBurst(x, y, color, count) {
      for (let i = 0; i < count; i++) {
        const angle = Math.random() * Math.PI * 2;
        const speed = 1 + Math.random() * 3;
        particles.push({
          x,
          y,
          vx: Math.cos(angle) * speed,
          vy: Math.sin(angle) * speed,
          size: 2 + Math.random() * 4,
          color,
          life: 1
        });
      }
    }

    // Create bubble
    function createBubble(x, y) {
      bubbles.push({
        x,
        y,
        size: 2 + Math.random() * 6,
        speed: 0.5 + Math.random() * 1.5,
        wobble: Math.random() * Math.PI * 2,
        life: 1
      });
    }

    // Check if point is inside jellyfish
    function isInsideJelly(jelly, px, py) {
      const dx = px - jelly.x;
      const dy = py - jelly.y;
      return Math.sqrt(dx * dx + dy * dy) < jelly.size * 1.2;
    }

    // Touch handler
    function handleTouch(x, y) {
      jellyfish.forEach(jelly => {
        if (isInsideJelly(jelly, x, y) && !jelly.touched) {
          jelly.touched = true;
          jelly.touchTimer = 60;
          jelly.glowIntensity = 2;
          touchedCount++;
          document.getElementById('touched').textContent = touchedCount;

          // Particle burst
          createParticleBurst(jelly.x, jelly.y, jelly.color.glow, 15);

          // Bubbles
          for (let i = 0; i < 5; i++) {
            createBubble(
              jelly.x + (Math.random() - 0.5) * jelly.size,
              jelly.y + jelly.size * 0.5
            );
          }
        }
      });
    }

    canvas.addEventListener('click', e => handleTouch(e.clientX, e.clientY));
    canvas.addEventListener('touchstart', e => {
      e.preventDefault();
      const touch = e.touches[0];
      handleTouch(touch.clientX, touch.clientY);
    });

    canvas.addEventListener('mousemove', e => {
      mouseX = e.clientX;
      mouseY = e.clientY;
    });

    // Draw jellyfish
    function drawJellyfish(jelly) {
      const pulse = Math.sin(jelly.pulsePhase) * 0.15 + 1;
      const bodyWidth = jelly.size * pulse;
      const bodyHeight = jelly.size * 0.7 * pulse;

      ctx.save();
      ctx.translate(jelly.x, jelly.y);

      // Glow effect
      ctx.shadowBlur = 30 * jelly.glowIntensity;
      ctx.shadowColor = jelly.color.glow;

      // Bell (dome)
      ctx.beginPath();
      ctx.ellipse(0, 0, bodyWidth, bodyHeight, 0, Math.PI, 0);

      const gradient = ctx.createRadialGradient(0, -bodyHeight * 0.3, 0, 0, 0, bodyWidth);
      gradient.addColorStop(0, jelly.color.inner);
      gradient.addColorStop(0.5, jelly.color.main);
      gradient.addColorStop(1, 'transparent');

      ctx.fillStyle = gradient;
      ctx.globalAlpha = 0.6 + jelly.glowIntensity * 0.2;
      ctx.fill();

      // Inner glow
      ctx.beginPath();
      ctx.ellipse(0, -bodyHeight * 0.2, bodyWidth * 0.5, bodyHeight * 0.4, 0, 0, Math.PI * 2);
      ctx.fillStyle = jelly.color.inner;
      ctx.globalAlpha = 0.3 * jelly.glowIntensity;
      ctx.fill();

      // Tentacles
      ctx.globalAlpha = 0.5 + jelly.glowIntensity * 0.3;
      ctx.strokeStyle = jelly.color.main;
      ctx.lineWidth = 2;
      ctx.lineCap = 'round';

      for (let i = 0; i < jelly.tentacles; i++) {
        const tentacleX = (i - (jelly.tentacles - 1) / 2) * (bodyWidth * 0.4 / jelly.tentacles);
        const tentacleLength = jelly.size * (0.8 + Math.random() * 0.4);

        ctx.beginPath();
        ctx.moveTo(tentacleX, bodyHeight * 0.1);

        // Wavy tentacle
        for (let j = 0; j < 4; j++) {
          const ty = bodyHeight * 0.1 + (j + 1) * (tentacleLength / 4);
          const wave = Math.sin(jelly.phase + j * 0.8 + i * 0.5) * 15;
          ctx.quadraticCurveTo(
            tentacleX + wave,
            ty - tentacleLength / 8,
            tentacleX + wave * 0.5,
            ty
          );
        }
        ctx.stroke();
      }

      // Frilly edge
      ctx.beginPath();
      ctx.strokeStyle = jelly.color.glow;
      ctx.lineWidth = 3;
      ctx.globalAlpha = 0.4 * jelly.glowIntensity;

      for (let i = 0; i <= 20; i++) {
        const angle = Math.PI + (i / 20) * Math.PI;
        const r = bodyWidth * (1 + Math.sin(i * 2 + jelly.phase * 2) * 0.1);
        const x = Math.cos(angle) * r;
        const y = Math.sin(angle) * bodyHeight / bodyWidth * r;

        if (i === 0) ctx.moveTo(x, y);
        else ctx.lineTo(x, y);
      }
      ctx.stroke();

      ctx.restore();
    }

    // Draw particle
    function drawParticle(p) {
      ctx.save();
      ctx.globalAlpha = p.life;
      ctx.shadowBlur = 10;
      ctx.shadowColor = p.color;
      ctx.fillStyle = p.color;
      ctx.beginPath();
      ctx.arc(p.x, p.y, p.size * p.life, 0, Math.PI * 2);
      ctx.fill();
      ctx.restore();
    }

    // Draw bubble
    function drawBubble(b) {
      ctx.save();
      ctx.globalAlpha = b.life * 0.5;
      ctx.strokeStyle = '#88ddff';
      ctx.lineWidth = 1;
      ctx.shadowBlur = 10;
      ctx.shadowColor = '#00ffff';
      ctx.beginPath();
      ctx.arc(b.x, b.y, b.size, 0, Math.PI * 2);
      ctx.stroke();

      // Highlight
      ctx.fillStyle = 'rgba(255, 255, 255, 0.3)';
      ctx.beginPath();
      ctx.arc(b.x - b.size * 0.3, b.y - b.size * 0.3, b.size * 0.3, 0, Math.PI * 2);
      ctx.fill();
      ctx.restore();
    }

    // Draw ambient particles (plankton)
    function drawAmbient() {
      for (let i = 0; i < 50; i++) {
        const x = (i * 73 + time * 10) % W;
        const y = (i * 47 + Math.sin(time + i) * 30) % H;
        const alpha = 0.1 + Math.sin(time * 2 + i) * 0.1;
        const size = 1 + Math.sin(i) * 0.5;

        ctx.fillStyle = `rgba(100, 200, 255, ${alpha})`;
        ctx.beginPath();
        ctx.arc(x, y, size, 0, Math.PI * 2);
        ctx.fill();
      }
    }

    // Draw light rays from above
    function drawLightRays() {
      ctx.save();
      for (let i = 0; i < 5; i++) {
        const x = (i + 0.5) * (W / 5);
        const gradient = ctx.createLinearGradient(x, 0, x + 50, H);
        gradient.addColorStop(0, 'rgba(100, 200, 255, 0.03)');
        gradient.addColorStop(0.5, 'rgba(50, 150, 200, 0.01)');
        gradient.addColorStop(1, 'transparent');

        ctx.fillStyle = gradient;
        ctx.beginPath();
        ctx.moveTo(x - 30, 0);
        ctx.lineTo(x + 80, 0);
        ctx.lineTo(x + 150 + Math.sin(time + i) * 30, H);
        ctx.lineTo(x - 100 + Math.sin(time + i) * 30, H);
        ctx.fill();
      }
      ctx.restore();
    }

    // Update
    function update(dt) {
      time += dt;
      depth = Math.floor(1000 + Math.sin(time * 0.1) * 200);
      document.getElementById('depth').textContent = depth;

      // Update jellyfish
      jellyfish.forEach(jelly => {
        // Movement
        jelly.phase += dt * 3;
        jelly.pulsePhase += dt * 2;
        jelly.drift += dt * 0.2;

        // Slow drift upward and sideways
        jelly.y -= jelly.speed * 30 * dt;
        jelly.x += Math.sin(jelly.drift) * 20 * dt;

        // Wrap around
        if (jelly.y < -jelly.size * 2) {
          jelly.y = H + jelly.size;
          jelly.x = Math.random() * W;
        }
        if (jelly.x < -jelly.size) jelly.x = W + jelly.size;
        if (jelly.x > W + jelly.size) jelly.x = -jelly.size;

        // Glow decay
        jelly.glowIntensity += (0.5 - jelly.glowIntensity) * dt * 2;

        // Touch timer
        if (jelly.touchTimer > 0) {
          jelly.touchTimer--;
          if (jelly.touchTimer === 0) {
            jelly.touched = false;
          }
        }

        // React to mouse proximity
        const dx = mouseX - jelly.x;
        const dy = mouseY - jelly.y;
        const dist = Math.sqrt(dx * dx + dy * dy);
        if (dist < 150) {
          jelly.glowIntensity = Math.max(jelly.glowIntensity, 0.8 + (150 - dist) / 150);
        }
      });

      // Update particles
      particles.forEach(p => {
        p.x += p.vx;
        p.y += p.vy;
        p.vy -= 0.02; // Float up
        p.life -= dt * 1.5;
      });
      particles = particles.filter(p => p.life > 0);

      // Update bubbles
      bubbles.forEach(b => {
        b.y -= b.speed * 60 * dt;
        b.x += Math.sin(b.wobble + time * 5) * 0.5;
        b.life -= dt * 0.3;
      });
      bubbles = bubbles.filter(b => b.life > 0 && b.y > -b.size);

      // Random bubbles
      if (Math.random() < 0.02) {
        createBubble(Math.random() * W, H + 10);
      }
    }

    // Draw
    function draw() {
      // Dark ocean gradient
      const bgGradient = ctx.createLinearGradient(0, 0, 0, H);
      bgGradient.addColorStop(0, '#000510');
      bgGradient.addColorStop(0.3, '#001025');
      bgGradient.addColorStop(0.6, '#002040');
      bgGradient.addColorStop(1, '#001530');
      ctx.fillStyle = bgGradient;
      ctx.fillRect(0, 0, W, H);

      drawLightRays();
      drawAmbient();

      // Draw bubbles behind jellyfish
      bubbles.forEach(drawBubble);

      // Draw jellyfish
      jellyfish.forEach(drawJellyfish);

      // Draw particles on top
      particles.forEach(drawParticle);
    }

    // Animation loop
    let lastTime = 0;
    function animate(timestamp) {
      requestAnimationFrame(animate);

      const dt = Math.min((timestamp - lastTime) / 1000, 0.1);
      lastTime = timestamp;

      update(dt);
      draw();
    }

    animate(0);
  </script>
<script src="/sloppy-header/sloppy-bar.js"></script>
</body>
</html>
