<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Holiday Luck Calculator</title>
  <link rel="icon" href="https://emojicdn.elk.sh/üéÑ">
  <meta property="og:title" content="Holiday Luck Calculator">
  <meta property="og:description" content="Is your year blessed or cursed by holiday placement?">
  <meta property="og:url" content="https://app.sloppy.live/holiday-luck">
  <meta property="og:image" content="https://emojicdn.elk.sh/üéÑ?style=apple&size=512">
  <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700&family=JetBrains+Mono&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    :root {
      --good: #22c55e;
      --bad: #ef4444;
      --meh: #f59e0b;
      --bg: #fefce8;
      --panel: #ffffff;
      --text: #1c1917;
      --muted: #78716c;
    }

    body {
      font-family: 'Fredoka', sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      padding: 20px;
    }

    .container {
      max-width: 800px;
      margin: 0 auto;
    }

    .header {
      text-align: center;
      margin-bottom: 30px;
    }

    .title {
      font-size: 2.5rem;
      font-weight: 700;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 15px;
    }

    .subtitle {
      color: var(--muted);
      font-size: 1.1rem;
    }

    /* Year selector */
    .year-selector {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 20px;
      margin-bottom: 30px;
    }

    .year-btn {
      background: var(--panel);
      border: 2px solid #e5e5e5;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      font-size: 1.5rem;
      cursor: pointer;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .year-btn:hover {
      background: #f5f5f5;
      transform: scale(1.1);
    }

    .current-year {
      font-size: 4rem;
      font-weight: 700;
      min-width: 200px;
      text-align: center;
    }

    /* Verdict */
    .verdict-card {
      background: var(--panel);
      border-radius: 20px;
      padding: 30px;
      text-align: center;
      margin-bottom: 30px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
      position: relative;
      overflow: hidden;
    }

    .verdict-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 6px;
    }

    .verdict-card.good::before { background: var(--good); }
    .verdict-card.bad::before { background: var(--bad); }
    .verdict-card.meh::before { background: var(--meh); }

    .verdict-emoji {
      font-size: 5rem;
      margin-bottom: 15px;
      animation: bounce 1s ease-in-out infinite;
    }

    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }

    .verdict-text {
      font-size: 2rem;
      font-weight: 700;
      margin-bottom: 10px;
    }

    .verdict-card.good .verdict-text { color: var(--good); }
    .verdict-card.bad .verdict-text { color: var(--bad); }
    .verdict-card.meh .verdict-text { color: var(--meh); }

    .verdict-desc {
      color: var(--muted);
      font-size: 1rem;
    }

    .score-bar {
      display: flex;
      align-items: center;
      gap: 15px;
      margin-top: 20px;
      justify-content: center;
    }

    .score-track {
      width: 200px;
      height: 12px;
      background: #e5e5e5;
      border-radius: 6px;
      overflow: hidden;
    }

    .score-fill {
      height: 100%;
      border-radius: 6px;
      transition: width 0.5s ease;
    }

    .score-fill.good { background: var(--good); }
    .score-fill.bad { background: var(--bad); }
    .score-fill.meh { background: var(--meh); }

    .score-label {
      font-weight: 600;
      font-size: 1.1rem;
    }

    /* Holiday list */
    .holidays-card {
      background: var(--panel);
      border-radius: 20px;
      padding: 25px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
      margin-bottom: 30px;
    }

    .holidays-title {
      font-size: 1.3rem;
      font-weight: 600;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .holiday-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 12px;
    }

    .holiday-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px 15px;
      background: #fafafa;
      border-radius: 12px;
      transition: all 0.2s;
    }

    .holiday-item:hover {
      transform: translateX(5px);
    }

    .holiday-item.weekend {
      background: #fef2f2;
      border: 1px solid #fecaca;
    }

    .holiday-item.weekday {
      background: #f0fdf4;
      border: 1px solid #bbf7d0;
    }

    .holiday-icon {
      font-size: 1.5rem;
    }

    .holiday-info {
      flex: 1;
    }

    .holiday-name {
      font-weight: 600;
      font-size: 0.9rem;
    }

    .holiday-date {
      font-size: 0.75rem;
      color: var(--muted);
      font-family: 'JetBrains Mono', monospace;
    }

    .holiday-day {
      font-size: 0.75rem;
      font-weight: 600;
      padding: 4px 8px;
      border-radius: 20px;
    }

    .holiday-day.weekend {
      background: #fee2e2;
      color: var(--bad);
    }

    .holiday-day.weekday {
      background: #dcfce7;
      color: var(--good);
    }

    /* Holiday selector */
    .selector-card {
      background: var(--panel);
      border-radius: 20px;
      padding: 25px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
      margin-bottom: 30px;
    }

    .selector-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    .selector-title {
      font-size: 1.3rem;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .selector-actions {
      display: flex;
      gap: 10px;
    }

    .selector-btn {
      background: #f5f5f5;
      border: 1px solid #e5e5e5;
      padding: 6px 12px;
      border-radius: 8px;
      font-family: inherit;
      font-size: 0.8rem;
      cursor: pointer;
      transition: all 0.2s;
    }

    .selector-btn:hover {
      background: #e5e5e5;
    }

    .holiday-selector {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
      gap: 8px;
    }

    .holiday-checkbox {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px 12px;
      background: #fafafa;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.2s;
      border: 2px solid transparent;
    }

    .holiday-checkbox:hover {
      background: #f0f0f0;
    }

    .holiday-checkbox.checked {
      background: #eff6ff;
      border-color: #3b82f6;
    }

    .holiday-checkbox input {
      width: 18px;
      height: 18px;
      accent-color: #3b82f6;
      cursor: pointer;
    }

    .holiday-checkbox .cb-icon {
      font-size: 1.2rem;
    }

    .holiday-checkbox .cb-name {
      flex: 1;
      font-size: 0.85rem;
      font-weight: 500;
    }

    .holiday-checkbox .cb-type {
      font-size: 0.65rem;
      color: var(--muted);
      background: #e5e5e5;
      padding: 2px 6px;
      border-radius: 4px;
    }

    .selected-count {
      text-align: center;
      margin-top: 15px;
      font-size: 0.85rem;
      color: var(--muted);
    }

    .selected-count strong {
      color: var(--text);
    }

    /* Stats */
    .stats-row {
      display: flex;
      gap: 15px;
      margin-bottom: 30px;
    }

    .stat-card {
      flex: 1;
      background: var(--panel);
      border-radius: 16px;
      padding: 20px;
      text-align: center;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
    }

    .stat-value {
      font-size: 2.5rem;
      font-weight: 700;
    }

    .stat-card.good .stat-value { color: var(--good); }
    .stat-card.bad .stat-value { color: var(--bad); }

    .stat-label {
      color: var(--muted);
      font-size: 0.85rem;
      margin-top: 5px;
    }

    /* Year comparison */
    .comparison-card {
      background: var(--panel);
      border-radius: 20px;
      padding: 25px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
    }

    .comparison-title {
      font-size: 1.3rem;
      font-weight: 600;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .year-row {
      display: flex;
      align-items: center;
      gap: 15px;
      padding: 10px 0;
      border-bottom: 1px solid #f5f5f5;
      cursor: pointer;
      transition: all 0.2s;
    }

    .year-row:hover {
      background: #fafafa;
      margin: 0 -15px;
      padding: 10px 15px;
      border-radius: 10px;
    }

    .year-row:last-child {
      border-bottom: none;
    }

    .year-row .year {
      font-weight: 600;
      width: 60px;
    }

    .year-row .bar {
      flex: 1;
      height: 24px;
      background: #e5e5e5;
      border-radius: 12px;
      overflow: hidden;
      display: flex;
    }

    .year-row .bar-fill {
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: flex-end;
      padding-right: 8px;
      font-size: 0.7rem;
      font-weight: 600;
      color: white;
      min-width: fit-content;
    }

    .year-row .bar-fill.good { background: var(--good); }
    .year-row .bar-fill.bad { background: var(--bad); }
    .year-row .bar-fill.meh { background: var(--meh); }

    .year-row .verdict-badge {
      font-size: 1.2rem;
    }

    .back-link {
      position: fixed;
      top: 15px;
      right: 15px;
      color: var(--muted);
      text-decoration: none;
      font-size: 0.8rem;
    }

    .back-link:hover { color: var(--text); }

    @media (max-width: 600px) {
      .title { font-size: 1.8rem; }
      .current-year { font-size: 3rem; min-width: 150px; }
      .holiday-grid { grid-template-columns: 1fr; }
      .stats-row { flex-direction: column; }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1 class="title">üéÑ Holiday Luck Calculator üéÅ</h1>
      <p class="subtitle">Do your holidays fall on weekdays or get wasted on weekends?</p>
    </div>

    <div class="year-selector">
      <button class="year-btn" onclick="changeYear(-1)">‚óÄ</button>
      <div class="current-year" id="current-year">2025</div>
      <button class="year-btn" onclick="changeYear(1)">‚ñ∂</button>
    </div>

    <div class="verdict-card" id="verdict-card">
      <div class="verdict-emoji" id="verdict-emoji">üéâ</div>
      <div class="verdict-text" id="verdict-text">BLESSED YEAR</div>
      <div class="verdict-desc" id="verdict-desc">Most holidays fall on weekdays!</div>
      <div class="score-bar">
        <span>üò¢</span>
        <div class="score-track">
          <div class="score-fill" id="score-fill"></div>
        </div>
        <span>üéâ</span>
        <span class="score-label" id="score-label">75%</span>
      </div>
    </div>

    <div class="selector-card">
      <div class="selector-header">
        <h2 class="selector-title">‚òëÔ∏è Select Your Holidays</h2>
        <div class="selector-actions">
          <button class="selector-btn" onclick="selectAll()">Select All</button>
          <button class="selector-btn" onclick="selectNone()">Clear All</button>
          <button class="selector-btn" onclick="selectFederal()">Federal Only</button>
        </div>
      </div>
      <div class="holiday-selector" id="holiday-selector"></div>
      <div class="selected-count">
        <strong id="selected-count">0</strong> holidays selected
      </div>
    </div>

    <div class="stats-row">
      <div class="stat-card good">
        <div class="stat-value" id="weekday-count">0</div>
        <div class="stat-label">Weekday Holidays</div>
      </div>
      <div class="stat-card bad">
        <div class="stat-value" id="weekend-count">0</div>
        <div class="stat-label">Weekend Holidays</div>
      </div>
    </div>

    <div class="holidays-card">
      <h2 class="holidays-title">üìÖ Holiday Breakdown</h2>
      <div class="holiday-grid" id="holiday-grid"></div>
    </div>

    <div class="comparison-card">
      <h2 class="comparison-title">üìä Nearby Years</h2>
      <div id="comparison-list"></div>
    </div>
  </div>

  <a href="https://sloppy.live" class="back-link">‚Üê sloppy.live</a>

  <script>
    // All holidays - fixed dates and floating
    const allHolidays = [
      // Federal holidays
      { id: 'newyear', name: "New Year's Day", month: 0, day: 1, icon: "üéÜ", type: "Federal", federal: true },
      { id: 'mlk', name: "MLK Day", month: 0, week: 3, weekday: 1, icon: "‚úä", type: "Federal", federal: true, floating: true },
      { id: 'presidents', name: "Presidents Day", month: 1, week: 3, weekday: 1, icon: "üé©", type: "Federal", federal: true, floating: true },
      { id: 'memorial', name: "Memorial Day", month: 4, week: -1, weekday: 1, icon: "ü™ñ", type: "Federal", federal: true, floating: true },
      { id: 'juneteenth', name: "Juneteenth", month: 5, day: 19, icon: "‚úäüèø", type: "Federal", federal: true },
      { id: 'july4', name: "Independence Day", month: 6, day: 4, icon: "üá∫üá∏", type: "Federal", federal: true },
      { id: 'labor', name: "Labor Day", month: 8, week: 1, weekday: 1, icon: "üë∑", type: "Federal", federal: true, floating: true },
      { id: 'columbus', name: "Columbus Day", month: 9, week: 2, weekday: 1, icon: "üß≠", type: "Federal", federal: true, floating: true },
      { id: 'veterans', name: "Veterans Day", month: 10, day: 11, icon: "üéñÔ∏è", type: "Federal", federal: true },
      { id: 'thanksgiving', name: "Thanksgiving", month: 10, week: 4, weekday: 4, icon: "ü¶É", type: "Federal", federal: true, floating: true },
      { id: 'christmas', name: "Christmas Day", month: 11, day: 25, icon: "üéÑ", type: "Federal", federal: true },

      // Popular non-federal
      { id: 'valentine', name: "Valentine's Day", month: 1, day: 14, icon: "üíï", type: "Popular" },
      { id: 'stpatrick', name: "St. Patrick's Day", month: 2, day: 17, icon: "‚òòÔ∏è", type: "Popular" },
      { id: 'easter', name: "Easter Sunday", month: -1, icon: "üê∞", type: "Popular", easter: true, floating: true },
      { id: 'cincodemayo', name: "Cinco de Mayo", month: 4, day: 5, icon: "üá≤üáΩ", type: "Popular" },
      { id: 'mother', name: "Mother's Day", month: 4, week: 2, weekday: 0, icon: "üíê", type: "Popular", floating: true },
      { id: 'father', name: "Father's Day", month: 5, week: 3, weekday: 0, icon: "üëî", type: "Popular", floating: true },
      { id: 'halloween', name: "Halloween", month: 9, day: 31, icon: "üéÉ", type: "Popular" },
      { id: 'christmaseve', name: "Christmas Eve", month: 11, day: 24, icon: "üåü", type: "Popular" },
      { id: 'newyeareve', name: "New Year's Eve", month: 11, day: 31, icon: "ü•≥", type: "Popular" }
    ];

    const dayNames = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
    const monthNames = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];

    let currentYear = new Date().getFullYear();
    let selectedHolidays = new Set(allHolidays.filter(h => h.federal).map(h => h.id));

    function isWeekend(dayOfWeek) {
      return dayOfWeek === 0 || dayOfWeek === 6;
    }

    // Calculate Easter (Computus algorithm)
    function getEasterDate(year) {
      const a = year % 19;
      const b = Math.floor(year / 100);
      const c = year % 100;
      const d = Math.floor(b / 4);
      const e = b % 4;
      const f = Math.floor((b + 8) / 25);
      const g = Math.floor((b - f + 1) / 3);
      const h = (19 * a + b - d - g + 15) % 30;
      const i = Math.floor(c / 4);
      const k = c % 4;
      const l = (32 + 2 * e + 2 * i - h - k) % 7;
      const m = Math.floor((a + 11 * h + 22 * l) / 451);
      const month = Math.floor((h + l - 7 * m + 114) / 31) - 1;
      const day = ((h + l - 7 * m + 114) % 31) + 1;
      return new Date(year, month, day);
    }

    // Get nth weekday of month (week: 1-5, -1 for last)
    function getNthWeekday(year, month, weekday, week) {
      if (week === -1) {
        // Last occurrence
        const lastDay = new Date(year, month + 1, 0);
        let date = lastDay.getDate();
        while (new Date(year, month, date).getDay() !== weekday) {
          date--;
        }
        return new Date(year, month, date);
      }
      // Nth occurrence
      let count = 0;
      for (let day = 1; day <= 31; day++) {
        const d = new Date(year, month, day);
        if (d.getMonth() !== month) break;
        if (d.getDay() === weekday) {
          count++;
          if (count === week) return d;
        }
      }
      return null;
    }

    function getHolidayDate(holiday, year) {
      if (holiday.easter) {
        return getEasterDate(year);
      }
      if (holiday.floating) {
        return getNthWeekday(year, holiday.month, holiday.weekday, holiday.week);
      }
      return new Date(year, holiday.month, holiday.day);
    }

    function getHolidayData(year, onlySelected = true) {
      const holidaysToUse = onlySelected
        ? allHolidays.filter(h => selectedHolidays.has(h.id))
        : allHolidays;

      return holidaysToUse.map(h => {
        const date = getHolidayDate(h, year);
        const dayOfWeek = date.getDay();
        return {
          ...h,
          date,
          dayOfWeek,
          dayName: dayNames[dayOfWeek],
          isWeekend: isWeekend(dayOfWeek),
          dateStr: `${monthNames[date.getMonth()]} ${date.getDate()}`
        };
      });
    }

    function calculateScore(year) {
      const data = getHolidayData(year, true);
      if (data.length === 0) {
        return { weekdayCount: 0, weekendCount: 0, score: 0.5, data };
      }
      const weekdayCount = data.filter(h => !h.isWeekend).length;
      const total = data.length;
      return {
        weekdayCount,
        weekendCount: total - weekdayCount,
        score: weekdayCount / total,
        data
      };
    }

    function getVerdict(score) {
      if (score >= 0.7) return { class: 'good', emoji: 'üéâ', text: 'BLESSED YEAR', desc: 'Most holidays fall on weekdays! Maximum days off!' };
      if (score >= 0.5) return { class: 'meh', emoji: 'üòê', text: 'MEH YEAR', desc: 'Some holidays wasted on weekends...' };
      return { class: 'bad', emoji: 'üò≠', text: 'CURSED YEAR', desc: 'Too many holidays fall on weekends! Tragic!' };
    }

    function updateDisplay() {
      const { weekdayCount, weekendCount, score, data } = calculateScore(currentYear);
      const verdict = getVerdict(score);

      // Update year
      document.getElementById('current-year').textContent = currentYear;

      // Update verdict card
      const verdictCard = document.getElementById('verdict-card');
      verdictCard.className = 'verdict-card ' + verdict.class;
      document.getElementById('verdict-emoji').textContent = verdict.emoji;
      document.getElementById('verdict-text').textContent = verdict.text;
      document.getElementById('verdict-desc').textContent = verdict.desc;

      // Update score bar
      const scoreFill = document.getElementById('score-fill');
      scoreFill.style.width = (score * 100) + '%';
      scoreFill.className = 'score-fill ' + verdict.class;
      document.getElementById('score-label').textContent = Math.round(score * 100) + '%';

      // Update stats
      document.getElementById('weekday-count').textContent = weekdayCount;
      document.getElementById('weekend-count').textContent = weekendCount;

      // Update holiday grid
      const grid = document.getElementById('holiday-grid');
      grid.innerHTML = data.map(h => `
        <div class="holiday-item ${h.isWeekend ? 'weekend' : 'weekday'}">
          <span class="holiday-icon">${h.icon}</span>
          <div class="holiday-info">
            <div class="holiday-name">${h.name}</div>
            <div class="holiday-date">${h.dateStr}</div>
          </div>
          <span class="holiday-day ${h.isWeekend ? 'weekend' : 'weekday'}">${h.dayName.slice(0, 3)}</span>
        </div>
      `).join('');

      // Update comparison
      updateComparison();
    }

    function updateComparison() {
      const years = [];
      for (let y = currentYear - 3; y <= currentYear + 3; y++) {
        const { score } = calculateScore(y);
        const verdict = getVerdict(score);
        years.push({ year: y, score, verdict });
      }

      const list = document.getElementById('comparison-list');
      list.innerHTML = years.map(y => `
        <div class="year-row" onclick="setYear(${y.year})">
          <span class="year">${y.year}</span>
          <div class="bar">
            <div class="bar-fill ${y.verdict.class}" style="width: ${y.score * 100}%">
              ${Math.round(y.score * 100)}%
            </div>
          </div>
          <span class="verdict-badge">${y.verdict.emoji}</span>
        </div>
      `).join('');
    }

    function changeYear(delta) {
      currentYear += delta;
      updateDisplay();
    }

    function setYear(year) {
      currentYear = year;
      updateDisplay();
    }

    // Holiday selector functions
    function renderSelector() {
      const container = document.getElementById('holiday-selector');
      container.innerHTML = allHolidays.map(h => `
        <label class="holiday-checkbox ${selectedHolidays.has(h.id) ? 'checked' : ''}" data-id="${h.id}">
          <input type="checkbox" ${selectedHolidays.has(h.id) ? 'checked' : ''} onchange="toggleHoliday('${h.id}')">
          <span class="cb-icon">${h.icon}</span>
          <span class="cb-name">${h.name}</span>
          <span class="cb-type">${h.type}</span>
        </label>
      `).join('');
      updateSelectedCount();
    }

    function toggleHoliday(id) {
      if (selectedHolidays.has(id)) {
        selectedHolidays.delete(id);
      } else {
        selectedHolidays.add(id);
      }
      // Update checkbox visual
      const label = document.querySelector(`.holiday-checkbox[data-id="${id}"]`);
      if (label) label.classList.toggle('checked');
      updateSelectedCount();
      updateDisplay();
    }

    function selectAll() {
      selectedHolidays = new Set(allHolidays.map(h => h.id));
      renderSelector();
      updateDisplay();
    }

    function selectNone() {
      selectedHolidays = new Set();
      renderSelector();
      updateDisplay();
    }

    function selectFederal() {
      selectedHolidays = new Set(allHolidays.filter(h => h.federal).map(h => h.id));
      renderSelector();
      updateDisplay();
    }

    function updateSelectedCount() {
      document.getElementById('selected-count').textContent = selectedHolidays.size;
    }

    // Initialize
    renderSelector();
    updateDisplay();
  </script>
<script src="/sloppy-header/sloppy-bar.js"></script>
</body>
</html>
