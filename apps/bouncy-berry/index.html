<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bouncy Berry</title>
  <link rel="icon" href="https://emojicdn.elk.sh/üçì">
  <meta property="og:title" content="Bouncy Berry">
  <meta property="og:description" content="Click the neon strawberry and watch it bounce!">
  <meta property="og:url" content="https://sloppy.live/bouncy-berry">
  <meta property="og:image" content="https://emojicdn.elk.sh/üçì?style=apple&size=512">
  <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'Fredoka', sans-serif;
      background: linear-gradient(135deg, #0a0a1a 0%, #1a0a2e 50%, #0a1a1a 100%);
      min-height: 100vh;
      overflow: hidden;
      cursor: pointer;
    }

    .header {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      text-align: center;
      z-index: 100;
      pointer-events: none;
    }

    .title {
      font-size: 2.5rem;
      font-weight: 700;
      color: #ff3366;
      text-shadow: 0 0 20px #ff3366, 0 0 40px #ff3366;
      margin-bottom: 5px;
    }

    .subtitle {
      font-size: 1rem;
      color: #666;
    }

    .stats {
      position: fixed;
      top: 20px;
      left: 20px;
      z-index: 100;
      pointer-events: none;
    }

    .score {
      font-size: 1.4rem;
      color: #00ff88;
      text-shadow: 0 0 10px #00ff88;
      margin-bottom: 5px;
    }

    .multiplier {
      font-size: 1.1rem;
      color: #ffcc00;
      text-shadow: 0 0 10px #ffcc00;
      opacity: 0;
      transition: opacity 0.3s, transform 0.3s;
    }

    .multiplier.active {
      opacity: 1;
      animation: multiplierPop 0.3s ease-out;
    }

    @keyframes multiplierPop {
      0% { transform: scale(1.5); }
      100% { transform: scale(1); }
    }

    .multiplier-bar {
      width: 100px;
      height: 6px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 3px;
      margin-top: 8px;
      overflow: hidden;
    }

    .multiplier-fill {
      height: 100%;
      background: linear-gradient(90deg, #ffcc00, #ff3366);
      border-radius: 3px;
      transition: width 0.1s linear;
    }

    .strawberry {
      position: fixed;
      font-size: 80px;
      cursor: pointer;
      transition: left 0.4s cubic-bezier(0.34, 1.56, 0.64, 1),
                  top 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
      filter: drop-shadow(0 0 20px #ff3366) drop-shadow(0 0 40px #ff6699);
      user-select: none;
      z-index: 50;
    }

    .strawberry:hover {
      transform: scale(1.1);
    }

    .strawberry.bounce {
      animation: bounce 0.4s ease-out;
    }

    .strawberry.squish {
      animation: squish 0.2s ease-out;
    }

    @keyframes bounce {
      0% { transform: scale(1) translateY(0); }
      30% { transform: scale(1.3, 0.7) translateY(10px); }
      50% { transform: scale(0.8, 1.2) translateY(-20px); }
      70% { transform: scale(1.1, 0.9) translateY(5px); }
      100% { transform: scale(1) translateY(0); }
    }

    @keyframes squish {
      0% { transform: scale(1); }
      50% { transform: scale(1.4, 0.6); }
      100% { transform: scale(1); }
    }

    /* Particle effects */
    .particle {
      position: fixed;
      pointer-events: none;
      font-size: 24px;
      animation: particleFly 0.8s ease-out forwards;
      z-index: 40;
    }

    @keyframes particleFly {
      0% {
        opacity: 1;
        transform: scale(1) translate(0, 0);
      }
      100% {
        opacity: 0;
        transform: scale(0.5) translate(var(--tx), var(--ty));
      }
    }

    /* Glow ring effect */
    .glow-ring {
      position: fixed;
      pointer-events: none;
      border: 3px solid #ff3366;
      border-radius: 50%;
      animation: ringExpand 0.5s ease-out forwards;
      z-index: 30;
    }

    @keyframes ringExpand {
      0% {
        width: 20px;
        height: 20px;
        opacity: 1;
        transform: translate(-50%, -50%) scale(1);
      }
      100% {
        width: 150px;
        height: 150px;
        opacity: 0;
        transform: translate(-50%, -50%) scale(1);
      }
    }

    /* Trail effect */
    .trail {
      position: fixed;
      font-size: 40px;
      pointer-events: none;
      opacity: 0.5;
      filter: drop-shadow(0 0 10px #ff3366) blur(2px);
      animation: trailFade 0.3s ease-out forwards;
      z-index: 20;
    }

    @keyframes trailFade {
      0% { opacity: 0.5; transform: scale(1); }
      100% { opacity: 0; transform: scale(0.5); }
    }

    .back-link {
      position: fixed;
      bottom: 15px;
      right: 15px;
      color: #444;
      text-decoration: none;
      font-size: 0.8rem;
      z-index: 100;
    }

    .back-link:hover { color: #ff3366; }

    .hint {
      position: fixed;
      bottom: 50px;
      left: 50%;
      transform: translateX(-50%);
      color: #444;
      font-size: 0.9rem;
      animation: pulse 2s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 0.5; }
      50% { opacity: 1; }
    }

    .sound-toggle {
      position: fixed;
      top: 20px;
      right: 20px;
      background: rgba(255, 51, 102, 0.2);
      border: 2px solid #ff3366;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      font-size: 1.5rem;
      cursor: pointer;
      transition: all 0.2s;
      z-index: 100;
    }

    .sound-toggle:hover {
      background: rgba(255, 51, 102, 0.4);
      transform: scale(1.1);
    }

    .sound-toggle.muted {
      opacity: 0.5;
    }

    @media (max-width: 600px) {
      .title { font-size: 1.8rem; }
      .strawberry { font-size: 60px; }
    }
  </style>
</head>
<body>
  <div class="header">
    <h1 class="title">üçì BOUNCY BERRY</h1>
    <p class="subtitle">Click the strawberry!</p>
  </div>

  <div class="stats">
    <div class="score">Score: <span id="scoreDisplay">0</span></div>
    <div class="multiplier" id="multiplier">x1</div>
    <div class="multiplier-bar">
      <div class="multiplier-fill" id="multiplierFill" style="width: 0%"></div>
    </div>
  </div>

  <div class="strawberry" id="strawberry">üçì</div>

  <button class="sound-toggle" id="soundToggle">üîä</button>

  <div class="hint" id="hint">Click anywhere to start!</div>

  <a href="https://sloppy.live" class="back-link">‚Üê sloppy.live</a>

  <script>
    const strawberry = document.getElementById('strawberry');
    const scoreDisplay = document.getElementById('scoreDisplay');
    const multiplierEl = document.getElementById('multiplier');
    const multiplierFill = document.getElementById('multiplierFill');
    const soundToggle = document.getElementById('soundToggle');
    const hint = document.getElementById('hint');

    let score = 0;
    let multiplier = 1;
    let comboTimer = 0;
    let lastClickTime = 0;
    const COMBO_DECAY_MS = 1500; // Time before multiplier starts decaying
    const MAX_MULTIPLIER = 10;
    let soundEnabled = true;
    let audioContext = null;

    // Initialize audio context on first interaction
    function initAudio() {
      if (!audioContext) {
        audioContext = new (window.AudioContext || window.webkitAudioContext)();
      }
    }

    // Generate bounce sound
    function playBounceSound() {
      if (!soundEnabled || !audioContext) return;

      // Pop sound
      const osc = audioContext.createOscillator();
      const gain = audioContext.createGain();

      osc.connect(gain);
      gain.connect(audioContext.destination);

      osc.frequency.setValueAtTime(600, audioContext.currentTime);
      osc.frequency.exponentialRampToValueAtTime(200, audioContext.currentTime + 0.15);

      gain.gain.setValueAtTime(0.3, audioContext.currentTime);
      gain.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.15);

      osc.start(audioContext.currentTime);
      osc.stop(audioContext.currentTime + 0.15);

      // Boing sound
      setTimeout(() => {
        const osc2 = audioContext.createOscillator();
        const gain2 = audioContext.createGain();

        osc2.connect(gain2);
        gain2.connect(audioContext.destination);

        osc2.type = 'sine';
        osc2.frequency.setValueAtTime(400, audioContext.currentTime);
        osc2.frequency.exponentialRampToValueAtTime(800, audioContext.currentTime + 0.05);
        osc2.frequency.exponentialRampToValueAtTime(300, audioContext.currentTime + 0.15);

        gain2.gain.setValueAtTime(0.2, audioContext.currentTime);
        gain2.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2);

        osc2.start(audioContext.currentTime);
        osc2.stop(audioContext.currentTime + 0.2);
      }, 50);
    }

    // Update multiplier display and decay
    function updateMultiplier() {
      const now = Date.now();
      const timeSinceClick = now - lastClickTime;

      if (timeSinceClick > COMBO_DECAY_MS && multiplier > 1) {
        // Decay multiplier
        multiplier = Math.max(1, multiplier - 0.05);
        multiplierEl.textContent = 'x' + Math.floor(multiplier);

        if (multiplier <= 1) {
          multiplierEl.classList.remove('active');
        }
      }

      // Update multiplier bar
      const fillPercent = Math.min(100, ((multiplier - 1) / (MAX_MULTIPLIER - 1)) * 100);
      multiplierFill.style.width = fillPercent + '%';

      requestAnimationFrame(updateMultiplier);
    }

    function addScore(points) {
      const now = Date.now();
      const timeSinceClick = now - lastClickTime;

      // If clicking fast enough, increase multiplier
      if (timeSinceClick < 800) {
        multiplier = Math.min(MAX_MULTIPLIER, multiplier + 0.5);
        multiplierEl.classList.remove('active');
        void multiplierEl.offsetWidth; // Trigger reflow
        multiplierEl.classList.add('active');
      }

      lastClickTime = now;
      multiplierEl.textContent = 'x' + Math.floor(multiplier);

      // Add score with multiplier
      const earned = Math.floor(points * multiplier);
      score += earned;
      scoreDisplay.textContent = score;

      return earned;
    }

    // Create particle effect
    function createParticles(x, y) {
      const particles = ['‚ú®', 'üíñ', '‚≠ê', 'üåü', 'üí´'];

      for (let i = 0; i < 6; i++) {
        const particle = document.createElement('div');
        particle.className = 'particle';
        particle.textContent = particles[Math.floor(Math.random() * particles.length)];
        particle.style.left = x + 'px';
        particle.style.top = y + 'px';

        const angle = (i / 6) * Math.PI * 2;
        const distance = 50 + Math.random() * 50;
        particle.style.setProperty('--tx', Math.cos(angle) * distance + 'px');
        particle.style.setProperty('--ty', Math.sin(angle) * distance + 'px');

        document.body.appendChild(particle);

        setTimeout(() => particle.remove(), 800);
      }
    }

    // Create glow ring
    function createGlowRing(x, y) {
      const ring = document.createElement('div');
      ring.className = 'glow-ring';
      ring.style.left = x + 'px';
      ring.style.top = y + 'px';
      document.body.appendChild(ring);

      setTimeout(() => ring.remove(), 500);
    }

    // Create trail
    function createTrail(x, y) {
      const trail = document.createElement('div');
      trail.className = 'trail';
      trail.textContent = 'üçì';
      trail.style.left = x + 'px';
      trail.style.top = y + 'px';
      document.body.appendChild(trail);

      setTimeout(() => trail.remove(), 300);
    }

    // Move strawberry to random position
    function moveStrawberry() {
      const padding = 100;
      const maxX = window.innerWidth - padding;
      const maxY = window.innerHeight - padding;

      const newX = padding + Math.random() * (maxX - padding);
      const newY = padding + Math.random() * (maxY - padding);

      // Get current position for trail
      const rect = strawberry.getBoundingClientRect();
      const currentX = rect.left + rect.width / 2;
      const currentY = rect.top + rect.height / 2;

      // Create trail at old position
      createTrail(currentX - 20, currentY - 20);

      // Move to new position
      strawberry.style.left = newX + 'px';
      strawberry.style.top = newY + 'px';

      return { x: newX + 40, y: newY + 40 };
    }

    // Handle strawberry click
    strawberry.addEventListener('click', (e) => {
      e.stopPropagation();
      initAudio();

      // Hide hint after first click
      if (hint) hint.style.display = 'none';

      // Get current position
      const rect = strawberry.getBoundingClientRect();
      const centerX = rect.left + rect.width / 2;
      const centerY = rect.top + rect.height / 2;

      // Create effects at current position
      createParticles(centerX, centerY);
      createGlowRing(centerX, centerY);

      // Squish animation
      strawberry.classList.remove('bounce');
      strawberry.classList.add('squish');

      setTimeout(() => {
        strawberry.classList.remove('squish');

        // Move to new position
        const newPos = moveStrawberry();

        // Bounce animation at new position
        setTimeout(() => {
          strawberry.classList.add('bounce');
          playBounceSound();
        }, 400);
      }, 200);

      // Update score with multiplier (10 base points for direct hit)
      addScore(10);
    });

    // Click anywhere else to move strawberry
    document.body.addEventListener('click', (e) => {
      if (e.target === strawberry || e.target === soundToggle) return;
      initAudio();

      if (hint) hint.style.display = 'none';

      // Create small effect at click
      createGlowRing(e.clientX, e.clientY);

      // Move strawberry toward click
      const padding = 100;
      const targetX = Math.max(padding, Math.min(e.clientX - 40, window.innerWidth - padding));
      const targetY = Math.max(padding, Math.min(e.clientY - 40, window.innerHeight - padding));

      // Get current position for trail
      const rect = strawberry.getBoundingClientRect();
      createTrail(rect.left, rect.top);

      strawberry.style.left = targetX + 'px';
      strawberry.style.top = targetY + 'px';

      setTimeout(() => {
        strawberry.classList.remove('bounce');
        void strawberry.offsetWidth; // Trigger reflow
        strawberry.classList.add('bounce');
        playBounceSound();
      }, 400);
    });

    // Sound toggle
    soundToggle.addEventListener('click', (e) => {
      e.stopPropagation();
      initAudio();
      soundEnabled = !soundEnabled;
      soundToggle.textContent = soundEnabled ? 'üîä' : 'üîá';
      soundToggle.classList.toggle('muted', !soundEnabled);
    });

    // Initialize strawberry position
    function initPosition() {
      strawberry.style.left = (window.innerWidth / 2 - 40) + 'px';
      strawberry.style.top = (window.innerHeight / 2 - 40) + 'px';
    }

    window.addEventListener('resize', () => {
      // Keep strawberry in bounds on resize
      const rect = strawberry.getBoundingClientRect();
      const padding = 100;

      if (rect.left < padding || rect.left > window.innerWidth - padding ||
          rect.top < padding || rect.top > window.innerHeight - padding) {
        initPosition();
      }
    });

    initPosition();

    // Start multiplier decay loop
    updateMultiplier();
  </script>
<script src="/sloppy-header/sloppy-bar.js"></script>
</body>
</html>
