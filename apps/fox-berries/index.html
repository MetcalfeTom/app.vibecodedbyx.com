<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Berry Plate for Foxes</title>
  <link rel="icon" href="https://emojicdn.elk.sh/ü¶ä">
  <meta property="og:title" content="Berry Plate for Foxes">
  <meta property="og:description" content="A cozy plate of digital berries for hungry foxes">
  <meta property="og:url" content="https://sloppy.live/fox-berries">
  <meta property="og:image" content="https://emojicdn.elk.sh/ü´ê?style=apple&size=512">
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      min-height: 100vh;
      background: linear-gradient(180deg, #2d4a3e 0%, #1a2f26 100%);
      font-family: 'Nunito', sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      overflow: hidden;
    }
    .scene {
      position: relative;
      width: 100vw;
      height: 100vh;
    }
    canvas {
      display: block;
      width: 100%;
      height: 100%;
    }
    .title {
      position: absolute;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 1.5rem;
      color: #f4a460;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
      text-align: center;
      pointer-events: none;
    }
    .berry-count {
      position: absolute;
      top: 60px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 1rem;
      color: #98d8aa;
      pointer-events: none;
    }
    .instructions {
      position: absolute;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 0.8rem;
      color: rgba(255,255,255,0.5);
      text-align: center;
    }
    .back-link {
      position: fixed;
      bottom: 5px;
      right: 10px;
      color: #98d8aa;
      text-decoration: none;
      font-size: 0.7rem;
      opacity: 0.5;
    }
  </style>
</head>
<body>
  <div class="scene">
    <canvas id="canvas"></canvas>
    <div class="title">ü¶ä Berry Plate for Foxes ü´ê</div>
    <div class="berry-count" id="count">Berries: 0</div>
    <div class="instructions">Click to add berries ‚Ä¢ Foxes will come to feast!</div>
  </div>
  <a href="https://sloppy.live" class="back-link">sloppy.live</a>

<script>
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');

let berries = [];
let foxes = [];
let particles = [];
let frameCount = 0;

const BERRY_TYPES = [
  { color: '#8b0a50', highlight: '#c71585', name: 'raspberry' },
  { color: '#4169e1', highlight: '#6495ed', name: 'blueberry' },
  { color: '#dc143c', highlight: '#ff6b6b', name: 'strawberry' },
  { color: '#2e0854', highlight: '#5c2d91', name: 'blackberry' }
];

const plate = {
  x: 0, y: 0,
  width: 300, height: 80
};

function resize() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
  plate.x = canvas.width / 2;
  plate.y = canvas.height / 2 + 50;
}

function addBerry(x, y) {
  const type = BERRY_TYPES[Math.floor(Math.random() * BERRY_TYPES.length)];
  const onPlate = Math.abs(x - plate.x) < plate.width/2 && Math.abs(y - plate.y) < plate.height;
  
  berries.push({
    x: onPlate ? x : plate.x + (Math.random() - 0.5) * plate.width * 0.8,
    y: onPlate ? y : plate.y + (Math.random() - 0.5) * 30,
    size: 12 + Math.random() * 8,
    type,
    wobble: Math.random() * Math.PI * 2,
    scale: 0
  });
  
  // Maybe attract a fox
  if (berries.length > 3 && foxes.length < 3 && Math.random() < 0.3) {
    spawnFox();
  }
  
  updateCount();
}

function spawnFox() {
  const side = Math.random() < 0.5 ? -1 : 1;
  foxes.push({
    x: side < 0 ? -80 : canvas.width + 80,
    y: plate.y + 30,
    targetX: plate.x + (Math.random() - 0.5) * 100,
    direction: side,
    state: 'approaching',
    eatTimer: 0,
    tailWag: 0,
    earTwitch: 0
  });
}

function spawnParticle(x, y, color) {
  for (let i = 0; i < 5; i++) {
    particles.push({
      x, y,
      vx: (Math.random() - 0.5) * 4,
      vy: -Math.random() * 3 - 1,
      size: 3 + Math.random() * 4,
      color,
      alpha: 1
    });
  }
}

function updateBerries() {
  for (const b of berries) {
    b.wobble += 0.05;
    b.scale = Math.min(1, b.scale + 0.1);
  }
}

function updateFoxes() {
  for (let i = foxes.length - 1; i >= 0; i--) {
    const fox = foxes[i];
    fox.tailWag += 0.15;
    fox.earTwitch = Math.sin(frameCount * 0.1 + i) * 0.1;
    
    if (fox.state === 'approaching') {
      const dx = fox.targetX - fox.x;
      fox.x += dx * 0.02;
      fox.direction = dx > 0 ? 1 : -1;
      
      if (Math.abs(dx) < 50) {
        fox.state = 'eating';
        fox.eatTimer = 60 + Math.random() * 60;
      }
    } else if (fox.state === 'eating') {
      fox.eatTimer--;
      
      // Eat a berry
      if (fox.eatTimer % 30 === 0 && berries.length > 0) {
        const closest = berries.reduce((a, b) => 
          Math.abs(a.x - fox.x) < Math.abs(b.x - fox.x) ? a : b
        );
        spawnParticle(closest.x, closest.y, closest.type.color);
        berries = berries.filter(b => b !== closest);
        updateCount();
      }
      
      if (fox.eatTimer <= 0 || berries.length === 0) {
        fox.state = 'leaving';
        fox.targetX = fox.direction < 0 ? -100 : canvas.width + 100;
      }
    } else if (fox.state === 'leaving') {
      fox.x += fox.direction * 2;
      if (fox.x < -100 || fox.x > canvas.width + 100) {
        foxes.splice(i, 1);
      }
    }
  }
}

function updateParticles() {
  for (let i = particles.length - 1; i >= 0; i--) {
    const p = particles[i];
    p.x += p.vx;
    p.y += p.vy;
    p.vy += 0.1;
    p.alpha -= 0.02;
    if (p.alpha <= 0) particles.splice(i, 1);
  }
}

function drawPlate() {
  ctx.save();
  ctx.translate(plate.x, plate.y);
  
  // Plate shadow
  ctx.fillStyle = 'rgba(0,0,0,0.2)';
  ctx.beginPath();
  ctx.ellipse(5, 15, plate.width/2, plate.height/2, 0, 0, Math.PI * 2);
  ctx.fill();
  
  // Plate
  const plateGrad = ctx.createRadialGradient(0, 0, 0, 0, 0, plate.width/2);
  plateGrad.addColorStop(0, '#f5f5dc');
  plateGrad.addColorStop(0.7, '#deb887');
  plateGrad.addColorStop(1, '#d2b48c');
  ctx.fillStyle = plateGrad;
  ctx.beginPath();
  ctx.ellipse(0, 0, plate.width/2, plate.height/2, 0, 0, Math.PI * 2);
  ctx.fill();
  
  // Plate rim
  ctx.strokeStyle = '#c4a67c';
  ctx.lineWidth = 4;
  ctx.stroke();
  
  // Inner circle
  ctx.strokeStyle = 'rgba(139, 119, 101, 0.3)';
  ctx.lineWidth = 2;
  ctx.beginPath();
  ctx.ellipse(0, 0, plate.width/2 - 30, plate.height/2 - 15, 0, 0, Math.PI * 2);
  ctx.stroke();
  
  ctx.restore();
}

function drawBerry(b) {
  ctx.save();
  ctx.translate(b.x, b.y);
  ctx.scale(b.scale, b.scale);
  
  const wobbleX = Math.sin(b.wobble) * 2;
  ctx.translate(wobbleX, 0);
  
  // Berry body
  ctx.fillStyle = b.type.color;
  ctx.beginPath();
  ctx.arc(0, 0, b.size, 0, Math.PI * 2);
  ctx.fill();
  
  // Highlight
  ctx.fillStyle = b.type.highlight;
  ctx.beginPath();
  ctx.arc(-b.size * 0.3, -b.size * 0.3, b.size * 0.3, 0, Math.PI * 2);
  ctx.fill();
  
  // Little bumps for raspberry/blackberry
  if (b.type.name === 'raspberry' || b.type.name === 'blackberry') {
    ctx.fillStyle = b.type.highlight;
    for (let i = 0; i < 6; i++) {
      const angle = (i / 6) * Math.PI * 2;
      ctx.beginPath();
      ctx.arc(Math.cos(angle) * b.size * 0.5, Math.sin(angle) * b.size * 0.5, b.size * 0.25, 0, Math.PI * 2);
      ctx.fill();
    }
  }
  
  // Leaf for strawberry
  if (b.type.name === 'strawberry') {
    ctx.fillStyle = '#228b22';
    ctx.beginPath();
    ctx.moveTo(0, -b.size);
    ctx.lineTo(-5, -b.size - 5);
    ctx.lineTo(0, -b.size + 2);
    ctx.lineTo(5, -b.size - 5);
    ctx.closePath();
    ctx.fill();
  }
  
  ctx.restore();
}

function drawFox(fox) {
  ctx.save();
  ctx.translate(fox.x, fox.y);
  ctx.scale(fox.direction, 1);
  
  // Body
  ctx.fillStyle = '#d35400';
  ctx.beginPath();
  ctx.ellipse(0, 0, 40, 25, 0, 0, Math.PI * 2);
  ctx.fill();
  
  // White belly
  ctx.fillStyle = '#fff5e6';
  ctx.beginPath();
  ctx.ellipse(10, 8, 20, 15, 0, 0, Math.PI * 2);
  ctx.fill();
  
  // Head
  ctx.fillStyle = '#d35400';
  ctx.beginPath();
  ctx.ellipse(45, -10, 25, 20, 0.2, 0, Math.PI * 2);
  ctx.fill();
  
  // Snout
  ctx.fillStyle = '#fff5e6';
  ctx.beginPath();
  ctx.ellipse(65, -5, 12, 10, 0.3, 0, Math.PI * 2);
  ctx.fill();
  
  // Nose
  ctx.fillStyle = '#1a1a1a';
  ctx.beginPath();
  ctx.arc(75, -5, 4, 0, Math.PI * 2);
  ctx.fill();
  
  // Eye
  ctx.fillStyle = '#1a1a1a';
  ctx.beginPath();
  const eyeY = fox.state === 'eating' ? -12 + Math.abs(Math.sin(frameCount * 0.3)) * 3 : -12;
  ctx.ellipse(55, eyeY, 4, fox.state === 'eating' ? 2 : 5, 0, 0, Math.PI * 2);
  ctx.fill();
  
  // Eye shine
  if (fox.state !== 'eating') {
    ctx.fillStyle = '#fff';
    ctx.beginPath();
    ctx.arc(54, -14, 2, 0, Math.PI * 2);
    ctx.fill();
  }
  
  // Ears
  ctx.fillStyle = '#d35400';
  ctx.beginPath();
  ctx.moveTo(35, -25);
  ctx.lineTo(30 + fox.earTwitch * 5, -50);
  ctx.lineTo(45, -30);
  ctx.closePath();
  ctx.fill();
  
  ctx.beginPath();
  ctx.moveTo(50, -25);
  ctx.lineTo(55 - fox.earTwitch * 5, -48);
  ctx.lineTo(60, -28);
  ctx.closePath();
  ctx.fill();
  
  // Inner ears
  ctx.fillStyle = '#ffb366';
  ctx.beginPath();
  ctx.moveTo(37, -28);
  ctx.lineTo(34, -42);
  ctx.lineTo(43, -32);
  ctx.closePath();
  ctx.fill();
  
  // Tail
  ctx.fillStyle = '#d35400';
  const tailWag = Math.sin(fox.tailWag) * 15;
  ctx.beginPath();
  ctx.moveTo(-35, 0);
  ctx.quadraticCurveTo(-60, -20 + tailWag, -70, 10 + tailWag);
  ctx.quadraticCurveTo(-60, 30 + tailWag, -40, 15);
  ctx.closePath();
  ctx.fill();
  
  // Tail tip
  ctx.fillStyle = '#fff5e6';
  ctx.beginPath();
  ctx.arc(-65, 10 + tailWag, 10, 0, Math.PI * 2);
  ctx.fill();
  
  // Legs
  ctx.fillStyle = '#1a1a1a';
  ctx.fillRect(15, 15, 8, 20);
  ctx.fillRect(-10, 15, 8, 20);
  
  ctx.restore();
}

function drawParticles() {
  for (const p of particles) {
    ctx.globalAlpha = p.alpha;
    ctx.fillStyle = p.color;
    ctx.beginPath();
    ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
    ctx.fill();
  }
  ctx.globalAlpha = 1;
}

function drawBackground() {
  // Forest floor gradient
  const floorGrad = ctx.createLinearGradient(0, canvas.height * 0.6, 0, canvas.height);
  floorGrad.addColorStop(0, '#3d5a4c');
  floorGrad.addColorStop(1, '#2d4a3e');
  ctx.fillStyle = floorGrad;
  ctx.fillRect(0, canvas.height * 0.6, canvas.width, canvas.height * 0.4);
  
  // Some grass tufts
  ctx.fillStyle = '#4a7c59';
  for (let i = 0; i < 20; i++) {
    const x = (i / 20) * canvas.width + Math.sin(frameCount * 0.02 + i) * 5;
    const y = canvas.height * 0.65 + (i % 3) * 50;
    ctx.beginPath();
    ctx.moveTo(x, y);
    ctx.lineTo(x - 5, y - 15);
    ctx.lineTo(x, y - 10);
    ctx.lineTo(x + 5, y - 18);
    ctx.lineTo(x + 3, y);
    ctx.closePath();
    ctx.fill();
  }
  
  // Ambient fireflies
  ctx.fillStyle = '#ffffaa';
  for (let i = 0; i < 8; i++) {
    const x = 100 + (i * 100) + Math.sin(frameCount * 0.01 + i * 2) * 30;
    const y = 100 + (i % 3) * 80 + Math.cos(frameCount * 0.015 + i) * 20;
    const alpha = 0.3 + Math.sin(frameCount * 0.1 + i) * 0.3;
    ctx.globalAlpha = alpha;
    ctx.beginPath();
    ctx.arc(x, y, 3, 0, Math.PI * 2);
    ctx.fill();
  }
  ctx.globalAlpha = 1;
}

function render() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  
  drawBackground();
  drawPlate();
  
  // Sort berries by y for depth
  berries.sort((a, b) => a.y - b.y);
  for (const b of berries) drawBerry(b);
  
  drawParticles();
  
  // Sort foxes by y for depth
  foxes.sort((a, b) => a.y - b.y);
  for (const fox of foxes) drawFox(fox);
}

function updateCount() {
  document.getElementById('count').textContent = `Berries: ${berries.length}`;
}

function gameLoop() {
  frameCount++;
  updateBerries();
  updateFoxes();
  updateParticles();
  render();
  requestAnimationFrame(gameLoop);
}

canvas.addEventListener('click', e => {
  const rect = canvas.getBoundingClientRect();
  const x = e.clientX - rect.left;
  const y = e.clientY - rect.top;
  addBerry(x, y);
});

canvas.addEventListener('touchstart', e => {
  e.preventDefault();
  const touch = e.touches[0];
  const rect = canvas.getBoundingClientRect();
  addBerry(touch.clientX - rect.left, touch.clientY - rect.top);
});

window.addEventListener('resize', resize);

// Init with some berries
resize();
for (let i = 0; i < 8; i++) {
  setTimeout(() => {
    addBerry(
      plate.x + (Math.random() - 0.5) * plate.width * 0.7,
      plate.y + (Math.random() - 0.5) * 20
    );
  }, i * 100);
}
gameLoop();
</script>
</body>
</html>
