<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Golden Stopwatch</title>
  <link rel="icon" href="https://emojicdn.elk.sh/üèÜ">
  <meta property="og:title" content="Golden Stopwatch">
  <meta property="og:description" content="Break records with glowing milestones and trophies">
  <meta property="og:url" content="https://sloppy.live/golden-stopwatch">
  <meta property="og:image" content="https://emojicdn.elk.sh/üèÜ?style=apple&size=512">
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Roboto+Mono:wght@400;700&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      min-height: 100vh;
      background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 50%, #1a1a1a 100%);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      font-family: 'Roboto Mono', monospace;
      color: #fff;
      overflow: hidden;
    }

    .container {
      text-align: center;
      position: relative;
    }

    .title {
      font-family: 'Bebas Neue', sans-serif;
      font-size: 1.5rem;
      letter-spacing: 0.3em;
      color: #ffd700;
      text-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
      margin-bottom: 1rem;
    }

    .stopwatch-ring {
      position: relative;
      width: 320px;
      height: 320px;
      margin: 0 auto 2rem;
    }

    .ring-bg {
      position: absolute;
      width: 100%;
      height: 100%;
      border: 8px solid #333;
      border-radius: 50%;
      box-shadow:
        inset 0 0 30px rgba(0, 0, 0, 0.5),
        0 0 20px rgba(255, 215, 0, 0.2);
    }

    .ring-progress {
      position: absolute;
      width: 100%;
      height: 100%;
      border-radius: 50%;
      background: conic-gradient(
        #ffd700 0deg,
        #ffaa00 var(--progress, 0deg),
        transparent var(--progress, 0deg)
      );
      mask: radial-gradient(transparent 55%, black 56%);
      -webkit-mask: radial-gradient(transparent 55%, black 56%);
      filter: drop-shadow(0 0 10px rgba(255, 215, 0, 0.6));
    }

    .time-display {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
    }

    .time {
      font-size: 3.5rem;
      font-weight: 700;
      color: #ffd700;
      text-shadow: 0 0 30px rgba(255, 215, 0, 0.8);
      letter-spacing: 2px;
    }

    .milliseconds {
      font-size: 1.5rem;
      color: #ffaa00;
      opacity: 0.8;
    }

    .milestone-markers {
      position: absolute;
      width: 100%;
      height: 100%;
      pointer-events: none;
    }

    .milestone {
      position: absolute;
      width: 20px;
      height: 20px;
      transform: translate(-50%, -50%);
      font-size: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0.3;
      transition: all 0.3s;
    }

    .milestone.reached {
      opacity: 1;
      transform: translate(-50%, -50%) scale(1.3);
      animation: pulse 0.5s ease-out;
    }

    @keyframes pulse {
      0% { transform: translate(-50%, -50%) scale(1); }
      50% { transform: translate(-50%, -50%) scale(1.8); }
      100% { transform: translate(-50%, -50%) scale(1.3); }
    }

    .controls {
      display: flex;
      gap: 1rem;
      justify-content: center;
      margin-bottom: 1.5rem;
    }

    .btn {
      font-family: 'Bebas Neue', sans-serif;
      font-size: 1.2rem;
      padding: 0.8rem 2rem;
      border: 2px solid #ffd700;
      background: transparent;
      color: #ffd700;
      cursor: pointer;
      letter-spacing: 0.2em;
      transition: all 0.2s;
      min-width: 120px;
    }

    .btn:hover {
      background: #ffd700;
      color: #1a1a1a;
      box-shadow: 0 0 30px rgba(255, 215, 0, 0.5);
    }

    .btn.primary {
      background: linear-gradient(135deg, #ffd700, #ffaa00);
      color: #1a1a1a;
      border: none;
    }

    .btn.primary:hover {
      box-shadow: 0 0 40px rgba(255, 215, 0, 0.8);
    }

    .records {
      background: rgba(255, 215, 0, 0.05);
      border: 1px solid rgba(255, 215, 0, 0.2);
      border-radius: 8px;
      padding: 1rem;
      max-width: 320px;
      margin: 0 auto;
    }

    .records h3 {
      font-family: 'Bebas Neue', sans-serif;
      font-size: 1rem;
      color: #ffd700;
      letter-spacing: 0.2em;
      margin-bottom: 0.5rem;
    }

    .record-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.3rem 0;
      font-size: 0.8rem;
      border-bottom: 1px solid rgba(255, 215, 0, 0.1);
    }

    .record-item:last-child {
      border-bottom: none;
    }

    .record-label {
      color: #888;
    }

    .record-value {
      color: #ffd700;
      font-weight: 700;
    }

    .record-value.new-record {
      animation: glow 1s ease-in-out infinite alternate;
    }

    @keyframes glow {
      from { text-shadow: 0 0 5px #ffd700; }
      to { text-shadow: 0 0 20px #ffd700, 0 0 30px #ffaa00; }
    }

    .celebration {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 100;
    }

    .trophy {
      position: absolute;
      font-size: 3rem;
      animation: trophyFloat 2s ease-out forwards;
      pointer-events: none;
    }

    @keyframes trophyFloat {
      0% {
        opacity: 1;
        transform: translateY(0) scale(1) rotate(0deg);
      }
      100% {
        opacity: 0;
        transform: translateY(-200px) scale(1.5) rotate(20deg);
      }
    }

    .laps {
      position: fixed;
      right: 1rem;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(0, 0, 0, 0.5);
      border: 1px solid rgba(255, 215, 0, 0.2);
      border-radius: 8px;
      padding: 0.8rem;
      max-height: 300px;
      overflow-y: auto;
      min-width: 150px;
    }

    .laps h4 {
      font-family: 'Bebas Neue', sans-serif;
      color: #ffd700;
      letter-spacing: 0.15em;
      margin-bottom: 0.5rem;
      font-size: 0.9rem;
    }

    .lap-item {
      font-size: 0.7rem;
      padding: 0.2rem 0;
      color: #aaa;
      display: flex;
      justify-content: space-between;
    }

    .lap-item.best {
      color: #ffd700;
    }

    .info {
      position: fixed;
      bottom: 0.8rem;
      left: 50%;
      transform: translateX(-50%);
      font-size: 0.55rem;
      color: #444;
    }

    .info a { color: #555; text-decoration: none; }

    @media (max-width: 600px) {
      .laps { display: none; }
      .stopwatch-ring { width: 280px; height: 280px; }
      .time { font-size: 2.8rem; }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="title">üèÜ GOLDEN STOPWATCH üèÜ</div>

    <div class="stopwatch-ring">
      <div class="ring-bg"></div>
      <div class="ring-progress" id="ringProgress"></div>
      <div class="milestone-markers" id="milestones"></div>
      <div class="time-display">
        <div class="time" id="time">00:00</div>
        <div class="milliseconds" id="ms">.000</div>
      </div>
    </div>

    <div class="controls">
      <button class="btn primary" id="startStop">START</button>
      <button class="btn" id="lap">LAP</button>
      <button class="btn" id="reset">RESET</button>
    </div>

    <div class="records">
      <h3>ü•á PERSONAL RECORDS</h3>
      <div class="record-item">
        <span class="record-label">Best Lap</span>
        <span class="record-value" id="bestLap">--:--.---</span>
      </div>
      <div class="record-item">
        <span class="record-label">Longest Run</span>
        <span class="record-value" id="longestRun">--:--.---</span>
      </div>
      <div class="record-item">
        <span class="record-label">Total Laps</span>
        <span class="record-value" id="totalLaps">0</span>
      </div>
    </div>
  </div>

  <div class="laps" id="lapList">
    <h4>üìã LAPS</h4>
    <div id="lapItems"></div>
  </div>

  <div class="celebration" id="celebration"></div>

  <div class="info"><a href="https://sloppy.live">sloppy.live</a></div>

  <script>
    let running = false;
    let startTime = 0;
    let elapsed = 0;
    let lapTimes = [];
    let lastLapTime = 0;
    let animationId = null;

    // Records (persisted in localStorage)
    let records = JSON.parse(localStorage.getItem('goldenStopwatchRecords')) || {
      bestLap: Infinity,
      longestRun: 0,
      totalLaps: 0
    };

    // Milestone markers at 10s, 30s, 1m, 2m, 5m, 10m
    const milestones = [
      { time: 10000, emoji: '‚≠ê', reached: false },
      { time: 30000, emoji: 'üåü', reached: false },
      { time: 60000, emoji: 'üèÖ', reached: false },
      { time: 120000, emoji: 'ü•â', reached: false },
      { time: 300000, emoji: 'ü•à', reached: false },
      { time: 600000, emoji: 'ü•á', reached: false },
    ];

    const celebration = document.getElementById('celebration');
    const milestonesEl = document.getElementById('milestones');

    // Create milestone markers on the ring
    function createMilestoneMarkers() {
      milestonesEl.innerHTML = '';
      const radius = 145;
      const centerX = 160;
      const centerY = 160;

      milestones.forEach((m, i) => {
        // Position around the ring (starting from top, going clockwise)
        const maxTime = 600000; // 10 minutes = full circle
        const angle = (m.time / maxTime) * Math.PI * 2 - Math.PI / 2;
        const x = centerX + Math.cos(angle) * radius;
        const y = centerY + Math.sin(angle) * radius;

        const marker = document.createElement('div');
        marker.className = 'milestone';
        marker.id = `milestone-${i}`;
        marker.style.left = x + 'px';
        marker.style.top = y + 'px';
        marker.textContent = m.emoji;
        milestonesEl.appendChild(marker);
      });
    }

    function formatTime(ms) {
      const minutes = Math.floor(ms / 60000);
      const seconds = Math.floor((ms % 60000) / 1000);
      return `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
    }

    function formatMs(ms) {
      return `.${(ms % 1000).toString().padStart(3, '0')}`;
    }

    function formatFull(ms) {
      const minutes = Math.floor(ms / 60000);
      const seconds = Math.floor((ms % 60000) / 1000);
      const millis = ms % 1000;
      return `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}.${millis.toString().padStart(3, '0')}`;
    }

    function updateDisplay() {
      document.getElementById('time').textContent = formatTime(elapsed);
      document.getElementById('ms').textContent = formatMs(elapsed);

      // Update ring progress (full circle = 10 minutes)
      const progress = Math.min((elapsed / 600000) * 360, 360);
      document.getElementById('ringProgress').style.setProperty('--progress', progress + 'deg');

      // Check milestones
      milestones.forEach((m, i) => {
        if (!m.reached && elapsed >= m.time) {
          m.reached = true;
          const marker = document.getElementById(`milestone-${i}`);
          if (marker) {
            marker.classList.add('reached');
            spawnTrophy(m.emoji);
          }
        }
      });
    }

    function spawnTrophy(emoji) {
      const trophies = ['üèÜ', '‚ú®', emoji, 'üéâ', '‚≠ê'];
      for (let i = 0; i < 5; i++) {
        setTimeout(() => {
          const trophy = document.createElement('div');
          trophy.className = 'trophy';
          trophy.textContent = trophies[i % trophies.length];
          trophy.style.left = (Math.random() * 80 + 10) + '%';
          trophy.style.top = (Math.random() * 30 + 40) + '%';
          celebration.appendChild(trophy);
          setTimeout(() => trophy.remove(), 2000);
        }, i * 100);
      }
    }

    function updateRecordsDisplay() {
      document.getElementById('bestLap').textContent =
        records.bestLap === Infinity ? '--:--.---' : formatFull(records.bestLap);
      document.getElementById('longestRun').textContent =
        records.longestRun === 0 ? '--:--.---' : formatFull(records.longestRun);
      document.getElementById('totalLaps').textContent = records.totalLaps;
    }

    function saveRecords() {
      localStorage.setItem('goldenStopwatchRecords', JSON.stringify(records));
    }

    function tick() {
      if (!running) return;
      elapsed = Date.now() - startTime;
      updateDisplay();
      animationId = requestAnimationFrame(tick);
    }

    function start() {
      if (running) {
        // Stop
        running = false;
        cancelAnimationFrame(animationId);
        document.getElementById('startStop').textContent = 'START';

        // Check longest run record
        if (elapsed > records.longestRun) {
          records.longestRun = elapsed;
          document.getElementById('longestRun').classList.add('new-record');
          spawnTrophy('üèÜ');
          saveRecords();
          updateRecordsDisplay();
        }
      } else {
        // Start
        running = true;
        startTime = Date.now() - elapsed;
        document.getElementById('startStop').textContent = 'STOP';
        tick();
      }
    }

    function lap() {
      if (!running || elapsed === 0) return;

      const lapTime = elapsed - lastLapTime;
      lastLapTime = elapsed;
      lapTimes.push(lapTime);
      records.totalLaps++;

      // Check best lap
      let isBest = false;
      if (lapTime < records.bestLap) {
        records.bestLap = lapTime;
        isBest = true;
        document.getElementById('bestLap').classList.add('new-record');
        spawnTrophy('ü•á');
      }

      saveRecords();
      updateRecordsDisplay();

      // Add to lap list
      const lapItems = document.getElementById('lapItems');
      const lapDiv = document.createElement('div');
      lapDiv.className = 'lap-item' + (isBest ? ' best' : '');
      lapDiv.innerHTML = `
        <span>#${lapTimes.length}</span>
        <span>${formatFull(lapTime)}${isBest ? ' üèÜ' : ''}</span>
      `;
      lapItems.insertBefore(lapDiv, lapItems.firstChild);
    }

    function reset() {
      running = false;
      cancelAnimationFrame(animationId);
      elapsed = 0;
      lastLapTime = 0;
      lapTimes = [];

      // Reset milestones
      milestones.forEach(m => m.reached = false);
      document.querySelectorAll('.milestone').forEach(m => m.classList.remove('reached'));

      document.getElementById('startStop').textContent = 'START';
      document.getElementById('lapItems').innerHTML = '';
      document.getElementById('bestLap').classList.remove('new-record');
      document.getElementById('longestRun').classList.remove('new-record');

      updateDisplay();
    }

    // Event listeners
    document.getElementById('startStop').addEventListener('click', start);
    document.getElementById('lap').addEventListener('click', lap);
    document.getElementById('reset').addEventListener('click', reset);

    // Keyboard shortcuts
    document.addEventListener('keydown', (e) => {
      if (e.code === 'Space') {
        e.preventDefault();
        start();
      } else if (e.code === 'KeyL') {
        lap();
      } else if (e.code === 'KeyR') {
        reset();
      }
    });

    // Initialize
    createMilestoneMarkers();
    updateDisplay();
    updateRecordsDisplay();
  </script>
<script src="/sloppy-header/sloppy-bar.js"></script>
</body>
</html>
