<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>The Void</title>
  <link rel="icon" href="https://emojicdn.elk.sh/ðŸ•³ï¸">
  <meta name="description" content="Enter the void.">
  <meta property="og:title" content="The Void">
  <meta property="og:description" content="Enter the void.">
  <meta property="og:image" content="https://emojicdn.elk.sh/ðŸ•³ï¸?style=google">
  <meta property="og:url" content="https://app.sloppy.live/the-void">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300&display=swap');

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: #000;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      font-family: 'Cormorant Garamond', serif;
      overflow: hidden;
      cursor: none;
    }

    .void {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #000;
      z-index: 10;
    }

    .message {
      position: relative;
      z-index: 20;
      color: #333;
      font-size: 2.5rem;
      font-weight: 300;
      letter-spacing: 0.5em;
      text-transform: lowercase;
      opacity: 0;
      animation: fadeMessage 8s ease-in-out 3s forwards;
    }

    @keyframes fadeMessage {
      0% { opacity: 0; color: #111; }
      50% { opacity: 1; color: #444; }
      100% { opacity: 0.6; color: #222; }
    }

    .enter-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #0a0a0a;
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 100;
      cursor: pointer;
      transition: opacity 2s ease-out;
    }

    .enter-screen.hidden {
      opacity: 0;
      pointer-events: none;
    }

    .enter-text {
      color: #333;
      font-size: 1.2rem;
      letter-spacing: 0.3em;
      text-transform: lowercase;
      animation: pulse 3s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 0.3; }
      50% { opacity: 0.7; }
    }

    .back-link {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      color: #1a1a1a;
      text-decoration: none;
      font-size: 0.7rem;
      letter-spacing: 0.2em;
      z-index: 30;
      opacity: 0;
      animation: showLink 1s ease-in 12s forwards;
      transition: color 0.3s;
    }

    .back-link:hover {
      color: #333;
    }

    @keyframes showLink {
      to { opacity: 1; }
    }
  </style>
</head>
<body>
  <div class="enter-screen" id="enterScreen">
    <span class="enter-text">click to enter</span>
  </div>

  <div class="void"></div>
  <div class="message" id="message">goodbye</div>

  <a href="https://sloppy.live" class="back-link">return</a>

  <script>
    let audioCtx = null;

    function playSomberMusic() {
      audioCtx = new (window.AudioContext || window.webkitAudioContext)();

      // Create a haunting, minimal ambient piece
      function playNote(freq, startTime, duration, volume = 0.1) {
        const osc = audioCtx.createOscillator();
        const gain = audioCtx.createGain();
        const filter = audioCtx.createBiquadFilter();

        osc.type = 'sine';
        osc.frequency.value = freq;

        filter.type = 'lowpass';
        filter.frequency.value = 800;
        filter.Q.value = 1;

        gain.gain.setValueAtTime(0, startTime);
        gain.gain.linearRampToValueAtTime(volume, startTime + duration * 0.3);
        gain.gain.linearRampToValueAtTime(volume * 0.7, startTime + duration * 0.7);
        gain.gain.linearRampToValueAtTime(0, startTime + duration);

        osc.connect(filter);
        filter.connect(gain);
        gain.connect(audioCtx.destination);

        osc.start(startTime);
        osc.stop(startTime + duration);
      }

      // Somber chord progression in A minor
      const notes = [
        // A minor - haunting open
        { freq: 110, time: 0, dur: 8 },      // A2
        { freq: 164.81, time: 0.5, dur: 7 }, // E3
        { freq: 220, time: 1, dur: 6 },      // A3

        // F major - descent
        { freq: 87.31, time: 6, dur: 8 },    // F2
        { freq: 130.81, time: 6.5, dur: 7 }, // C3
        { freq: 174.61, time: 7, dur: 6 },   // F3

        // D minor - sorrow
        { freq: 73.42, time: 12, dur: 8 },   // D2
        { freq: 110, time: 12.5, dur: 7 },   // A2
        { freq: 146.83, time: 13, dur: 6 },  // D3

        // E - resolution to void
        { freq: 82.41, time: 18, dur: 10 },  // E2
        { freq: 123.47, time: 18.5, dur: 9 },// B2
        { freq: 164.81, time: 19, dur: 8 },  // E3

        // Final fade - single low note
        { freq: 55, time: 26, dur: 15 },     // A1 - very low, fading
      ];

      notes.forEach(note => {
        playNote(note.freq, audioCtx.currentTime + note.time, note.dur, 0.08);
      });

      // Add subtle noise texture
      const noiseLength = 40;
      const bufferSize = audioCtx.sampleRate * noiseLength;
      const noiseBuffer = audioCtx.createBuffer(1, bufferSize, audioCtx.sampleRate);
      const output = noiseBuffer.getChannelData(0);

      for (let i = 0; i < bufferSize; i++) {
        output[i] = (Math.random() * 2 - 1) * 0.02;
      }

      const noise = audioCtx.createBufferSource();
      const noiseGain = audioCtx.createGain();
      const noiseFilter = audioCtx.createBiquadFilter();

      noise.buffer = noiseBuffer;
      noiseFilter.type = 'lowpass';
      noiseFilter.frequency.value = 200;

      noiseGain.gain.setValueAtTime(0, audioCtx.currentTime);
      noiseGain.gain.linearRampToValueAtTime(0.03, audioCtx.currentTime + 5);
      noiseGain.gain.linearRampToValueAtTime(0.01, audioCtx.currentTime + 30);
      noiseGain.gain.linearRampToValueAtTime(0, audioCtx.currentTime + 40);

      noise.connect(noiseFilter);
      noiseFilter.connect(noiseGain);
      noiseGain.connect(audioCtx.destination);

      noise.start();
    }

    // Enter the void
    document.getElementById('enterScreen').addEventListener('click', () => {
      document.getElementById('enterScreen').classList.add('hidden');
      playSomberMusic();
    });
  </script>
<script src="/apps/sloppy-header/sloppy-bar.js"></script>
<script src="/vibelib-extended.js"></script>
<script>
  // Compatibility Patch for Legacy Apps
  window.addEventListener("load", () => {
    if (window.SloppyKarma && window.VibeLib.Economy) {
      // Redirect old calls to new engine
      window.SloppyKarma.track = window.VibeLib.Economy.track;
    }
  });
</script>
</body>
</html>
