<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sloppy Slots - Neon Casino</title>
  <link rel="icon" href="https://emojicdn.elk.sh/üé∞">
  <meta property="og:title" content="Sloppy Slots - Neon Casino">
  <meta property="og:description" content="Spin to win Sloppy Coins! Neon slot machine with rainbows and skulls.">
  <meta property="og:url" content="https://app.sloppy.live/sloppy-slots">
  <meta property="og:image" content="https://app.sloppy.live/sloppy-slots/og-image.png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Bungee&family=Share+Tech+Mono&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Share Tech Mono', monospace;
      background: #0a0a0f;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      color: #fff;
    }

    /* Animated background */
    .bg-animation {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background:
        radial-gradient(circle at 20% 80%, rgba(255, 0, 128, 0.15) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(0, 255, 128, 0.15) 0%, transparent 50%),
        radial-gradient(circle at 50% 50%, rgba(128, 0, 255, 0.1) 0%, transparent 70%);
      animation: bgPulse 4s ease-in-out infinite alternate;
      z-index: 0;
    }

    @keyframes bgPulse {
      0% { opacity: 0.5; }
      100% { opacity: 1; }
    }

    .container {
      position: relative;
      z-index: 10;
      text-align: center;
    }

    h1 {
      font-family: 'Bungee', cursive;
      font-size: 3rem;
      background: linear-gradient(135deg, #ff0080, #00ff80, #ff0080);
      background-size: 200% 200%;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      animation: gradientShift 3s ease infinite;
      text-shadow: 0 0 30px rgba(255, 0, 128, 0.5);
      margin-bottom: 10px;
      filter: drop-shadow(0 0 10px #ff0080);
    }

    @keyframes gradientShift {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }

    .subtitle {
      color: #00ff80;
      font-size: 1rem;
      margin-bottom: 20px;
      text-shadow: 0 0 10px #00ff80;
    }

    .balance-display {
      display: flex;
      justify-content: center;
      gap: 30px;
      margin-bottom: 20px;
    }

    .balance-box {
      background: rgba(0, 0, 0, 0.6);
      border: 2px solid #ff0080;
      border-radius: 10px;
      padding: 10px 25px;
      box-shadow: 0 0 20px rgba(255, 0, 128, 0.3), inset 0 0 20px rgba(255, 0, 128, 0.1);
    }

    .balance-label {
      font-size: 0.8rem;
      color: #ff0080;
      text-transform: uppercase;
    }

    .balance-value {
      font-family: 'Bungee', cursive;
      font-size: 1.8rem;
      color: #00ff80;
      text-shadow: 0 0 10px #00ff80;
    }

    .slot-machine {
      background: linear-gradient(145deg, #1a1a2e, #0f0f1a);
      border: 4px solid #ff0080;
      border-radius: 20px;
      padding: 30px;
      box-shadow:
        0 0 40px rgba(255, 0, 128, 0.4),
        0 0 80px rgba(0, 255, 128, 0.2),
        inset 0 0 30px rgba(255, 0, 128, 0.1);
      position: relative;
      overflow: hidden;
    }

    .slot-machine::before {
      content: 'üé∞ SLOPPY SLOTS üé∞';
      position: absolute;
      top: -2px;
      left: 50%;
      transform: translateX(-50%);
      background: linear-gradient(90deg, #ff0080, #00ff80);
      padding: 5px 20px;
      border-radius: 0 0 10px 10px;
      font-family: 'Bungee', cursive;
      font-size: 0.8rem;
      color: #000;
    }

    .reels-container {
      display: flex;
      gap: 10px;
      background: #000;
      padding: 15px;
      border-radius: 15px;
      border: 3px solid #00ff80;
      box-shadow: inset 0 0 30px rgba(0, 255, 128, 0.2);
      margin-top: 20px;
    }

    .reel {
      width: 90px;
      height: 250px;
      background: linear-gradient(180deg, #1a1a2e, #0a0a15, #1a1a2e);
      border-radius: 10px;
      overflow: hidden;
      position: relative;
      border: 2px solid #333;
    }

    .reel::before, .reel::after {
      content: '';
      position: absolute;
      left: 0;
      right: 0;
      height: 60px;
      z-index: 10;
      pointer-events: none;
    }

    .reel::before {
      top: 0;
      background: linear-gradient(180deg, rgba(0,0,0,0.8), transparent);
    }

    .reel::after {
      bottom: 0;
      background: linear-gradient(0deg, rgba(0,0,0,0.8), transparent);
    }

    .reel-strip {
      display: flex;
      flex-direction: column;
      transition: transform 0.1s ease-out;
    }

    .reel-icon {
      width: 90px;
      height: 83px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 3rem;
      text-shadow: 0 0 15px currentColor;
    }

    .win-line {
      position: absolute;
      left: -5px;
      right: -5px;
      top: 50%;
      transform: translateY(-50%);
      height: 85px;
      border: 3px solid #ff0080;
      border-radius: 5px;
      pointer-events: none;
      box-shadow: 0 0 20px #ff0080, inset 0 0 20px rgba(255, 0, 128, 0.2);
      z-index: 20;
    }

    .controls {
      margin-top: 25px;
      display: flex;
      flex-direction: column;
      gap: 15px;
      align-items: center;
    }

    .bet-controls {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .bet-btn {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      border: 2px solid #00ff80;
      background: rgba(0, 255, 128, 0.1);
      color: #00ff80;
      font-size: 1.5rem;
      cursor: pointer;
      transition: all 0.2s;
    }

    .bet-btn:hover {
      background: #00ff80;
      color: #000;
      box-shadow: 0 0 20px #00ff80;
    }

    .bet-amount {
      font-family: 'Bungee', cursive;
      font-size: 1.5rem;
      color: #fff;
      min-width: 80px;
    }

    .spin-btn {
      background: linear-gradient(135deg, #ff0080, #ff00ff);
      border: none;
      padding: 20px 60px;
      font-family: 'Bungee', cursive;
      font-size: 1.5rem;
      color: #fff;
      border-radius: 50px;
      cursor: pointer;
      transition: all 0.2s;
      box-shadow: 0 0 30px rgba(255, 0, 128, 0.5);
      text-transform: uppercase;
      letter-spacing: 3px;
    }

    .spin-btn:hover:not(:disabled) {
      transform: scale(1.05);
      box-shadow: 0 0 50px rgba(255, 0, 128, 0.8);
    }

    .spin-btn:disabled {
      background: #333;
      box-shadow: none;
      cursor: not-allowed;
    }

    .spin-btn.spinning {
      animation: btnPulse 0.3s ease infinite;
    }

    @keyframes btnPulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(0.95); }
    }

    .message {
      margin-top: 20px;
      font-size: 1.2rem;
      min-height: 30px;
      color: #00ff80;
      text-shadow: 0 0 10px #00ff80;
    }

    .message.win {
      color: #ff0;
      text-shadow: 0 0 20px #ff0;
      animation: winPulse 0.5s ease infinite;
    }

    .message.jackpot {
      font-family: 'Bungee', cursive;
      font-size: 2rem;
      background: linear-gradient(90deg, #ff0, #ff0080, #00ff80, #ff0);
      background-size: 300% 300%;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: jackpotShift 0.5s linear infinite;
    }

    @keyframes winPulse {
      0%, 100% { opacity: 1; transform: scale(1); }
      50% { opacity: 0.8; transform: scale(1.05); }
    }

    @keyframes jackpotShift {
      0% { background-position: 0% 50%; }
      100% { background-position: 100% 50%; }
    }

    .paytable {
      margin-top: 20px;
      background: rgba(0, 0, 0, 0.5);
      border: 1px solid #333;
      border-radius: 10px;
      padding: 15px;
      font-size: 0.8rem;
    }

    .paytable-title {
      color: #ff0080;
      margin-bottom: 10px;
      font-weight: bold;
    }

    .paytable-row {
      display: flex;
      justify-content: space-between;
      padding: 5px 0;
      border-bottom: 1px solid #222;
    }

    .paytable-row:last-child {
      border-bottom: none;
    }

    .paytable-icons {
      font-size: 1.2rem;
    }

    .paytable-payout {
      color: #00ff80;
    }

    #back-link {
      position: fixed;
      bottom: 10px;
      color: #333;
      font-size: 0.75rem;
      text-decoration: none;
      z-index: 100;
    }

    #back-link:hover {
      color: #ff0080;
    }

    /* Confetti */
    .confetti {
      position: fixed;
      pointer-events: none;
      z-index: 1000;
      font-size: 2rem;
      animation: confettiFall 3s ease-out forwards;
    }

    @keyframes confettiFall {
      0% { transform: translateY(-100vh) rotate(0deg); opacity: 1; }
      100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
    }

    @media (max-width: 500px) {
      h1 { font-size: 2rem; }
      .reel { width: 70px; height: 200px; }
      .reel-icon { width: 70px; height: 66px; font-size: 2.2rem; }
      .slot-machine { padding: 20px 15px; }
      .spin-btn { padding: 15px 40px; font-size: 1.2rem; }
      .balance-display { flex-direction: column; gap: 10px; }
      .win-line { height: 68px; }
    }
  </style>
</head>
<body>
  <div class="bg-animation"></div>

  <div class="container">
    <h1>üé∞ SLOPPY SLOTS</h1>
    <div class="subtitle">‚ú® Spin to Win Sloppy Coins! ‚ú®</div>

    <div class="balance-display">
      <div class="balance-box">
        <div class="balance-label">Sloppy Coins</div>
        <div class="balance-value" id="balance">1000</div>
      </div>
      <div class="balance-box">
        <div class="balance-label">Total Wins</div>
        <div class="balance-value" id="total-wins">0</div>
      </div>
    </div>

    <div class="slot-machine">
      <div class="reels-container">
        <div class="reel">
          <div class="reel-strip" id="reel-0"></div>
        </div>
        <div class="reel">
          <div class="reel-strip" id="reel-1"></div>
        </div>
        <div class="reel">
          <div class="reel-strip" id="reel-2"></div>
        </div>
        <div class="win-line"></div>
      </div>

      <div class="controls">
        <div class="bet-controls">
          <button class="bet-btn" onclick="changeBet(-10)">-</button>
          <div class="bet-amount">BET: <span id="bet">10</span></div>
          <button class="bet-btn" onclick="changeBet(10)">+</button>
        </div>
        <button class="spin-btn" id="spin-btn" onclick="spin()">üé≤ SPIN üé≤</button>
      </div>

      <div class="message" id="message">Good luck!</div>
    </div>

    <div class="paytable">
      <div class="paytable-title">üíé PAYTABLE üíé</div>
      <div class="paytable-row">
        <span class="paytable-icons">üåàüåàüåà</span>
        <span class="paytable-payout">50x JACKPOT!</span>
      </div>
      <div class="paytable-row">
        <span class="paytable-icons">üíÄüíÄüíÄ</span>
        <span class="paytable-payout">25x</span>
      </div>
      <div class="paytable-row">
        <span class="paytable-icons">üëΩüëΩüëΩ</span>
        <span class="paytable-payout">15x</span>
      </div>
      <div class="paytable-row">
        <span class="paytable-icons">ü¶Ñü¶Ñü¶Ñ</span>
        <span class="paytable-payout">10x</span>
      </div>
      <div class="paytable-row">
        <span class="paytable-icons">üî•üî•üî•</span>
        <span class="paytable-payout">8x</span>
      </div>
      <div class="paytable-row">
        <span class="paytable-icons">‚≠ê‚≠ê‚≠ê</span>
        <span class="paytable-payout">5x</span>
      </div>
      <div class="paytable-row">
        <span class="paytable-icons">Any 2 match</span>
        <span class="paytable-payout">2x</span>
      </div>
    </div>
  </div>

  <a id="back-link" href="https://sloppy.live">sloppy.live</a>

  <script>
    // Slot symbols with weights (lower = rarer)
    const symbols = [
      { icon: 'üåà', name: 'Rainbow', weight: 5, payout: 50 },
      { icon: 'üíÄ', name: 'Skull', weight: 8, payout: 25 },
      { icon: 'üëΩ', name: 'Alien', weight: 10, payout: 15 },
      { icon: 'ü¶Ñ', name: 'Unicorn', weight: 12, payout: 10 },
      { icon: 'üî•', name: 'Fire', weight: 15, payout: 8 },
      { icon: '‚≠ê', name: 'Star', weight: 20, payout: 5 },
      { icon: 'üçÄ', name: 'Clover', weight: 25, payout: 3 },
      { icon: 'üíé', name: 'Diamond', weight: 30, payout: 2 }
    ];

    // Game state
    let balance = parseInt(localStorage.getItem('sloppySlotsBalance') || '1000');
    let totalWins = parseInt(localStorage.getItem('sloppySlotsWins') || '0');
    let bet = 10;
    let spinning = false;
    let reelPositions = [0, 0, 0];
    let reelResults = [0, 0, 0];

    // Audio
    let audioCtx;
    function initAudio() {
      if (!audioCtx) {
        audioCtx = new (window.AudioContext || window.webkitAudioContext)();
      }
    }

    function playSpinSound() {
      if (!audioCtx) return;
      const osc = audioCtx.createOscillator();
      const gain = audioCtx.createGain();
      osc.connect(gain);
      gain.connect(audioCtx.destination);
      osc.frequency.setValueAtTime(200, audioCtx.currentTime);
      osc.frequency.linearRampToValueAtTime(400, audioCtx.currentTime + 0.1);
      gain.gain.setValueAtTime(0.1, audioCtx.currentTime);
      gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.1);
      osc.start();
      osc.stop(audioCtx.currentTime + 0.1);
    }

    function playTickSound() {
      if (!audioCtx) return;
      const osc = audioCtx.createOscillator();
      const gain = audioCtx.createGain();
      osc.type = 'square';
      osc.connect(gain);
      gain.connect(audioCtx.destination);
      osc.frequency.setValueAtTime(800 + Math.random() * 200, audioCtx.currentTime);
      gain.gain.setValueAtTime(0.05, audioCtx.currentTime);
      gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.05);
      osc.start();
      osc.stop(audioCtx.currentTime + 0.05);
    }

    function playWinSound(isJackpot) {
      if (!audioCtx) return;
      const notes = isJackpot ? [523, 659, 784, 1047] : [523, 659, 784];
      notes.forEach((freq, i) => {
        setTimeout(() => {
          const osc = audioCtx.createOscillator();
          const gain = audioCtx.createGain();
          osc.connect(gain);
          gain.connect(audioCtx.destination);
          osc.frequency.setValueAtTime(freq, audioCtx.currentTime);
          gain.gain.setValueAtTime(0.15, audioCtx.currentTime);
          gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
          osc.start();
          osc.stop(audioCtx.currentTime + 0.3);
        }, i * 150);
      });
    }

    function playLoseSound() {
      if (!audioCtx) return;
      const osc = audioCtx.createOscillator();
      const gain = audioCtx.createGain();
      osc.type = 'sawtooth';
      osc.connect(gain);
      gain.connect(audioCtx.destination);
      osc.frequency.setValueAtTime(200, audioCtx.currentTime);
      osc.frequency.linearRampToValueAtTime(100, audioCtx.currentTime + 0.3);
      gain.gain.setValueAtTime(0.1, audioCtx.currentTime);
      gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
      osc.start();
      osc.stop(audioCtx.currentTime + 0.3);
    }

    // Weighted random selection
    function getRandomSymbol() {
      const totalWeight = symbols.reduce((sum, s) => sum + s.weight, 0);
      let random = Math.random() * totalWeight;
      for (const symbol of symbols) {
        random -= symbol.weight;
        if (random <= 0) return symbol;
      }
      return symbols[symbols.length - 1];
    }

    // Initialize reels
    function initReels() {
      for (let i = 0; i < 3; i++) {
        const strip = document.getElementById(`reel-${i}`);
        strip.innerHTML = '';
        // Create enough icons for smooth spinning
        for (let j = 0; j < 20; j++) {
          const icon = document.createElement('div');
          icon.className = 'reel-icon';
          icon.textContent = symbols[j % symbols.length].icon;
          strip.appendChild(icon);
        }
      }
      updateDisplay();
    }

    // Update display
    function updateDisplay() {
      document.getElementById('balance').textContent = balance;
      document.getElementById('total-wins').textContent = totalWins;
      document.getElementById('bet').textContent = bet;
      localStorage.setItem('sloppySlotsBalance', balance.toString());
      localStorage.setItem('sloppySlotsWins', totalWins.toString());
    }

    // Change bet
    function changeBet(amount) {
      bet = Math.max(10, Math.min(100, bet + amount));
      bet = Math.min(bet, balance);
      document.getElementById('bet').textContent = bet;
    }

    // Spin reels
    async function spin() {
      if (spinning || balance < bet) {
        if (balance < bet) {
          setMessage('Not enough Sloppy Coins!', '');
        }
        return;
      }

      initAudio();
      spinning = true;
      balance -= bet;
      updateDisplay();

      const spinBtn = document.getElementById('spin-btn');
      spinBtn.disabled = true;
      spinBtn.classList.add('spinning');
      setMessage('Spinning...', '');

      // Determine results
      reelResults = [getRandomSymbol(), getRandomSymbol(), getRandomSymbol()];

      // Animate each reel
      const spinPromises = [];
      for (let i = 0; i < 3; i++) {
        spinPromises.push(spinReel(i, reelResults[i], 1500 + i * 500));
      }

      await Promise.all(spinPromises);

      // Check for wins
      checkWin();

      spinning = false;
      spinBtn.disabled = false;
      spinBtn.classList.remove('spinning');
    }

    // Spin individual reel
    function spinReel(reelIndex, result, duration) {
      return new Promise(resolve => {
        const strip = document.getElementById(`reel-${reelIndex}`);
        const iconHeight = window.innerWidth <= 500 ? 66 : 83;

        // Rebuild strip with result
        strip.innerHTML = '';
        for (let j = 0; j < 15; j++) {
          const icon = document.createElement('div');
          icon.className = 'reel-icon';
          icon.textContent = symbols[Math.floor(Math.random() * symbols.length)].icon;
          strip.appendChild(icon);
        }
        // Add result icons at end
        for (let j = 0; j < 5; j++) {
          const icon = document.createElement('div');
          icon.className = 'reel-icon';
          icon.textContent = j === 2 ? result.icon : symbols[Math.floor(Math.random() * symbols.length)].icon;
          strip.appendChild(icon);
        }

        let position = 0;
        const targetPosition = iconHeight * 16;
        const startTime = Date.now();

        function animate() {
          const elapsed = Date.now() - startTime;
          const progress = Math.min(elapsed / duration, 1);

          // Easing function (ease out)
          const easeOut = 1 - Math.pow(1 - progress, 3);
          position = easeOut * targetPosition;

          strip.style.transform = `translateY(-${position}px)`;

          if (progress < 1) {
            if (Math.random() < 0.3) playTickSound();
            requestAnimationFrame(animate);
          } else {
            playSpinSound();
            resolve();
          }
        }

        animate();
      });
    }

    // Check for wins
    function checkWin() {
      const icons = reelResults.map(r => r.icon);
      const payouts = reelResults.map(r => r.payout);

      let winAmount = 0;
      let isJackpot = false;
      let message = '';

      // Three of a kind
      if (icons[0] === icons[1] && icons[1] === icons[2]) {
        winAmount = bet * payouts[0];
        isJackpot = reelResults[0].icon === 'üåà';
        message = isJackpot ? 'üåà JACKPOT!!! üåà' : `${icons[0]}${icons[1]}${icons[2]} ${reelResults[0].name} x3!`;
      }
      // Two of a kind
      else if (icons[0] === icons[1] || icons[1] === icons[2] || icons[0] === icons[2]) {
        winAmount = bet * 2;
        message = 'Two of a kind! üéâ';
      }

      if (winAmount > 0) {
        balance += winAmount;
        totalWins += winAmount;
        updateDisplay();
        setMessage(`${message} +${winAmount} coins!`, isJackpot ? 'jackpot' : 'win');
        playWinSound(isJackpot);
        if (isJackpot) spawnConfetti();
      } else {
        setMessage('No win. Try again!', '');
        playLoseSound();
      }
    }

    // Set message
    function setMessage(text, className) {
      const msg = document.getElementById('message');
      msg.textContent = text;
      msg.className = 'message ' + className;
    }

    // Confetti effect
    function spawnConfetti() {
      const emojis = ['üåà', 'üíé', '‚≠ê', '‚ú®', 'üéâ', 'üí∞', 'ü¶Ñ'];
      for (let i = 0; i < 30; i++) {
        setTimeout(() => {
          const confetti = document.createElement('div');
          confetti.className = 'confetti';
          confetti.textContent = emojis[Math.floor(Math.random() * emojis.length)];
          confetti.style.left = Math.random() * 100 + 'vw';
          confetti.style.animationDuration = (2 + Math.random() * 2) + 's';
          document.body.appendChild(confetti);
          setTimeout(() => confetti.remove(), 4000);
        }, i * 100);
      }
    }

    // Initialize
    initReels();

    // Keyboard support
    document.addEventListener('keydown', (e) => {
      if (e.code === 'Space') {
        e.preventDefault();
        spin();
      }
    });
  </script>
<script src="/sloppy-header/sloppy-bar.js"></script>
</body>
</html>
