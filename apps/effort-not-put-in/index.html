<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>EFFORT NOT PUT IN - CANVAS</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      background: #0b1b35;
      color: #fff;
      font-family: Courier, monospace;
      overflow: hidden;
    }
    #ui {
      position: absolute;
      top: 10px;
      left: 10px;
      z-index: 2;
    }
    .back-link {
      position: absolute;
      z-index: 3;
      right: 12px;
      bottom: 10px;
      color: #ffd700;
      text-decoration: none;
      font-weight: bold;
    }
    .back-link:hover { text-shadow: 0 0 8px #ffd700; }
    canvas { display: block; }
    #accessible-ui {
      position: absolute;
      left: -10000px;
      top: auto;
      width: 1px;
      height: 1px;
      overflow: hidden;
    }
  </style>
  <script>
    // Simple, dependency-free canvas UI
    let canvas, ctx;
    let startTime;
    let lastClickTime = 0;
    const state = {
      width: 0,
      height: 0,
      btn: { x: 0, y: 0, w: 0, h: 0, hover: false },
      message: '',
      messageTime: 0,
      unlockedAchievements: new Set(),
    };

    const achievements = {
      "Effortless": { description: "Awarded on first load.", unlocked: false, icon: "‚öì" },
      "The Procrastinator": { description: "Don't click for 1 minute.", unlocked: false, icon: "üßò" },
      "Master of Inaction": { description: "Don't click for 5 minutes.", unlocked: false, icon: "üè¥‚Äç‚ò†Ô∏è" },
      "Deep Meditation": { description: "Embrace the void for 10 minutes.", unlocked: false, icon: "ü™∑" },
      "Zen Master": { description: "Achieve inner peace for 30 minutes.", unlocked: false, icon: "‚òØÔ∏è" },
    };

    function resize() {
      state.width = window.innerWidth;
      state.height = window.innerHeight;
      canvas.width = state.width;
      canvas.height = state.height;
      const bw = Math.min(520, Math.floor(state.width * 0.8));
      const bh = 90;
      state.btn.w = bw;
      state.btn.h = bh;
      state.btn.x = (state.width - bw) / 2;
      state.btn.y = (state.height - bh) / 2;
      draw();
    }

    function drawButton() {
      const { x, y, w, h, hover } = state.btn;
      const r = 18;
      const isSmallScreen = state.width < 600;
      const buttonTextSize = isSmallScreen ? 18 : 26;
      const buttonText = isSmallScreen ? "DO EVERYTHING" : "DO EVERYTHING FOR ME";
      
      ctx.save();
      ctx.shadowColor = hover ? '#00ffee' : '#001f3f';
      ctx.shadowBlur = hover ? 24 : 12;
      ctx.fillStyle = hover ? '#0aa' : '#066';
      roundRect(ctx, x, y, w, h, r, true, false);

      // Border
      ctx.lineWidth = 3;
      ctx.strokeStyle = hover ? '#88ffff' : '#44bbbb';
      roundRect(ctx, x, y, w, h, r, false, true);

      // Text
      ctx.shadowBlur = 0;
      ctx.fillStyle = '#fff';
      ctx.font = `bold ${buttonTextSize}px Courier New, monospace`;
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      ctx.fillText(buttonText, x + w/2, y + h/2);
      ctx.restore();
    }

    function drawHUD() {
      const now = performance.now();
      const elapsedSec = ((now - startTime) / 1000).toFixed(1);
      ctx.fillStyle = '#a0c4ff';
      ctx.font = '16px Courier New, monospace';
      ctx.textAlign = 'left';
      ctx.textBaseline = 'top';
      ctx.fillText(`SESSION: ${elapsedSec}s`, 14, 12);

      if (state.message) {
        ctx.textAlign = 'center';
        ctx.textBaseline = 'bottom';
        ctx.font = 'bold 28px Courier New, monospace';
        ctx.fillStyle = '#ffd700';
        ctx.fillText(state.message, state.width/2, state.btn.y - 20);
        if (now - state.messageTime > 3500) state.message = '';
      }
    }
    
    function drawAchievements() {
      // Responsive font sizing for mobile
      const isSmallScreen = state.width < 600;
      const titleSize = isSmallScreen ? 14 : 18;
      const achievementSize = isSmallScreen ? 12 : 16;
      const iconSize = isSmallScreen ? 16 : 20;
      
      ctx.fillStyle = '#ffd700';
      ctx.font = `bold ${titleSize}px Courier New, monospace`;
      ctx.textAlign = 'left';
      ctx.textBaseline = 'top';
      ctx.fillText("üèÜ ACHIEVEMENTS:", 14, 40);
      
      let yOffset = 40 + titleSize + 8;
      const spacing = achievementSize + 6;
      
      for (const achievementName of state.unlockedAchievements) {
        const achievement = achievements[achievementName];
        if (achievement) {
          // Draw pixel-art style achievement box
          const boxWidth = Math.min(280, state.width - 28);
          const boxHeight = spacing + 8;
          
          // Background box with pixel-art effect
          ctx.fillStyle = '#001133';
          ctx.fillRect(14, yOffset - 4, boxWidth, boxHeight);
          
          // Border effect
          ctx.fillStyle = '#ffd700';
          ctx.fillRect(14, yOffset - 4, boxWidth, 2); // top
          ctx.fillRect(14, yOffset + boxHeight - 6, boxWidth, 2); // bottom
          ctx.fillRect(14, yOffset - 4, 2, boxHeight); // left
          ctx.fillRect(14 + boxWidth - 2, yOffset - 4, 2, boxHeight); // right
          
          // Icon with pixelated effect
          ctx.font = `${iconSize}px monospace`;
          ctx.fillStyle = '#ffffff';
          ctx.fillText(achievement.icon, 20, yOffset);
          
          // Achievement text
          ctx.font = `bold ${achievementSize}px Courier New, monospace`;
          ctx.fillStyle = '#ffd700';
          ctx.fillText(achievementName, 20 + iconSize + 8, yOffset);
          
          yOffset += spacing + 12;
        }
      }
    }

    function checkAchievements() {
        const now = performance.now();
        const elapsedSeconds = (now - startTime) / 1000;
        const newlyUnlocked = [];

        if (!state.unlockedAchievements.has("Effortless")) {
            state.unlockedAchievements.add("Effortless");
            newlyUnlocked.push("Effortless");
        }
        if (elapsedSeconds > 60 && !state.unlockedAchievements.has("The Procrastinator")) {
            state.unlockedAchievements.add("The Procrastinator");
            newlyUnlocked.push("The Procrastinator");
        }
        if (elapsedSeconds > 300 && !state.unlockedAchievements.has("Master of Inaction")) {
            state.unlockedAchievements.add("Master of Inaction");
            newlyUnlocked.push("Master of Inaction");
        }
        if (elapsedSeconds > 600 && !state.unlockedAchievements.has("Deep Meditation")) {
            state.unlockedAchievements.add("Deep Meditation");
            newlyUnlocked.push("Deep Meditation");
        }
        if (elapsedSeconds > 1800 && !state.unlockedAchievements.has("Zen Master")) {
            state.unlockedAchievements.add("Zen Master");
            newlyUnlocked.push("Zen Master");
        }

        if (newlyUnlocked.length > 0) {
            updateAccessibleAchievements(newlyUnlocked);
        }
    }

    function updateAccessibleAchievements(newlyUnlocked) {
        const achievementsList = document.getElementById('achievements-list');
        for (const achievementName of newlyUnlocked) {
            const achievement = achievements[achievementName];
            if (achievement) {
                const listItem = document.createElement('li');
                listItem.textContent = `${achievement.icon} ${achievementName}: ${achievement.description}`;
                achievementsList.appendChild(listItem);
            }
        }
    }

    function draw() {
      ctx.clearRect(0, 0, state.width, state.height);
      // background gradient
      const g = ctx.createLinearGradient(0, 0, state.width, state.height);
      g.addColorStop(0, '#0b1b35');
      g.addColorStop(1, '#0e2a6e');
      ctx.fillStyle = g;
      ctx.fillRect(0, 0, state.width, state.height);

      // title - responsive sizing
      const isSmallScreen = state.width < 600;
      const titleSize = isSmallScreen ? 24 : 36;
      const titleText = isSmallScreen ? 'EFFORT METER' : 'EFFORT NOT PUT IN METER';
      ctx.fillStyle = '#fff';
      ctx.font = `bold ${titleSize}px Courier New, monospace`;
      ctx.textAlign = 'center';
      ctx.textBaseline = 'top';
      ctx.fillText(titleText, state.width/2, 38);

      drawButton();
      drawHUD();
      drawAchievements();
    }

    function animationLoop() {
      checkAchievements();
      draw();
      requestAnimationFrame(animationLoop);
    }

    function roundRect(ctx, x, y, width, height, radius, fill, stroke) {
      if (typeof stroke === 'undefined') { stroke = true; }
      if (typeof radius === 'undefined') { radius = 5; }
      if (typeof radius === 'number') {
        radius = {tl: radius, tr: radius, br: radius, bl: radius};
      } else {
        radius = {tl: radius.tl||0, tr: radius.tr||0, br: radius.br||0, bl: radius.bl||0};
      }
      ctx.beginPath();
      ctx.moveTo(x + radius.tl, y);
      ctx.lineTo(x + width - radius.tr, y);
      ctx.quadraticCurveTo(x + width, y, x + width, y + radius.tr);
      ctx.lineTo(x + width, y + height - radius.br);
      ctx.quadraticCurveTo(x + width, y + height, x + width - radius.br, y + height);
      ctx.lineTo(x + radius.bl, y + height);
      ctx.quadraticCurveTo(x, y + height, x, y + height - radius.bl);
      ctx.lineTo(x, y + radius.tl);
      ctx.quadraticCurveTo(x, y, x + radius.tl, y);
      ctx.closePath();
      if (fill) ctx.fill();
      if (stroke) ctx.stroke();
    }

    function pointerInButton(px, py) {
      const {x, y, w, h} = state.btn;
      return px >= x && px <= x+w && py >= y && py <= y+h;
    }

    function computeEffortNotPutIn() {
      return -Infinity;
    }

    function showResult() {
      const value = computeEffortNotPutIn();
      state.message = `EFFORT NOT PUT IN: ${value}`;
      state.messageTime = performance.now();
      draw();
    }

    function onMove(e) {
      const rect = canvas.getBoundingClientRect();
      const x = (e.touches ? e.touches[0].clientX : e.clientX) - rect.left;
      const y = (e.touches ? e.touches[0].clientY : e.clientY) - rect.top;
      const hovering = pointerInButton(x, y);
      if (hovering !== state.btn.hover) {
        state.btn.hover = hovering;
        draw();
      }
    }

    function onClick(e) {
      const rect = canvas.getBoundingClientRect();
      const x = (e.touches ? e.touches[0].clientX : e.clientX) - rect.left;
      const y = (e.touches ? e.touches[0].clientY : e.clientY) - rect.top;
      if (pointerInButton(x, y)) {
        lastClickTime = performance.now();
        showResult();
      }
    }

    window.addEventListener('load', () => {
      canvas = document.getElementById('canvas');
      ctx = canvas.getContext('2d');
      startTime = performance.now();
      
      const accessibleButton = document.getElementById('accessible-button');
      accessibleButton.addEventListener('click', () => {
          lastClickTime = performance.now();
          showResult();
      });

      resize();
      window.addEventListener('resize', resize);
      canvas.addEventListener('mousemove', onMove);
      canvas.addEventListener('touchmove', onMove, {passive: true});
      canvas.addEventListener('click', onClick);
      canvas.addEventListener('touchstart', onClick, {passive: true});
      animationLoop();
    });
  </script>
</head>
<body>
  <div id="ui-container">
    <canvas id="canvas" role="application"></canvas>
    <div id="accessible-ui">
      <h1 aria-live="polite">EFFORT NOT PUT IN METER</h1>
      <p>An interactive art piece. You are rewarded for not interacting with the application. The less you do, the more you achieve.</p>
      <button id="accessible-button">Do Everything For Me</button>
      <div id="accessible-achievements" aria-live="polite">
        <h2>Unlocked Achievements</h2>
        <ul id="achievements-list">
        </ul>
      </div>
    </div>
  </div>
  <a class="back-link" href="/">‚öì RETURN TO HARBOR (MAIN INDEX)</a>
</body>
</html>