<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ping Payload - POST Request Tester</title>
  <link rel="icon" href="https://emojicdn.elk.sh/ðŸ“¡">
  <meta name="description" content="Send JSON POST requests and view responses instantly.">
  <meta property="og:title" content="Ping Payload">
  <meta property="og:description" content="Send JSON POST requests to any URL and see the response.">
  <meta property="og:url" content="https://sloppy.live/ping-payload">
  <meta property="og:image" content="https://sloppy.live/ping-payload/og-image.png">
  <meta property="og:type" content="website">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&family=IBM+Plex+Sans:wght@400;500;600&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    :root {
      --bg: #0d1117;
      --surface: #161b22;
      --border: #30363d;
      --text: #c9d1d9;
      --text-dim: #8b949e;
      --accent: #58a6ff;
      --success: #3fb950;
      --warning: #d29922;
      --error: #f85149;
    }
    body {
      background: var(--bg);
      color: var(--text);
      font-family: 'IBM Plex Sans', sans-serif;
      min-height: 100vh;
      line-height: 1.5;
    }
    .container {
      max-width: 800px;
      margin: 0 auto;
      padding: 40px 20px;
    }
    header {
      margin-bottom: 40px;
    }
    h1 {
      font-size: 28px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 8px;
    }
    h1 span {
      font-size: 24px;
    }
    .subtitle {
      color: var(--text-dim);
      font-size: 14px;
    }
    .card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 20px;
    }
    label {
      display: block;
      font-size: 12px;
      font-weight: 500;
      color: var(--text-dim);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 8px;
    }
    input[type="text"] {
      width: 100%;
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: 6px;
      padding: 12px 14px;
      color: var(--text);
      font-family: 'JetBrains Mono', monospace;
      font-size: 14px;
      outline: none;
      transition: border-color 0.2s;
    }
    input[type="text"]:focus {
      border-color: var(--accent);
    }
    input[type="text"]::placeholder {
      color: var(--text-dim);
    }
    textarea {
      width: 100%;
      min-height: 150px;
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: 6px;
      padding: 12px 14px;
      color: var(--text);
      font-family: 'JetBrains Mono', monospace;
      font-size: 13px;
      line-height: 1.6;
      outline: none;
      resize: vertical;
      transition: border-color 0.2s;
    }
    textarea:focus {
      border-color: var(--accent);
    }
    .row {
      display: flex;
      gap: 12px;
      margin-bottom: 16px;
    }
    .row .field {
      flex: 1;
    }
    .actions {
      display: flex;
      gap: 12px;
      margin-top: 20px;
    }
    button {
      background: var(--accent);
      color: #fff;
      border: none;
      border-radius: 6px;
      padding: 12px 24px;
      font-family: 'IBM Plex Sans', sans-serif;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: opacity 0.2s, transform 0.1s;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    button:hover {
      opacity: 0.9;
    }
    button:active {
      transform: scale(0.98);
    }
    button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    button.secondary {
      background: var(--border);
      color: var(--text);
    }
    .response-card {
      display: none;
    }
    .response-card.visible {
      display: block;
    }
    .response-header {
      display: flex;
      align-items: center;
      gap: 16px;
      margin-bottom: 16px;
      flex-wrap: wrap;
    }
    .status-badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 12px;
      border-radius: 20px;
      font-family: 'JetBrains Mono', monospace;
      font-size: 14px;
      font-weight: 500;
    }
    .status-badge.success {
      background: rgba(63, 185, 80, 0.15);
      color: var(--success);
    }
    .status-badge.redirect {
      background: rgba(210, 153, 34, 0.15);
      color: var(--warning);
    }
    .status-badge.error {
      background: rgba(248, 81, 73, 0.15);
      color: var(--error);
    }
    .status-badge.info {
      background: rgba(88, 166, 255, 0.15);
      color: var(--accent);
    }
    .timing {
      font-family: 'JetBrains Mono', monospace;
      font-size: 13px;
      color: var(--text-dim);
    }
    .timing strong {
      color: var(--text);
    }
    .response-body {
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: 6px;
      padding: 14px;
      font-family: 'JetBrains Mono', monospace;
      font-size: 12px;
      line-height: 1.6;
      max-height: 400px;
      overflow: auto;
      white-space: pre-wrap;
      word-break: break-word;
    }
    .error-message {
      color: var(--error);
      padding: 16px;
      background: rgba(248, 81, 73, 0.1);
      border-radius: 6px;
      font-size: 14px;
    }
    .presets {
      display: flex;
      gap: 8px;
      margin-bottom: 12px;
      flex-wrap: wrap;
    }
    .preset-btn {
      background: var(--bg);
      border: 1px solid var(--border);
      color: var(--text-dim);
      padding: 6px 12px;
      font-size: 12px;
      border-radius: 4px;
      cursor: pointer;
      transition: all 0.2s;
    }
    .preset-btn:hover {
      border-color: var(--accent);
      color: var(--accent);
    }
    .backlink {
      display: block;
      text-align: center;
      margin-top: 40px;
      color: var(--text-dim);
      font-size: 12px;
      text-decoration: none;
    }
    .backlink:hover {
      color: var(--accent);
    }
    .loader {
      width: 16px;
      height: 16px;
      border: 2px solid transparent;
      border-top-color: currentColor;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    .content-type-row {
      display: flex;
      gap: 12px;
      align-items: center;
      margin-bottom: 16px;
    }
    .content-type-row select {
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: 6px;
      padding: 8px 12px;
      color: var(--text);
      font-family: 'JetBrains Mono', monospace;
      font-size: 12px;
      outline: none;
    }
    .method-select {
      min-width: 100px;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1><span>ðŸ“¡</span> Ping Payload</h1>
      <p class="subtitle">Send HTTP requests with JSON payloads and inspect responses</p>
    </header>

    <div class="card">
      <div class="row">
        <div class="field" style="flex: 0 0 100px;">
          <label>Method</label>
          <select id="method" class="method-select" style="width:100%;padding:12px;background:var(--bg);border:1px solid var(--border);border-radius:6px;color:var(--text);font-family:'JetBrains Mono',monospace;font-size:14px;">
            <option value="POST">POST</option>
            <option value="PUT">PUT</option>
            <option value="PATCH">PATCH</option>
            <option value="DELETE">DELETE</option>
          </select>
        </div>
        <div class="field">
          <label>URL</label>
          <input type="text" id="url" placeholder="https://httpbin.org/post">
        </div>
      </div>

      <label>JSON Payload</label>
      <div class="presets">
        <button class="preset-btn" data-preset="empty">Empty {}</button>
        <button class="preset-btn" data-preset="sample">Sample Data</button>
        <button class="preset-btn" data-preset="ping">Ping</button>
      </div>
      <textarea id="payload" placeholder='{"key": "value"}'>{
  "message": "Hello from Ping Payload!",
  "timestamp": ""
}</textarea>

      <div class="actions">
        <button id="sendBtn">
          <span>Send Request</span>
        </button>
        <button id="clearBtn" class="secondary">Clear</button>
      </div>
    </div>

    <div class="card response-card" id="responseCard">
      <label>Response</label>
      <div class="response-header">
        <div class="status-badge" id="statusBadge">200 OK</div>
        <div class="timing" id="timing">Time: <strong>0ms</strong></div>
      </div>
      <div class="response-body" id="responseBody"></div>
    </div>

    <a href="https://sloppy.live" class="backlink">sloppy.live</a>
  </div>

  <script>
    const urlInput = document.getElementById('url');
    const methodSelect = document.getElementById('method');
    const payloadInput = document.getElementById('payload');
    const sendBtn = document.getElementById('sendBtn');
    const clearBtn = document.getElementById('clearBtn');
    const responseCard = document.getElementById('responseCard');
    const statusBadge = document.getElementById('statusBadge');
    const timing = document.getElementById('timing');
    const responseBody = document.getElementById('responseBody');

    // Presets
    const presets = {
      empty: '{}',
      sample: JSON.stringify({
        message: "Hello from Ping Payload!",
        user: { name: "Test User", id: 123 },
        items: ["one", "two", "three"],
        active: true
      }, null, 2),
      ping: JSON.stringify({
        ping: "pong",
        timestamp: new Date().toISOString()
      }, null, 2)
    };

    document.querySelectorAll('.preset-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        const preset = btn.dataset.preset;
        if (presets[preset]) {
          payloadInput.value = presets[preset];
        }
      });
    });

    // Update timestamp in default payload
    function updateTimestamp() {
      const payload = payloadInput.value;
      if (payload.includes('"timestamp": ""')) {
        payloadInput.value = payload.replace('"timestamp": ""', `"timestamp": "${new Date().toISOString()}"`);
      }
    }

    // Send request
    async function sendRequest() {
      const url = urlInput.value.trim();
      if (!url) {
        showError('Please enter a URL');
        return;
      }

      // Validate JSON
      let payload;
      try {
        payload = JSON.parse(payloadInput.value);
      } catch (e) {
        showError('Invalid JSON: ' + e.message);
        return;
      }

      // Update button state
      sendBtn.disabled = true;
      sendBtn.innerHTML = '<div class="loader"></div><span>Sending...</span>';

      const startTime = performance.now();

      try {
        const response = await fetch(url, {
          method: methodSelect.value,
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(payload),
          mode: 'cors'
        });

        const endTime = performance.now();
        const duration = Math.round(endTime - startTime);

        // Get response text
        let responseText;
        const contentType = response.headers.get('content-type') || '';

        try {
          if (contentType.includes('application/json')) {
            const json = await response.json();
            responseText = JSON.stringify(json, null, 2);
          } else {
            responseText = await response.text();
          }
        } catch (e) {
          responseText = '[Could not parse response body]';
        }

        showResponse(response.status, response.statusText, duration, responseText);

      } catch (error) {
        const endTime = performance.now();
        const duration = Math.round(endTime - startTime);

        showError(`Request failed: ${error.message}`, duration);
      } finally {
        sendBtn.disabled = false;
        sendBtn.innerHTML = '<span>Send Request</span>';
      }
    }

    function showResponse(status, statusText, duration, body) {
      responseCard.classList.add('visible');

      // Status badge
      statusBadge.textContent = `${status} ${statusText}`;
      statusBadge.className = 'status-badge';

      if (status >= 200 && status < 300) {
        statusBadge.classList.add('success');
      } else if (status >= 300 && status < 400) {
        statusBadge.classList.add('redirect');
      } else if (status >= 400) {
        statusBadge.classList.add('error');
      } else {
        statusBadge.classList.add('info');
      }

      timing.innerHTML = `Time: <strong>${duration}ms</strong>`;
      responseBody.textContent = body;
      responseBody.className = 'response-body';
    }

    function showError(message, duration = null) {
      responseCard.classList.add('visible');
      statusBadge.textContent = 'Error';
      statusBadge.className = 'status-badge error';
      timing.innerHTML = duration ? `Time: <strong>${duration}ms</strong>` : '';
      responseBody.innerHTML = `<div class="error-message">${message}</div>`;
    }

    // Event listeners
    sendBtn.addEventListener('click', () => {
      updateTimestamp();
      sendRequest();
    });

    clearBtn.addEventListener('click', () => {
      responseCard.classList.remove('visible');
      payloadInput.value = presets.sample;
    });

    // Allow Ctrl+Enter to send
    payloadInput.addEventListener('keydown', (e) => {
      if (e.ctrlKey && e.key === 'Enter') {
        updateTimestamp();
        sendRequest();
      }
    });

    urlInput.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') {
        updateTimestamp();
        sendRequest();
      }
    });

    // Set default URL
    urlInput.value = 'https://httpbin.org/post';
  </script>
<script src="/sloppy-header/sloppy-bar.js"></script>
</body>
</html>
