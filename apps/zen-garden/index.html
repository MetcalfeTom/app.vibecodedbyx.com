<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Zen Garden</title>
  <link rel="icon" href="https://emojicdn.elk.sh/ðŸª·">
  <meta property="og:title" content="Zen Garden">
  <meta property="og:description" content="Meditate with slow drifting geometric shapes">
  <meta property="og:url" content="https://sloppy.live/zen-garden">
  <meta property="og:image" content="https://emojicdn.elk.sh/ðŸª·?style=apple&size=512">
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      min-height: 100vh;
      background: #f5f2eb;
      overflow: hidden;
      font-family: 'Cormorant Garamond', serif;
      cursor: default;
    }

    canvas {
      display: block;
    }

    .title {
      position: fixed;
      top: 2rem;
      left: 50%;
      transform: translateX(-50%);
      font-size: 1.2rem;
      font-weight: 300;
      color: #8b8578;
      letter-spacing: 0.5em;
      text-transform: uppercase;
      opacity: 0.6;
      pointer-events: none;
    }

    .hint {
      position: fixed;
      bottom: 3rem;
      left: 50%;
      transform: translateX(-50%);
      font-size: 0.85rem;
      color: #a8a093;
      letter-spacing: 0.2em;
      opacity: 0;
      animation: fadeIn 3s ease-out 2s forwards;
      pointer-events: none;
    }

    @keyframes fadeIn {
      to { opacity: 0.6; }
    }

    .info {
      position: fixed;
      bottom: 1rem;
      left: 50%;
      transform: translateX(-50%);
      font-size: 0.65rem;
      color: #c4bfb4;
      letter-spacing: 0.1em;
    }

    .info a { color: #b8b3a6; text-decoration: none; }

    .controls {
      position: fixed;
      top: 2rem;
      right: 2rem;
      display: flex;
      gap: 1rem;
      opacity: 0;
      transition: opacity 0.5s;
    }

    body:hover .controls {
      opacity: 0.5;
    }

    .controls:hover {
      opacity: 1 !important;
    }

    .btn {
      font-family: 'Cormorant Garamond', serif;
      font-size: 0.75rem;
      padding: 0.5rem 1rem;
      background: transparent;
      border: 1px solid #c4bfb4;
      color: #8b8578;
      cursor: pointer;
      letter-spacing: 0.15em;
      transition: all 0.3s;
    }

    .btn:hover {
      background: #8b8578;
      color: #f5f2eb;
    }
  </style>
</head>
<body>
  <canvas id="canvas"></canvas>

  <div class="title">Zen Garden</div>

  <div class="controls">
    <button class="btn" id="addShape">+ shape</button>
    <button class="btn" id="clearAll">clear</button>
  </div>

  <div class="hint">click to add a shape</div>

  <div class="info"><a href="https://sloppy.live">sloppy.live</a></div>

  <script>
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');

    let width = canvas.width = window.innerWidth;
    let height = canvas.height = window.innerHeight;

    // Muted retro palette
    const colors = [
      '#c9b99a', // sand
      '#a39382', // stone
      '#8b9a8b', // sage
      '#9a8b8b', // mauve
      '#8b8b9a', // slate
      '#b8a088', // terracotta
      '#7d8878', // moss
      '#988b7d', // clay
    ];

    const shapes = [];
    const MAX_SHAPES = 25;

    class Shape {
      constructor(x, y) {
        this.x = x || Math.random() * width;
        this.y = y || Math.random() * height;
        this.size = 30 + Math.random() * 80;
        this.color = colors[Math.floor(Math.random() * colors.length)];
        this.type = Math.floor(Math.random() * 5); // 0-4 shape types
        this.rotation = Math.random() * Math.PI * 2;
        this.rotationSpeed = (Math.random() - 0.5) * 0.002;

        // Slow drift
        this.vx = (Math.random() - 0.5) * 0.3;
        this.vy = (Math.random() - 0.5) * 0.3;

        // Gentle oscillation
        this.oscillateX = Math.random() * Math.PI * 2;
        this.oscillateY = Math.random() * Math.PI * 2;
        this.oscillateSpeed = 0.005 + Math.random() * 0.01;
        this.oscillateAmount = 10 + Math.random() * 20;

        this.opacity = 0;
        this.targetOpacity = 0.15 + Math.random() * 0.25;
        this.fadeSpeed = 0.005;

        // Breathing effect
        this.breathe = Math.random() * Math.PI * 2;
        this.breatheSpeed = 0.01 + Math.random() * 0.01;
        this.breatheAmount = 0.05;
      }

      update() {
        // Fade in
        if (this.opacity < this.targetOpacity) {
          this.opacity += this.fadeSpeed;
        }

        // Slow drift
        this.x += this.vx;
        this.y += this.vy;

        // Gentle oscillation
        this.oscillateX += this.oscillateSpeed;
        this.oscillateY += this.oscillateSpeed * 0.7;

        // Slow rotation
        this.rotation += this.rotationSpeed;

        // Breathing
        this.breathe += this.breatheSpeed;

        // Soft boundary wrapping
        const margin = this.size * 2;
        if (this.x < -margin) this.x = width + margin;
        if (this.x > width + margin) this.x = -margin;
        if (this.y < -margin) this.y = height + margin;
        if (this.y > height + margin) this.y = -margin;
      }

      draw() {
        const ox = Math.sin(this.oscillateX) * this.oscillateAmount;
        const oy = Math.cos(this.oscillateY) * this.oscillateAmount;
        const breatheScale = 1 + Math.sin(this.breathe) * this.breatheAmount;

        ctx.save();
        ctx.translate(this.x + ox, this.y + oy);
        ctx.rotate(this.rotation);
        ctx.scale(breatheScale, breatheScale);
        ctx.globalAlpha = this.opacity;

        ctx.strokeStyle = this.color;
        ctx.lineWidth = 1.5;
        ctx.fillStyle = this.color;

        const s = this.size;

        switch (this.type) {
          case 0: // Circle
            ctx.beginPath();
            ctx.arc(0, 0, s / 2, 0, Math.PI * 2);
            ctx.stroke();
            break;

          case 1: // Square
            ctx.strokeRect(-s / 2, -s / 2, s, s);
            break;

          case 2: // Triangle
            ctx.beginPath();
            ctx.moveTo(0, -s / 2);
            ctx.lineTo(s / 2, s / 2);
            ctx.lineTo(-s / 2, s / 2);
            ctx.closePath();
            ctx.stroke();
            break;

          case 3: // Diamond
            ctx.beginPath();
            ctx.moveTo(0, -s / 2);
            ctx.lineTo(s / 2, 0);
            ctx.lineTo(0, s / 2);
            ctx.lineTo(-s / 2, 0);
            ctx.closePath();
            ctx.stroke();
            break;

          case 4: // Concentric circles
            for (let i = 3; i > 0; i--) {
              ctx.beginPath();
              ctx.arc(0, 0, (s / 2) * (i / 3), 0, Math.PI * 2);
              ctx.stroke();
            }
            break;
        }

        ctx.restore();
      }
    }

    // Initialize with some shapes
    function init() {
      for (let i = 0; i < 8; i++) {
        shapes.push(new Shape());
      }
    }

    function addShape(x, y) {
      if (shapes.length >= MAX_SHAPES) {
        shapes.shift(); // Remove oldest
      }
      shapes.push(new Shape(x, y));
    }

    function draw() {
      // Soft background
      ctx.fillStyle = '#f5f2eb';
      ctx.fillRect(0, 0, width, height);

      // Subtle texture
      ctx.globalAlpha = 0.02;
      for (let i = 0; i < 50; i++) {
        const x = (i * 173) % width;
        const y = (i * 137) % height;
        ctx.fillStyle = '#8b8578';
        ctx.fillRect(x, y, 1, 1);
      }
      ctx.globalAlpha = 1;

      // Update and draw shapes
      for (const shape of shapes) {
        shape.update();
        shape.draw();
      }
    }

    function animate() {
      draw();
      requestAnimationFrame(animate);
    }

    // Click to add shape
    canvas.addEventListener('click', (e) => {
      addShape(e.clientX, e.clientY);
    });

    // Touch support
    canvas.addEventListener('touchstart', (e) => {
      e.preventDefault();
      addShape(e.touches[0].clientX, e.touches[0].clientY);
    });

    // Controls
    document.getElementById('addShape').addEventListener('click', (e) => {
      e.stopPropagation();
      addShape(
        width * 0.3 + Math.random() * width * 0.4,
        height * 0.3 + Math.random() * height * 0.4
      );
    });

    document.getElementById('clearAll').addEventListener('click', (e) => {
      e.stopPropagation();
      shapes.length = 0;
    });

    window.addEventListener('resize', () => {
      width = canvas.width = window.innerWidth;
      height = canvas.height = window.innerHeight;
    });

    // Start
    init();
    animate();
  </script>
</body>
</html>
