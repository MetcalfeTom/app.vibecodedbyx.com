<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Creature Catcher - Retro Monster Adventure</title>
    <link rel="icon" href="https://emojicdn.elk.sh/üéÆ">

    <meta property="og:title" content="Creature Catcher">
    <meta property="og:description" content="Explore, encounter, and catch wild creatures in this retro adventure">
    <meta property="og:url" content="https://app.sloppy.live/pokemon-clone">
    <meta property="og:image" content="https://app.sloppy.live/pokemon-clone/og-image.png">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Press Start 2P', 'Courier New', monospace;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            color: #fff;
        }

        .back-link {
            color: white;
            text-decoration: none;
            padding: 8px 16px;
            background: rgba(255,255,255,0.2);
            border-radius: 8px;
            font-size: 12px;
            margin-bottom: 15px;
            display: inline-block;
        }

        .back-link:hover {
            background: rgba(255,255,255,0.3);
        }

        h1 {
            font-size: 1.5rem;
            margin-bottom: 20px;
            text-align: center;
            text-shadow: 3px 3px 0 rgba(0,0,0,0.3);
        }

        .game-container {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
            max-width: 800px;
            width: 100%;
        }

        #gameCanvas {
            display: block;
            border: 4px solid #333;
            background: #87ceeb;
            image-rendering: pixelated;
            image-rendering: crisp-edges;
            margin: 0 auto;
            max-width: 100%;
        }

        .ui-panel {
            background: #f8f9fa;
            border: 3px solid #333;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
            color: #333;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin-bottom: 15px;
        }

        .stat-item {
            background: white;
            border: 2px solid #333;
            border-radius: 4px;
            padding: 8px;
            font-size: 10px;
        }

        .stat-label {
            color: #667eea;
            margin-bottom: 4px;
        }

        .stat-value {
            font-size: 14px;
            font-weight: bold;
        }

        .controls {
            background: white;
            border: 2px solid #333;
            border-radius: 4px;
            padding: 10px;
            font-size: 10px;
            line-height: 1.6;
        }

        .button-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin: 10px 0;
        }

        button {
            padding: 12px;
            font-size: 12px;
            font-weight: bold;
            border: 3px solid #333;
            border-radius: 8px;
            cursor: pointer;
            background: #4caf50;
            color: white;
            transition: all 0.2s;
            font-family: 'Press Start 2P', monospace;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        button:active {
            transform: translateY(0);
        }

        .btn-danger {
            background: #f44336;
        }

        .btn-primary {
            background: #2196f3;
        }

        .message-box {
            background: white;
            border: 3px solid #333;
            border-radius: 4px;
            padding: 12px;
            margin-top: 10px;
            min-height: 60px;
            font-size: 10px;
            line-height: 1.5;
            color: #333;
        }

        .creatures-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 8px;
            margin-top: 10px;
        }

        .creature-card {
            background: white;
            border: 2px solid #333;
            border-radius: 4px;
            padding: 8px;
            text-align: center;
            font-size: 8px;
        }

        .creature-card .emoji {
            font-size: 24px;
            margin-bottom: 4px;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 1rem;
            }

            .stat-item {
                font-size: 8px;
            }

            .stat-value {
                font-size: 12px;
            }

            button {
                padding: 10px;
                font-size: 10px;
            }
        }
    </style>
</head>
<body>
    <a href="https://sloppy.live" class="back-link">‚Üê Back</a>
            <a href="https://app.sloppy.live/overview" style="color:#4ecdc4;text-decoration:none;margin-left:10px">üé® View All Apps</a>

    <h1>üéÆ CREATURE CATCHER üéÆ</h1>

    <div class="game-container">
        <canvas id="gameCanvas" width="640" height="480"></canvas>

        <div class="ui-panel">
            <div class="stats-grid">
                <div class="stat-item">
                    <div class="stat-label">CAUGHT</div>
                    <div class="stat-value" id="caughtCount">0</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">POKEBALLS</div>
                    <div class="stat-value" id="ballCount">10</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">ENCOUNTERS</div>
                    <div class="stat-value" id="encounterCount">0</div>
                </div>
            </div>

            <div class="controls">
                <strong>CONTROLS:</strong><br>
                ‚¨ÜÔ∏è‚¨áÔ∏è‚¨ÖÔ∏è‚û°Ô∏è Arrow Keys - Move<br>
                SPACE - Catch Creature (in battle)<br>
                ESC - Run (in battle)
            </div>

            <div class="message-box" id="messageBox">
                Welcome to Creature Catcher! Walk through grass to find wild creatures. Use SPACE to throw a Pokeball!
            </div>

            <div id="creaturesList" class="creatures-list"></div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        // Game state
        const game = {
            state: 'overworld', // overworld, battle
            currentMap: 'starter_town',
            player: {
                x: 10,
                y: 10,
                sprite: 'üßë'
            },
            camera: {
                x: 0,
                y: 0
            },
            inventory: {
                pokeballs: 10,
                caught: []
            },
            encounters: 0,
            currentBattle: null,
            message: 'Welcome to Creature Catcher!'
        };

        // Creature types
        const creatureTypes = [
            { name: 'Flamey', sprite: 'üî•', rarity: 0.15, catchRate: 0.5 },
            { name: 'Aqua', sprite: 'üíß', rarity: 0.15, catchRate: 0.5 },
            { name: 'Leafy', sprite: 'üçÉ', rarity: 0.15, catchRate: 0.5 },
            { name: 'Sparky', sprite: '‚ö°', rarity: 0.12, catchRate: 0.4 },
            { name: 'Rocky', sprite: 'ü™®', rarity: 0.12, catchRate: 0.4 },
            { name: 'Frosty', sprite: '‚ùÑÔ∏è', rarity: 0.1, catchRate: 0.35 },
            { name: 'Ghosty', sprite: 'üëª', rarity: 0.08, catchRate: 0.3 },
            { name: 'Drago', sprite: 'üêâ', rarity: 0.05, catchRate: 0.2 },
            { name: 'Starry', sprite: '‚≠ê', rarity: 0.04, catchRate: 0.15 },
            { name: 'Legendary', sprite: 'üåü', rarity: 0.04, catchRate: 0.1 }
        ];

        // Map data
        const TILE_SIZE = 32;
        const maps = {};

        // Map definitions
        function createStarterTown() {
            const map = [];
            const width = 30;
            const height = 30;

            for (let y = 0; y < height; y++) {
                map[y] = [];
                for (let x = 0; x < width; x++) {
                    // Borders
                    if (x === 0 || y === 0 || x === width - 1 || y === height - 1) {
                        map[y][x] = { type: 'wall' };
                    }
                    // Path to route (top exit)
                    else if (x >= 14 && x <= 16 && y === 1) {
                        map[y][x] = { type: 'transition', targetMap: 'route_1', targetX: 15, targetY: 58 };
                    }
                    // Buildings - Pokemon Center (left)
                    else if (x >= 5 && x <= 10 && y >= 8 && y <= 12) {
                        if (y === 12 && x >= 7 && x <= 8) {
                            map[y][x] = { type: 'door', targetMap: 'poke_center', targetX: 5, targetY: 8 };
                        } else {
                            map[y][x] = { type: 'building' };
                        }
                    }
                    // Buildings - Mart (right)
                    else if (x >= 19 && x <= 24 && y >= 8 && y <= 12) {
                        if (y === 12 && x >= 21 && x <= 22) {
                            map[y][x] = { type: 'door', targetMap: 'mart', targetX: 5, targetY: 8 };
                        } else {
                            map[y][x] = { type: 'building' };
                        }
                    }
                    // Player house
                    else if (x >= 12 && x <= 17 && y >= 20 && y <= 25) {
                        if (y === 25 && x >= 14 && x <= 15) {
                            map[y][x] = { type: 'ground' };
                        } else {
                            map[y][x] = { type: 'building' };
                        }
                    }
                    // Trees around town
                    else if ((x <= 3 || x >= width - 4 || y >= height - 4) && Math.random() < 0.3) {
                        map[y][x] = { type: 'tree' };
                    }
                    // Ground
                    else {
                        map[y][x] = { type: 'ground' };
                    }
                }
            }
            return { data: map, width, height, name: 'Starter Town' };
        }

        function createRoute1() {
            const map = [];
            const width = 30;
            const height = 60;

            for (let y = 0; y < height; y++) {
                map[y] = [];
                for (let x = 0; x < width; x++) {
                    // Borders
                    if (x === 0 || x === width - 1) {
                        map[y][x] = { type: 'wall' };
                    }
                    // Bottom exit to town
                    else if (x >= 14 && x <= 16 && y === height - 1) {
                        map[y][x] = { type: 'transition', targetMap: 'starter_town', targetX: 15, targetY: 2 };
                    }
                    // Top exit to next city
                    else if (x >= 14 && x <= 16 && y === 0) {
                        map[y][x] = { type: 'transition', targetMap: 'oak_city', targetX: 15, targetY: 28 };
                    }
                    // Path in center
                    else if (x >= 13 && x <= 17) {
                        map[y][x] = { type: 'ground' };
                    }
                    // Grass patches on sides
                    else if (x >= 3 && x <= 12) {
                        if (Math.random() < 0.7) {
                            map[y][x] = { type: 'grass' };
                        } else if (Math.random() < 0.5) {
                            map[y][x] = { type: 'tree' };
                        } else {
                            map[y][x] = { type: 'ground' };
                        }
                    }
                    else if (x >= 18 && x <= 27) {
                        if (Math.random() < 0.7) {
                            map[y][x] = { type: 'grass' };
                        } else if (Math.random() < 0.5) {
                            map[y][x] = { type: 'tree' };
                        } else {
                            map[y][x] = { type: 'ground' };
                        }
                    }
                    // Tree borders
                    else {
                        map[y][x] = { type: 'tree' };
                    }
                }
            }
            return { data: map, width, height, name: 'Route 1' };
        }

        function createOakCity() {
            const map = [];
            const width = 35;
            const height = 30;

            for (let y = 0; y < height; y++) {
                map[y] = [];
                for (let x = 0; x < width; x++) {
                    // Borders
                    if (x === 0 || y === 0 || x === width - 1 || y === height - 1) {
                        map[y][x] = { type: 'wall' };
                    }
                    // Exit to route
                    else if (x >= 14 && x <= 16 && y === height - 1) {
                        map[y][x] = { type: 'transition', targetMap: 'route_1', targetX: 15, targetY: 2 };
                    }
                    // Large gym building
                    else if (x >= 15 && x <= 20 && y >= 5 && y <= 10) {
                        if (y === 10 && x >= 17 && x <= 18) {
                            map[y][x] = { type: 'ground' };
                        } else {
                            map[y][x] = { type: 'building' };
                        }
                    }
                    // Pokemon Center
                    else if (x >= 5 && x <= 10 && y >= 8 && y <= 12) {
                        if (y === 12 && x >= 7 && x <= 8) {
                            map[y][x] = { type: 'ground' };
                        } else {
                            map[y][x] = { type: 'building' };
                        }
                    }
                    // Various houses
                    else if (x >= 25 && x <= 30 && y >= 8 && y <= 12) {
                        if (y === 12 && x >= 27 && x <= 28) {
                            map[y][x] = { type: 'ground' };
                        } else {
                            map[y][x] = { type: 'building' };
                        }
                    }
                    else if (x >= 5 && x <= 10 && y >= 18 && y <= 22) {
                        map[y][x] = { type: 'building' };
                    }
                    else if (x >= 25 && x <= 30 && y >= 18 && y <= 22) {
                        map[y][x] = { type: 'building' };
                    }
                    // Trees
                    else if ((x <= 3 || x >= width - 4) && Math.random() < 0.4) {
                        map[y][x] = { type: 'tree' };
                    }
                    // Ground
                    else {
                        map[y][x] = { type: 'ground' };
                    }
                }
            }
            return { data: map, width, height, name: 'Oak City' };
        }

        // Initialize maps
        maps['starter_town'] = createStarterTown();
        maps['route_1'] = createRoute1();
        maps['oak_city'] = createOakCity();

        function getCurrentMap() {
            return maps[game.currentMap];
        }

        // Tile sprites
        const tileSprites = {
            ground: '#d4a574',
            grass: '#228b22',
            tree: '#2d5016',
            wall: '#8b4513',
            building: '#cd5c5c',
            door: '#8b4513',
            transition: '#d4a574'
        };

        // Input handling
        const keys = {};
        let lastMoveTime = 0;
        const MOVE_DELAY = 150;

        document.addEventListener('keydown', (e) => {
            keys[e.key] = true;

            if (game.state === 'battle') {
                if (e.key === ' ') {
                    e.preventDefault();
                    throwPokeball();
                } else if (e.key === 'Escape') {
                    e.preventDefault();
                    runFromBattle();
                }
            }
        });

        document.addEventListener('keyup', (e) => {
            keys[e.key] = false;
        });

        // Game loop
        function update() {
            const now = Date.now();

            if (game.state === 'overworld' && now - lastMoveTime > MOVE_DELAY) {
                let moved = false;
                let newX = game.player.x;
                let newY = game.player.y;

                if (keys['ArrowUp']) {
                    newY--;
                    moved = true;
                }
                if (keys['ArrowDown']) {
                    newY++;
                    moved = true;
                }
                if (keys['ArrowLeft']) {
                    newX--;
                    moved = true;
                }
                if (keys['ArrowRight']) {
                    newX++;
                    moved = true;
                }

                if (moved) {
                    // Check collision
                    const currentMapData = getCurrentMap();
                    const tile = currentMapData.data[newY]?.[newX];

                    if (tile && tile.type !== 'wall' && tile.type !== 'tree' && tile.type !== 'building') {
                        game.player.x = newX;
                        game.player.y = newY;

                        // Update camera to follow player
                        game.camera.x = game.player.x - Math.floor(canvas.width / TILE_SIZE / 2);
                        game.camera.y = game.player.y - Math.floor(canvas.height / TILE_SIZE / 2);

                        // Check for map transitions
                        if (tile.type === 'transition') {
                            game.currentMap = tile.targetMap;
                            game.player.x = tile.targetX;
                            game.player.y = tile.targetY;
                            game.camera.x = game.player.x - Math.floor(canvas.width / TILE_SIZE / 2);
                            game.camera.y = game.player.y - Math.floor(canvas.height / TILE_SIZE / 2);
                            setMessage(`Entered ${getCurrentMap().name}!`);
                        }

                        // Random encounter in grass
                        if (tile.type === 'grass' && Math.random() < 0.15) {
                            startBattle();
                        }

                        lastMoveTime = now;
                    }
                }
            }
        }

        function draw() {
            // Clear canvas
            ctx.fillStyle = '#87ceeb';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            if (game.state === 'overworld') {
                drawOverworld();
            } else if (game.state === 'battle') {
                drawBattle();
            }
        }

        function drawOverworld() {
            const tilesX = Math.ceil(canvas.width / TILE_SIZE);
            const tilesY = Math.ceil(canvas.height / TILE_SIZE);
            const currentMapData = getCurrentMap();

            for (let y = 0; y < tilesY; y++) {
                for (let x = 0; x < tilesX; x++) {
                    const mapX = x + game.camera.x;
                    const mapY = y + game.camera.y;
                    const tile = currentMapData.data[mapY]?.[mapX];
                    const tileType = tile ? tile.type : 'ground';

                    ctx.fillStyle = tileSprites[tileType] || tileSprites.ground;
                    ctx.fillRect(x * TILE_SIZE, y * TILE_SIZE, TILE_SIZE, TILE_SIZE);

                    // Draw tile decorations
                    if (tileType === 'tree') {
                        ctx.font = '24px Arial';
                        ctx.fillText('üå≤', x * TILE_SIZE + 4, y * TILE_SIZE + 24);
                    } else if (tileType === 'building') {
                        ctx.font = '24px Arial';
                        ctx.fillText('üè†', x * TILE_SIZE + 4, y * TILE_SIZE + 24);
                    } else if (tileType === 'door') {
                        ctx.fillStyle = '#654321';
                        ctx.fillRect(x * TILE_SIZE + 8, y * TILE_SIZE + 8, 16, 16);
                    }

                    // Grid lines
                    ctx.strokeStyle = 'rgba(0,0,0,0.1)';
                    ctx.strokeRect(x * TILE_SIZE, y * TILE_SIZE, TILE_SIZE, TILE_SIZE);
                }
            }

            // Draw player
            const playerScreenX = (game.player.x - game.camera.x) * TILE_SIZE;
            const playerScreenY = (game.player.y - game.camera.y) * TILE_SIZE;
            ctx.font = '28px Arial';
            ctx.fillText(game.player.sprite, playerScreenX + 2, playerScreenY + 26);

            // Draw map name
            ctx.fillStyle = 'rgba(0,0,0,0.7)';
            ctx.fillRect(10, 10, 200, 30);
            ctx.fillStyle = 'white';
            ctx.font = '12px Arial';
            ctx.fillText(currentMapData.name, 20, 30);
        }

        function drawBattle() {
            // Battle background
            ctx.fillStyle = '#2a2a2a';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Wild creature
            if (game.currentBattle) {
                ctx.font = '120px Arial';
                ctx.fillText(game.currentBattle.sprite, canvas.width / 2 - 60, 200);

                ctx.font = '24px Arial';
                ctx.fillStyle = 'white';
                ctx.textAlign = 'center';
                ctx.fillText(`Wild ${game.currentBattle.name} appeared!`, canvas.width / 2, 280);

                // Health bar
                ctx.fillStyle = '#4caf50';
                ctx.fillRect(canvas.width / 2 - 100, 300, game.currentBattle.health * 2, 20);
                ctx.strokeStyle = 'white';
                ctx.lineWidth = 2;
                ctx.strokeRect(canvas.width / 2 - 100, 300, 200, 20);

                // Instructions
                ctx.font = '16px Arial';
                ctx.fillStyle = 'yellow';
                ctx.fillText('SPACE to throw Pokeball | ESC to run', canvas.width / 2, 380);

                ctx.textAlign = 'left';
            }
        }

        function startBattle() {
            // Select random creature based on rarity
            const rand = Math.random();
            let cumulative = 0;
            let selectedCreature = creatureTypes[0];

            for (const creature of creatureTypes) {
                cumulative += creature.rarity;
                if (rand <= cumulative) {
                    selectedCreature = creature;
                    break;
                }
            }

            game.currentBattle = {
                ...selectedCreature,
                health: 100
            };

            game.state = 'battle';
            game.encounters++;
            updateUI();
            setMessage(`A wild ${game.currentBattle.name} appeared!`);
        }

        function throwPokeball() {
            if (game.inventory.pokeballs <= 0) {
                setMessage('No Pokeballs left!');
                return;
            }

            game.inventory.pokeballs--;
            updateUI();

            // Calculate catch chance
            const catchChance = game.currentBattle.catchRate * (1 - game.currentBattle.health / 100);
            const caught = Math.random() < catchChance;

            if (caught) {
                game.inventory.caught.push({
                    name: game.currentBattle.name,
                    sprite: game.currentBattle.sprite
                });
                setMessage(`Gotcha! ${game.currentBattle.name} was caught!`);
                setTimeout(() => {
                    game.state = 'overworld';
                    updateUI();
                    setMessage('Continue exploring to find more creatures!');
                }, 1500);
            } else {
                game.currentBattle.health = Math.max(0, game.currentBattle.health - 30);
                if (game.currentBattle.health === 0) {
                    setMessage(`${game.currentBattle.name} fainted!`);
                    setTimeout(() => {
                        game.state = 'overworld';
                        setMessage('Continue exploring...');
                    }, 1500);
                } else {
                    setMessage(`${game.currentBattle.name} broke free! Try again!`);
                }
            }
        }

        function runFromBattle() {
            setMessage('Got away safely!');
            setTimeout(() => {
                game.state = 'overworld';
                setMessage('Continue exploring...');
            }, 1000);
        }

        function setMessage(msg) {
            game.message = msg;
            document.getElementById('messageBox').textContent = msg;
        }

        function updateUI() {
            document.getElementById('caughtCount').textContent = game.inventory.caught.length;
            document.getElementById('ballCount').textContent = game.inventory.pokeballs;
            document.getElementById('encounterCount').textContent = game.encounters;

            // Update creatures list
            const listEl = document.getElementById('creaturesList');
            listEl.innerHTML = game.inventory.caught.map(c => `
                <div class="creature-card">
                    <div class="emoji">${c.sprite}</div>
                    <div>${c.name}</div>
                </div>
            `).join('');
        }

        function gameLoop() {
            update();
            draw();
            requestAnimationFrame(gameLoop);
        }

        // Start game
        updateUI();
        gameLoop();
    </script>
<script src="/sloppy-header/sloppy-bar.js"></script>
<script src="/vibelib-extended.js"></script>
<script>
  // Compatibility Patch for Legacy Apps
  window.addEventListener("load", () => {
    if (window.SloppyKarma && window.VibeLib.Economy) {
      // Redirect old calls to new engine
      window.SloppyKarma.track = window.VibeLib.Economy.track;
    }
  });
</script>
</body>
</html>
