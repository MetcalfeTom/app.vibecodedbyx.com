<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>Neon Nuclear Pizza</title>
  <link rel="icon" href="https://emojicdn.elk.sh/üçï">
  <meta name="description" content="Deliver pizza through a nuclear wasteland full of mutant squirrels">
  <meta property="og:title" content="Neon Nuclear Pizza">
  <meta property="og:description" content="Deliver pizza through a nuclear wasteland full of mutant squirrels">
  <meta property="og:image" content="https://emojicdn.elk.sh/üçï?style=google">
  <meta property="og:url" content="https://sloppy.live/nuclear-pizza">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Bungee&family=VT323&display=swap');
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      background: #0a0a0a;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      font-family: 'VT323', monospace;
      overflow: hidden;
    }
    #gameCanvas {
      border: 3px solid #39ff14;
      box-shadow: 0 0 30px #39ff14, inset 0 0 30px rgba(57, 255, 20, 0.1);
      image-rendering: pixelated;
    }
    .ui {
      position: fixed;
      top: 20px;
      display: flex;
      gap: 40px;
      z-index: 100;
    }
    .stat {
      color: #39ff14;
      font-size: 1.5rem;
      text-shadow: 0 0 10px #39ff14;
    }
    .stat.danger { color: #ff3939; text-shadow: 0 0 10px #ff3939; }
    h1 {
      position: fixed;
      top: 60px;
      font-family: 'Bungee', cursive;
      font-size: 1.8rem;
      color: #ff6600;
      text-shadow: 0 0 20px #ff6600, 0 0 40px #ff3300;
      letter-spacing: 2px;
      z-index: 100;
    }
    .back-link {
      position: fixed;
      top: 20px; left: 20px;
      color: #39ff14;
      text-decoration: none;
      font-size: 1rem;
      opacity: 0.7;
      z-index: 101;
    }
    .controls-hint {
      position: fixed;
      bottom: 20px;
      color: #39ff14;
      font-size: 1.2rem;
      opacity: 0.6;
      z-index: 100;
    }
    .game-over {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0, 0, 0, 0.9);
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 200;
    }
    .game-over.show { display: flex; }
    .game-over h2 {
      font-family: 'Bungee', cursive;
      font-size: 3rem;
      color: #ff3939;
      text-shadow: 0 0 30px #ff0000;
      margin-bottom: 20px;
    }
    .game-over p {
      color: #39ff14;
      font-size: 1.8rem;
      margin-bottom: 30px;
    }
    .restart-btn {
      padding: 15px 40px;
      font-family: 'Bungee', cursive;
      font-size: 1.5rem;
      background: linear-gradient(180deg, #39ff14 0%, #20aa0a 100%);
      border: none;
      color: #000;
      cursor: pointer;
      border-radius: 5px;
      transition: all 0.2s;
    }
    .restart-btn:hover {
      transform: scale(1.1);
      box-shadow: 0 0 30px #39ff14;
    }
    .mobile-controls {
      position: fixed;
      bottom: 80px;
      display: none;
      gap: 20px;
      z-index: 100;
    }
    @media (max-width: 768px) {
      .mobile-controls { display: flex; }
      .controls-hint { display: none; }
    }
    .mobile-btn {
      width: 70px;
      height: 70px;
      background: rgba(57, 255, 20, 0.3);
      border: 2px solid #39ff14;
      border-radius: 50%;
      color: #39ff14;
      font-size: 2rem;
      display: flex;
      align-items: center;
      justify-content: center;
      user-select: none;
      -webkit-user-select: none;
    }
  </style>
</head>
<body>
  <a href="https://sloppy.live" class="back-link">‚Üê sloppy.live</a>
  <div class="ui">
    <div class="stat">SCORE: <span id="score">0</span></div>
    <div class="stat">PIZZAS: <span id="pizzas">0</span>üçï</div>
    <div class="stat danger">‚ò¢Ô∏è RADS: <span id="rads">0</span>%</div>
  </div>
  <h1>‚ò¢Ô∏è NEON NUCLEAR PIZZA ‚ò¢Ô∏è</h1>
  <canvas id="gameCanvas"></canvas>
  <div class="controls-hint">WASD or Arrow Keys to move</div>
  <div class="mobile-controls">
    <div class="mobile-btn" id="btnLeft">‚Üê</div>
    <div class="mobile-btn" id="btnUp">‚Üë</div>
    <div class="mobile-btn" id="btnDown">‚Üì</div>
    <div class="mobile-btn" id="btnRight">‚Üí</div>
  </div>
  
  <div class="game-over" id="gameOver">
    <h2>‚ò†Ô∏è IRRADIATED ‚ò†Ô∏è</h2>
    <p>You delivered <span id="finalPizzas">0</span> pizzas!</p>
    <p>Final Score: <span id="finalScore">0</span></p>
    <button class="restart-btn" onclick="restartGame()">üçï TRY AGAIN</button>
  </div>

  <script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    
    // Responsive canvas
    function resize() {
      const maxW = Math.min(window.innerWidth - 40, 800);
      const maxH = Math.min(window.innerHeight - 200, 600);
      canvas.width = maxW;
      canvas.height = maxH;
    }
    resize();
    window.addEventListener('resize', resize);

    // Game state
    let score = 0;
    let pizzasDelivered = 0;
    let radiation = 0;
    let gameRunning = true;
    let difficulty = 1;
    let frameCount = 0;

    // Player (pizza delivery scooter)
    const player = {
      x: 100,
      y: 300,
      width: 40,
      height: 30,
      speed: 5,
      vx: 0,
      vy: 0
    };

    // Arrays for game objects
    let squirrels = [];
    let potholes = [];
    let deliveryPoints = [];
    let particles = [];

    // Input
    const keys = {};
    document.addEventListener('keydown', e => { keys[e.key.toLowerCase()] = true; e.preventDefault(); });
    document.addEventListener('keyup', e => { keys[e.key.toLowerCase()] = false; });

    // Mobile controls
    ['btnLeft', 'btnRight', 'btnUp', 'btnDown'].forEach(id => {
      const btn = document.getElementById(id);
      const key = id.replace('btn', '').toLowerCase();
      const keyMap = { left: 'arrowleft', right: 'arrowright', up: 'arrowup', down: 'arrowdown' };
      btn.addEventListener('touchstart', e => { e.preventDefault(); keys[keyMap[key]] = true; });
      btn.addEventListener('touchend', e => { e.preventDefault(); keys[keyMap[key]] = false; });
    });

    // Mutant Squirrel class
    class Squirrel {
      constructor() {
        this.x = canvas.width + 50;
        this.y = Math.random() * (canvas.height - 60) + 30;
        this.width = 35;
        this.height = 30;
        this.speed = 2 + Math.random() * 2 + difficulty * 0.3;
        this.wobble = Math.random() * Math.PI * 2;
        this.glowHue = Math.random() * 60 + 80; // Green-yellow glow
        this.mutantLevel = Math.floor(Math.random() * 3); // 0-2
      }

      update() {
        this.x -= this.speed;
        this.wobble += 0.1;
        this.y += Math.sin(this.wobble) * 2;
        
        // Chase player slightly
        if (this.mutantLevel > 0) {
          const dy = player.y - this.y;
          this.y += Math.sign(dy) * 0.5 * this.mutantLevel;
        }
        
        return this.x > -50;
      }

      draw() {
        ctx.save();
        ctx.translate(this.x, this.y);
        
        // Glow
        ctx.shadowColor = `hsl(${this.glowHue}, 100%, 50%)`;
        ctx.shadowBlur = 15;
        
        // Body
        ctx.fillStyle = `hsl(${this.glowHue}, 80%, 40%)`;
        ctx.beginPath();
        ctx.ellipse(0, 0, this.width/2, this.height/2, 0, 0, Math.PI * 2);
        ctx.fill();
        
        // Extra eyes for mutants
        const eyes = 2 + this.mutantLevel * 2;
        ctx.fillStyle = '#ff0000';
        ctx.shadowColor = '#ff0000';
        for (let i = 0; i < eyes; i++) {
          const eyeX = -8 + (i % 2) * 16 + (i > 1 ? (i-2) * 5 - 5 : 0);
          const eyeY = -5 + Math.floor(i / 2) * 8;
          ctx.beginPath();
          ctx.arc(eyeX, eyeY, 3, 0, Math.PI * 2);
          ctx.fill();
        }
        
        // Fluffy tail
        ctx.fillStyle = `hsl(${this.glowHue}, 70%, 50%)`;
        ctx.beginPath();
        ctx.ellipse(this.width/2 + 5, -5, 12, 15, 0.3, 0, Math.PI * 2);
        ctx.fill();
        
        // Radiation symbol on body
        if (this.mutantLevel > 1) {
          ctx.fillStyle = '#000';
          ctx.font = '12px Arial';
          ctx.fillText('‚ò¢', -6, 4);
        }
        
        ctx.restore();
      }
    }

    // Radioactive Pothole class
    class Pothole {
      constructor() {
        this.x = canvas.width + 30;
        this.y = Math.random() * (canvas.height - 80) + 40;
        this.radius = 20 + Math.random() * 15;
        this.pulsePhase = Math.random() * Math.PI * 2;
        this.damage = 5 + Math.random() * 10;
      }

      update() {
        this.x -= 2;
        this.pulsePhase += 0.1;
        return this.x > -50;
      }

      draw() {
        ctx.save();
        ctx.translate(this.x, this.y);
        
        const pulse = Math.sin(this.pulsePhase) * 0.3 + 1;
        
        // Outer glow
        const gradient = ctx.createRadialGradient(0, 0, 0, 0, 0, this.radius * 1.5 * pulse);
        gradient.addColorStop(0, 'rgba(57, 255, 20, 0.8)');
        gradient.addColorStop(0.5, 'rgba(57, 255, 20, 0.3)');
        gradient.addColorStop(1, 'rgba(57, 255, 20, 0)');
        ctx.fillStyle = gradient;
        ctx.beginPath();
        ctx.arc(0, 0, this.radius * 1.5 * pulse, 0, Math.PI * 2);
        ctx.fill();
        
        // Hole
        ctx.fillStyle = '#111';
        ctx.shadowColor = '#39ff14';
        ctx.shadowBlur = 20;
        ctx.beginPath();
        ctx.arc(0, 0, this.radius, 0, Math.PI * 2);
        ctx.fill();
        
        // Bubbling toxic waste
        ctx.fillStyle = '#39ff14';
        for (let i = 0; i < 3; i++) {
          const bx = Math.sin(this.pulsePhase + i * 2) * this.radius * 0.5;
          const by = Math.cos(this.pulsePhase * 1.5 + i) * this.radius * 0.5;
          const br = 3 + Math.sin(this.pulsePhase + i) * 2;
          ctx.beginPath();
          ctx.arc(bx, by, br, 0, Math.PI * 2);
          ctx.fill();
        }
        
        // Radiation symbol
        ctx.fillStyle = '#39ff14';
        ctx.font = `${this.radius * 0.8}px Arial`;
        ctx.textAlign = 'center';
        ctx.textBaseline = 'middle';
        ctx.fillText('‚ò¢', 0, 0);
        
        ctx.restore();
      }
    }

    // Delivery Point class
    class DeliveryPoint {
      constructor() {
        this.x = canvas.width + 30;
        this.y = Math.random() * (canvas.height - 60) + 30;
        this.radius = 25;
        this.pulsePhase = 0;
        this.collected = false;
      }

      update() {
        this.x -= 1.5;
        this.pulsePhase += 0.15;
        return this.x > -50 && !this.collected;
      }

      draw() {
        if (this.collected) return;
        
        ctx.save();
        ctx.translate(this.x, this.y);
        
        const pulse = Math.sin(this.pulsePhase) * 0.2 + 1;
        
        // Glow ring
        ctx.strokeStyle = '#ff6600';
        ctx.shadowColor = '#ff6600';
        ctx.shadowBlur = 20;
        ctx.lineWidth = 3;
        ctx.beginPath();
        ctx.arc(0, 0, this.radius * pulse, 0, Math.PI * 2);
        ctx.stroke();
        
        // House icon
        ctx.fillStyle = '#ff9900';
        ctx.beginPath();
        ctx.moveTo(0, -15);
        ctx.lineTo(15, 0);
        ctx.lineTo(10, 0);
        ctx.lineTo(10, 12);
        ctx.lineTo(-10, 12);
        ctx.lineTo(-10, 0);
        ctx.lineTo(-15, 0);
        ctx.closePath();
        ctx.fill();
        
        // Door
        ctx.fillStyle = '#663300';
        ctx.fillRect(-4, 2, 8, 10);
        
        ctx.restore();
      }
    }

    // Particle class
    class Particle {
      constructor(x, y, color, type) {
        this.x = x;
        this.y = y;
        this.color = color;
        this.type = type;
        this.vx = (Math.random() - 0.5) * 6;
        this.vy = (Math.random() - 0.5) * 6;
        this.life = 30;
        this.size = 4 + Math.random() * 4;
      }

      update() {
        this.x += this.vx;
        this.y += this.vy;
        this.vx *= 0.95;
        this.vy *= 0.95;
        this.life--;
        return this.life > 0;
      }

      draw() {
        const alpha = this.life / 30;
        ctx.fillStyle = this.color;
        ctx.globalAlpha = alpha;
        ctx.shadowColor = this.color;
        ctx.shadowBlur = 10;
        
        if (this.type === 'pizza') {
          ctx.font = `${this.size * 3}px Arial`;
          ctx.fillText('üçï', this.x, this.y);
        } else {
          ctx.fillRect(this.x, this.y, this.size, this.size);
        }
        ctx.globalAlpha = 1;
        ctx.shadowBlur = 0;
      }
    }

    function spawnParticles(x, y, color, count, type = 'square') {
      for (let i = 0; i < count; i++) {
        particles.push(new Particle(x, y, color, type));
      }
    }

    // Draw player (pizza scooter)
    function drawPlayer() {
      ctx.save();
      ctx.translate(player.x, player.y);
      
      // Scooter glow
      ctx.shadowColor = '#ff6600';
      ctx.shadowBlur = 15;
      
      // Wheels
      ctx.fillStyle = '#333';
      ctx.beginPath();
      ctx.arc(-12, 12, 8, 0, Math.PI * 2);
      ctx.arc(15, 12, 8, 0, Math.PI * 2);
      ctx.fill();
      
      // Wheel glow
      ctx.strokeStyle = '#ff6600';
      ctx.lineWidth = 2;
      ctx.beginPath();
      ctx.arc(-12, 12, 8, 0, Math.PI * 2);
      ctx.stroke();
      ctx.beginPath();
      ctx.arc(15, 12, 8, 0, Math.PI * 2);
      ctx.stroke();
      
      // Body
      ctx.fillStyle = '#ff3300';
      ctx.fillRect(-15, -5, 35, 15);
      
      // Pizza box
      ctx.fillStyle = '#ffcc00';
      ctx.shadowColor = '#ffcc00';
      ctx.fillRect(-10, -18, 25, 12);
      ctx.fillStyle = '#ff6600';
      ctx.font = '10px Arial';
      ctx.fillText('üçï', -3, -9);
      
      // Driver
      ctx.fillStyle = '#ff6600';
      ctx.beginPath();
      ctx.arc(5, -8, 8, 0, Math.PI * 2);
      ctx.fill();
      
      // Helmet
      ctx.fillStyle = '#39ff14';
      ctx.beginPath();
      ctx.arc(5, -10, 7, Math.PI, 0);
      ctx.fill();
      
      ctx.restore();
    }

    // Draw background
    function drawBackground() {
      // Dark wasteland
      ctx.fillStyle = '#0a0a0a';
      ctx.fillRect(0, 0, canvas.width, canvas.height);
      
      // Road
      ctx.fillStyle = '#1a1a1a';
      ctx.fillRect(0, canvas.height * 0.2, canvas.width, canvas.height * 0.7);
      
      // Road lines
      ctx.strokeStyle = '#39ff14';
      ctx.lineWidth = 2;
      ctx.setLineDash([30, 20]);
      const lineOffset = (frameCount * 3) % 50;
      ctx.beginPath();
      ctx.moveTo(-lineOffset, canvas.height * 0.5);
      ctx.lineTo(canvas.width + 50, canvas.height * 0.5);
      ctx.stroke();
      ctx.setLineDash([]);
      
      // Edge glow
      ctx.strokeStyle = '#39ff14';
      ctx.shadowColor = '#39ff14';
      ctx.shadowBlur = 10;
      ctx.lineWidth = 3;
      ctx.beginPath();
      ctx.moveTo(0, canvas.height * 0.2);
      ctx.lineTo(canvas.width, canvas.height * 0.2);
      ctx.moveTo(0, canvas.height * 0.9);
      ctx.lineTo(canvas.width, canvas.height * 0.9);
      ctx.stroke();
      ctx.shadowBlur = 0;
      
      // Distant buildings
      ctx.fillStyle = '#111';
      for (let i = 0; i < 10; i++) {
        const bx = (i * 100 - (frameCount * 0.5) % 100 + canvas.width) % (canvas.width + 100) - 50;
        const bh = 30 + Math.sin(i * 1.5) * 20;
        ctx.fillRect(bx, canvas.height * 0.2 - bh, 40, bh);
        // Windows
        ctx.fillStyle = Math.random() > 0.7 ? '#39ff14' : '#220';
        ctx.fillRect(bx + 5, canvas.height * 0.2 - bh + 5, 8, 8);
        ctx.fillRect(bx + 25, canvas.height * 0.2 - bh + 5, 8, 8);
        ctx.fillStyle = '#111';
      }
    }

    // Collision detection
    function checkCollision(a, b) {
      return a.x < b.x + b.width &&
             a.x + a.width > b.x &&
             a.y < b.y + b.height &&
             a.y + a.height > b.y;
    }

    function checkCircleCollision(player, circle) {
      const px = player.x + player.width / 2;
      const py = player.y + player.height / 2;
      const dx = px - circle.x;
      const dy = py - circle.y;
      const dist = Math.sqrt(dx * dx + dy * dy);
      return dist < circle.radius + 15;
    }

    // Update game
    function update() {
      if (!gameRunning) return;
      
      frameCount++;
      difficulty = 1 + Math.floor(score / 500) * 0.2;

      // Player movement
      if (keys['w'] || keys['arrowup']) player.vy = -player.speed;
      else if (keys['s'] || keys['arrowdown']) player.vy = player.speed;
      else player.vy *= 0.8;
      
      if (keys['a'] || keys['arrowleft']) player.vx = -player.speed;
      else if (keys['d'] || keys['arrowright']) player.vx = player.speed;
      else player.vx *= 0.8;

      player.x += player.vx;
      player.y += player.vy;

      // Boundaries
      player.x = Math.max(10, Math.min(canvas.width - player.width - 10, player.x));
      player.y = Math.max(canvas.height * 0.2, Math.min(canvas.height * 0.9 - player.height, player.y));

      // Spawn enemies
      if (frameCount % Math.max(60, 120 - difficulty * 10) === 0) {
        squirrels.push(new Squirrel());
      }
      if (frameCount % Math.max(90, 150 - difficulty * 10) === 0) {
        potholes.push(new Pothole());
      }
      if (frameCount % 180 === 0) {
        deliveryPoints.push(new DeliveryPoint());
      }

      // Update squirrels
      squirrels = squirrels.filter(s => {
        const alive = s.update();
        // Check collision
        if (checkCollision(player, { x: s.x - s.width/2, y: s.y - s.height/2, width: s.width, height: s.height })) {
          radiation += 15 + s.mutantLevel * 5;
          spawnParticles(s.x, s.y, '#39ff14', 10);
          return false;
        }
        return alive;
      });

      // Update potholes
      potholes = potholes.filter(p => {
        const alive = p.update();
        if (checkCircleCollision(player, p)) {
          radiation += p.damage * 0.5;
          spawnParticles(p.x, p.y, '#39ff14', 5);
        }
        return alive;
      });

      // Update delivery points
      deliveryPoints = deliveryPoints.filter(d => {
        const alive = d.update();
        if (!d.collected && checkCircleCollision(player, d)) {
          d.collected = true;
          pizzasDelivered++;
          score += 100;
          radiation = Math.max(0, radiation - 10);
          spawnParticles(d.x, d.y, '#ff6600', 15, 'pizza');
          return false;
        }
        return alive;
      });

      // Update particles
      particles = particles.filter(p => p.update());

      // Score over time
      score++;

      // Radiation decay
      radiation = Math.max(0, radiation - 0.05);

      // Update UI
      document.getElementById('score').textContent = score;
      document.getElementById('pizzas').textContent = pizzasDelivered;
      document.getElementById('rads').textContent = Math.floor(radiation);

      // Game over
      if (radiation >= 100) {
        gameRunning = false;
        document.getElementById('finalPizzas').textContent = pizzasDelivered;
        document.getElementById('finalScore').textContent = score;
        document.getElementById('gameOver').classList.add('show');
      }
    }

    // Render
    function render() {
      drawBackground();
      
      // Draw game objects
      potholes.forEach(p => p.draw());
      deliveryPoints.forEach(d => d.draw());
      squirrels.forEach(s => s.draw());
      particles.forEach(p => p.draw());
      drawPlayer();
      
      // Radiation overlay
      if (radiation > 50) {
        ctx.fillStyle = `rgba(57, 255, 20, ${(radiation - 50) / 200})`;
        ctx.fillRect(0, 0, canvas.width, canvas.height);
      }
    }

    function gameLoop() {
      update();
      render();
      requestAnimationFrame(gameLoop);
    }

    function restartGame() {
      score = 0;
      pizzasDelivered = 0;
      radiation = 0;
      difficulty = 1;
      frameCount = 0;
      player.x = 100;
      player.y = canvas.height / 2;
      squirrels = [];
      potholes = [];
      deliveryPoints = [];
      particles = [];
      gameRunning = true;
      document.getElementById('gameOver').classList.remove('show');
    }

    gameLoop();
  </script>
<script src="/sloppy-header/sloppy-bar.js"></script>
</body>
</html>
