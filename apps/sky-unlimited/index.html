<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Sky Is Not The Limit</title>
    <link rel="icon" href="https://emojicdn.elk.sh/üöÄ">

    <meta property="og:title" content="The Sky Is Not The Limit">
    <meta property="og:description" content="Journey beyond the sky - an interactive experience about limitless possibilities">
    <meta property="og:url" content="https://app.vibecodedbyx.com/sky-unlimited">
    <meta property="og:image" content="https://image.pollinations.ai/prompt/rocket%20launching%20through%20atmosphere%20into%20space%20stars%20galaxy?width=1200&height=630&nologo=true&referrer=vibecodedbyx.com">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            overflow: hidden;
            cursor: none;
            background: #000;
        }

        #canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        .content {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            color: white;
            z-index: 10;
            pointer-events: none;
            text-shadow: 0 0 20px rgba(0,0,0,0.8);
        }

        .title {
            font-size: 4em;
            font-weight: bold;
            margin-bottom: 20px;
            opacity: 0;
            animation: fadeInUp 2s ease forwards;
            animation-delay: 0.5s;
        }

        .subtitle {
            font-size: 1.8em;
            opacity: 0;
            animation: fadeInUp 2s ease forwards;
            animation-delay: 1.5s;
        }

        .instruction {
            position: fixed;
            bottom: 60px;
            left: 50%;
            transform: translateX(-50%);
            color: white;
            font-size: 1.2em;
            z-index: 10;
            opacity: 0;
            animation: fadeInUp 2s ease forwards, pulse 2s ease infinite;
            animation-delay: 2.5s, 4.5s;
            text-shadow: 0 0 10px rgba(0,0,0,0.8);
        }

        .rocket {
            position: fixed;
            font-size: 3em;
            z-index: 100;
            pointer-events: none;
            transition: transform 0.1s ease;
            filter: drop-shadow(0 0 10px rgba(255,255,255,0.5));
        }

        .rocket.boosting {
            animation: rocketBoost 0.3s ease;
            filter: drop-shadow(0 0 30px rgba(255,150,50,0.9));
        }

        .quote {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 2.5em;
            color: white;
            text-align: center;
            padding: 40px;
            max-width: 80%;
            opacity: 0;
            z-index: 5;
            font-style: italic;
            text-shadow: 0 0 30px rgba(0,0,0,0.9);
        }

        .quote.show {
            animation: fadeInScale 1s ease forwards;
        }

        .hud {
            position: fixed;
            right: 20px;
            top: 20px;
            color: white;
            font-size: 1em;
            z-index: 10;
            text-shadow: 0 0 10px rgba(0,0,0,0.8);
            opacity: 0;
            animation: fadeIn 1s ease forwards;
            animation-delay: 3s;
            text-align: right;
        }

        .hud .altitude {
            font-size: 1.8em;
            font-weight: bold;
        }

        .hud .record {
            font-size: 0.9em;
            opacity: 0.7;
            margin-top: 5px;
        }

        .hud .record.new-record {
            opacity: 1;
            color: #FFD700;
            animation: glow 1s ease infinite;
        }

        .stage-indicator {
            position: fixed;
            left: 20px;
            top: 20px;
            color: white;
            font-size: 1em;
            z-index: 10;
            text-shadow: 0 0 10px rgba(0,0,0,0.8);
            opacity: 0;
            animation: fadeIn 1s ease forwards;
            animation-delay: 3s;
        }

        .stage-indicator .stage {
            font-size: 1.4em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .achievement {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background: rgba(0,0,0,0.8);
            border: 2px solid gold;
            border-radius: 20px;
            padding: 30px 50px;
            color: white;
            text-align: center;
            z-index: 200;
            pointer-events: none;
        }

        .achievement.show {
            animation: achievementPop 2s ease forwards;
        }

        .achievement-icon {
            font-size: 3em;
            margin-bottom: 10px;
        }

        .achievement-title {
            font-size: 1.5em;
            color: gold;
            font-weight: bold;
        }

        .achievement-desc {
            font-size: 1em;
            opacity: 0.8;
            margin-top: 5px;
        }

        .boost-indicator {
            position: fixed;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%);
            color: white;
            z-index: 10;
            text-align: center;
            opacity: 0;
            animation: fadeIn 1s ease forwards;
            animation-delay: 4s;
        }

        .boost-bar {
            width: 150px;
            height: 8px;
            background: rgba(255,255,255,0.2);
            border-radius: 4px;
            overflow: hidden;
            margin-top: 5px;
        }

        .boost-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff6b35, #ffd700);
            width: 100%;
            transition: width 0.1s;
        }

        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(-10px);
            }
        }

        @keyframes fadeIn {
            to { opacity: 1; }
        }

        @keyframes fadeInScale {
            0% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.8);
            }
            100% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        @keyframes glow {
            0%, 100% { text-shadow: 0 0 10px gold, 0 0 20px gold; }
            50% { text-shadow: 0 0 20px gold, 0 0 40px gold; }
        }

        @keyframes rocketBoost {
            0% { transform: scale(1); }
            50% { transform: scale(1.3); }
            100% { transform: scale(1); }
        }

        @keyframes achievementPop {
            0% { transform: translate(-50%, -50%) scale(0); opacity: 0; }
            20% { transform: translate(-50%, -50%) scale(1.2); opacity: 1; }
            30% { transform: translate(-50%, -50%) scale(1); }
            80% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(0.8); opacity: 0; }
        }

        .footer {
            position: fixed;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 10;
        }

        .footer a {
            color: white;
            text-decoration: none;
            opacity: 0.7;
            font-size: 0.9em;
            text-shadow: 0 0 10px rgba(0,0,0,0.8);
        }

        .footer a:hover {
            opacity: 1;
        }

        @media (max-width: 768px) {
            .title {
                font-size: 2.5em;
            }
            .subtitle {
                font-size: 1.2em;
            }
            .quote {
                font-size: 1.5em;
                padding: 20px;
            }
            .instruction {
                font-size: 1em;
            }
            .hud, .stage-indicator {
                font-size: 0.85em;
            }
            .hud .altitude {
                font-size: 1.4em;
            }
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>

    <div class="content">
        <div class="title">The Sky Is Not The Limit</div>
        <div class="subtitle">Your journey has no boundaries</div>
    </div>

    <div class="instruction">Move to explore ‚Ä¢ Click to boost</div>

    <div class="hud">
        <div class="altitude"><span id="altitude">0</span> km</div>
        <div class="record" id="record">Best: 0 km</div>
    </div>

    <div class="stage-indicator">
        <div class="stage" id="stage">üåç Earth</div>
        <div id="stage-desc">Ground Level</div>
    </div>

    <div class="rocket" id="rocket">üöÄ</div>

    <div class="quote" id="quote"></div>

    <div class="achievement" id="achievement">
        <div class="achievement-icon" id="achievement-icon">üèÜ</div>
        <div class="achievement-title" id="achievement-title">Achievement!</div>
        <div class="achievement-desc" id="achievement-desc">Description</div>
    </div>

    <div class="boost-indicator">
        <small>BOOST</small>
        <div class="boost-bar">
            <div class="boost-fill" id="boost-fill"></div>
        </div>
    </div>

    <div class="footer">
        <a href="https://www.vibecodedbyx.com" target="_blank">‚Üê Back to VibeCodedByX</a>
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const rocket = document.getElementById('rocket');
        const altitudeEl = document.getElementById('altitude');
        const recordEl = document.getElementById('record');
        const quoteEl = document.getElementById('quote');
        const stageEl = document.getElementById('stage');
        const stageDescEl = document.getElementById('stage-desc');
        const achievementEl = document.getElementById('achievement');
        const achievementIconEl = document.getElementById('achievement-icon');
        const achievementTitleEl = document.getElementById('achievement-title');
        const achievementDescEl = document.getElementById('achievement-desc');
        const boostFillEl = document.getElementById('boost-fill');

        let width = canvas.width = window.innerWidth;
        let height = canvas.height = window.innerHeight;
        let mouseX = width / 2;
        let mouseY = height / 2;
        let altitude = 0;
        let targetAltitude = 0;
        let boostPower = 100;
        let boostCooldown = false;
        let highestAltitude = parseInt(localStorage.getItem('skyUnlimitedRecord') || '0');
        let isNewRecord = false;

        // Update record display
        recordEl.textContent = `Best: ${highestAltitude.toLocaleString()} km`;

        const quotes = [
            "The only limit is the one you set yourself",
            "Dream bigger than the universe",
            "Your potential is infinite",
            "Reach for what seems impossible",
            "The stars are just the beginning",
            "Beyond every limit lies another frontier",
            "Imagination is your launchpad",
            "Every journey begins with a single spark",
            "The cosmos awaits your arrival",
            "You are made of stardust"
        ];

        // Achievements system
        const achievements = [
            { altitude: 1000, icon: 'üéà', title: 'Liftoff!', desc: 'Reached 1,000 km' },
            { altitude: 5000, icon: '‚úàÔ∏è', title: 'Above the Clouds', desc: 'Reached 5,000 km' },
            { altitude: 10000, icon: 'üåç', title: 'Orbit Achieved', desc: 'Reached 10,000 km' },
            { altitude: 20000, icon: 'üåô', title: 'Moon Walker', desc: 'Reached 20,000 km' },
            { altitude: 35000, icon: 'ü™ê', title: 'Planet Hopper', desc: 'Reached 35,000 km' },
            { altitude: 45000, icon: '‚≠ê', title: 'Star Gazer', desc: 'Reached 45,000 km' },
            { altitude: 50000, icon: 'üåå', title: 'Galaxy Explorer', desc: 'Reached the edge!' },
            { altitude: 75000, icon: 'üîÆ', title: 'Beyond Infinity', desc: 'Transcended all limits!' },
            { altitude: 100000, icon: 'üëë', title: 'Cosmic Royalty', desc: 'Reached 100,000 km!' }
        ];

        let unlockedAchievements = JSON.parse(localStorage.getItem('skyUnlimitedAchievements') || '[]');
        let lastQuoteTime = 0;
        let currentQuoteIndex = 0;
        let showingAchievement = false;

        // Stages with descriptions
        const stages = [
            { min: 0, max: 1000, name: 'üåç Earth', desc: 'Ground Level' },
            { min: 1000, max: 5000, name: '‚òÅÔ∏è Clouds', desc: 'Troposphere' },
            { min: 5000, max: 10000, name: 'üå§Ô∏è Sky', desc: 'Stratosphere' },
            { min: 10000, max: 20000, name: 'üåë Space', desc: 'Low Earth Orbit' },
            { min: 20000, max: 35000, name: 'üåô Moon', desc: 'Lunar Distance' },
            { min: 35000, max: 50000, name: 'ü™ê Planets', desc: 'Inner Solar System' },
            { min: 50000, max: 75000, name: '‚≠ê Stars', desc: 'Interstellar Space' },
            { min: 75000, max: 100000, name: 'üåå Galaxy', desc: 'Deep Space' },
            { min: 100000, max: Infinity, name: 'üîÆ Beyond', desc: 'Transcendence' }
        ];

        // Celestial bodies
        const celestialBodies = [];

        class CelestialBody {
            constructor(type, x, y, size, minAlt, maxAlt) {
                this.type = type;
                this.baseX = x;
                this.baseY = y;
                this.x = x;
                this.y = y;
                this.size = size;
                this.minAlt = minAlt;
                this.maxAlt = maxAlt;
                this.parallaxFactor = 0.3 + Math.random() * 0.4;
                this.phase = Math.random() * Math.PI * 2;
            }

            update(altitude, mouseX, mouseY) {
                // Parallax effect
                const parallaxX = (mouseX - width / 2) * this.parallaxFactor * 0.02;
                const parallaxY = (mouseY - height / 2) * this.parallaxFactor * 0.02;
                this.x = this.baseX - parallaxX;
                this.y = this.baseY - parallaxY;
            }

            draw(altitude) {
                if (altitude < this.minAlt || altitude > this.maxAlt) return;

                const fadeIn = Math.min(1, (altitude - this.minAlt) / 2000);
                const fadeOut = this.maxAlt === Infinity ? 1 : Math.min(1, (this.maxAlt - altitude) / 2000);
                const opacity = Math.min(fadeIn, fadeOut);

                ctx.save();
                ctx.globalAlpha = opacity;

                if (this.type === 'moon') {
                    // Draw moon
                    const gradient = ctx.createRadialGradient(this.x - this.size * 0.2, this.y - this.size * 0.2, 0, this.x, this.y, this.size);
                    gradient.addColorStop(0, '#FFFAEA');
                    gradient.addColorStop(0.5, '#E8E4D9');
                    gradient.addColorStop(1, '#B8B4A9');
                    ctx.fillStyle = gradient;
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                    ctx.fill();

                    // Craters
                    ctx.fillStyle = 'rgba(150, 140, 130, 0.3)';
                    ctx.beginPath();
                    ctx.arc(this.x + this.size * 0.3, this.y - this.size * 0.2, this.size * 0.15, 0, Math.PI * 2);
                    ctx.fill();
                    ctx.beginPath();
                    ctx.arc(this.x - this.size * 0.2, this.y + this.size * 0.3, this.size * 0.2, 0, Math.PI * 2);
                    ctx.fill();
                } else if (this.type === 'planet') {
                    // Draw planet with rings
                    const gradient = ctx.createRadialGradient(this.x - this.size * 0.3, this.y - this.size * 0.3, 0, this.x, this.y, this.size);
                    gradient.addColorStop(0, '#E8C49A');
                    gradient.addColorStop(0.6, '#C4956A');
                    gradient.addColorStop(1, '#8B6547');
                    ctx.fillStyle = gradient;
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                    ctx.fill();

                    // Rings
                    ctx.strokeStyle = 'rgba(200, 180, 160, 0.5)';
                    ctx.lineWidth = this.size * 0.15;
                    ctx.beginPath();
                    ctx.ellipse(this.x, this.y, this.size * 1.6, this.size * 0.4, Math.PI * 0.1, 0, Math.PI * 2);
                    ctx.stroke();
                } else if (this.type === 'galaxy') {
                    // Draw spiral galaxy
                    const time = Date.now() / 10000 + this.phase;
                    ctx.translate(this.x, this.y);
                    ctx.rotate(time);

                    for (let i = 0; i < 100; i++) {
                        const angle = (i / 100) * Math.PI * 4;
                        const dist = (i / 100) * this.size;
                        const x = Math.cos(angle) * dist;
                        const y = Math.sin(angle) * dist * 0.4;
                        const starSize = 1 + Math.random() * 2;

                        ctx.fillStyle = `rgba(255, 255, ${200 + Math.random() * 55}, ${0.3 + Math.random() * 0.4})`;
                        ctx.beginPath();
                        ctx.arc(x, y, starSize, 0, Math.PI * 2);
                        ctx.fill();
                    }

                    // Core
                    const coreGradient = ctx.createRadialGradient(0, 0, 0, 0, 0, this.size * 0.3);
                    coreGradient.addColorStop(0, 'rgba(255, 255, 220, 0.8)');
                    coreGradient.addColorStop(1, 'rgba(255, 255, 220, 0)');
                    ctx.fillStyle = coreGradient;
                    ctx.beginPath();
                    ctx.arc(0, 0, this.size * 0.3, 0, Math.PI * 2);
                    ctx.fill();
                } else if (this.type === 'nebula') {
                    // Draw colorful nebula
                    const colors = ['rgba(255, 100, 150, 0.1)', 'rgba(100, 150, 255, 0.1)', 'rgba(150, 255, 200, 0.1)'];
                    colors.forEach((color, i) => {
                        const offset = Math.sin(Date.now() / 3000 + i) * 20;
                        const gradient = ctx.createRadialGradient(this.x + offset, this.y + offset * 0.5, 0, this.x, this.y, this.size);
                        gradient.addColorStop(0, color.replace('0.1', '0.3'));
                        gradient.addColorStop(0.5, color);
                        gradient.addColorStop(1, 'rgba(0,0,0,0)');
                        ctx.fillStyle = gradient;
                        ctx.beginPath();
                        ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                        ctx.fill();
                    });
                } else if (this.type === 'blackhole') {
                    // Draw black hole with accretion disk
                    ctx.fillStyle = '#000';
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, this.size * 0.3, 0, Math.PI * 2);
                    ctx.fill();

                    // Accretion disk
                    const time = Date.now() / 2000;
                    for (let i = 0; i < 3; i++) {
                        ctx.strokeStyle = `rgba(255, ${150 + i * 30}, ${50 + i * 20}, ${0.6 - i * 0.15})`;
                        ctx.lineWidth = this.size * (0.1 - i * 0.02);
                        ctx.beginPath();
                        ctx.ellipse(this.x, this.y, this.size * (0.6 + i * 0.2), this.size * (0.15 + i * 0.05), time, 0, Math.PI * 2);
                        ctx.stroke();
                    }

                    // Gravitational lensing effect
                    const lensGradient = ctx.createRadialGradient(this.x, this.y, this.size * 0.3, this.x, this.y, this.size);
                    lensGradient.addColorStop(0, 'rgba(0, 0, 0, 0.8)');
                    lensGradient.addColorStop(0.5, 'rgba(50, 0, 100, 0.3)');
                    lensGradient.addColorStop(1, 'rgba(0, 0, 0, 0)');
                    ctx.fillStyle = lensGradient;
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                    ctx.fill();
                }

                ctx.restore();
            }
        }

        // Create celestial bodies
        function createCelestialBodies() {
            celestialBodies.length = 0;

            // Moon (appears 15k-40k)
            celestialBodies.push(new CelestialBody('moon', width * 0.8, height * 0.25, 60, 15000, 40000));

            // Planets (appear 30k-60k)
            celestialBodies.push(new CelestialBody('planet', width * 0.2, height * 0.3, 45, 30000, 60000));
            celestialBodies.push(new CelestialBody('planet', width * 0.75, height * 0.7, 35, 40000, 70000));

            // Nebulae (appear 50k-90k)
            celestialBodies.push(new CelestialBody('nebula', width * 0.3, height * 0.4, 150, 50000, 90000));
            celestialBodies.push(new CelestialBody('nebula', width * 0.7, height * 0.6, 120, 60000, 100000));

            // Galaxies (appear 60k+)
            celestialBodies.push(new CelestialBody('galaxy', width * 0.15, height * 0.2, 80, 65000, Infinity));
            celestialBodies.push(new CelestialBody('galaxy', width * 0.85, height * 0.8, 60, 75000, Infinity));

            // Black hole (appears 85k+)
            celestialBodies.push(new CelestialBody('blackhole', width * 0.5, height * 0.35, 70, 85000, Infinity));
        }

        createCelestialBodies();

        // Resize handler
        window.addEventListener('resize', () => {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
            createCelestialBodies();
        });

        // Mouse movement
        document.addEventListener('mousemove', (e) => {
            mouseX = e.clientX;
            mouseY = e.clientY;
            updateRocketPosition();
            targetAltitude = Math.max(0, Math.floor((1 - mouseY / height) * 50000));
        });

        // Touch support
        document.addEventListener('touchmove', (e) => {
            if (e.touches.length > 0) {
                mouseX = e.touches[0].clientX;
                mouseY = e.touches[0].clientY;
                updateRocketPosition();
                targetAltitude = Math.max(0, Math.floor((1 - mouseY / height) * 50000));
            }
        });

        function updateRocketPosition() {
            rocket.style.left = mouseX + 'px';
            rocket.style.top = mouseY + 'px';
        }

        // Boost on click
        document.addEventListener('click', boost);
        document.addEventListener('touchstart', boost);

        function boost() {
            if (boostPower >= 20 && !boostCooldown) {
                boostPower -= 20;
                targetAltitude += 5000;
                rocket.classList.add('boosting');

                // Create boost particles
                for (let i = 0; i < 20; i++) {
                    createBoostParticle();
                }

                setTimeout(() => {
                    rocket.classList.remove('boosting');
                }, 300);
            }
        }

        function createBoostParticle() {
            const particle = document.createElement('div');
            particle.style.cssText = `
                position: fixed;
                left: ${mouseX + (Math.random() - 0.5) * 60}px;
                top: ${mouseY + 20 + Math.random() * 30}px;
                width: ${4 + Math.random() * 4}px;
                height: ${4 + Math.random() * 4}px;
                background: ${['#ff6b35', '#ffd700', '#ff4444'][Math.floor(Math.random() * 3)]};
                border-radius: 50%;
                pointer-events: none;
                z-index: 99;
            `;
            document.body.appendChild(particle);

            const startY = parseFloat(particle.style.top);
            const startTime = Date.now();
            const duration = 500 + Math.random() * 300;

            function animateParticle() {
                const elapsed = Date.now() - startTime;
                const progress = elapsed / duration;

                if (progress < 1) {
                    particle.style.top = (startY + progress * 100) + 'px';
                    particle.style.opacity = 1 - progress;
                    requestAnimationFrame(animateParticle);
                } else {
                    particle.remove();
                }
            }
            requestAnimationFrame(animateParticle);
        }

        // Recharge boost
        setInterval(() => {
            if (boostPower < 100) {
                boostPower = Math.min(100, boostPower + 2);
                boostFillEl.style.width = boostPower + '%';
            }
        }, 100);

        // Particles with parallax
        class Particle {
            constructor(layer = 0) {
                this.layer = layer;
                this.reset();
            }

            reset() {
                this.x = Math.random() * width;
                this.y = Math.random() * height;
                this.size = (this.layer === 0 ? 1 : this.layer === 1 ? 1.5 : 2.5) + Math.random();
                this.speedY = (0.2 + Math.random() * 0.3) * (this.layer + 1);
                this.opacity = 0.3 + Math.random() * 0.5;
                this.parallaxFactor = 0.01 + this.layer * 0.015;
            }

            update() {
                // Parallax based on mouse position
                const parallaxX = (mouseX - width / 2) * this.parallaxFactor;
                const parallaxY = (mouseY - height / 2) * this.parallaxFactor;

                this.y -= this.speedY * (1 + altitude / 15000);
                this.x -= parallaxX * 0.1;

                if (this.y < -10) {
                    this.y = height + 10;
                    this.x = Math.random() * width;
                }
                if (this.x < -10) this.x = width + 10;
                if (this.x > width + 10) this.x = -10;
            }

            draw() {
                const twinkle = 0.7 + Math.sin(Date.now() / 500 + this.x) * 0.3;
                ctx.fillStyle = `rgba(255, 255, 255, ${this.opacity * twinkle})`;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
            }
        }

        // Create layered particles for parallax
        const particles = [];
        for (let layer = 0; layer < 3; layer++) {
            const count = layer === 0 ? 100 : layer === 1 ? 60 : 30;
            for (let i = 0; i < count; i++) {
                particles.push(new Particle(layer));
            }
        }

        // Background color based on altitude
        function getBackgroundGradient() {
            if (altitude < 10000) {
                const t = altitude / 10000;
                return [
                    { pos: 0, color: lerpColor([135, 206, 235], [20, 30, 80], t) },
                    { pos: 1, color: lerpColor([70, 130, 180], [5, 10, 30], t) }
                ];
            } else if (altitude < 30000) {
                const t = (altitude - 10000) / 20000;
                return [
                    { pos: 0, color: lerpColor([20, 30, 80], [5, 5, 15], t) },
                    { pos: 1, color: lerpColor([5, 10, 30], [0, 0, 5], t) }
                ];
            } else if (altitude < 60000) {
                const t = (altitude - 30000) / 30000;
                return [
                    { pos: 0, color: lerpColor([5, 5, 15], [15, 5, 25], t) },
                    { pos: 1, color: lerpColor([0, 0, 5], [5, 0, 15], t) }
                ];
            } else {
                const pulse = Math.sin(Date.now() / 5000) * 0.5 + 0.5;
                return [
                    { pos: 0, color: [15 + pulse * 10, 5, 25 + pulse * 10] },
                    { pos: 1, color: [5, 0, 15 + pulse * 5] }
                ];
            }
        }

        function lerpColor(c1, c2, t) {
            return [
                Math.floor(c1[0] + (c2[0] - c1[0]) * t),
                Math.floor(c1[1] + (c2[1] - c1[1]) * t),
                Math.floor(c1[2] + (c2[2] - c1[2]) * t)
            ];
        }

        // Update stage display
        function updateStage() {
            for (const stage of stages) {
                if (altitude >= stage.min && altitude < stage.max) {
                    stageEl.textContent = stage.name;
                    stageDescEl.textContent = stage.desc;
                    break;
                }
            }
        }

        // Check achievements
        function checkAchievements() {
            if (showingAchievement) return;

            for (const ach of achievements) {
                if (altitude >= ach.altitude && !unlockedAchievements.includes(ach.altitude)) {
                    unlockedAchievements.push(ach.altitude);
                    localStorage.setItem('skyUnlimitedAchievements', JSON.stringify(unlockedAchievements));
                    showAchievement(ach);
                    break;
                }
            }
        }

        function showAchievement(ach) {
            showingAchievement = true;
            achievementIconEl.textContent = ach.icon;
            achievementTitleEl.textContent = ach.title;
            achievementDescEl.textContent = ach.desc;
            achievementEl.classList.add('show');

            setTimeout(() => {
                achievementEl.classList.remove('show');
                showingAchievement = false;
            }, 2500);
        }

        // Show quote
        function showQuote() {
            const now = Date.now();
            if (now - lastQuoteTime > 12000 && altitude > 5000) {
                quoteEl.textContent = `"${quotes[currentQuoteIndex]}"`;
                quoteEl.classList.add('show');

                setTimeout(() => {
                    quoteEl.classList.remove('show');
                }, 4000);

                currentQuoteIndex = (currentQuoteIndex + 1) % quotes.length;
                lastQuoteTime = now;
            }
        }

        // Update record
        function updateRecord() {
            if (altitude > highestAltitude) {
                highestAltitude = Math.floor(altitude);
                localStorage.setItem('skyUnlimitedRecord', highestAltitude.toString());
                recordEl.textContent = `Best: ${highestAltitude.toLocaleString()} km`;
                if (!isNewRecord && altitude > 1000) {
                    isNewRecord = true;
                    recordEl.classList.add('new-record');
                }
            }
        }

        // Animation loop
        function animate() {
            // Smooth altitude transition
            altitude += (targetAltitude - altitude) * 0.05;

            // Update display
            altitudeEl.textContent = Math.floor(altitude).toLocaleString();

            // Draw background gradient
            const gradientStops = getBackgroundGradient();
            const gradient = ctx.createLinearGradient(0, 0, 0, height);
            gradientStops.forEach(stop => {
                gradient.addColorStop(stop.pos, `rgb(${stop.color[0]}, ${stop.color[1]}, ${stop.color[2]})`);
            });
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, width, height);

            // Draw celestial bodies (behind particles)
            celestialBodies.forEach(body => {
                body.update(altitude, mouseX, mouseY);
                body.draw(altitude);
            });

            // Draw particles
            particles.forEach(particle => {
                particle.update();
                particle.draw();
            });

            // Update stage
            updateStage();

            // Check achievements
            checkAchievements();

            // Check for quote display
            showQuote();

            // Update record
            updateRecord();

            requestAnimationFrame(animate);
        }

        // Start animation
        animate();

        // Add sparkle effect around rocket
        setInterval(() => {
            const spark = document.createElement('div');
            spark.style.cssText = `
                position: fixed;
                left: ${mouseX + (Math.random() - 0.5) * 50}px;
                top: ${mouseY + (Math.random() - 0.5) * 50}px;
                width: 3px;
                height: 3px;
                background: white;
                border-radius: 50%;
                pointer-events: none;
                z-index: 99;
                animation: fadeOut 1s ease forwards;
            `;
            document.body.appendChild(spark);
            setTimeout(() => spark.remove(), 1000);
        }, 100);

        // Add fadeOut animation
        const style = document.createElement('style');
        style.textContent = `
            @keyframes fadeOut {
                to {
                    opacity: 0;
                    transform: translateY(-20px) scale(0.5);
                }
            }
        `;
        document.head.appendChild(style);

        // Set initial rocket position
        rocket.style.left = width / 2 + 'px';
        rocket.style.top = height / 2 + 'px';
    </script>
</body>
</html>
