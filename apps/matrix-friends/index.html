<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Matrix Friends - Digital Code Rain</title>
  <link rel="icon" href="https://emojicdn.elk.sh/üíö">

  <meta property="og:title" content="Matrix Friends">
  <meta property="og:description" content="Watch digital friendship messages cascade through the void">
  <meta property="og:url" content="https://app.vibecodedbyx.com/matrix-friends">
  <meta property="og:image" content="https://app.vibecodedbyx.com/matrix-friends/og-image.png">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: #000;
      overflow: hidden;
      font-family: 'Share Tech Mono', monospace;
    }

    canvas {
      display: block;
      position: fixed;
      top: 0;
      left: 0;
    }

    .overlay {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 10;
      text-align: center;
      opacity: 0.6;
      transition: opacity 0.3s;
    }

    .overlay:hover {
      opacity: 1;
    }

    .title {
      color: #0f0;
      font-size: 1.2rem;
      text-shadow: 0 0 10px #0f0, 0 0 20px #0f0;
      letter-spacing: 4px;
      margin-bottom: 8px;
    }

    .backlink {
      color: #0a0;
      font-size: 0.75rem;
      text-decoration: none;
      opacity: 0.7;
    }

    .backlink:hover {
      color: #0f0;
      opacity: 1;
    }

    .controls {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 10;
      display: flex;
      gap: 10px;
      opacity: 0.5;
      transition: opacity 0.3s;
    }

    .controls:hover {
      opacity: 1;
    }

    .btn {
      background: transparent;
      border: 1px solid #0f0;
      color: #0f0;
      padding: 8px 16px;
      font-family: 'Share Tech Mono', monospace;
      font-size: 0.8rem;
      cursor: pointer;
      transition: all 0.2s;
    }

    .btn:hover {
      background: #0f0;
      color: #000;
      box-shadow: 0 0 15px #0f0;
    }

    .message-popup {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: #0f0;
      font-size: 1.5rem;
      text-shadow: 0 0 20px #0f0, 0 0 40px #0f0;
      opacity: 0;
      pointer-events: none;
      text-align: center;
      max-width: 80%;
      z-index: 20;
    }

    .message-popup.show {
      animation: popMessage 3s ease-out forwards;
    }

    @keyframes popMessage {
      0% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
      20% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
      80% { opacity: 1; }
      100% { opacity: 0; transform: translate(-50%, -50%) scale(1.1); }
    }
  </style>
</head>
<body>
  <canvas id="matrix"></canvas>

  <div class="controls">
    <button class="btn" id="speedBtn">‚ö° Speed</button>
    <button class="btn" id="messageBtn">üí¨ Message</button>
  </div>

  <div class="overlay">
    <div class="title">MATRIX FRIENDS</div>
    <a href="https://sloppy.live" class="backlink">‚Üê back to sloppy.live</a>
  </div>

  <div class="message-popup" id="popup"></div>

  <script>
    const canvas = document.getElementById('matrix');
    const ctx = canvas.getContext('2d');

    // Friendship-themed messages and words
    const friendshipWords = [
      'FRIENDSHIP', 'CONNECTION', 'TOGETHER', 'DIGITAL', 'BOND', 'TRUST',
      'ONLINE', 'HEARTS', 'LINKED', 'NETWORK', 'CHAT', 'SHARE', 'CARE',
      'STREAM', 'VIBES', 'LOVE', 'UNITY', 'SYNC', 'PIXEL', 'DATA',
      'FRIEND', 'ALLY', 'CREW', 'FAM', 'SQUAD', 'TRIBE', 'HOMIES',
      '01100110', '01110010', '01101001', '01100101', '01101110', '01100100',
      '<3', ':)', '‚ô•', '‚òÖ', '‚àû', '‚óà', '‚óá', '‚ñ≥', '‚óã', '‚ñ°',
      'TCP/IP', 'UDP', 'HTTP', 'WSS', 'P2P', 'LAN', 'WAN', 'VPN',
      'PING', 'PONG', 'ACK', 'SYN', 'EOF', 'NULL', 'TRUE', 'LOOP'
    ];

    const fullMessages = [
      "We are all nodes in the same network",
      "Digital hearts beat in binary",
      "Connected across the void",
      "Friendship transcends the firewall",
      "Your signal reached me",
      "We share the same stream",
      "Packets of love transmitted",
      "Synced souls in cyberspace",
      "The matrix connects us all",
      "Your ping will always find me",
      "01001100 01001111 01010110 01000101",
      "Bandwidth of the heart: unlimited",
      "No latency in true friendship",
      "We compile together",
      "Runtime error: loneliness not found"
    ];

    let width, height;
    let columns;
    let drops = [];
    let speeds = [];
    let chars = [];
    let speedMultiplier = 1;
    const fontSize = 16;

    function resize() {
      width = canvas.width = window.innerWidth;
      height = canvas.height = window.innerHeight;
      columns = Math.floor(width / fontSize);

      // Reset drops
      drops = [];
      speeds = [];
      chars = [];
      for (let i = 0; i < columns; i++) {
        drops[i] = Math.random() * -100;
        speeds[i] = 0.5 + Math.random() * 1.5;
        chars[i] = getRandomChar();
      }
    }

    function getRandomChar() {
      // Mix of friendship words, single chars, and matrix symbols
      const choice = Math.random();
      if (choice < 0.3) {
        // Single character from a word
        const word = friendshipWords[Math.floor(Math.random() * friendshipWords.length)];
        return word[Math.floor(Math.random() * word.length)];
      } else if (choice < 0.6) {
        // Japanese-style katakana for matrix feel
        return String.fromCharCode(0x30A0 + Math.random() * 96);
      } else {
        // Numbers and symbols
        const symbols = '0123456789@#$%^&*<>[]{}|/\\~`‚ô•‚òÖ‚óà‚óá‚ñ≥‚óã‚ñ°';
        return symbols[Math.floor(Math.random() * symbols.length)];
      }
    }

    function draw() {
      // Semi-transparent black for trail effect
      ctx.fillStyle = 'rgba(0, 0, 0, 0.05)';
      ctx.fillRect(0, 0, width, height);

      ctx.font = `${fontSize}px 'Share Tech Mono', monospace`;

      for (let i = 0; i < columns; i++) {
        const x = i * fontSize;
        const y = drops[i] * fontSize;

        // Leading character (brightest)
        ctx.fillStyle = '#fff';
        ctx.shadowColor = '#0f0';
        ctx.shadowBlur = 10;
        ctx.fillText(chars[i], x, y);

        // Trail characters
        ctx.shadowBlur = 0;
        for (let j = 1; j < 20; j++) {
          const trailY = y - j * fontSize;
          if (trailY > 0) {
            const alpha = 1 - (j / 20);
            const green = Math.floor(255 * alpha);
            ctx.fillStyle = `rgb(0, ${green}, 0)`;
            ctx.fillText(getRandomChar(), x, trailY);
          }
        }

        // Move drop
        drops[i] += speeds[i] * speedMultiplier;

        // Change character periodically
        if (Math.random() > 0.98) {
          chars[i] = getRandomChar();
        }

        // Reset drop when off screen
        if (drops[i] * fontSize > height && Math.random() > 0.975) {
          drops[i] = 0;
          speeds[i] = 0.5 + Math.random() * 1.5;
        }
      }

      requestAnimationFrame(draw);
    }

    function showMessage() {
      const popup = document.getElementById('popup');
      popup.textContent = fullMessages[Math.floor(Math.random() * fullMessages.length)];
      popup.classList.remove('show');
      void popup.offsetWidth; // Trigger reflow
      popup.classList.add('show');
    }

    // Controls
    document.getElementById('speedBtn').addEventListener('click', () => {
      speedMultiplier = speedMultiplier === 1 ? 2 : speedMultiplier === 2 ? 0.5 : 1;
      const label = speedMultiplier === 2 ? '‚ö°‚ö° Fast' : speedMultiplier === 0.5 ? 'üê¢ Slow' : '‚ö° Speed';
      document.getElementById('speedBtn').textContent = label;
    });

    document.getElementById('messageBtn').addEventListener('click', showMessage);

    // Auto show messages occasionally
    setInterval(() => {
      if (Math.random() > 0.7) {
        showMessage();
      }
    }, 8000);

    // Initialize
    window.addEventListener('resize', resize);
    resize();
    draw();

    // Show initial message after a moment
    setTimeout(showMessage, 2000);
  </script>
<script src="/sloppy-header/sloppy-bar.js"></script>
</body>
</html>
