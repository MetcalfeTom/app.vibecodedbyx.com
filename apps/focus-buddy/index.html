<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Focus Buddy ‚Äî Stay On Track</title>

    <meta name="description" content="A Pomodoro-style focus coach with task tracking and gentle accountability." />
    <meta property="og:title" content="Focus Buddy ‚Äî Stay On Track" />
    <meta property="og:description" content="Spin up a focus sprint, track progress, and keep your momentum rolling." />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="./og-image.png" />
    <meta property="og:url" content="https://app.sloppy.live/focus-buddy/" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Focus Buddy ‚Äî Stay On Track" />
    <meta name="twitter:description" content="Spin up a focus sprint, track progress, and keep your momentum rolling." />
    <meta name="twitter:image" content="./og-image.png" />

    <link rel="icon" href="./favicon.svg" type="image/svg+xml" />
    <meta name="theme-color" content="#0d1224" />
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <div class="app">
      <header class="hero">
        <div>
          <p class="eyebrow">Stay focused, Sloppy üí™</p>
          <h1>Focus Buddy</h1>
          <p class="lead">
            Cycle between deep work and mindful breaks, track micro-goals, and celebrate streaks ‚Äî all synced to your Vibe account.
          </p>
        </div>
        <div class="stats" id="stats">
          <div>
            <span class="stat-value" id="stat-today">0m</span>
            <span class="stat-label">Today focused</span>
          </div>
          <div>
            <span class="stat-value" id="stat-streak">0</span>
            <span class="stat-label">Day streak</span>
          </div>
          <div>
            <span class="stat-value" id="stat-tasks">0</span>
            <span class="stat-label">Tasks cleared</span>
          </div>
        </div>
      </header>

      <main class="layout">
        <section class="card timer">
          <div class="timer-header">
            <div class="pill" id="mode-label">Focus</div>
            <div class="pill secondary" id="session-count">0 / 4</div>
          </div>
          <div class="timer-display" aria-live="polite">
            <span id="minutes">25</span>
            <span class="colon">:</span>
            <span id="seconds">00</span>
          </div>
          <div class="timer-controls">
            <button class="btn primary" id="toggle-btn">Start Focus</button>
            <button class="btn ghost" id="skip-btn">Skip</button>
            <button class="btn ghost" id="reset-btn">Reset</button>
          </div>
          <div class="timer-progress">
            <div class="track">
              <div class="fill" id="progress-fill"></div>
            </div>
            <p class="next-up" id="next-up">Next: Short Break (5m)</p>
          </div>
        </section>

        <section class="card tasks">
          <div class="section-head">
            <h2>Micro Goals</h2>
            <button class="btn ghost" id="refresh-btn" title="Sync with cloud">‚Üª</button>
          </div>
          <form id="task-form" class="task-form">
            <input id="task-title" name="title" type="text" placeholder="What will you crush next?" required maxlength="120" />
            <textarea id="task-notes" name="notes" placeholder="Optional notes or acceptance criteria" maxlength="280"></textarea>
            <button class="btn primary" type="submit">Add Task</button>
          </form>
          <ul id="task-list" class="task-list" aria-live="polite"></ul>
          <p class="empty" id="task-empty">Add a task to lock in your next win.</p>
        </section>

        <section class="card premium" id="premium-content" style="display:none">
          <div class="section-head">
            <h2>Premium Boosts</h2>
            <span class="badge">Unlocked ‚ú®</span>
          </div>
          <form id="premium-form" class="premium-form">
            <div class="field">
              <label for="duration-focus">Focus minutes</label>
              <input type="number" id="duration-focus" min="10" max="120" step="5" />
            </div>
            <div class="field">
              <label for="duration-short">Short break minutes</label>
              <input type="number" id="duration-short" min="3" max="30" step="1" />
            </div>
            <div class="field">
              <label for="duration-long">Long break minutes</label>
              <input type="number" id="duration-long" min="10" max="60" step="5" />
            </div>
            <div class="field">
              <label for="sessions-before-long">Sessions per long break</label>
              <input type="number" id="sessions-before-long" min="2" max="8" step="1" />
            </div>
            <button class="btn primary" type="submit">Save Rhythm</button>
          </form>
          <p class="hint">Need a change of scenery? Try the ambient FocusFM soundboard in the bottom corner.</p>
        </section>

        <section class="card upgrade" id="upgrade-button" style="display:none">
          <h2>Unlock Premium Flow</h2>
          <p>Customize timers, unlock ambient loops, and export your streaks. Founders keep the lights on ‚Äî thank you!</p>
          <a class="btn primary" href="https://sloppy.live" target="_blank" rel="noopener">Get Premium</a> | <a href="https://app.sloppy.live/overview" style="color:#4ecdc4;text-decoration:none">üé® View All Apps</a>
        </section>

        <section class="card history" id="history-card">
          <div class="section-head">
            <h2>Session Log</h2>
            <button class="btn ghost" id="clear-log-btn">Clear Log</button>
          </div>
          <ul id="session-log" class="session-log" aria-live="polite"></ul>
        </section>
      </main>

      <footer class="footer">
        <a href="https://sloppy.live" target="_blank" rel="noopener">‚Üê Back to the Livestream</a>
        <span>Tip: pair with noise-cancelling music or a buddy sprint for best results.</span>
      </footer>
    </div>

    <template id="task-template">
      <li class="task-item">
        <label>
          <input type="checkbox" />
          <span class="title"></span>
        </label>
        <p class="notes"></p>
        <div class="task-actions">
          <button class="btn tiny" data-action="start">Focus on this</button>
          <button class="btn tiny ghost" data-action="delete">Remove</button>
        </div>
      </li>
    </template>

    <template id="session-template">
      <li class="session-item">
        <strong class="phase"></strong>
        <span class="meta"></span>
      </li>
    </template>

    <div class="soundboard" id="soundboard" hidden>
      <button id="ambient-toggle" class="btn ghost tiny">Play FocusFM üîä</button>
      <audio id="ambient-audio" loop>
        <source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_aa9edc7969.mp3?filename=future-ambient-11154.mp3" type="audio/mpeg" />
      </audio>
    </div>

    <script type="module" src="./script.js"></script>
  <script src="/apps/sloppy-header/sloppy-bar.js"></script>
<script src="/vibelib-extended.js"></script>
<script>
  // Compatibility Patch for Legacy Apps
  window.addEventListener("load", () => {
    if (window.SloppyKarma && window.VibeLib.Economy) {
      // Redirect old calls to new engine
      window.SloppyKarma.track = window.VibeLib.Economy.track;
    }
  });
</script>
</body>
</html>
